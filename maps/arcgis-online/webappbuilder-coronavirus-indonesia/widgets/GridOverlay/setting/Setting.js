// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See http://js.arcgis.com/3.15/esri/copyright.txt and http://www.arcgis.com/apps/webappbuilder/copyright.txt for details.
//>>built
require({cache:{"widgets/GridOverlay/lib/GridOverlay":function(){define("dojo/_base/declare dojo/_base/lang dojo/_base/array ./mgrs-utils esri/layers/GraphicsLayer esri/geometry/geometryEngine esri/geometry/Extent esri/geometry/ScreenPoint esri/Color esri/geometry/webMercatorUtils jimu/utils xstyle/css!./GridOverlay.css".split(" "),function(f,d,c,l,g,a,b,p,q,r,m){Math.log10||(Math.log10=function(e){return Math.log(e)/Math.LN10});return f(null,{minIntervalSpacing:150,currentInterval:0,levelOfDetail:"default",
labelPlacement:null,verticalLabels:!0,cornerLabelXOffset:10,cornerLabelYOffset:10,intervalLabelXOffset:30,intervalLabelYOffset:30,colors:null,lineWidths:null,fontSizes:null,lineOpacity:.8,labelOpacity:1,centerLabelOpacity:.4,centerLabelScaleFactor:3,fontFamily:"Arial, Helvetica, sans-serif",map:null,_lineGraphics:null,_labelGraphics:null,constructor:function(e){e=e||{};e.map||console.warn("Before the grid will draw, you must use the 'setMap' method to define which map object to draw on");e.hasOwnProperty("enabled")?
this.enabled=e.enabled:this.enabled=!0;this._lineGraphicsLayer=new g;this._labelGraphicsLayer=new g({className:"gridOverlay"});this._centerLabelGraphicsLayer=new g({className:"gridOverlay"});this.enable=d.hitch(this,this.enable);this.disable=d.hitch(this,this.disable);this.clearGrid=d.hitch(this,this.clearGrid);this.drawGrid=d.hitch(this,this.drawGrid);this.getLayers=d.hitch(this,function(){return[this._lineGraphicsLayer,this._labelGraphicsLayer,this._centerLabelGraphicsLayer]});this.labelPlacement=
{lowerLeft:!0,lowerRight:!0,upperLeft:!0,upperRight:!0,center:!0};this.colors="#FA5858 #F7FE2E #2EFE2E #2EFEF7 #FFF #BDBDBD #000".split(" ");this.lineWidths=[3,2,1,1,1,1,1];this.fontSizes=[29,27,19,16,15,13,11];this.map=e.map||{};this._lineGraphics=[];this._labelGraphics=[];this._lineGraphicsLayer.setOpacity(this.lineOpacity);this._labelGraphicsLayer.setOpacity(this.labelOpacity);this._centerLabelGraphicsLayer.setOpacity(this.centerLabelOpacity);for(var a=0;a<this.colors.length;a++)this.colors[a]=
new q(this.colors[a]);this.setProperties(e)},setProperties:function(a){a.lineWidths&&this.setLineWidths(a.lineWidths);a.minIntervalSpacing&&this.setMinIntervalSpacing(a.minIntervalSpacing);a.levelOfDetail&&this.setLevelOfDetail(a.levelOfDetail);a.labelPlacement&&this.setLabelPlacement(a.labelPlacement);a.hasOwnProperty("verticalLabels")&&this.setVerticalLabels(a.verticalLabels);a.cornerLabelXOffset&&this.setCornerLabelXOffset(a.cornerLabelXOffset);a.cornerLabelYOffset&&this.setCornerLabelYOffset(a.cornerLabelYOffset);
a.intervalLabelXOffset&&this.setIntervalLabelXOffset(a.intervalLabelXOffset);a.intervalLabelYOffset&&this.setIntervalLabelYOffset(a.intervalLabelYOffset);a.colors&&this.setColors(a.colors);a.lineWidths&&this.setLineWidths(a.lineWidths);a.fontSizes&&this.setFontSizes(a.fontSizes);a.lineOpacity&&this.setLineOpacity(a.lineOpacity);a.labelOpacity&&this.setLabelOpacity(a.labelOpacity);a.centerLabelOpacity&&this.setCenterLabelOpacity(a.centerLabelOpacity);a.centerLabelScaleFactor&&this.setCenterLabelScaleFactor(a.centerLabelScaleFactor);
a.fontFamily&&this.setFontFamily(a.fontFamily);if(this.enabled&&this.map.loaded)this.enable();else if(this.enabled&&this.map.on)this.map.on("load",d.hitch(this,this.enable))},getMinIntervalSpacing:function(){return this.minIntervalSpacing},setMinIntervalSpacing:function(a){"number"===typeof a&&(this.minIntervalSpacing=a,this.drawGrid())},setLevelOfDetail:function(a){if("string"!==typeof a)return null;a=a.toLowerCase();switch(a){case "more":case "best":case "high":case "maximum":case "max":this.levelOfDetail=
"more";break;case "less":case "low":case "minimum":case "mim":this.levelOfDetail="less";break;default:this.levelOfDetail="default"}this.drawGrid()},getLevelOfDetail:function(){return this.levelOfDetail},getLabelPlacement:function(){return this.labelPlacement},setLabelPlacement:function(a,b){if("object"===typeof a&&a.length)for(this.labelPlacement={lowerLeft:!1,lowerRight:!1,upperLeft:!1,upperRight:!1,center:!1},b=0;b<a.length;b++)this.setLabelPlacement(a[b],!0);else if("object"===typeof a)this.labelPlacement=
a;else if("undefined"===typeof b?(this.labelPlacement={lowerLeft:!1,lowerRight:!1,upperLeft:!1,upperRight:!1,center:!1},b=!0):b=!0===b,a.toLowerCase){switch(a.toLowerCase()){case "center":case "middle":this.labelPlacement.center=b;break;case "top":case "upper":this.labelPlacement.upperLeft=b;this.labelPlacement.upperRight=b;break;case "bottom":case "lower":this.labelPlacement.lowerLeft=b;this.labelPlacement.lowerRight=b;break;case "left":this.labelPlacement.lowerLeft=b;this.labelPlacement.upperLeft=
b;break;case "right":this.labelPlacement.lowerRight=b;this.labelPlacement.upperRight=b;break;case "lower-left":case "bottom-left":this.labelPlacement.lowerLeft=b;break;case "upper-left":case "top-left":this.labelPlacement.upperLeft=b;break;case "lower-right":case "bottom-right":this.labelPlacement.lowerRight=b;break;case "upper-right":case "top-right":this.labelPlacement.upperRight=b;break;case "all":this.labelPlacement.lowerLeft=b;this.labelPlacement.lowerRight=b;this.labelPlacement.upperLeft=b;
this.labelPlacement.upperRight=b;this.labelPlacement.center=b;break;default:this.labelPlacement.lowerLeft=b,this.labelPlacement.lowerRight=b,this.labelPlacement.upperLeft=b,this.labelPlacement.upperRight=b}this.drawGrid()}},getVerticalLabels:function(){return this.verticalLabels},setVerticalLabels:function(a){"boolean"===typeof a&&(this.verticalLabels=a,this.drawGrid())},getCornerLabelXOffset:function(){return this.cornerLabelXOffset},setCornerLabelXOffset:function(a){"number"===typeof a&&(this.cornerLabelXOffset=
a,this.drawGrid())},getCornerLabelYOffset:function(){return this.cornerLabelYOffset},setCornerLabelYOffset:function(a){"number"===typeof a&&(this.cornerLabelYOffset=a,this.drawGrid())},getIntervalLabelXOffset:function(){return this.intervalLabelXOffset},setIntervalLabelXOffset:function(a){"number"===typeof a&&(this.intervalLabelXOffset=a,this.drawGrid())},getIntervalLabelYOffset:function(){return this.intervalLabelYOffset},setIntervalLabelYOffset:function(a){"number"===typeof a&&(this.intervalLabelYOffset=
a,this.drawGrid())},getColor:function(a){return"number"!==typeof a||0>a||a>this.colors.length-1?null:this.colors[a]},setColor:function(a,b){if("number"!==typeof a||0>a||a>this.colors.length-1)return null;this.colors[a]=new q(b);this.drawGrid()},setColors:function(a){if("object"!==typeof a||!a.length)return null;for(var b,e=0;e<this.colors.length;e++)b=a.length>e?e:a.length-1,this.colors[e]=new q(a[b]);this.drawGrid()},getLineWidth:function(a){return"number"!==typeof a||0>a||a>this.lineWidths.length-
1?null:this.lineWidths[a]},setLineWidth:function(a,b){if("number"!==typeof a||"number"!==typeof b||0>a||a>this.lineWidths.length-1)return null;this.lineWidths[a]=b;this.drawGrid()},setLineWidths:function(a){if("object"!==typeof a||!a.length)return null;for(var b,e=0;e<this.lineWidths.length;e++)b=a.length>e?e:a.length-1,"number"===typeof a[b]&&(this.lineWidths[e]=a[b]);this.drawGrid()},getFontSize:function(a){return"number"!==typeof a||0>a||a>this.fontSizes.length-1?null:this.fontSizes[a]},setFontSize:function(a,
b){if("number"!==typeof a||"number"!==typeof b||0>a||a>this.fontSizes.length-1)return null;this.fontSizes[a]=b;this.drawGrid()},setFontSizes:function(a){if("object"!==typeof a||!a.length)return null;for(var b,e=0;e<this.fontSizes.length;e++)b=a.length>e?e:a.length-1,"number"===typeof a[b]&&(this.fontSizes[e]=a[b]);this.drawGrid()},getCenterLabelScaleFactor:function(){return this.centerLabelScaleFactor},setCenterLabelScaleFactor:function(a){"number"===typeof a&&(this.centerLabelScaleFactor=a,this.drawGrid())},
getCenterLabelOpacity:function(){return this.centerLabelOpacity},setCenterLabelOpacity:function(a){"number"===typeof a&&(this.centerLabelOpacity=a,this._centerLabelGraphicsLayer.setOpacity(a),this.drawGrid())},getFontFamily:function(){return this.fontFamily},setFontFamily:function(a){"string"===typeof a&&(this.fontFamily=a,this.drawGrid())},getInterval:function(){return this.currentInterval},setInterval:function(){this.currentInterval=l.getInterval(this.getMinIntervalSpacing(),this.map,this.getLevelOfDetail())},
getMap:function(){return this.map},setMap:d.hitch(this,function(a){this.map.loaded&&this.clearGrid();this.map=a;if(this.enabled&&this.map.loaded)this.enable();else if(this.enabled)this.map.on("load",d.hitch(this,this.enable))}),getLineOpacity:function(){return this.lineOpacity},setLineOpacity:function(a){"number"===typeof a&&(this.lineOpacity=a,this._lineGraphicsLayer.setOpacity(a))},getLabelOpacity:function(){return this.labelOpacity},setLabelOpacity:function(a){"number"===typeof a&&(this.labelOpacity=
a,this._labelGraphicsLayer.setOpacity(a))},getSettings:function(){return{minIntervalSpacing:this.minIntervalSpacing,levelOfDetail:this.levelOfDetail,labelPlacement:this.labelPlacement,verticalLabels:this.verticalLabels,cornerLabelXOffset:this.cornerLabelXOffset,cornerLabelYOffset:this.cornerLabelYOffset,intervalLabelXOffset:this.intervalLabelXOffset,intervalLabelYOffset:this.intervalLabelYOffset,colors:c.map(this.colors,function(a){return a.toHex()}),lineWidths:this.lineWidths,fontSizes:this.fontSizes,
lineOpacity:this.lineOpacity,labelOpacity:this.labelOpacity,centerLabelOpacity:this.centerLabelOpacity,centerLabelScaleFactor:this.centerLabelScaleFactor,fontFamily:this.fontFamily}},enable:function(){var a=this.getMap();this.enabled=!0;a.addLayers(this.getLayers());this._drawEvent=a.on("extent-change",d.hitch(this,function(){this._drawGrid()}));this._drawGrid()},disable:function(){var a=this.getMap();this.enabled=!1;this._drawEvent&&(this._drawEvent.remove(),this._drawEvent=null);this.clearGrid();
for(var b=this.getLayers(),c=0;c<b.length;c++)a.removeLayer(b[c])},clearGrid:function(){var a=this.getMap();if(!a.loaded)var b=a.on("load",d.hitch(this,function(){b.remove();this.clearGrid()}));this._lineGraphicsLayer.clear();this._labelGraphicsLayer.clear();this._centerLabelGraphicsLayer.clear();this._lineGraphics=[];this._labelGraphics=[];this._centerLabelGraphics=[]},drawGrid:function(){this._drawing&&this._drawGrid()},_createExtentFromScreen:function(a,c,g,d){var e=this.map.toScreen(a);c=this.map.toMap(new p(e.x+
c,e.y+g));return new b(a.x,a.y,c.x,c.y,d)},_performOverlapCheck:function(a){for(var b=0;b<a.length;b++)for(var e=b+1;e<a.length;e++)this._doLabelsOverlap(a[b],a[e])&&a[b].symbol.setOffset(0,40)},_doLabelsOverlap:function(b,c){return b&&c?(b=this._createExtentFromScreen(b.geometry,b.symbol.getWidth(),b.symbol.getHeight(),this.map.spatialReference),c=this._createExtentFromScreen(c.geometry,c.symbol.getWidth(),c.symbol.getHeight(),this.map.spatialReference),a.intersects(b,c)):!1},_drawGrid:function(){var a=
this.getMap(),b,g;this._drawing&&clearTimeout(this._drawing);this._drawing=setTimeout(d.hitch(this,function(){if(a.loaded&&this.enabled){g=l.zonesFromExtent(this);this._zoneCount=g.length;this.clearGrid();this.setInterval();this._lineGraphics=[];this._lineGraphics0=[];this._lineGraphics1=[];this._lineGraphics2=[];this._lineGraphics3=[];this._lineGraphics4=[];this._lineGraphics5=[];l.processZonePolygons(g,this);for(b=0;b<this._centerLabelGraphics.length;b++)this._centerLabelGraphicsLayer.add(this._centerLabelGraphics[b]);
c.forEach([this._lineGraphics5,this._lineGraphics4,this._lineGraphics3,this._lineGraphics2,this._lineGraphics1,this._lineGraphics0],function(a){this._lineGraphics=this._lineGraphics.concat(a)},this);for(b=0;b<this._lineGraphics.length;b++)this._lineGraphics[b].geometry=r.project(this._lineGraphics[b].geometry,this._lineGraphicsLayer.spatialReference),this._lineGraphicsLayer.add(this._lineGraphics[b]);this._performOverlapCheck(this._labelGraphics);for(b=0;b<this._labelGraphics.length;b++){this._labelGraphics[b].geometry=
r.project(this._labelGraphics[b].geometry,this._lineGraphicsLayer.spatialReference);this._labelGraphicsLayer.add(this._labelGraphics[b]);var e=this._labelGraphics[b].getNode();if(e){var d=this._labelGraphics[b].symbol.color,d=128<.2126*d.r+.7152*d.g+.0722*d.b?"black":"white";m.has("ie")||m.has("edge")?e.className+=" text-symbol-halo-"+d:e.classList.add("text-symbol-halo-"+d)}}delete this._lineGraphics;delete this._lineGraphics0;delete this._lineGraphics1;delete this._lineGraphics2;delete this._lineGraphics3;
delete this._lineGraphics4;delete this._lineGraphics5}}),50)}})})},"widgets/GridOverlay/lib/mgrs-utils":function(){define("dojo/json ./constants ./geometry-utils ./labeling-utils ./mgrs ./NonPolarGridZone ./VisibleGridZone ./GridPolygon esri/geometry/geometryEngine esri/graphic esri/geometry/Point esri/geometry/Polyline esri/geometry/Polygon esri/symbols/SimpleLineSymbol esri/symbols/TextSymbol esri/symbols/Font esri/Color".split(" "),function(f,d,c,l,g,a,b,p,q,r,m,e,v,z,n,u,h){return{_ZonesDictionary:function(){var b,
h,c,e="CDEFGHJKLMNPQRSTUVWX".split(""),g={};for(b=1;60>=b;b++)for(h=0;h<e.length;h++){var p=c=c=void 0,q=void 0,u=void 0,m=b+e[h];"32X"===m||"34X"===m||"36X"===m?c=null:("31V"===m?c={xmin:0,ymin:56,xmax:3,ymax:64,id:m}:"32V"===m?c={xmin:3,ymin:56,xmax:12,ymax:64,id:m}:"31X"===m?c={xmin:0,ymin:72,xmax:9,ymax:84,id:m}:"33X"===m?c={xmin:9,ymin:72,xmax:21,ymax:84,id:m}:"35X"===m?c={xmin:21,ymin:72,xmax:33,ymax:84,id:m}:"37X"===m?c={xmin:33,ymin:72,xmax:42,ymax:84,id:m}:(c=(b-1)*d.ZONE_WIDTH_DEGREES-180,
p=b*d.ZONE_WIDTH_DEGREES-180,q=h*d.ZONE_HEIGHT_DEGREES+d.MIN_MGRS_LATITUDE,u=(h+1)*d.ZONE_HEIGHT_DEGREES+d.MIN_MGRS_LATITUDE,c=180===c?d.POSITIVE_180:c,c=-180===c?d.NEGATIVE_180:c,p=180===p?d.POSITIVE_180:p,p=-180===p?d.NEGATIVE_180:p,80===u&&(u=d.MAX_MGRS_LATITUDE),c={xmin:c,ymin:q,xmax:p,ymax:u,id:m}),c=new a(c));c&&(g[c.id]=c)}return g}(),getInterval:function(a,b,c){var k,h,e,d=0;k=b.getResolutionInMeters()*a;h=b.extent.getCenter();e=b.toMap(b.toScreen(h).offset(0,a/2));for(k=b.toMap(b.toScreen(h).offset(0,
-a/2));84<=e.getLatitude()||84<=k.getLatitude();)d++,e=b.toMap(b.toScreen(h).offset(0,a/2+d*a)),k=b.toMap(b.toScreen(h).offset(0,-a/2+d*a));for(;-80>=e.getLatitude()||-80>=k.getLatitude();)d++,e=b.toMap(b.toScreen(h).offset(0,a/2-d*a)),k=b.toMap(b.toScreen(h).offset(0,-a/2-d*a));a=e.getLatitude();b=e.getLongitude();e=k.getLatitude();d=k.getLongitude();k=g.getZoneNumber(a,b);k=Math.abs(g.LLtoUTM(a,b,k)[1]-g.LLtoUTM(e,d,k)[1]);a=Math.log10(k);switch(c){case "more":c=Math.floor(a);break;case "less":case "strict":c=
Math.ceil(a);break;default:c=Math.round(a)}c=Math.pow(10,c);k>2*c&&(c*=10);return 1E5<c?!1:c},zonesFromExtent:function(a){var k,h,g,p,u,l,r,G,B,K,n,w;h=a.map.extent;var A=h.spatialReference.isWebMercator()?d.WEBMERCATOR_360:d.GEOGRAPHIC_360,x={xOffset:a.getCornerLabelXOffset(),yOffset:a.getCornerLabelYOffset(),rotation:0,color:a.getColor(0),fontFamily:a.getFontFamily(),fontSize:a.getFontSize(0)},y="CDEFGHJKLMNPQRSTUVWX".split(""),z=[];if(h.xmax-h.xmin>A)return z;var A=c.extentToPolygon(h),A=c.toWebMercator(A),
E=c.pointToGeographic(new m([h.xmin,h.ymin],h.spatialReference)),M=c.pointToGeographic(new m([h.xmax,h.ymax],h.spatialReference));h=E.y;p=M.y;n=E.offsetX;w=M.offsetX;for(var F=n;F<=w;F++)for(k=F>n?d.NEGATIVE_180:E.x,g=F<w?d.POSITIVE_180:M.x,u=Math.min(Math.max(Math.floor((h+80)/d.ZONE_HEIGHT_DEGREES),0),19),l=Math.min(Math.floor((p+80)/d.ZONE_HEIGHT_DEGREES),19),k=Math.floor((k+180)/d.ZONE_WIDTH_DEGREES),g=Math.min(Math.floor((g+180)/d.ZONE_WIDTH_DEGREES)+2,60);k<=g;k++)for(var O=u;O<=l;O++)if(r=
y[O],r=k+r,this._ZonesDictionary[r]){G=f.parse(f.stringify(this._ZonesDictionary[r]._rings));for(B=0;B<G[0].length;B++)G[0][B][0]+=F*d.GEOGRAPHIC_360;B=new v({rings:G});K=new e({paths:G});if(G=q.intersect(c.toWebMercator(B),A))B=q.intersect(c.toWebMercator(K),A),z.push(new b({map:a.map,polyline:B,polygon:G,offset:F,nonPolarGridZone:this._ZonesDictionary[r],labelParameters:x}))}return z},processZonePolygons:function(a,b){for(var k={},h=b.getInterval(),e=0;e<a.length;e++){var d=a[e];d&&(this.handleZonePolygon(d,
b),h&&(k[d.nonPolarGridZone.utmZone]?k[d.nonPolarGridZone.utmZone].polygon=q.union([c.toWebMercator(d.polygon),k[d.nonPolarGridZone.utmZone].polygon]):k[d.nonPolarGridZone.utmZone]={polygon:c.toWebMercator(d.polygon),offset:d.offset}))}if(h)for(a=Object.keys(k),e=0;e<a.length;e++){var d=a[e],p=k[d].polygon,m=k[d].offset,u=c.toGeographic(p.getExtent()),r=g.LLtoUTM(u.ymin,u.xmin,d),l=g.LLtoUTM(u.ymin,u.xmax,d),P=g.LLtoUTM(u.ymax,u.xmax,d),u=g.LLtoUTM(u.ymax,u.xmin,d),d={minE:Math.min(r[0],l[0],P[0],
u[0]),maxE:Math.max(r[0],l[0],P[0],u[0]),minN:Math.min(r[1],l[1],P[1],u[1]),maxN:Math.max(r[1],l[1],P[1],u[1]),utmZone:d,polygon:p,offset:m,grid:b};this.handle100kGrids(d);1E5>h&&this.handleIntervals(d)}},handleZonePolygon:function(a,b){var k,c,e;k=a.polyline;c=b.getColor(0);e=b.getLineWidth(0);b._lineGraphics0.push(new r(k,new z(z.STYLE_SOLID,new h(c),e)));36978596<b.map.getScale()||b._labelGraphics.push(a.getCenterLabel(!0))},handle100kGrids:function(a){var b=a.polygon,k=a.offset,e=a.utmZone,u=
a.minE,m=a.maxE,l=a.minN,f=a.maxN;a=a.grid;for(var G=a.getColor(1),B=a.getLineWidth(1),K=a.getMap(),n,w,A,x,y,l=1E5*Math.floor(l/1E5);l<f;l+=1E5)for(n=1E5*Math.floor(u/1E5);n<m;n+=1E5){y=g.findGridLetters(e,0>l+5E4?1E7+(l+5E4):l+5E4,n+5E4);A=[];for(w=n;w<=n+1E5;w+=1E4)x=g.UTMtoLL(l,w,e),A.push([x.lon,x.lat]);for(w=l;w<l+1E5;w+=1E4)x=g.UTMtoLL(w,n+1E5,e),A.push([x.lon,x.lat]);for(w=n+1E5;w>=n;w-=1E4)x=g.UTMtoLL(l+1E5,w,e),A.push([x.lon,x.lat]);for(w=l+1E5;w>=l;w-=1E4)x=g.UTMtoLL(w,n,e),A.push([x.lon,
x.lat]);for(w=0;w<A.length;w++)A[w][0]+=k*d.GEOGRAPHIC_360;A=new v([A]);w=c.polygonToPolyline(A);x=q.intersect(c.toWebMercator(A),c.toWebMercator(b));w=q.intersect(c.toWebMercator(w),c.toWebMercator(b));if(x&&(y={clippedPolygon:x,unclippedPolygon:A,map:K,xmin:n%1E6,ymin:l%1E6,xmax:(n+1E5)%1E6,ymax:(l+1E5)%1E6,minMaxType:"utm",utmZone:e,text:y,labelParameters:{xOffset:10,yOffset:10,rotation:0,color:a.getColor(1),fontFamily:a.getFontFamily(),fontSize:a.getFontSize(1)}},y=new p(y),!(4622324<a.map.getScale())))for(y=
[y.getCenterLabel(!0)],w&&a._lineGraphics1.push(new r(w,new z(z.STYLE_SOLID,new h(G),B))),w=0;w<y.length;w++)a._labelGraphics.push(y[w])}},handleIntervals:function(a){var b=a.polygon,k=a.utmZone,p=a.offset,f=a.minE,v=a.maxE,J=a.minN,I=a.maxN;a=a.grid;var G=a.getFontFamily(),B=a.getIntervalLabelXOffset(),K=a.getIntervalLabelYOffset(),L=a.getInterval(),w=a.getMap(),A=a.getVerticalLabels(),x,y,D,E,M,F,O,N,t,S;for(x=Math.floor(J/L)*L;x<=I;x+=L)if(0!==x%1E5){0===x%1E4?(D=2,E=a._lineGraphics2):0===x%1E3?
(D=3,E=a._lineGraphics3):0===x%100?(D=4,E=a._lineGraphics4):(D=5,E=a._lineGraphics5);M=a.getColor(D);F=a.getLineWidth(D);D=a.getFontSize(D);O=new u(D,u.STYLE_NORMAL,u.VARIANT_NORMAL,u.WEIGHT_BOLD,G);t=[];y=g.UTMtoLL(x,f,k);N=g.UTMtoLL(x,v,k);for(y=0;y<v;y+=1E4)S=g.UTMtoLL(x,f+y,k),t.push([S.lon,S.lat]);t.push([N.lon,N.lat]);for(y=0;y<t.length;y++)t[y][0]+=p*d.GEOGRAPHIC_360;if(N=q.intersect(c.toWebMercator(new e([t])),c.toWebMercator(b))){F=new r(N,new z(z.STYLE_SOLID,new h(M),F));E.push(F);E=l.padZero((0>
J?1E7+x:x)%1E5/L,5-Math.log10(L));t=N.paths[0];y=new m({x:t[0][0]+.001,y:t[0][1],spatialReference:N.spatialReference});N=new m({x:t[t.length-1][0]-.001,y:t[t.length-1][1],spatialReference:N.spatialReference});F=l.screenDistanceBetweenPoints(y,N,w).horizontal;t=l.distanceFromMapEdge(y,w).horizontal;if(2>t||200<t&&300<F)t=(new n(E)).setAngle(0).setColor(M).setOffset(B,-(D/1.333)/2).setAlign("start").setFont(O),t=new r(y,t),a._labelGraphics.push(t);t=l.distanceFromMapEdge(N,w).horizontal;if(2>t||200<
t&&300<F)t=(new n(E)).setAngle(0).setColor(M).setOffset(-B,-(D/1.333)/2).setAlign("end").setFont(O),t=new r(N,t),a._labelGraphics.push(t)}}for(f=Math.floor(f/L)*L;f<=v;f+=L)if(0!==f%1E5){0===f%1E4?(D=2,E=a._lineGraphics2):0===f%1E3?(D=3,E=a._lineGraphics3):0===f%100?(D=4,E=a._lineGraphics4):(D=5,E=a._lineGraphics5);M=a.getColor(D);F=a.getLineWidth(D);D=a.getFontSize(D);O=new u(D,u.STYLE_NORMAL,u.VARIANT_NORMAL,u.WEIGHT_BOLD,G);t=[];x=g.UTMtoLL(J-1E4,f,k);B=g.UTMtoLL(I+1E4,f,k);t.push([x.lon,x.lat]);
t.push([B.lon,B.lat]);for(y=0;y<t.length;y++)t[y][0]+=p*d.GEOGRAPHIC_360;if(B=q.intersect(c.toWebMercator(new e([t])),c.toWebMercator(b))){x=new r(B,new z(z.STYLE_SOLID,new h(M),F));E.push(x);E=l.padZero(f%1E5/L,5-Math.log10(L));t=B.paths[0];x=new m({x:t[0][0],y:t[0][1]+.001,spatialReference:{wkid:102100}});B=new m({x:t[t.length-1][0],y:t[t.length-1][1]-.001,spatialReference:{wkid:102100}});F=l.screenDistanceBetweenPoints(x,B,w).vertical;t=l.distanceFromMapEdge(x,w).vertical;if(2>t||200<t&&300<F)t=
(new n(E)).setAngle(A?90:0).setColor(M).setOffset(A?-(D/1.333)/2:0,K).setAlign(A?"end":"middle").setFont(O),t=new r(x,t),a._labelGraphics.push(t);t=l.distanceFromMapEdge(B,w).vertical;if(2>t||200<t&&300<F)t=(new n(E)).setAngle(A?90:0).setColor(M).setOffset(A?-(D/1.333)/2:0,A?-K:-K-D/1.333).setAlign(A?"start":"middle").setFont(O),t=new r(B,t),a._labelGraphics.push(t)}}}}})},"widgets/GridOverlay/lib/constants":function(){define([],function(){return{ZONE_WIDTH_DEGREES:6,ZONE_HEIGHT_DEGREES:8,MIN_MGRS_LATITUDE:-80,
MAX_MGRS_LATITUDE:84,POSITIVE_180:179.99999999,NEGATIVE_180:-179.99999999,WEST_GEOGRAPHIC_LIMIT:-180,EAST_GEOGRAPHIC_LIMIT:180,GEOGRAPHIC_360:360,WEST_WEBMERCATOR_LIMIT:-2.0037508342789244E7,EAST_WEBMERCATOR_LIMIT:2.0037508342789244E7,WEBMERCATOR_360:4.007501668557849E7,DEGREES_PER_RADIAN:57.29577951308232,RADIANS_PER_DEGREE:.017453292519943295,WGS84_EQUATORIAL_RADIUS:6378137,WGS84_HALF_EQUATORIAL_RADIUS:3189068.5,HALF_PI:1.5707963267948966}})},"widgets/GridOverlay/lib/geometry-utils":function(){define(["./constants",
"esri/geometry/webMercatorUtils","esri/geometry/Polyline","esri/geometry/Polygon"],function(f,d,c,l){return{toGeographic:function(c){return c.spatialReference.isWebMercator()?d.webMercatorToGeographic(c):c},toWebMercator:function(c){return c.spatialReference.isWebMercator()?c:d.geographicToWebMercator(c)},_latitudeToWebMercatorY:function(c){return f.GEOGRAPHIC_360/2*(f.HALF_PI-2*Math.atan(Math.exp(-1*c/f.WGS84_EQUATORIAL_RADIUS)))/Math.PI},_longitudeToWebMercatorX:function(c){var a=f.GEOGRAPHIC_360,
b=f.GEOGRAPHIC_360/2,d=f.WGS84_EQUATORIAL_RADIUS;return c/d*b/Math.PI-Math.floor((c/d*b/Math.PI+b)/a)*a},pointToGeographic:function(c){for(var a=c.x,b=c.y,d=(c=c.spatialReference.isWebMercator())?f.WEST_WEBMERCATOR_LIMIT:f.WEST_GEOGRAPHIC_LIMIT,g=c?f.EAST_WEBMERCATOR_LIMIT:f.EAST_GEOGRAPHIC_LIMIT,l=c?f.WEBMERCATOR_360:f.GEOGRAPHIC_360,m=0;a<=d;)a+=l,--m;for(;a>g;)a-=l,m+=1;c&&(a=this._longitudeToWebMercatorX(a),b=this._latitudeToWebMercatorY(b));return{x:a,y:b,offsetX:m}},extentToPolygon:function(c){return new l({rings:[[[c.xmin,
c.ymin],[c.xmax,c.ymin],[c.xmax,c.ymax],[c.xmin,c.ymax],[c.xmin,c.ymin]]],spatialReference:c.spatialReference})},polygonToPolyline:function(d){return new c({paths:d.rings,spatialReference:{wkid:d.spatialReference.wkid}})}}})},"widgets/GridOverlay/lib/labeling-utils":function(){define(["./mgrs","esri/geometry/Point"],function(f,d){var c=document.createElement("canvas").getContext("2d");return{getWidthOfText:function(d,g,a){c.font=a+"px "+g;return c.measureText(d).width},padZero:function(c,d){for(c=
c.toString();c.length<d;)c="0"+c;return c},getScreenSize:function(c,g){var a=c.getExtent();c=new d([a.xmin,a.ymin],a.spatialReference);a=new d([a.xmax,a.ymax],a.spatialReference);c=g.toScreen(c);g=g.toScreen(a);return{width:Math.abs(g.x-c.x),height:Math.abs(g.y-c.y)}},distanceFromMapEdge:function(c,d){var a,b=d.toScreen(c);"undefined"===typeof f&&(f=!0);a=Math.min(Math.abs(d.width-b.x),Math.abs(b.x));d=Math.min(Math.abs(d.height-b.y),Math.abs(b.y));f&&(c=Math.round(1E4*c.getLatitude())/1E4,84===c||
-80===c)&&(d=0);return{horizontal:a,vertical:d,total:Math.sqrt(a*a+d*d)}},screenDistanceBetweenPoints:function(c,d,a){c=a.toScreen(c);a=a.toScreen(d);d=Math.abs(c.x-a.x);c=Math.abs(c.y-a.y);return{horizontal:d,vertical:c,total:Math.sqrt(d*d+c*c)}}}})},"widgets/GridOverlay/lib/mgrs":function(){define(["esri/geometry/Point"],function(f){var d,c,l;d=6378137;c=.00669437999;l=c/(1-c);var g=(1-Math.sqrt(1-c))/(1+Math.sqrt(1-c));return{setSpheroid:function(a){a=a.toUpperCase();switch(a){case "AIRY 1830":d=
6377563.396;c=.00667053999998536;break;case "AIRY MODIFIED":d=6377340.189;c=.00667053999998536;break;case "AVERAGE TERRESTRIAL SYSTEM 1977":d=6378135;c=.00669438499958795;break;case "AUSTRALIAN NATIONAL":d=6378160;c=.00669454185458764;break;case "BESSEL 1841":d=6377397.155;c=.00667437223180214;break;case "BESSEL MODIFIED":d=6377492.018;c=.00667437223180214;break;case "BESSEL NAMIBIA":d=6377483.865;c=.00667437223180214;break;case "CLARKE 1858":d=6378293.639;c=.00678514600473303;break;case "NAD27":case "CLARKE 1866":d=
6378206.4;c=.00676865799760964;break;case "CLARKE 1866 MICHIGAN":d=6378450.047;c=.00676865830738507;break;case "CLARKE 1880":d=6378249.138;c=.00680348101883452;break;case "CLARKE 1880 (ARC)":d=6378249.145;c=.00680348101883452;break;case "CLARKE 1880 (BENOIT)":d=6378300.79;c=.00680348271028565;break;case "CLARKE 1880 (IGN)":d=6378249.2;c=.00680348767623919;break;case "CLARKE 1880 (RGS)":d=6378249.145;c=.00680351128284906;break;case "CLARKE 1880 (SGA)":d=6378249.2;c=.00680348860198551;break;case "EVEREST 1830 (DEFINITION)":d=
6377299.36;c=.00663784663019969;break;case "EVEREST 1830 (MODIFIED)":d=6377304.063;c=.00663784663019969;break;case "EVEREST (ADJUSTMENT 1937)":d=6377276.345;c=.00663784663019969;break;case "EVEREST (DEFINITION 1962)":d=6377301.243;c=.00663784606842344;break;case "EVEREST (DEFINITION 1967)":d=6377298.556;c=.00663784663019969;break;case "EVEREST (DEFINITION 1975)":d=6377299.151;c=.00663784606842344;break;case "NAD83":case "GEM GRAVITY POTENTIAL MODEL":case "GRS 1980":d=6378137;c=.00669438002290079;
break;case "GRS 1967 \x3d INTERNATIONAL 1967":d=6378160;c=.00669460532856765;break;case "HELMERT 1906":d=6378200;c=.00669342162296594;break;case "INDONESIAN NATIONAL":d=6378160;c=.0066946090804091;break;case "INTERNATIONAL 1924":d=6378388;c=.00672267002233332;break;case "INTERNATIONAL 1967":d=6378160;c=.00669454185458764;break;case "KRASOVSKY 1940":d=6378245;c=.00669342162296594;break;case "TRANSIT PRECISE EPHEMERIS":d=6378145;c=.00669454185458764;break;case "OSU 1986 GEOIDAL MODEL":d=6378136.2;c=
.00669438006997852;break;case "OSU 1991 GEOIDAL MODEL":d=6378136.3;c=.00669438006997852;break;case "PLESSIS 1817":d=6376523;c=.00646954373789485;break;case "STRUVE 1860":d=6378298.3;c=.00677435980080942;break;case "WAR OFFICE":d=6378300.583;c=.00674534331628926;break;case "NWL-10D \x3d\x3d WGS 1972":d=6378135;c=.00669431777826672;break;case "WGS 1972":d=6378135;c=.00669431777826672;break;case "WGS84":case "WGS 1984":d=6378137;c=.00669437999014132;break;case "WGS 1966":d=6378145;c=.00669454185458764;
break;case "FISCHER 1960":d=6378166;c=.00669342162296594;break;case "FISCHER 1968":d=6378150;c=.00669342162296594;break;case "FISCHER MODIFIED":d=6378155;c=.00669342162296594;break;case "HOUGH 1960":d=6378270;c=.00672267002233332;break;case "EVEREST MODIFIED 1969":d=6377295.664;c=.00663784663019969;break;case "WALBECK":d=6376896;c=.00659454809414964;break;case "GRS 1967 TRUNCATED":d=6378160,c=.00669454185458764}l=c/(1-c);g=(1-Math.sqrt(1-c))/(1+Math.sqrt(1-c))},getSpheroidList:function(){return"AIRY 1830;AIRY MODIFIED;AUSTRALIAN NATIONAL;AVERAGE TERRESTRIAL SYSTEM 1977;BESSEL 1841;BESSEL MODIFIED;BESSEL NAMIBIA;CLARKE 1858;CLARKE 1866 MICHIGAN;CLARKE 1866;CLARKE 1880 (ARC);CLARKE 1880 (BENOIT);CLARKE 1880 (IGN);CLARKE 1880 (RGS);CLARKE 1880 (SGA);CLARKE 1880;EVEREST (ADJUSTMENT 1937);EVEREST (DEFINITION 1962);EVEREST (DEFINITION 1967);EVEREST (DEFINITION 1975);EVEREST 1830 (DEFINITION);EVEREST 1830 (MODIFIED);EVEREST MODIFIED 1969;FISCHER 1960;FISCHER 1968;FISCHER MODIFIED;GEM GRAVITY POTENTIAL MODEL;GRS 1967 \x3d INTERNATIONAL 1967;GRS 1967 TRUNCATED;GRS 1980;HELMERT 1906;HOUGH 1960;INDONESIAN NATIONAL;INTERNATIONAL 1924;INTERNATIONAL 1967;KRASOVSKY 1940;NWL-10D \x3d\x3d WGS 1972;OSU 1986 GEOIDAL MODEL;OSU 1991 GEOIDAL MODEL;PLESSIS 1817;STRUVE 1860;TRANSIT PRECISE EPHEMERIS;WALBECK;WAR OFFICE;WGS 1966;WGS 1972;WGS 1984".split(";")},
getZoneNumber:function(a,b){a=parseFloat(a);b=parseFloat(b);if(360<b||-180>b){for(;-180>b;)b+=360;for(;180<b;)b-=360}(360<b||-180>b||90<a||-90>a)&&console.error("Bad input. lat: "+a+" lon: "+b);b=b+180-360*Math.floor((b+180)/360)-180;var c=Math.floor((b+180)/6)+1;56<=a&&64>a&&3<=b&&12>b&&(c=32);72<=a&&84>a&&(0<=b&&9>b?c=31:9<=b&&21>b?c=33:21<=b&&33>b?c=35:33<=b&&42>b&&(c=37));return c},LLtoUTM:function(a,b,p){a=parseFloat(a);b=parseFloat(b);if(84<a||-80>a)return"undefined, ensure 84N \x3e Lat \x3e 80S";
if(360<b||-180>b){for(;-180>b;)b+=360;for(;180<b;)b-=360}(360<b||-180>b||90<a||-90>a)&&console.error("Bad input. lat: "+a+" lon: "+b);var q,g,m,e;q=b+180-360*Math.floor((b+180)/360)-180;g=a*Math.PI/180;q=q*Math.PI/180;b=p?p:this.getZoneNumber(a,b);p=(6*(b-1)-180+3)*Math.PI/180;this.UTMLetterDesignator(a);a=d/Math.sqrt(1-c*Math.sin(g)*Math.sin(g));m=Math.tan(g)*Math.tan(g);e=l*Math.cos(g)*Math.cos(g);q=Math.cos(g)*(q-p);return[.9996*a*(q+(1-m+e)*q*q*q/6+(5-18*m+m*m+72*e-58*l)*q*q*q*q*q/120)+5E5,.9996*
(d*((1-c/4-3*c*c/64-5*c*c*c/256)*g-(3*c/8+3*c*c/32+45*c*c*c/1024)*Math.sin(2*g)+(15*c*c/256+45*c*c*c/1024)*Math.sin(4*g)-35*c*c*c/3072*Math.sin(6*g))+a*Math.tan(g)*(q*q/2+(5-m+9*e+4*e*e)*q*q*q*q/24+(61-58*m+m*m+600*e-330*l)*q*q*q*q*q*q/720)),b]},LLtoUSNG:function(a,b,c,d){c=c||5;var p;p=d?d:this.getZoneNumber(a,b);a=parseFloat(a);b=parseFloat(b);var g=this.LLtoUTM(a,b,p);d=g[0];var e=g[1];0>a&&(e+=1E7);g=this.findGridLetters(p,e,d);p=Math.round(e)%1E5;d=Math.round(d)%1E5;p=Math.floor(p/Math.pow(10,
5-c));d=Math.floor(d/Math.pow(10,5-c));a=this.getZoneNumber(a,b)+this.UTMLetterDesignator(a)+" "+g+" ";for(b=String(d).length;b<c;b++)a+="0";a+=d+" ";for(b=String(p).length;b<c;b++)a+="0";return a+p},UTMLetterDesignator:function(a){a=parseFloat(a);return 84>=a&&72<=a?"X":72>a&&64<=a?"W":64>a&&56<=a?"V":56>a&&48<=a?"U":48>a&&40<=a?"T":40>a&&32<=a?"S":32>a&&24<=a?"R":24>a&&16<=a?"Q":16>a&&8<=a?"P":8>a&&0<=a?"N":0>a&&-8<=a?"M":-8>a&&-16<=a?"L":-16>a&&-24<=a?"K":-24>a&&-32<=a?"J":-32>a&&-40<=a?"H":-40>
a&&-48<=a?"G":-48>a&&-56<=a?"F":-56>a&&-64<=a?"E":-64>a&&-72<=a?"D":-72>a&&-80<=a?"C":"Z"},findSet:function(a){a=parseInt(a,10);switch(a%6){case 0:return 6;case 1:return 1;case 2:return 2;case 3:return 3;case 4:return 4;case 5:return 5;default:return-1}},findGridLetters:function(a,b,c){a=parseInt(a,10);b=parseFloat(b);c=parseFloat(c);var d=1;for(b=Math.round(b);1E5<=b;)b-=1E5,d++;d%=20;b=0;for(c=Math.round(c);1E5<=c;)c-=1E5,b++;b%=8;return this.lettersHelper(this.findSet(a),d,b)},lettersHelper:function(a,
b,c){0===b?b=19:b--;0===c?c=7:c--;switch(a){case 1:return a="ABCDEFGHJKLMNPQRSTUV","ABCDEFGH".charAt(c)+a.charAt(b);case 2:return a="FGHJKLMNPQRSTUVABCDE","JKLMNPQR".charAt(c)+a.charAt(b);case 3:return a="ABCDEFGHJKLMNPQRSTUV","STUVWXYZ".charAt(c)+a.charAt(b);case 4:return a="FGHJKLMNPQRSTUVABCDE","ABCDEFGH".charAt(c)+a.charAt(b);case 5:return a="ABCDEFGHJKLMNPQRSTUV","JKLMNPQR".charAt(c)+a.charAt(b);case 6:return a="FGHJKLMNPQRSTUVABCDE","STUVWXYZ".charAt(c)+a.charAt(b)}},UTMtoLL:function(a,b,p){b=
parseFloat(b)-5E5;a=parseFloat(a);p=parseInt(p,10);a=a/.9996/(d*(1-c/4-3*c*c/64-5*c*c*c/256));a=a+(3*g/2-27*g*g*g/32)*Math.sin(2*a)+(21*g*g/16-55*g*g*g*g/32)*Math.sin(4*a)+151*g*g*g/96*Math.sin(6*a);var q=d/Math.sqrt(1-c*Math.sin(a)*Math.sin(a)),f=Math.tan(a)*Math.tan(a),m=l*Math.cos(a)*Math.cos(a),e=b/(.9996*q);b=a-q*Math.tan(a)/(d*(1-c)/Math.pow(1-c*Math.sin(a)*Math.sin(a),1.5))*(e*e/2-(5+3*f+10*m-4*m*m-9*l)*e*e*e*e/24+(61+90*f+298*m+45*f*f-252*l-3*m*m)*e*e*e*e*e*e/720);b=180*b/Math.PI;a=(e-(1+
2*f+m)*e*e*e/6+(5-2*m+28*f-3*m*m+8*l+24*f*f)*e*e*e*e*e/120)/Math.cos(a);a=6*(p-1)-180+3+180*a/Math.PI;p={};p.lat=b;p.lon=a;return p},USNGtoUTM:function(a,b,c,d,g,m){c=1+"ABCDEFGHJKLMNPQRSTUVWXYZ".indexOf(c)%8;var e="CDEFGHJKLMNPQRSTUVWX".indexOf(b);d=a%2?"ABCDEFGHJKLMNPQRSTUV".indexOf(d):"FGHJKLMNPQRSTUVABCDE".indexOf(d);d=Number([0,2,2,2,4,4,6,6,8,8,0,0,0,2,2,4,4,6,6,6][e])+d/10;d<[1.1,2,2.9,3.8,4.7,5.6,6.5,7.3,8.2,9.1,0,.8,1.7,2.6,3.5,4.4,5.3,6.2,7,7.9][e]&&(d+=2);e={};e.N=1E6*d+Number(m)*Math.pow(10,
5-m.length);e.E=1E5*c+Number(g)*Math.pow(10,5-g.length);e.zone=a;e.letter=b;return e},USNGtoLL:function(a){a=this.parseUSNG_str(a);var b=this.USNGtoUTM(a.zone,a.ltr,a.sq1,a.sq2,a.east,a.north);"N">a.ltr&&(b.N-=1E7);b=this.UTMtoLL(b.N,b.E,a.zone);return[b.lat,b.lon]},parseUSNG_str:function(a){var b=[];a=a.toUpperCase();b=/%20/g;b=a.replace(b,"");b=/ /g;b=a.replace(b,"");if(7>b.length)return 0;a={};var c=0;a.zone=10*b.charAt(c++)+1*b.charAt(c++);a.ltr=b.charAt(c++);a.sq1=b.charAt(c++);a.sq2=b.charAt(c++);
a.precision=(b.length-c)/2;a.east="";a.north="";for(var d=0;d<a.precision;d++)a.east+=b.charAt(c++);" "===b[c]&&c++;for(d=0;d<a.precision;d++)a.north+=b.charAt(c++);return a},isUSNG:function(a){var b;a=a.toUpperCase();b=/%20/g;a=a.replace(b,"");b=/ /g;a=a.replace(b,"");if(15<a.length)return 0;b=/^[0-9]{2}[CDEFGHJKLMNPQRSTUVWX]$/;if(a.match(b))return 0;b=/^[0-9]{2}[CDEFGHJKLMNPQRSTUVWX][ABCDEFGHJKLMNPQRSTUVWXYZ][ABCDEFGHJKLMNPQRSTUV]([0-9][0-9]){0,5}/;return!a.match(b)||7>a.length?0:a},LLtoMGRS:function(a,
b,c){return this.LLtoUSNG(a,b,c||5).replace(/ /g,"")},USNGtoPoint:function(a){a=this.USNGtoLL(a);return new f(a[1],a[0])},pointToUSNG:function(a,b){var c=a.getLatitude();a=a.getLongitude();return this.LLtoUSNG(c,a,b)},LLtoUSNG_nad27:function(a,b,c){return this.LLtoUSNG(a,b,c||5)+" (NAD27)"}}})},"widgets/GridOverlay/lib/NonPolarGridZone":function(){define("dojo/_base/declare dojo/json ./constants esri/geometry/Polygon esri/geometry/Polyline esri/geometry/Extent".split(" "),function(f,d,c,l,g,a){return f(null,
{extent:null,id:null,utmZone:null,latitudeZone:null,_rings:[],constructor:function(b){var c=b.id.match(/(\d+)|([A-Za-z]+)/g);this.id=b.id;this.utmZone=1*c[0];this.latitudeZone=c[1];this.extent=new a({xmin:b.xmin,ymin:b.ymin,xmax:b.xmax,ymax:b.ymax,spatialReference:b.spatialReference||{wkid:4326}});b=[this.extent.xmin,this.extent.ymin];this._rings=[[b,[this.extent.xmax,this.extent.ymin],[this.extent.xmax,this.extent.ymax],[this.extent.xmin,this.extent.ymax],b]]},toPolygon:function(a){var b=d.parse(d.stringify(this._rings));
if(a)for(var g=0;g<b[0].length;g++)b[0][g][0]+=a*c.GEOGRAPHIC_360;return new l({rings:b,spatialReference:this.spatialReference})},toPolyline:function(a){var b=d.parse(d.stringify(this._rings));if(a)for(var f=0;f<b[0].length;f++)b[0][f][0]+=a*c.GEOGRAPHIC_360;return new g({paths:b,spatialReference:this.spatialReference})}})})},"widgets/GridOverlay/lib/VisibleGridZone":function(){define(["dojo/_base/declare","./GridPolygon"],function(f,d){return f(null,{polyline:null,polygon:null,offset:null,nonPolarGridZone:null,
map:null,constructor:function(c){this.offset=Math.round(c.offset);this.polyline=c.polyline;this.polygon=c.polygon;this.nonPolarGridZone=c.nonPolarGridZone;this.map=c.map;c={clippedPolygon:this.polygon,unclippedPolygon:this.nonPolarGridZone.toPolygon(c.offset),map:this.map,xmin:this.nonPolarGridZone.extent.xmin,ymin:this.nonPolarGridZone.extent.ymin,xmax:this.nonPolarGridZone.extent.xmax,ymax:this.nonPolarGridZone.extent.ymax,minMaxType:"degrees",utmZone:0,text:this.nonPolarGridZone.id,labelParameters:c.labelParameters};
this.gridPolygon=new d(c)},getLabels:function(){return this.gridPolygon.getLabels(!0)},getCenterLabel:function(){return this.gridPolygon.getCenterLabel(!0)}})})},"widgets/GridOverlay/lib/GridPolygon":function(){define(["dojo/_base/declare","./mgrs","./labeling-utils","./LabelElement","esri/geometry/Point"],function(f,d,c,l,g){return f(null,{clippedPolygon:null,unclippedPolygon:null,map:null,xmin:0,ymin:0,xmax:0,ymax:0,minMaxType:"",utmZone:0,text:"",color:null,labelParameters:null,_centerLabelSet:!1,
_centerLabel:null,_labelsSet:!1,_labels:[],_cornerLabels:[],_borderLabels:[],_interiorLabels:[],candidatePoint:null,constructor:function(a){this.unclippedPolygon=a.unclippedPolygon;this.clippedPolygon=a.clippedPolygon;this.map=a.map;this.xmin=a.xmin;this.ymin=a.ymin;this.xmax=a.xmax;this.ymax=a.ymax;this.minMaxType=a.minMaxType;this.utmZone=Math.round(a.utmZone);this.text=a.text;this.labelParameters=a.labelParameters;this._cornerLabels=[];this._borderLabels=[];this._interiorLabels=[];this._centerLabel=
null;this._labelsSet=this._centerLabelSet=!1},getLabels:function(a){a=a||!1;this._labelsSet||(this._cornerLabels=this.setLabels(a),this._labelsSet=!0);a=0<this._cornerLabels.length?this._cornerLabels:0<this._borderLabels.length?this._borderLabels:this._interiorLabels;for(var b=0;b<a.length;b++)a[b]=a[b].getLabelGraphic();return a},getCenterLabel:function(a){this._centerLabelSet||(this.setCenterLabel(a),this._centerLabelSet=!0);return this._centerLabel.getLabelGraphic()},setCenterLabel:function(a){a=
a?this.clippedPolygon:this.unclippedPolygon;var b={xOffset:0,yOffset:0,rotation:0,color:this.labelParameters.color,fontFamily:this.labelParameters.fontFamily,fontSize:this.labelParameters.fontSize};this._centerLabel=new l({map:this.map,point:a.getCentroid(),labelParameters:b,text:this.text,verticalAlign:"middle",horizontalAlign:"middle"});b=new l({map:this._centerLabel.map,point:this._centerLabel.point,labelParameters:b,text:"utm"===this.minMaxType?"WW":"22W",verticalAlign:"middle",horizontalAlign:"middle"});
b.shrinkToFit(a,12);this._centerLabel.font.setSize(b.font.size);this._centerLabel.setExtent()},setLabels:function(a){a=a||!1;for(var b=this.clippedPolygon.rings,d=c.getScreenSize(this.clippedPolygon.getExtent(),this.map),f={xmin:Math.round(1E3*this.xmin)/1E3,ymin:Math.round(1E3*this.ymin)/1E3,xmax:Math.round(1E3*this.xmax)/1E3,ymax:Math.round(1E3*this.ymax)/1E3,map_xmin:this.map.extent.xmin,map_ymin:this.map.extent.ymin,map_xmax:this.map.extent.xmax,map_ymax:this.map.extent.ymax},r,m,e={"lower-left":{label:null,
priority:99,hidden:!1},"lower-right":{label:null,priority:99,hidden:!1},"upper-left":{label:null,priority:99,hidden:!1},"upper-right":{label:null,priority:99,hidden:!1}},v=0;v<b.length;v++){r=null;for(var z=0;z<b[v].length-1;z++){this.candidatePoint=new g(b[v][z],this.clippedPolygon.spatialReference);m=new g(b[v][z+1],this.clippedPolygon.spatialReference);if(0===z){var n=new g(b[v][b[v].length-2],this.clippedPolygon.spatialReference);r=this._findAngle(n,this.candidatePoint)}m=this._findAngle(this.candidatePoint,
m);if(m!==r&&(n="",0===m&&90===r?n="lower-right":270===m&&180===r?n="lower-right":0===m&&270===r?n="lower-left":90===m&&180===r?n="lower-left":90===m&&0===r?n="upper-left":180===m&&270===r?n="upper-left":180===m&&90===r?n="upper-right":270===m&&0===r&&(n="upper-right"),n)){r=this._findType(this.candidatePoint,f);var u=r.priority,h=new l({map:this.map,point:this.candidatePoint,labelParameters:this.labelParameters,text:this.text,verticalAlign:n.split("-")[0],horizontalAlign:n.split("-")[1]});e[n].priority>
u&&(e[n].label=h,e[n].priority=u,e[n].xOffset=r.xOffset,e[n].yOffset=r.yOffset)}r=m}}b=e["lower-left"];f=e["upper-left"];v=e["lower-right"];e=e["upper-right"];300>d.width&&(b.priority>v.priority&&(b.hidden=!0),v.priority>b.priority&&(v.hidden=!0),f.priority>e.priority&&(f.hidden=!0),e.priority>f.priority&&(e.hidden=!0));200>d.height&&(b.priority>f.priority&&(b.hidden=!0),v.priority>e.priority&&(v.hidden=!0),f.priority>b.priority&&(f.hidden=!0),e.priority>v.priority&&(e.hidden=!0));"utm"===this.minMaxType&&
(b.xOffset&&(b.label.xOffset=70),f.xOffset&&(f.label.xOffset=70),e.xOffset&&(e.label.xOffset=70),v.xOffset&&(v.label.xOffset=70),b.yOffset&&(b.label.yOffset=40),f.yOffset&&(f.label.yOffset=40),e.yOffset&&(e.label.yOffset=40),v.yOffset&&(v.label.yOffset=40));d=[];!b.hidden&&b.label&&d.push(b.label);!f.hidden&&f.label&&d.push(f.label);!e.hidden&&e.label&&d.push(e.label);!v.hidden&&v.label&&d.push(v.label);a=a?this.unclippedPolygon:this.clippedPolygon;for(e=0;e<d.length;e++)(new l({map:this.map,point:d[e].point,
labelParameters:this.labelParameters,text:"utm"===this.minMaxType?"WW":"22W",verticalAlign:d[e].verticalAlign,horizontalAlign:d[e].horizontalAlign})).fitsInPolygon(a)||(d.splice(e,1),e--);return d},_findXY:function(a){var b;b=a.getLongitude();a=a.getLatitude();"utm"===this.minMaxType?(a=d.LLtoUTM(a,b,this.utmZone),b=100*Math.round(a[0]/100),a=100*Math.round(a[1]/100),b%=1E6,a%=1E6):(b=Math.round(1E3*b)/1E3,a=Math.round(1E3*a)/1E3);return{x:b,y:a}},_findAngle:function(a,b){for(a=-(180*Math.atan2(b.y-
a.y,b.x-a.x)/Math.PI)+90;0>a;)a+=360;for(;360<=a;)a-=360;15>a||345<a?a=0:105>a&&75<a?a=90:195>a&&165<a?a=180:285>a&&255<a&&(a=270);return a},_findType:function(a,b){var c=this._findXY(this.candidatePoint),d=c.x,c=c.y,g=!1,f=!1,e=0;a.x===b.map_xmin||a.x===b.map_xmax?(g=!0,e+=2):d===b.xmin||d===b.xmax?console.warn():e+=1;a.y===b.map_ymin||a.y===b.map_ymax?(f=!0,e+=2):c===b.ymin||c===b.ymax?console.warn():e+=1;return{priority:e,xOffset:g,yOffset:f}}})})},"widgets/GridOverlay/lib/LabelElement":function(){define("dojo/_base/declare ./geometry-utils ./labeling-utils esri/geometry/geometryEngine esri/geometry/screenUtils esri/graphic esri/geometry/Point esri/geometry/Extent esri/symbols/Font esri/symbols/TextSymbol".split(" "),
function(f,d,c,l,g,a,b,p,q,r){return f(null,{map:null,point:null,xOffset:0,yOffset:0,text:"",verticalAlign:"",horizontalAlign:"",rotation:0,color:null,fontFamily:"",fontSize:0,font:null,constructor:function(a){this.map=a.map;this.point=a.point;this.xOffset=a.labelParameters.xOffset||0;this.yOffset=a.labelParameters.yOffset||0;this.text=a.text;this.verticalAlign=a.verticalAlign||"bottom";this.verticalAlign.toLowerCase();this.horizontalAlign=a.horizontalAlign||"middle";this.horizontalAlign.toLowerCase();
this.rotation=a.labelParameters.rotation||0;this.rotation=90*Math.round(this.rotation/90);this.color=a.labelParameters.color;this.font=(new q).setFamily(a.labelParameters.fontFamily||"Arial, Helvetica, sans-serif").setSize(a.labelParameters.fontSize||0).setWeight(q.WEIGHT_BOLD)},getPixelWidth:function(){return 0!==this.rotation%180?this.font.size:c.getWidthOfText(this.text,this.font.family,this.font.size)},getPixelHeight:function(){return 0!==this.rotation%180?c.getWidthOfText(this.text,this.font.family,
this.font.size):this.font.size},decreaseFontSize:function(a){0!==this.font.size&&(this.font.setSize(this.font.size-(a||1)),this.setExtent())},setExtent:function(){var a=this.map,b=a.toScreen(this.point),c=this.getPixelWidth(),f=this.getPixelHeight()/1.3333,l,u,h,k;switch(this.horizontalAlign){case "left":b=b.offset(this.xOffset,0);l=b.x;h=b.x+c;break;case "middle":case "center":l=b.x-c/2;h=b.x+c/2;break;case "right":b=b.offset(-this.xOffset,0),l=b.x-c,h=b.x}switch(this.verticalAlign){case "bottom":case "lower":b=
b.offset(0,-this.yOffset);u=b.y;k=b.y-f;break;case "middle":case "center":u=b.y+f/2;k=b.y-f/2;break;case "upper":case "top":b=b.offset(0,this.yOffset),u=b.y+f,k=b.y}b=new p({xmin:l,ymin:u,xmax:h,ymax:k});this.extent=d.toWebMercator(g.toMapGeometry(a.extent,a.width,a.height,b))},getExtent:function(){this.extent||this.setExtent();return this.extent},fitsInPolygon:function(a){var b=this.getExtent(),b=d.toWebMercator(b);a=d.toWebMercator(a);return l.contains(a,b)},fitsInExtent:function(a){var b=this.getExtent(),
b=d.toWebMercator(b);a=d.toWebMercator(a);return l.contains(a,b)},shrinkToFit:function(a,b){b=b||0;!this.fitsInPolygon(a)&&0<this.font.size&&(this.font.setSize(this.font.size-1),this.font.size<b&&this.font.setSize(0),this.setExtent(),this.shrinkToFit(a,b))},getLabelGraphic:function(){var c=(new r(this.text)).setColor(this.color).setAlign(r.ALIGN_START).setFont(this.font),d=this.getExtent(),g=this.map.toScreen(this.point),d=this.map.toScreen(new b([d.xmin,d.ymin],d.spatialReference));c.setOffset(d.x-
g.x,-(d.y-g.y));return new a(this.point,c)}})})},"esri/dijit/BasemapGallery":function(){define("require dojo/_base/declare dojo/_base/array dojo/_base/connect dojo/_base/lang dojo/_base/kernel dojo/_base/sniff dojo/has dojo/query dojo/Deferred dojo/DeferredList dojo/dom dojo/dom-construct dojo/dom-class dijit/_Widget dijit/_Templated ../kernel ../lang ../urlUtils ../request ../geometry/Extent ../SpatialReference ../virtualearth/VETiledLayer ../layers/OpenStreetMapLayer ../layers/ArcGISTiledMapServiceLayer ../layers/ArcGISDynamicMapServiceLayer ../layers/WebTiledLayer ../layers/VectorTileLayer ../layers/TileInfo ../layers/ArcGISImageServiceLayer ../layers/ImageServiceParameters ../layers/ImageParameters ./Basemap ./_EventedWidget dojo/text!./templates/BasemapGallery.html".split(" "),
function(f,d,c,l,g,a,b,p,q,r,m,e,v,z,n,u,h,k,P,Q,C,R,H,J,I,G,B,K,L,w,A,x,y,D,E){d=d([D,n,u],{declaredClass:"esri.dijit.BasemapGallery",widgetsInTemplate:!0,templateString:E,loaded:!1,basemaps:[],bingMapsKey:null,flowContainer:null,_hasUI:!1,_supportsVTL:null,_selectedBasemap:null,_selectBasemapInProgress:!1,_eventMap:{load:!0,"selection-change":!0,add:["basemap"],remove:["basemap"],error:["message"]},constructor:function(a,b){a=a||{};a.map||console.error("esri.dijit.BasemapGallery: Unable to find the 'map' property in parameters");
this.map=a.map;this._hasUI=b?!0:!1;this.bingMapsKey=a.bingMapsKey&&0<a.bingMapsKey.length?a.bingMapsKey:null;this.showArcGISBasemaps=!1!==a.showArcGISBasemaps;this.basemaps=a.basemaps||[];this.basemapIds=a.basemapIds;this.referenceIds=a.referenceIds;this.basemapsGroup=a.basemapsGroup;this.arcgisUrl=h.dijit._arcgisUrl;a.portalUrl&&(this.arcgisUrl=a.portalUrl+"/sharing/rest");0>this.arcgisUrl.indexOf("://")?this.arcgisUrl=P.getProtocolForWebResource()+"//"+this.arcgisUrl:"https:"===window.location.protocol&&
(this.arcgisUrl=this.arcgisUrl.replace("http:","https:"));this.init()},init:function(){this.inherited(arguments);c.forEach(this.basemaps,function(a){a.id&&0!==a.id.length||(a.id=this._getUniqueId());c.forEach(a.layers,function(a){a.opacity=0<=a.opacity?a.opacity:1;a.visibility=!0},this)},this);this.basemapIds&&0<this.basemapIds.length&&c.forEach(this.basemapIds,function(a){this.map.getLayer(a)._basemapGalleryLayerType="basemap"},this);this.referenceIds&&0<this.referenceIds.length&&c.forEach(this.referenceIds,
function(a){a=this.map.getLayer(a);a._basemapGalleryLayerType="reference";a.attr("data-reference",!0)},this);this.basemapsGroup&&(this.basemapsGroup.owner&&this.basemapsGroup.title||this.basemapsGroup.id)?this._findCustomBasemapsGroup(g.hitch(this,"_handleArcGISBasemapsResponse")):this.showArcGISBasemaps?this._findArcGISBasemapsGroup(g.hitch(this,"_handleArcGISBasemapsResponse")):this._finishStartup();this._checkVTLSupport().then(g.hitch(this,function(a){this._supportsVTL=a}))},startup:function(){this.loaded?
this._refreshUI():l.connect(this,"onLoad",g.hitch(this,function(){this._refreshUI()}))},select:function(a){this._select(a)},getSelected:function(){return this._selectedBasemap},get:function(a){var b;for(b=0;b<this.basemaps.length;b++)if(this.basemaps[b].id===a)return this.basemaps[b];return null},add:function(a){return a&&!a.id?(a.id=this._getUniqueId(),this.basemaps.push(a),this._refreshUI(),this.onAdd(a),!0):a&&this._isUniqueId(a.id)?(this.basemaps.push(a),this._refreshUI(),this.onAdd(a),!0):!1},
remove:function(a){var b;for(b=0;b<this.basemaps.length;b++){var c=this.basemaps[b];if(c.id===a)return this._selectedBasemap&&this._selectedBasemap.id===c.id&&(this._selectedBasemap=null),this.basemaps.splice(b,1),this._refreshUI(),this.onRemove(c),c}return null},onLoad:function(){},onSelectionChange:function(){},onAdd:function(a){},onRemove:function(a){},onError:function(a){},_defaultBasemapGalleryGroupQuery:'title:"ArcGIS Online Basemaps" AND owner:esri',_basemapGalleryGroupQuery:null,_finishStartup:function(){this.loaded=
!0;this.onLoad();0===this.map.layerIds.length&&0<this.basemaps.length&&!this._selectBasemapInProgress&&this._select(this.basemaps[0].id)},_findCustomBasemapsGroup:function(a){this.basemapsGroup&&this.basemapsGroup.id?this._findArcGISBasemaps(this.basemapsGroup.id,a):(this._basemapGalleryGroupQuery='title:"'+this.basemapsGroup.title+'" AND owner:'+this.basemapsGroup.owner,this._findArcGISBasemapsGroup(a))},_findArcGISBasemapsGroup:function(b){if(this._basemapGalleryGroupQuery)this._findArcGISBasemapsGroupContent(b);
else{var c=this.arcgisUrl+"/portals/self",d={f:"json"};d.culture=a.locale;Q({url:c,content:d,callbackParamName:"callback",load:g.hitch(this,function(a,c){a&&a.useVectorBasemaps&&a.vectorBasemapGalleryGroupQuery?this._checkVTLSupport().then(g.hitch(this,function(c){this._basemapGalleryGroupQuery=c?a.vectorBasemapGalleryGroupQuery:a&&a.basemapGalleryGroupQuery?a.basemapGalleryGroupQuery:this._defaultBasemapGalleryGroupQuery;this._findArcGISBasemapsGroupContent(b)})):(this._basemapGalleryGroupQuery=
a&&a.basemapGalleryGroupQuery?a.basemapGalleryGroupQuery:this._defaultBasemapGalleryGroupQuery,this._findArcGISBasemapsGroupContent(b))}),error:g.hitch(this,function(a,b){this._basemapGalleryGroupQuery=this._defaultBasemapGalleryGroupQuery})})}},_findArcGISBasemapsGroupContent:function(a){var b=g.hitch(this,"_findArcGISBasemaps"),c=this.arcgisUrl+"/community/groups",d={};d.q=this._basemapGalleryGroupQuery;d.f="json";Q({url:c,content:d,callbackParamName:"callback",load:g.hitch(this,function(c,d){if(0<
c.results.length)b(c.results[0].id,a,c.results[0].sortField,c.results[0].sortOrder);else this.onError("esri.dijit.BasemapGallery: could not find group for basemaps.")}),error:g.hitch(this,function(a){this.onError("esri.dijit.BasemapGallery: could not find group for basemaps.")})})},_findArcGISBasemaps:function(a,b,c,d){var h=g.hitch(this,function(a,b,c,d){var h=this.arcgisUrl+"/search",k={};k.q="group:"+a+' AND type:"web map" NOT type:"web mapping application"';k.sortField=c;k.sortOrder="asc"===d?
"desc":"asc";k.num=100;k.f="json";Q({url:h,content:k,callbackParamName:"callback",load:g.hitch(this,function(a,c){if(0<a.results.length)b(a.results);else this.onError("esri.dijit.BasemapGallery: could not find group for basemaps.")}),error:g.hitch(this,function(a,b){this.onError("esri.dijit.BasemapGallery: could not find group for basemaps.")})})});c&&d?h(a,b,c,d):Q({url:this.arcgisUrl+"/community/groups/"+a,content:{f:"json"},callbackParamName:"callback",load:g.hitch(this,function(c,d){c.sortField?
h(a,b,c.sortField,c.sortOrder):h(a,b,"name","desc")}),error:g.hitch(this,function(c,d){h(a,b,"name","desc")})})},_handleArcGISBasemapsResponse:function(a){0<a.length&&(c.forEach(a,function(a,b){if(this.bingMapsKey||!this.bingMapsKey&&a.title&&-1===a.title.indexOf("Bing Maps")){b={};b.id=this._getUniqueId();b.title=a.title;b.thumbnailUrl="";if(a.thumbnail&&a.thumbnail.length&&(b.thumbnailUrl=this.arcgisUrl+"/content/items/"+a.id+"/info/"+a.thumbnail,h.id)){var c=h.id.findCredential(P.urlToObject(this.arcgisUrl).path);
c&&(b.thumbnailUrl+="?token\x3d"+c.token)}b.itemId=a.id;a=new y(b,this);this.basemaps.splice(0,0,a)}},this),this._finishStartup())},_refreshUI:function(){this._hasUI&&(v.empty(this.flowContainer),c.forEach(this.basemaps,function(a,b){a.id||(a.id="basemap_"+b);this.flowContainer.appendChild(this._buildNodeLayout(a))},this),v.create("br",{style:{clear:"both"}},this.flowContainer),this._markSelected(this._selectedBasemap))},_buildNodeLayout:function(a){var b=v.create("div",{id:"galleryNode_"+a.id,"class":"esriBasemapGalleryNode"}),
c=v.create("a",{href:"javascript:void(0);"},b);l.connect(c,"onclick",g.hitch(this,"_onNodeClick",a));var d=a.title||"";a.thumbnailUrl?v.create("img",{"class":"esriBasemapGalleryThumbnail",src:a.thumbnailUrl,title:d,alt:d},c):v.create("img",{"class":"esriBasemapGalleryThumbnail",src:f.toUrl("./images/transparent.gif"),title:d,alt:d},c);a=v.create("div",{"class":"esriBasemapGalleryLabelContainer"},b);v.create("span",{innerHTML:d,alt:d,title:d},a);return b},_onNodeClick:function(a,b){b.preventDefault();
this._markSelected(a);this.select(a.id)},_markSelected:function(b){b&&(c.forEach(a.query(".esriBasemapGallerySelectedNode",this.domNode),function(a){z.remove(a,"esriBasemapGallerySelectedNode")}),(b=e.byId("galleryNode_"+b.id))&&z.add(b,"esriBasemapGallerySelectedNode"))},_select:function(a){this._selectBasemapInProgress=!0;var b=this.get(a);b?(b.layers?this._getServiceInfos(b):(a=b.getLayers(this.arcgisUrl),g.isArray(a)?this._getServiceInfos(b):a.addCallback(g.hitch(this,function(a){this._getServiceInfos(b)}))),
this._markSelected(b)):this._selectBasemapInProgress=!1},_getServiceInfos:function(a){"https:"===location.protocol&&c.forEach(a.layers,function(a){if(this._isAgolService(a.url)||this._isHostedService(a.url))a.url=a.url.replace("http:","https:")},this);this._selectedBasemap=a;var b=[];c.forEach(a.layers,function(a){a.url&&0<a.url.length&&!a.isReference&&!a.type&&(a.deferredsPos=b.length,b.push(this._getServiceInfo(a.url)))},this);0<b.length?(new m(b)).addCallback(g.hitch(this,function(b){var d=null;
c.forEach(a.layers,function(a){if(0===a.deferredsPos||a.deferredsPos){a.serviceInfoResponse=b[a.deferredsPos][1];var c=a.serviceInfoResponse.fullExtent;c||(c=a.serviceInfoResponse.extent);d=d?d.union(new C(c)):new C(c)}},this);this.map.extent&&5>this._getIntersectionPercent(d,this.map.extent)&&this.map.setExtent(d,!0);this._switchBasemapLayers(a);this._updateReferenceLayer(a)})):(this._switchBasemapLayers(a),this._updateReferenceLayer(a))},_checkVTLSupport:function(){var a=new r;b("ie")?a.resolve(!1):
a.resolve(K.supported());return a},_switchBasemapLayers:function(a){var b=a.layers,d=!1,h,k,e;c.forEach(b,function(a){"VectorTileLayer"===a.type&&(d=!0)});if(d&&!0!==this._supportsVTL)this.onError("esri.dijit.BasemapGallery: Unable to switch basemap because layer type is not supported by your current browser version.");else if(0<this.map.layerIds.length&&0===this.map.getNumLevels()&&("OpenStreetMap"===b[0].type||b[0].type&&-1<b[0].type.indexOf("BingMaps")||"WebTiledLayer"===b[0].type||"VectorTileLayer"===
b[0].type))this.onError("esri.dijit.BasemapGallery: Unable to switch basemap because new basemap is a tiled service and cannot be loaded as a dynamic layer.");else{c.forEach(b,function(a){if(!a.isReference&&a.type&&-1<a.type.indexOf("BingMaps")&&!this.bingMapsKey)this.onError("esri.dijit.BasemapGallery: Invalid Bing Maps key.")},this);var u=0;c.forEach(b,function(a,c){if(!a.isReference){var d;if("OpenStreetMap"===a.type){if(0<this.map.layerIds.length&&0===this.map.getNumLevels()){this.onError("esri.dijit.BasemapGallery: Unable to switch basemap because new basemap is a tiled service and cannot be loaded as a dynamic layer.");
return}d=new J({id:"layer_osm",opacity:a.opacity})}else if(a.type&&-1<a.type.indexOf("BingMaps")){if(0<this.map.layerIds.length&&0===this.map.getNumLevels()){this.onError("esri.dijit.BasemapGallery: Unable to switch basemap because new basemap is a tiled service and cannot be loaded as a dynamic layer.");return}d=H.MAP_STYLE_AERIAL_WITH_LABELS;"BingMapsAerial"===a.type?d=H.MAP_STYLE_AERIAL:"BingMapsRoad"===a.type&&(d=H.MAP_STYLE_ROAD);d=new H({id:"layer_bing",bingMapsKey:this.bingMapsKey,mapStyle:d,
opacity:a.opacity})}else if("WebTiledLayer"===a.type){if(0<this.map.layerIds.length&&0===this.map.getNumLevels()){this.onError("esri.dijit.BasemapGallery: Unable to switch basemap because new basemap is a tiled service and cannot be loaded as a dynamic layer.");return}d=a.initialExtent||a.fullExtent;d=new B(a.templateUrl||a.url,{visible:a.visibility,opacity:a.opacity,copyright:a.copyright,fullExtent:a.fullExtent&&new C(a.fullExtent),initialExtent:d&&new C(d),subDomains:a.subDomains,tileInfo:a.tileInfo?
new L(a.tileInfo):null,tileServers:a.tileServers})}else if("VectorTileLayer"===a.type){d=new K(a.styleUrl,{visible:a.visibility,opacity:a.opacity});0===c&&1<b.length&&this._removeBasemapLayers();var f=this;l.connect(d,"onLoad",g.hitch(this,function(a,c,d){var h;if(f._sameSpatialReference(d.spatialReference,f.map.spatialReference))if(0<f.map.getNumLevels())if(h=f._sameTilingScheme(d.tileInfo,f.map.__tileInfo))0===c&&1===b.length&&f._removeBasemapLayers(),d._basemapGalleryLayerType="basemap",f.map.addLayer(d,
a);else f.onError("esri.dijit.BasemapGallery: Unable to switch basemap because new basemap has a different tiling scheme.");else f.onError("esri.dijit.BasemapGallery: Unable to switch basemap because new basemap is a tiled service and cannot be loaded as a dynamic layer.");else f.onError("esri.dijit.BasemapGallery: Unable to switch basemap because new basemap has a different spatial reference.")},u,c))}else if(a.serviceInfoResponse&&a.serviceInfoResponse.mapName){h=new R(a.serviceInfoResponse.spatialReference);
k=this._sameSpatialReference(h,this.map.spatialReference);if(this.map.spatialReference&&!k){this.onError("esri.dijit.BasemapGallery: Unable to switch basemap because new basemap has a different spatial reference.");return}if(!0===a.serviceInfoResponse.singleFusedMapCache&&0<this.map.getNumLevels()){if(e=this._sameTilingScheme(a.serviceInfoResponse.tileInfo,this.map.__tileInfo),!e){this.onError("esri.dijit.BasemapGallery: Unable to switch basemap because new basemap has a different tiling scheme.");
return}}else if(!0===a.serviceInfoResponse.singleFusedMapCache&&-1<a.serviceInfoResponse.capabilities.toLowerCase().indexOf("tilesonly")&&0===this.map.getNumLevels()){this.onError("esri.dijit.BasemapGallery: Unable to switch basemap because new basemap is a tiled service and cannot be loaded as a dynamic layer.");return}d=(0===this.map.layerIds.length||0<this.map.getNumLevels())&&!0===a.serviceInfoResponse.singleFusedMapCache?this._loadAsCached(a):this._loadAsDynamic(a)}else if(a.serviceInfoResponse&&
a.serviceInfoResponse.pixelSizeX){h=new R(a.serviceInfoResponse.spatialReference);k=this._sameSpatialReference(h,this.map.spatialReference);if(!k){this.onError("esri.dijit.BasemapGallery: Unable to switch basemap because new basemap has a different spatial reference.");return}if(!0===a.serviceInfoResponse.singleFusedMapCache&&0<this.map.getNumLevels()&&(e=this._sameTilingScheme(a.serviceInfoResponse.tileInfo,this.map.__tileInfo),!e)){this.onError("esri.dijit.BasemapGallery: Unable to switch basemap because new basemap has a different tiling scheme.");
return}a.serviceInfoResponse.singleFusedMapCache?d=new I(a.url,{resourceInfo:a.serviceInfoResponse,opacity:a.opacity,visible:a.visibility}):a.serviceInfoResponse.pixelSizeX?(d=new A,d.bandIds=a.bandIds,!a.bandIds&&a.serviceInfoResponse.bandCount&&3<parseInt(a.serviceInfoResponse.bandCount,10)&&(d.bandIds=[0,1,2]),d=new w(a.url,{resourceInfo:a.serviceInfoResponse,opacity:a.opacity,visible:a.visibility,imageServiceParameters:d})):(d=new x,d.format="png24",a.serviceInfoResponse.supportedImageFormatTypes&&
-1<a.serviceInfoResponse.supportedImageFormatTypes.indexOf("PNG32")&&(d.format="png32"),d=new G(a.url,{resourceInfo:a.serviceInfoResponse,opacity:a.opacity,visible:a.visibility,imageParameters:d}))}"VectorTileLayer"===a.type?u++:d&&(0===c&&this._removeBasemapLayers(),d._basemapGalleryLayerType="basemap",this.map.addLayer(d,u),u++)}},this);this._selectBasemapInProgress=!1;this.onSelectionChange()}},_removeBasemapLayers:function(){var a=this.map.layerIds,b=[];c.forEach(a,function(a){a=this.map.getLayer(a);
"basemap"===a._basemapGalleryLayerType&&b.push(a)},this);0===b.length&&0<a.length&&b.push(this.map.getLayer(a[0]));0<b.length&&c.forEach(b,function(a){this.map.removeLayer(a)},this)},_updateReferenceLayer:function(a){var b;this._removeReferenceLayer();for(b=0;b<a.layers.length;b++)!0===a.layers[b].isReference&&this._addReferenceLayer(a.layers[b])},_removeReferenceLayer:function(){var a;for(a=this.map.layerIds.length-1;0<=a;a--){var b=this.map.getLayer(this.map.layerIds[a]);"reference"===b._basemapGalleryLayerType&&
this.map.removeLayer(b)}},_addReferenceLayer:function(a){"VectorTileLayer"===a.type?this._handleReferenceServiceInfoResponse(a):this._getServiceInfo(a.url,g.hitch(this,"_handleReferenceServiceInfoResponse",a))},_handleReferenceServiceInfoResponse:function(a,b,c){var d;a.serviceInfoResponse=b;"VectorTileLayer"===a.type?d=new K(a.styleUrl,{visible:a.visibility,opacity:a.opacity}):b&&b.mapName?d=!0===b.singleFusedMapCache?this._loadAsCached(a):this._loadAsDynamic(a):b&&b.pixelSizeX&&(a.serviceInfoResponse.singleFusedMapCache?
d=new I(a.url,{resourceInfo:a.serviceInfoResponse,opacity:a.opacity,visible:a.visibility}):a.serviceInfoResponse.pixelSizeX?(c=new A,c.bandIds=a.bandIds,!a.bandIds&&b.bandCount&&3<parseInt(b.bandCount,10)&&(c.bandIds=[0,1,2]),d=new w(a.url,{resourceInfo:b,opacity:a.opacity,visible:a.visibility,imageServiceParameters:c})):(b=new x,b.format="png24",a.serviceInfoResponse.supportedImageFormatTypes&&-1<a.serviceInfoResponse.supportedImageFormatTypes.indexOf("PNG32")&&(b.format="png32"),b.transparent=!0,
d=new G(a.url,{resourceInfo:a.serviceInfoResponse,opacity:a.opacity,visible:a.visibility,imageParameters:b})));d&&(d._basemapGalleryLayerType="reference",d.attr("data-reference",!0),this.map.addLayer(d))},_getServiceInfo:function(a,b){return Q({url:a,content:{f:"json"},callbackParamName:"callback",load:function(a,c){b&&b(a,c)},error:g.hitch(this,function(a,b){this.onError("esri.dijit.BasemapGallery: service not accessible.")})})},_loadAsCached:function(a){var b=[];a.displayLevels||(b=c.map(a.serviceInfoResponse.tileInfo.lods,
function(a){return a.level}));var d=null;a.exclusionAreas&&a.exclusionAreas.length&&(d=[],c.forEach(a.exclusionAreas,function(a){d.push({minZoom:a.minZoom,maxZoom:a.maxZoom,minScale:a.minScale,maxScale:a.maxScale,geometry:new C(a.geometry)})}));return new I(a.url,{resourceInfo:a.serviceInfoResponse,opacity:a.opacity,visible:a.visibility,exclusionAreas:d,displayLevels:a.displayLevels||b})},_loadAsDynamic:function(a){var b=new G(a.url,{resourceInfo:a.serviceInfoResponse,opacity:a.opacity,visible:a.visibility});
a.visibleLayers&&b.setVisibleLayers(a.visibleLayers);return b},_getIntersectionPercent:function(a,b){return(a=b.intersects(a))?(a=a.getWidth()*a.getHeight(),b=b.getWidth()*b.getHeight(),a/b*100):0},_getIds:function(){var a=[];c.forEach(this.basemaps,function(b){a.push(b.id)},this);return a},_getUniqueId:function(){for(var a=","+this._getIds().toString()+",",b=0;;)if(-1<a.indexOf(",basemap_"+b+","))b++;else return"basemap_"+b},_isUniqueId:function(a){return-1===(","+this._getIds().toString()+",").indexOf(","+
a+",")?!0:!1},_isAgolService:function(a){return a?-1!==a.indexOf("/services.arcgisonline.com/")||-1!==a.indexOf("/server.arcgisonline.com/"):!1},_isHostedService:function(a){return a?-1!==a.indexOf(".arcgis.com/"):!1},_sameSpatialReference:function(a,b){return a&&b&&a.wkt==b.wkt&&(a.wkid===b.wkid||k.isDefined(a.latestWkid)&&a.latestWkid===b.wkid||k.isDefined(b.latestWkid)&&a.wkid===b.latestWkid||k.isDefined(a.latestWkid)&&a.latestWkid===b.latestWkid)||a&&b&&a.isWebMercator()&&b.isWebMercator()?!0:
!1},_sameTilingScheme:function(a,b){var c=this.map,c=c.width>c.height?c.width:c.height,d=!1,h=!1,k,e;for(k=0;k<a.lods.length;k++){var g=a.lods[k].scale;a.dpi!==b.dpi&&(g=a.lods[k].scale/a.dpi);for(e=0;e<b.lods.length;e++){var f=b.lods[e].scale;a.dpi!==b.dpi&&(f=b.lods[e].scale/b.dpi);if(Math.abs(f-g)/f<1/c)if(d){h=!0;break}else d=!0;if(f<g)break}if(h)break}return h||d&&(1===a.lods.length||1===b.lods.length)?!0:!1}});p("extend-esri")&&g.setObject("dijit.BasemapGallery",d,h);return d})},"esri/virtualearth/VETiledLayer":function(){define("dojo/_base/declare dojo/_base/lang dojo/_base/json dojo/_base/array dojo/_base/config dojo/has dojo/string dojo/_base/Deferred ../kernel ../urlUtils ../SpatialReference ../layers/TileInfo ../layers/TiledMapServiceLayer ../geometry/Extent ../request".split(" "),
function(f,d,c,l,g,a,b,p,q,r,m,e,v,z,n){f=f(v,{declaredClass:"esri.virtualearth.VETiledLayer",constructor:function(a){try{if(a=d.mixin({bingMapsKey:null,culture:"en-US"},a||{}),this.url=r.getProtocolForWebResource()+"//dev.virtualearth.net/REST/v1",this._url=r.urlToObject(this.url),this.spatialReference=new m({wkid:102100}),this.tileInfo=new e({rows:256,cols:256,dpi:96,origin:{x:-2.0037508342787E7,y:2.0037508342787E7},spatialReference:{wkid:102100},lods:[{level:1,resolution:78271.5169639999,scale:2.95828763795777E8},
{level:2,resolution:39135.7584820001,scale:1.47914381897889E8},{level:3,resolution:19567.8792409999,scale:7.3957190948944E7},{level:4,resolution:9783.93962049996,scale:3.6978595474472E7},{level:5,resolution:4891.96981024998,scale:1.8489297737236E7},{level:6,resolution:2445.98490512499,scale:9244648.868618},{level:7,resolution:1222.99245256249,scale:4622324.434309},{level:8,resolution:611.49622628138,scale:2311162.217155},{level:9,resolution:305.748113140558,scale:1155581.108577},{level:10,resolution:152.874056570411,
scale:577790.554289},{level:11,resolution:76.4370282850732,scale:288895.277144},{level:12,resolution:38.2185141425366,scale:144447.638572},{level:13,resolution:19.1092570712683,scale:72223.819286},{level:14,resolution:9.55462853563415,scale:36111.909643},{level:15,resolution:4.77731426794937,scale:18055.954822},{level:16,resolution:2.38865713397468,scale:9027.977411},{level:17,resolution:1.19432856685505,scale:4513.988705},{level:18,resolution:.597164283559817,scale:2256.994353},{level:19,resolution:.298582141647617,
scale:1128.497176},{level:20,resolution:.1492910708238085,scale:564.248588}]}),this.initialExtent=this.fullExtent=new z(-2.0037508342787E7,-2.003750834278E7,2.003750834278E7,2.0037508342787E7,new m({wkid:102100})),d.mixin(this,a),this.hasAttributionData=this.showAttribution,this._initLayer=d.hitch(this,this._initLayer),this._errorHandler=d.hitch(this,this._errorHandler),this._getTileInfo=d.hitch(this,this._getTileInfo),this.bingMapsKey)this._getTileInfo();else throw Error("BingMapsKey must be provided.");
}catch(h){throw this.onError(h),h;}},_unsetMap:function(a,b){this.inherited("_unsetMap",arguments)},_getTileInfo:function(){if(this.mapStyle){var a=this._url.path+"/Imagery/Metadata/"+this.mapStyle,b=window.location.protocol;if(this.bingMapsKey){var c=this.resourceInfo;!this.loaded&&c?this._initLayer(c):n({url:a,content:d.mixin({},{uriScheme:"https:"===b?"https":"http",key:this.bingMapsKey,ss:!0,c:this.culture,include:this.hasAttributionData?"imageryProviders":null}),callbackParamName:"jsonp",load:this._initLayer,
error:this._errorHandler})}}},_initLayer:function(a,d){if(200!==a.statusCode)d=Error(),d.code=a.statusCode,d.message=a.statusDescription,d.details=a.errorDetails,d.authenticationResultCode=a.authenticationResultCode,this.onError(d);else try{this.resourceInfo=c.toJson(a);var h=a.resourceSets[0].resources[0],e=h.imageUrl.replace("{","${");this.tileServers=l.map(h.imageUrlSubdomains,function(a){var c=r.getProtocolForWebResource();return b.substitute(e,{subdomain:a}).replace("http:",c)});this._tsLength=
this.tileServers.length;if(this.loaded)this.refresh(),this.onMapStyleChange();else{this.copyright=this.copyright||"\x26copy; 2017 Microsoft Corporation and its data suppliers";this.loaded=!0;this.onLoad(this);var g=this.loadCallback;g&&(delete this.loadCallback,g(this))}}catch(C){this.onError(C)}},getAttributionData:function(){var a=new p,b=c.fromJson(this.resourceInfo),k;this.hasAttributionData&&b&&(k=d.getObject("resourceSets.0.resources.0.imageryProviders",!1,b));k?a.callback({contributors:k}):
(b=Error("Layer does not have attribution data"),b.log=g.isDebug,a.errback(b));return a},getTileUrl:function(a,c,d){return b.substitute(this.tileServers[c%this._tsLength].replace(/\{/g,"${"),{quadkey:this._getQuadKey(a,c,d),culture:this.culture,token:this.bingMapsKey})},_getQuadKey:function(a,b,c){var d="",h,k;for(k=a;0<k;k--)a="0",h=1<<k-1,0!=(c&h)&&a++,0!=(b&h)&&(a++,a++),d+=a;return d},setMapStyle:function(a){this.mapStyle=a;this._getTileInfo()},setCulture:function(a){this.culture=a;this._getTileInfo()},
setBingMapsKey:function(a){this.bingMapsKey=a},onMapStyleChange:function(){}});d.mixin(f,{MAP_STYLE_AERIAL:"aerial",MAP_STYLE_AERIAL_WITH_LABELS:"aerialWithLabelsOnDemand",MAP_STYLE_ROAD:"roadOnDemand"});a("extend-esri")&&d.setObject("virtualearth.VETiledLayer",f,q);return f})},"esri/layers/WebTiledLayer":function(){define("dojo/_base/declare dojo/_base/lang dojo/_base/array dojo/_base/url dojo/sniff dojo/string ../config ../kernel ../request ../urlUtils ../SpatialReference ../geometry/Extent ./TiledMapServiceLayer ./TileInfo".split(" "),
function(f,d,c,l,g,a,b,p,q,r,m,e,v,z){function n(a,b){var c=[],h;if(a&&b&&(b.customLayerParameters||b.customParameters)){h=d.clone(b.customParameters||{});d.mixin(h,b.customLayerParameters||{});a=r.urlToObject(a);for(var e in a.query)h.hasOwnProperty(e)||c.push(e+"\x3d"+a.query[e]);a=a.path+(c.length?"?"+c.join("\x26"):"")}return a}f=f(v,{declaredClass:"esri.layers.WebTiledLayer",constructor:function(f,h){h||(h={});this.urlTemplate=f=n(f,h.wmtsInfo);var k=new e(-2.0037508342787E7,-2.003750834278E7,
2.003750834278E7,2.0037508342787E7,new m({wkid:102100})),u=new e(-2.0037508342787E7,-2.003750834278E7,2.003750834278E7,2.0037508342787E7,new m({wkid:102100}));this.initialExtent=h.initialExtent||k;this.fullExtent=h.fullExtent||u;this.tileInfo=h.tileInfo?h.tileInfo:new z({dpi:96,rows:256,cols:256,origin:{x:-2.0037508342787E7,y:2.0037508342787E7},spatialReference:{wkid:102100},lods:[{level:0,resolution:156543.033928,scale:5.91657527591555E8},{level:1,resolution:78271.5169639999,scale:2.95828763795777E8},
{level:2,resolution:39135.7584820001,scale:1.47914381897889E8},{level:3,resolution:19567.8792409999,scale:7.3957190948944E7},{level:4,resolution:9783.93962049996,scale:3.6978595474472E7},{level:5,resolution:4891.96981024998,scale:1.8489297737236E7},{level:6,resolution:2445.98490512499,scale:9244648.868618},{level:7,resolution:1222.99245256249,scale:4622324.434309},{level:8,resolution:611.49622628138,scale:2311162.217155},{level:9,resolution:305.748113140558,scale:1155581.108577},{level:10,resolution:152.874056570411,
scale:577790.554289},{level:11,resolution:76.4370282850732,scale:288895.277144},{level:12,resolution:38.2185141425366,scale:144447.638572},{level:13,resolution:19.1092570712683,scale:72223.819286},{level:14,resolution:9.55462853563415,scale:36111.909643},{level:15,resolution:4.77731426794937,scale:18055.954822},{level:16,resolution:2.38865713397468,scale:9027.977411},{level:17,resolution:1.19432856685505,scale:4513.988705},{level:18,resolution:.597164283559817,scale:2256.994353},{level:19,resolution:.298582141647617,
scale:1128.497176},{level:20,resolution:.14929107082380833,scale:564.248588},{level:21,resolution:.07464553541190416,scale:282.124294},{level:22,resolution:.03732276770595208,scale:141.062147},{level:23,resolution:.01866138385297604,scale:70.5310735}]});this.spatialReference=new m(this.tileInfo.spatialReference.toJson());this.copyright=h.copyright||"";var p=new l(f),k=p.scheme+"://"+p.authority+"/";this.urlPath=f.substring(k.length);this.tileServers=h.tileServers||[];-1===p.authority.indexOf("{subDomain}")&&
this.tileServers.push(k);if(h.subDomains&&0<h.subDomains.length&&1<p.authority.split(".").length){this.subDomains=h.subDomains;var C;c.forEach(h.subDomains,function(b){-1<p.authority.indexOf("${subDomain}")?C=p.scheme+"://"+a.substitute(p.authority,{subDomain:b})+"/":-1<p.authority.indexOf("{subDomain}")&&(C=p.scheme+"://"+p.authority.replace(/\{subDomain\}/gi,b)+"/");this.tileServers.push(C)},this)}this.tileServers=c.map(this.tileServers,function(a){"/"!==a.charAt(a.length-1)&&(a+="/");return a});
this._levelToLevelValue=[];var v=0;c.forEach(this.tileInfo.lods,function(a,b){this._levelToLevelValue[a.level]=a.levelValue||a.level;0===b&&(v=this._levelToLevelValue[a.level])},this);this._wmtsInfo=h.wmtsInfo;var H=d.hitch(this,function(){this.loaded=!0;this.onLoad(this)});g("chrome")?(f=this.getTileUrl(v,0,0),h=b.defaults.io,k="with-credentials"===h.useCors?r.canUseXhr(f,!0):-1,(h=-1<k?h.corsEnabledServers[k]:null)&&h.withCredentials?q({url:f,handleAs:"arraybuffer"}).addBoth(function(){H()}):H()):
H()},getTileUrl:function(b,c,d){b=this._levelToLevelValue[b];var h=this.tileServers[c%this.tileServers.length]+a.substitute(this.urlPath,{level:b,col:d,row:c}),h=h.replace(/\{level\}/gi,b).replace(/\{row\}/gi,c).replace(/\{col\}/gi,d),h=this._appendCustomLayerParameters(h),h=this.addTimestampToURL(h);return r.addProxy(h)},_appendCustomLayerParameters:function(a){var b,c;if(this._wmtsInfo&&(this._wmtsInfo.customLayerParameters||this._wmtsInfo.customParameters))for(b in c=d.clone(this._wmtsInfo.customParameters||
{}),d.mixin(c,this._wmtsInfo.customLayerParameters||{}),c)a+=(-1===a.indexOf("?")?"?":"\x26")+b+"\x3d"+encodeURIComponent(c[b]);return a}});g("extend-esri")&&d.setObject("layers.WebTiledLayer",f,p);return f})},"esri/layers/VectorTileLayer":function(){(function(){var f=function(){var c;try{c=window.WebGLRenderingContext}catch(q){c=!1}var d;try{for(var g=document.createElement("canvas"),a=["webgl","experimental-webgl","webkit-3d","moz-webgl"],b=null,f=0;f<a.length;++f){try{b=g.getContext(a[f])}catch(q){}if(b)break}d=
b}catch(q){d=!1}return c&&d?!0:!1}(),d=["dojo/_base/lang","dojo/has","dojo/Deferred","../sniff","./layer"];f&&d.push("./VectorTileLayerImpl");define(d,function(c,d,g,a,b,p){b=p?p:b.createSubclass({declaredClass:"esri.layers.VectorTileLayer",constructor:function(){var a=new g;a.reject(Error("esri.layers.VectorTileLayer is not supported"));a.promise.otherwise(c.hitch(this,function(a){this._errorHandler(a)}))}});b.ACCESS_TOKEN=null;b.supported=function(){return f};d("extend-esri")&&c.setObject("layers.VectorTileLayer",
b,a);return b})})()},"esri/layers/ImageServiceParameters":function(){define("dojo/_base/declare dojo/_base/lang dojo/_base/json dojo/has ../kernel ../lang".split(" "),function(f,d,c,l,g,a){f=f(null,{declaredClass:"esri.layers.ImageServiceParameters",extent:null,width:null,height:null,imageSpatialReference:null,format:null,interpolation:null,compressionQuality:null,bandIds:null,timeExtent:null,mosaicRule:null,renderingRule:null,renderer:null,noData:null,compressionTolerance:null,adjustAspectRatio:null,
lercVersion:null,toJson:function(b){var d=this.bbox||this.extent;b=(d=d&&b&&d._normalize(!0))?d.spatialReference.wkid||c.toJson(d.spatialReference.toJson()):null;var g=this.imageSpatialReference,d={bbox:d?d.xmin+","+d.ymin+","+d.xmax+","+d.ymax:null,bboxSR:b,size:null!==this.width&&null!==this.height?this.width+","+this.height:null,imageSR:g?g.wkid||c.toJson(g.toJson()):b,format:this.format,interpolation:this.interpolation,compressionQuality:this.compressionQuality,bandIds:this.bandIds?this.bandIds.join(","):
null,mosaicRule:this.mosaicRule?c.toJson(this.mosaicRule.toJson()):null,renderingRule:this.renderingRule?c.toJson(this.renderingRule.toJson()):null,renderer:this.renderer?c.toJson(this.renderer.toJson()):null,noData:this.noData,noDataInterpretation:this.noDataInterpretation,compressionTolerance:this.compressionTolerance,adjustAspectRatio:this.adjustAspectRatio,lercVersion:this.lercVersion};b=this.timeExtent;d.time=b?b.toJson().join(","):null;return a.filter(d,function(a){if(null!==a&&void 0!==a)return!0})}});
d.mixin(f,{INTERPOLATION_BILINEAR:"RSP_BilinearInterpolation",INTERPOLATION_CUBICCONVOLUTION:"RSP_CubicConvolution",INTERPOLATION_MAJORITY:"RSP_Majority",INTERPOLATION_NEARESTNEIGHBOR:"RSP_NearestNeighbor",NODATA_MATCH_ALL:"esriNoDataMatchAll",NODATA_MATCH_ANY:"esriNoDataMatchAny"});l("extend-esri")&&d.setObject("layers.ImageServiceParameters",f,g);return f})},"esri/dijit/Basemap":function(){define("dojo/_base/declare dojo/_base/array dojo/_base/lang dojo/has ../kernel ../request ./BasemapLayer".split(" "),
function(f,d,c,l,g,a,b){f=f(null,{declaredClass:"esri.dijit.Basemap",id:null,title:"",thumbnailUrl:null,layers:null,itemId:null,basemapGallery:null,constructor:function(a,b){a=a||{};a.layers||a.itemId||console.error("esri.dijit.Basemap: unable to find the 'layers' property in parameters");this.id=a.id;this.itemId=a.itemId;this.layers=a.layers;this.title=a.title||"";this.thumbnailUrl=a.thumbnailUrl;this.basemapGallery=b},getLayers:function(f){if(this.layers)return this.layers;if(this.itemId)return f=
a({url:(f||g.dijit._arcgisUrl)+"/content/items/"+this.itemId+"/data",content:{f:"json"},callbackParamName:"callback",error:c.hitch(this,function(a,b){if(this.basemapGallery)this.basemapGallery.onError("esri.dijit.Basemap: could not access basemap item.");else console.error("esri.dijit.Basemap: could not access basemap item.")})}),f.addCallback(c.hitch(this,function(a,c){if(a.baseMap)return this.layers=[],d.forEach(a.baseMap.baseMapLayers,function(a){this.layers.push(new b(a))},this),this.layers;if(this.basemapGallery)this.basemapGallery.onError("esri.dijit.Basemap: could not access basemap item.");
else console.error("esri.dijit.Basemap: could not access basemap item.");return[]})),f}});l("extend-esri")&&c.setObject("dijit.Basemap",f,g);return f})},"esri/dijit/BasemapLayer":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/has","../kernel"],function(f,d,c,l){f=f(null,{declaredClass:"esri.dijit.BasemapLayer",constructor:function(c){c=c||{};c.url||c.type||console.error("esri.dijit.BasemapLayer: unable to find the 'url' or 'type' property in parameters");this.url=c.url;this.type=
c.type;this.isReference=!0===c.isReference?!0:!1;this.opacity=c.opacity;this.visibleLayers=c.visibleLayers;this.displayLevels=c.displayLevels;this.exclusionAreas=c.exclusionAreas;this.bandIds=c.bandIds;this.templateUrl=c.templateUrl;this.copyright=c.copyright;this.subDomains=c.subDomains;this.fullExtent=c.fullExtent;this.initialExtent=c.initialExtent;this.tileInfo=c.tileInfo;this.tileServers=c.tileServers;this.styleUrl=c.styleUrl}});c("extend-esri")&&d.setObject("dijit.BasemapLayer",f,l);return f})},
"widgets/GridOverlay/setting/utils":function(){define("dojo/_base/lang dojo/Deferred dojo/json dojo/_base/array dojo/promise/all esri/SpatialReference jimu/portalUtils jimu/shared/basePortalUrlUtils esri/request dojo/text!./esri_tileinfo.json".split(" "),function(f,d,c,l,g,a,b,p,q,r){function m(a){if(!a)return null;var b=a.indexOf("?");return 0===a.search(/http|\/\//)&&-1!==b?a.slice(0,b).replace(/\/*$/g,""):a}function e(a){return a?p.removeProtocol(m(a)):""}function v(a){var c=new d;b.getPortalSelfInfo(a).then(f.hitch(this,
function(d){var h=d.basemapGalleryGroupQuery;!0===d.useVectorBasemaps&&d.vectorBasemapGalleryGroupQuery&&(h=d.vectorBasemapGalleryGroupQuery);n.getBasemapGalleryGroup(a,h).then(f.hitch(this,function(a){a.queryItems({start:1,num:100,f:"json",q:b.webMapQueryStr}).then(f.hitch(this,function(a){c.resolve(a)}),f.hitch(this,function(){c.reject()}))}),f.hitch(this,function(){c.reject()}))}));return c}function z(a){return q({url:a,content:{f:"json"},handleAs:"json",callbackParamName:"callback"}).then(function(a){return a},
function(){return null})}var n={},u=c.parse(r);n._loadPortalBaseMaps=function(a,b){var c=new d,h=[];v(a).then(function(a){l.forEach(a.results,function(a){var c=new d,k=e(a.thumbnailUrl);h.push(c);a.getItemData().then(function(d){n._getBasemapSpatialReference(a,d).then(f.hitch(this,function(h){var e=d.baseMap.baseMapLayers;n.isBasemapCompatibleWithMap(h,e,b).then(f.hitch(this,function(b){b?c.resolve({layers:e,title:a.title||d.baseMap.title,thumbnailUrl:k,spatialReference:h}):c.resolve({})}))}))})});
g(h).then(function(a){a=l.filter(a,function(a){return a&&a.title?!0:!1},this);c.resolve(a)})},function(a){c.reject(a)});return c};n.isBasemapCompatibleWithMap=function(b,c,e){var h=new d,k=e.spatialReference,f=e.width>e.height?e.width:e.height;if(!k||!c||0>=c.length||!b||!k.equals(new a(+b.wkid)))return h.resolve(!1),h;0===e.getNumLevels()?"OpenStreetMap"===c[0].layerType||c[0].layerType&&-1<c[0].layerType.indexOf("BingMaps")||"WebTiledLayer"===c[0].layerType||"VectorTileLayer"===c[0].layerType||
"ArcGISImageServiceVectorLayer"===c[0].layerType||"ArcGISTiledImageServiceLayer"===c[0].layerType?h.resolve(!1):h.resolve(!0):c[0].layerType&&0===c[0].layerType.indexOf("ArcGIS")&&c[0].url?z(c[0].url).then(function(a){(c[0].serviceInfoResponse=a)&&a.tileInfo?h.resolve(n.tilingSchemeCompatible(e.__tileInfo,a.tileInfo,f)):a&&a.capabilities&&(0<=a.capabilities.indexOf("Map")||a.capabilities.indexOf("Image"))?h.resolve(!0):h.resolve(!1)}):"WMS"===c[0].layerType?h.resolve(!0):n.isNoUrlLayerMap(c)||"VectorTileLayer"===
c[0].layerType?h.resolve(n.tilingSchemeCompatible(e.__tileInfo,u,f)):h.resolve(n.tilingSchemeCompatible(e.__tileInfo,c[0].tileInfo,f));return h};n.tilingSchemeCompatible=function(a,b,c){if(a&&b){var d=!1,h=!1,e,f;for(e=0;e<a.lods.length;e++){var k=a.lods[e].scale;a.dpi!==b.dpi&&(k=a.lods[e].scale/a.dpi);for(f=0;f<b.lods.length;f++){var g=b.lods[f].scale;a.dpi!==b.dpi&&(g=b.lods[f].scale/b.dpi);if(Math.abs(g-k)/g<1/c)if(d){h=!0;break}else d=!0;if(g<k)break}if(h)break}a=h?!0:!d||1!==a.lods.length&&
1!==b.lods.length?!1:!0;return a}return!0};n.isSameBasemapLayer=function(a,b){if(a.layerType&&b.layerType){if(a.layerType!==b.layerType)return!1;if("ArcGISImageServiceVectorLayer"===a.layerType||"ArcGISTiledImageServiceLayer"===a.layerType||"ArcGISTiledMapServiceLayer"===a.layerType||"ArcGISMapServiceLayer"===a.layerType||"ArcGISImageServiceLayer"===a.layerType)return a=e(a.url||""),b=e(b.url||""),a.toLowerCase()===b.toLowerCase();if("BingMapsAerial"===a.layerType||"BingMapsRoad"===a.layerType||"BingMapsHybrid"===
a.layerType||"OpenStreetMap"===a.layerType)return!0;if("VectorTileLayer"===a.layerType)return a=e(a.styleUrl||""),b=e(b.styleUrl||""),a.toLowerCase()===b.toLowerCase();if("WMS"===a.layerType)return a=e(a.mapUrl||""),b=e(b.mapUrl||""),a.toLowerCase()===b.toLowerCase();if("WebTiledLayer"===a.layerType){if(a.templateUrl&&b.templateUrl)return a=e(a.templateUrl||""),b=e(b.templateUrl||""),a.toLowerCase()===b.toLowerCase();if(a.wmtsInfo&&b.wmtsInfo)return a=e(a.wmtsInfo.url||""),b=e(b.wmtsInfo.url||""),
a.toLowerCase()===b.toLowerCase()}}else return a=e(a.url||""),b=e(b.url||""),a.toLowerCase()===b.toLowerCase();return!1};n.compareSameBasemapByOrder=function(a,b){a=a.layers;b=b.layers;if(a.length!==b.length)return!1;for(var c=0;c<a.length;c++)if(!n.isSameBasemapLayer(a[c],b[c]))return!1;return!0};n.isBingMap=function(a){if(!a||!a.layers)return!1;for(var b=0;b<a.layers.length;b++)if("BingMapsAerial"===a.layers[b].type||"BingMapsRoad"===a.layers[b].type||"BingMapsHybrid"===a.layers[b].type)return!0;
return!1};n.isNoUrlLayerMap=function(a){for(var b=0;b<a.length;b++)if("BingMapsAerial"===a[b].type||"BingMapsRoad"===a[b].type||"BingMapsHybrid"===a[b].type||"OpenStreetMap"===a[b].type)return!0;return!1};n.getToken=function(a){a=b.getPortal(a);a.updateCredential();return a.credential?"?token\x3d"+a.credential.token:""};n.removeUrlQuery=function(a){return m(a)};n.getStanderdUrl=function(a){return e(a)};n.getUniqueTitle=function(a,b){if(!b||0===b.length)return a;b=l.filter(b,function(b){return b===
a?!0:0===b.indexOf(a)?(b=b.substr(a.length+1),!isNaN(+b)):!1});if(0===b.length)return a;b=l.map(b,function(b){return b===a?0:+b.substr(a.length+1)});b=b.sort();return a+" "+(b[b.length-1]+1)};n.getBasemapInfo=function(c,d){var e,f;return b.getPortal(c).getItemById(d).then(function(a){e=a;return a.getItemData()}).then(function(a){f=a;return n._getBasemapSpatialReference(e,a)}).then(function(b){return{thumbnailUrl:e.thumbnailUrl,title:e.title||f.baseMap.title,layers:f.baseMap.baseMapLayers,spatialReference:new a(b)}})};
n.getBasemapGalleryGroup=function(a,c){var e=new d;a=b.getPortal(a);var g=c.indexOf("esri_");if(0<=g){var g=c.slice(g,g+7),h="esri_"+dojoConfig.locale.slice(0,2);c=c.replace(g,h)}a.queryGroups({f:"json",q:c}).then(f.hitch(this,function(a){0<a.results.length?e.resolve(a.results[0]):e.reject()}),f.hitch(this,function(){e.reject()}));return e};n._getBasemapSpatialReference=function(a,b){var c=null,e=!1,g=new d;if(a.owner&&0===a.owner.indexOf("esri_")||n.isNoUrlLayerMap(b.baseMap.baseMapLayers))c={wkid:"102100"};
else if(b.spatialReference||a.spatialReference)c=b.spatialReference||a.spatialReference;else if(b.baseMap.baseMapLayers&&b.baseMap.baseMapLayers[0])if(a=b.baseMap.baseMapLayers[0],a.url&&0<a.url.indexOf("rest/services"))e=!0,z(b.baseMap.baseMapLayers[0].url).then(f.hitch(this,function(a){a&&a.spatialReference&&(c=a.spatialReference);g.resolve(c)}),function(a){console.error(a);g.resolve(null)});else if("VectorTileLayer"===a.layerType)c={wkid:"102100"};else if(b=a.fullExtent||a.initialExtent)c=b.spatialReference;
e||g.resolve(c);return g};return n})},"dijit/TitlePane":function(){define("dojo/_base/array dojo/_base/declare dojo/dom dojo/dom-attr dojo/dom-class dojo/dom-geometry dojo/fx dojo/has dojo/_base/kernel dojo/keys ./_CssStateMixin ./_TemplatedMixin ./layout/ContentPane dojo/text!./templates/TitlePane.html ./_base/manager ./a11yclick".split(" "),function(f,d,c,l,g,a,b,p,q,r,m,e,v,z,n){d=d("dijit.TitlePane",[v,e,m],{title:"",_setTitleAttr:{node:"titleNode",type:"innerHTML"},open:!0,toggleable:!0,tabIndex:"0",
duration:n.defaultDuration,baseClass:"dijitTitlePane",templateString:z,doLayout:!1,_setTooltipAttr:{node:"focusNode",type:"attribute",attribute:"title"},buildRendering:function(){this.inherited(arguments);c.setSelectable(this.titleNode,!1)},postCreate:function(){this.inherited(arguments);this.toggleable&&this._trackMouseState(this.titleBarNode,this.baseClass+"Title");var a=this.hideNode,c=this.wipeNode;this._wipeIn=b.wipeIn({node:c,duration:this.duration,beforeBegin:function(){a.style.display=""}});
this._wipeOut=b.wipeOut({node:c,duration:this.duration,onEnd:function(){a.style.display="none"}})},_setOpenAttr:function(a,b){f.forEach([this._wipeIn,this._wipeOut],function(a){a&&"playing"==a.status()&&a.stop()});b?this[a?"_wipeIn":"_wipeOut"].play():this.hideNode.style.display=this.wipeNode.style.display=a?"":"none";if(this._started)if(a)this._onShow();else this.onHide();this.containerNode.setAttribute("aria-hidden",a?"false":"true");this.focusNode.setAttribute("aria-pressed",a?"true":"false");
this._set("open",a);this._setCss()},_setToggleableAttr:function(a){this.focusNode.setAttribute("role",a?"button":"heading");a?(this.focusNode.setAttribute("aria-controls",this.id+"_pane"),this.focusNode.setAttribute("tabIndex",this.tabIndex),this.focusNode.setAttribute("aria-pressed",this.open)):(l.remove(this.focusNode,"aria-controls"),l.remove(this.focusNode,"tabIndex"),l.remove(this.focusNode,"aria-pressed"));this._set("toggleable",a);this._setCss()},_setContentAttr:function(b){this.open&&this._wipeOut&&
"playing"!=this._wipeOut.status()?(this._wipeIn&&"playing"==this._wipeIn.status()&&this._wipeIn.stop(),a.setMarginBox(this.wipeNode,{h:a.getMarginBox(this.wipeNode).h}),this.inherited(arguments),this._wipeIn?this._wipeIn.play():this.hideNode.style.display=""):this.inherited(arguments)},toggle:function(){this._setOpenAttr(!this.open,!0)},_setCss:function(){var a=this.titleBarNode||this.focusNode,b=this._titleBarClass;this._titleBarClass=this.baseClass+"Title"+(this.toggleable?"":"Fixed")+(this.open?
"Open":"Closed");g.replace(a,this._titleBarClass,b||"");g.replace(a,this._titleBarClass.replace("TitlePaneTitle",""),(b||"").replace("TitlePaneTitle",""));this.arrowNodeInner.innerHTML=this.open?"-":"+"},_onTitleKey:function(a){a.keyCode==r.DOWN_ARROW&&this.open&&(this.containerNode.focus(),a.preventDefault())},_onTitleClick:function(){this.toggleable&&this.toggle()},setTitle:function(a){q.deprecated("dijit.TitlePane.setTitle() is deprecated.  Use set('title', ...) instead.","","2.0");this.set("title",
a)}});p("dojo-bidi")&&d.extend({_setTitleAttr:function(a){this._set("title",a);this.titleNode.innerHTML=a;this.applyTextDir(this.titleNode)},_setTooltipAttr:function(a){this._set("tooltip",a);this.textDir&&(a=this.enforceTextDirWithUcc(null,a));l.set(this.focusNode,"title",a)},_setTextDirAttr:function(a){this._created&&this.textDir!=a&&(this._set("textDir",a),this.set("title",this.title),this.set("tooltip",this.tooltip))}});return d})},"widgets/GridOverlay/setting/_build-generate_module":function(){define(["dojo/text!./Setting.html",
"dojo/text!./css/style.css","dojo/i18n!./nls/strings"],function(){})},"url:esri/dijit/templates/BasemapGallery.html":'\x3cdiv class\x3d"esriBasemapGallery"\x3e\r\n  \x3cdiv dojoAttachPoint\x3d"flowContainer"\x3e\r\n  \x3c/div\x3e\r\n\x3c/div\x3e',"url:widgets/GridOverlay/setting/esri_tileinfo.json":'{\r\n  "rows": 256,\r\n  "cols": 256,\r\n  "dpi": 96,\r\n  "compressionQuality": 75,\r\n  "origin": {\r\n   "x": -2.0037508342787E7,\r\n   "y": 2.0037508342787E7\r\n  },\r\n  "spatialReference": {\r\n   "wkid": 102100,\r\n   "latestWkid": 3857\r\n  },\r\n  "lods": [\r\n   {\r\n    "level": 0,\r\n    "resolution": 156543.03392800014,\r\n    "scale": 5.91657527591555E8\r\n   },\r\n   {\r\n    "level": 1,\r\n    "resolution": 78271.51696399994,\r\n    "scale": 2.95828763795777E8\r\n   },\r\n   {\r\n    "level": 2,\r\n    "resolution": 39135.75848200009,\r\n    "scale": 1.47914381897889E8\r\n   },\r\n   {\r\n    "level": 3,\r\n    "resolution": 19567.87924099992,\r\n    "scale": 7.3957190948944E7\r\n   },\r\n   {\r\n    "level": 4,\r\n    "resolution": 9783.93962049996,\r\n    "scale": 3.6978595474472E7\r\n   },\r\n   {\r\n    "level": 5,\r\n    "resolution": 4891.96981024998,\r\n    "scale": 1.8489297737236E7\r\n   },\r\n   {\r\n    "level": 6,\r\n    "resolution": 2445.98490512499,\r\n    "scale": 9244648.868618\r\n   },\r\n   {\r\n    "level": 7,\r\n    "resolution": 1222.992452562495,\r\n    "scale": 4622324.434309\r\n   },\r\n   {\r\n    "level": 8,\r\n    "resolution": 611.4962262813797,\r\n    "scale": 2311162.217155\r\n   },\r\n   {\r\n    "level": 9,\r\n    "resolution": 305.74811314055756,\r\n    "scale": 1155581.108577\r\n   },\r\n   {\r\n    "level": 10,\r\n    "resolution": 152.87405657041106,\r\n    "scale": 577790.554289\r\n   },\r\n   {\r\n    "level": 11,\r\n    "resolution": 76.43702828507324,\r\n    "scale": 288895.277144\r\n   },\r\n   {\r\n    "level": 12,\r\n    "resolution": 38.21851414253662,\r\n    "scale": 144447.638572\r\n   },\r\n   {\r\n    "level": 13,\r\n    "resolution": 19.10925707126831,\r\n    "scale": 72223.819286\r\n   },\r\n   {\r\n    "level": 14,\r\n    "resolution": 9.554628535634155,\r\n    "scale": 36111.909643\r\n   },\r\n   {\r\n    "level": 15,\r\n    "resolution": 4.77731426794937,\r\n    "scale": 18055.954822\r\n   },\r\n   {\r\n    "level": 16,\r\n    "resolution": 2.388657133974685,\r\n    "scale": 9027.977411\r\n   },\r\n   {\r\n    "level": 17,\r\n    "resolution": 1.1943285668550503,\r\n    "scale": 4513.988705\r\n   },\r\n   {\r\n    "level": 18,\r\n    "resolution": 0.5971642835598172,\r\n    "scale": 2256.994353\r\n   },\r\n   {\r\n    "level": 19,\r\n    "resolution": 0.29858214164761665,\r\n    "scale": 1128.497176\r\n   },\r\n   {\r\n    "level": 20,\r\n    "resolution": 0.14929107082380833,\r\n    "scale": 564.248588\r\n   },\r\n   {\r\n    "level": 21,\r\n    "resolution": 0.07464553541190416,\r\n    "scale": 282.124294\r\n   },\r\n   {\r\n    "level": 22,\r\n    "resolution": 0.03732276770595208,\r\n    "scale": 141.062147\r\n   },\r\n   {\r\n    "level": 23,\r\n    "resolution": 0.01866138385297604,\r\n    "scale": 70.5310735\r\n   }\r\n  ]\r\n }',
"url:dijit/templates/TitlePane.html":'\x3cdiv\x3e\r\n\t\x3cdiv data-dojo-attach-event\x3d"ondijitclick:_onTitleClick, onkeydown:_onTitleKey"\r\n\t\t\tclass\x3d"dijitTitlePaneTitle" data-dojo-attach-point\x3d"titleBarNode" id\x3d"${id}_titleBarNode"\x3e\r\n\t\t\x3cdiv class\x3d"dijitTitlePaneTitleFocus" data-dojo-attach-point\x3d"focusNode"\x3e\r\n\t\t\t\x3cspan data-dojo-attach-point\x3d"arrowNode" class\x3d"dijitInline dijitArrowNode" role\x3d"presentation"\x3e\x3c/span\r\n\t\t\t\x3e\x3cspan data-dojo-attach-point\x3d"arrowNodeInner" class\x3d"dijitArrowNodeInner"\x3e\x3c/span\r\n\t\t\t\x3e\x3cspan data-dojo-attach-point\x3d"titleNode" class\x3d"dijitTitlePaneTextNode"\x3e\x3c/span\x3e\r\n\t\t\x3c/div\x3e\r\n\t\x3c/div\x3e\r\n\t\x3cdiv class\x3d"dijitTitlePaneContentOuter" data-dojo-attach-point\x3d"hideNode" role\x3d"presentation"\x3e\r\n\t\t\x3cdiv class\x3d"dijitReset" data-dojo-attach-point\x3d"wipeNode" role\x3d"presentation"\x3e\r\n\t\t\t\x3cdiv class\x3d"dijitTitlePaneContentInner" data-dojo-attach-point\x3d"containerNode" role\x3d"region" id\x3d"${id}_pane" aria-labelledby\x3d"${id}_titleBarNode"\x3e\r\n\t\t\t\t\x3c!-- nested divs because wipeIn()/wipeOut() doesn\'t work right on node w/padding etc.  Put padding on inner div. --\x3e\r\n\t\t\t\x3c/div\x3e\r\n\t\t\x3c/div\x3e\r\n\t\x3c/div\x3e\r\n\x3c/div\x3e\r\n',
"url:widgets/GridOverlay/setting/Setting.html":'\x3cdiv style\x3d"width:100%;height:100%;overflow:hidden;" class\x3d"nihilo"\x3e\r\n  \x3cdiv class\x3d\'neo\'\x3e\r\n    \x3ctable class\x3d"settings-section"\x3e\r\n      \x3ctbody\x3e\r\n        \x3ctr\x3e\r\n          \x3ctd class\x3d\'sectionTitle\' colspan\x3d"2"\x3e${nls.minIntSpacingLabel}\x3c/td\x3e\r\n        \x3c/tr\x3e\r\n        \x3ctr\x3e\r\n          \x3ctd\x3e\r\n            \x3cdiv class\x3d\'grid-overlay-setting-slider\' data-dojo-attach-point\x3d"minIntervalSpacing" data-dojo-type\x3d"dijit/form/HorizontalSlider"\r\n              data-dojo-props\x3d"value:100, minimum: 50, maximum:250, discreteValues:41, intermediateChanges:true, showButtons:false"\x3e\x3c/div\x3e\r\n          \x3c/td\x3e\r\n          \x3ctd\x3e\r\n            \x3cdiv class\x3d"grid-overlay-setting-slider-value"\x3e\x3cspan class\x3d\'sliderValue\' data-dojo-attach-point\x3d"minIntervalSpacingVal"\x3epx\x3c/span\x3e\r\n            \x3c/div\x3e\r\n          \x3c/td\x3e\r\n        \x3c/tr\x3e\r\n        \x3ctr\x3e\r\n          \x3ctd class\x3d\'sectionTitle\' colspan\x3d"2"\x3e${nls.lineOpacityLabel}\x3c/td\x3e\r\n        \x3c/tr\x3e\r\n        \x3ctr\x3e\r\n          \x3ctd\x3e\r\n            \x3cdiv class\x3d\'grid-overlay-setting-slider\' data-dojo-attach-point\x3d"lineOpacity" data-dojo-type\x3d"dijit/form/HorizontalSlider"\r\n              data-dojo-props\x3d"value:100, minimum: 0.05, maximum:1, discreteValues:20, intermediateChanges:true, showButtons:false"\x3e\x3c/div\x3e\r\n          \x3c/td\x3e\r\n          \x3ctd\x3e\r\n            \x3cdiv class\x3d"grid-overlay-setting-slider-value"\x3e\x3cspan class\x3d\'sliderValue\' data-dojo-attach-point\x3d"lineOpacityVal"\x3e%\x3c/span\x3e\x3c/div\x3e\r\n          \x3c/td\x3e\r\n        \x3c/tr\x3e\r\n        \x3ctr\x3e\r\n          \x3ctd class\x3d\'sectionTitle\'\x3e${nls.labelOpacityLabel}\x3c/td\x3e\r\n        \x3c/tr\x3e\r\n        \x3ctr\x3e\r\n          \x3ctd\x3e\r\n            \x3cdiv class\x3d\'grid-overlay-setting-slider\' data-dojo-attach-point\x3d"labelOpacity" data-dojo-type\x3d"dijit/form/HorizontalSlider"\r\n              data-dojo-props\x3d"value:100, minimum: 0.05, maximum:1, discreteValues:20, intermediateChanges:true, showButtons:false"\x3e\x3c/div\x3e\r\n          \x3c/td\x3e\r\n          \x3ctd\x3e\r\n            \x3cdiv class\x3d"grid-overlay-setting-slider-value"\x3e\x3cspan class\x3d\'sliderValue\' data-dojo-attach-point\x3d"labelOpacityVal"\x3e%\x3c/span\x3e\x3c/div\x3e\r\n          \x3c/td\x3e\r\n        \x3c/tr\x3e\r\n        \x3ctr\x3e\r\n          \x3ctd class\x3d\'sectionTitle\'\x3e${nls.verticalLineLabels}\x3c/td\x3e\r\n        \x3c/tr\x3e\r\n        \x3ctr\x3e\r\n          \x3ctd class\x3d\'verticalLineSection\'\x3e\r\n            \x3cdiv class\x3d\'image-labels horizontalLabel\' title\x3d\'${nls.horizontalLabel}\' data-dojo-attach-point\x3d"horizontalLabels"\x3e\x3c/div\x3e\r\n            \x3cdiv class\x3d\'image-labels verticalLabel\' title\x3d\'${nls.verticalLabel}\' data-dojo-attach-point\x3d"verticalLabels"\x3e\x3c/div\x3e\r\n          \x3c/td\x3e\r\n        \x3c/tr\x3e\r\n      \x3c/tbody\x3e\r\n    \x3c/table\x3e\r\n    \x3cdiv class\x3d"grid-overlay-setting-style"\x3e\r\n      \x3cdiv class\x3d\'sectionTitle\'\x3e${nls.styleHeaderLabel}\x3c/div\x3e\r\n      \x3ctable\x3e\r\n        \x3cthead\x3e\r\n          \x3ctr\x3e\r\n            \x3cth\x3e${nls.indexHeaderLabel}\x3c/th\x3e\r\n            \x3cth\x3e${nls.colorHeaderLabel}\x3c/th\x3e\r\n            \x3cth\x3e${nls.fontSizeHeaderLabel}\x3c/th\x3e\r\n            \x3cth\x3e${nls.lineWidthHeaderLabel}\x3c/th\x3e\r\n          \x3c/tr\x3e\r\n        \x3c/thead\x3e\r\n        \x3ctbody\x3e\r\n          \x3ctr\x3e\r\n            \x3ctd\x3e${nls.gzd}\x3c/td\x3e\r\n            \x3ctd\x3e\r\n              \x3cdiv data-dojo-attach-point\x3d"colorPicker0" class\x3d"grid-overlay-setting-color-picker" data-dojo-type\x3d"jimu/dijit/ColorPicker"\x3e\x3c/div\x3e\r\n            \x3c/td\x3e\r\n            \x3ctd\x3e\r\n              \x3cdiv class\x3d"font-size" data-dojo-attach-point\x3d"fontSize0" data-dojo-type\x3d"dijit/form/NumberSpinner"\r\n                data-dojo-props\x3d"intermediateChanges:true, constraints:{min:5,max:72}, value:15"\x3e\x3c/div\x3e\r\n            \x3c/td\x3e\r\n            \x3ctd\x3e\r\n              \x3cdiv class\x3d"font-size" data-dojo-attach-point\x3d"lineSize0" data-dojo-type\x3d"dijit/form/NumberSpinner"\r\n                data-dojo-props\x3d"intermediateChanges:true, constraints:{min:1,max:10}, value:2"\x3e\x3c/div\x3e\r\n            \x3c/td\x3e\r\n          \x3c/tr\x3e\r\n          \x3ctr\x3e\r\n            \x3ctd\x3e${nls.gsid}\x3c/td\x3e\r\n            \x3ctd\x3e\r\n              \x3cdiv data-dojo-attach-point\x3d"colorPicker1" class\x3d"grid-overlay-setting-color-picker" data-dojo-type\x3d"jimu/dijit/ColorPicker"\x3e\x3c/div\x3e\r\n            \x3c/td\x3e\r\n            \x3ctd\x3e\r\n              \x3cdiv class\x3d"font-size" data-dojo-attach-point\x3d"fontSize1" data-dojo-type\x3d"dijit/form/NumberSpinner"\r\n                data-dojo-props\x3d"intermediateChanges:true, constraints:{min:5,max:72}, value:15"\x3e\x3c/div\x3e\r\n            \x3c/td\x3e\r\n            \x3ctd\x3e\r\n              \x3cdiv class\x3d"font-size" data-dojo-attach-point\x3d"lineSize1" data-dojo-type\x3d"dijit/form/NumberSpinner"\r\n                data-dojo-props\x3d"intermediateChanges:true, constraints:{min:1,max:10}, value:2"\x3e\x3c/div\x3e\r\n            \x3c/td\x3e\r\n          \x3c/tr\x3e\r\n          \x3ctr\x3e\r\n            \x3ctd\x3e${nls.grid10k}\x3c/td\x3e\r\n            \x3ctd\x3e\r\n              \x3cdiv data-dojo-attach-point\x3d"colorPicker2" class\x3d"grid-overlay-setting-color-picker" data-dojo-type\x3d"jimu/dijit/ColorPicker"\x3e\x3c/div\x3e\r\n            \x3c/td\x3e\r\n            \x3ctd\x3e\r\n              \x3cdiv class\x3d"font-size" data-dojo-attach-point\x3d"fontSize2" data-dojo-type\x3d"dijit/form/NumberSpinner"\r\n                data-dojo-props\x3d"intermediateChanges:true, constraints:{min:5,max:72}, value:15"\x3e\x3c/div\x3e\r\n            \x3c/td\x3e\r\n            \x3ctd\x3e\r\n              \x3cdiv class\x3d"font-size" data-dojo-attach-point\x3d"lineSize2" data-dojo-type\x3d"dijit/form/NumberSpinner"\r\n                data-dojo-props\x3d"intermediateChanges:true, constraints:{min:1,max:10}, value:2"\x3e\x3c/div\x3e\r\n            \x3c/td\x3e\r\n          \x3c/tr\x3e\r\n          \x3ctr\x3e\r\n            \x3ctd\x3e${nls.grid1k}\x3c/td\x3e\r\n            \x3ctd\x3e\r\n              \x3cdiv data-dojo-attach-point\x3d"colorPicker3" class\x3d"grid-overlay-setting-color-picker" data-dojo-type\x3d"jimu/dijit/ColorPicker"\x3e\x3c/div\x3e\r\n            \x3c/td\x3e\r\n            \x3ctd\x3e\r\n              \x3cdiv class\x3d"font-size" data-dojo-attach-point\x3d"fontSize3" data-dojo-type\x3d"dijit/form/NumberSpinner"\r\n                data-dojo-props\x3d"intermediateChanges:true, constraints:{min:5,max:72}, value:15"\x3e\x3c/div\x3e\r\n            \x3c/td\x3e\r\n            \x3ctd\x3e\r\n              \x3cdiv class\x3d"font-size" data-dojo-attach-point\x3d"lineSize3" data-dojo-type\x3d"dijit/form/NumberSpinner"\r\n                data-dojo-props\x3d"intermediateChanges:true, constraints:{min:1,max:10}, value:2"\x3e\x3c/div\x3e\r\n            \x3c/td\x3e\r\n          \x3c/tr\x3e\r\n          \x3ctr\x3e\r\n            \x3ctd\x3e${nls.grid100m}\x3c/td\x3e\r\n            \x3ctd\x3e\r\n              \x3cdiv data-dojo-attach-point\x3d"colorPicker4" class\x3d"grid-overlay-setting-color-picker" data-dojo-type\x3d"jimu/dijit/ColorPicker"\x3e\x3c/div\x3e\r\n            \x3c/td\x3e\r\n            \x3ctd\x3e\r\n              \x3cdiv class\x3d"font-size" data-dojo-attach-point\x3d"fontSize4" data-dojo-type\x3d"dijit/form/NumberSpinner"\r\n                data-dojo-props\x3d"intermediateChanges:true, constraints:{min:5,max:72}, value:15"\x3e\x3c/div\x3e\r\n            \x3c/td\x3e\r\n            \x3ctd\x3e\r\n              \x3cdiv class\x3d"font-size" data-dojo-attach-point\x3d"lineSize4" data-dojo-type\x3d"dijit/form/NumberSpinner"\r\n                data-dojo-props\x3d"intermediateChanges:true, constraints:{min:1,max:10}, value:2"\x3e\x3c/div\x3e\r\n            \x3c/td\x3e\r\n          \x3c/tr\x3e\r\n          \x3ctr\x3e\r\n            \x3ctd\x3e${nls.grid10m}\x3c/td\x3e\r\n            \x3ctd\x3e\r\n              \x3cdiv data-dojo-attach-point\x3d"colorPicker5" class\x3d"grid-overlay-setting-color-picker" data-dojo-type\x3d"jimu/dijit/ColorPicker"\x3e\x3c/div\x3e\r\n            \x3c/td\x3e\r\n            \x3ctd\x3e\r\n              \x3cdiv class\x3d"font-size" data-dojo-attach-point\x3d"fontSize5" data-dojo-type\x3d"dijit/form/NumberSpinner"\r\n                data-dojo-props\x3d"intermediateChanges:true, constraints:{min:5,max:72}, value:15"\x3e\x3c/div\x3e\r\n            \x3c/td\x3e\r\n            \x3ctd\x3e\r\n              \x3cdiv class\x3d"font-size" data-dojo-attach-point\x3d"lineSize5" data-dojo-type\x3d"dijit/form/NumberSpinner"\r\n                data-dojo-props\x3d"intermediateChanges:true, constraints:{min:1,max:10}, value:2"\x3e\x3c/div\x3e\r\n            \x3c/td\x3e\r\n          \x3c/tr\x3e\r\n        \x3c/tbody\x3e\r\n      \x3c/table\x3e\r\n    \x3c/div\x3e\r\n  \x3c/div\x3e\r\n  \x3cdiv data-dojo-attach-point\x3d"sampleMap" class\x3d"grid-overlay-setting-style-map"\x3e\r\n    \x3cdiv class\x3d"basemapButton"\x3e\r\n      \x3cdiv data-dojo-attach-point\x3d"switchBasemapBtn" data-dojo-type\x3d"dijit/TitlePane" data-dojo-props\x3d"open:false"\x3e\r\n        \x3cdiv data-dojo-type\x3d"dijit/layout/ContentPane" style\x3d"width:400px; height:280px; overflow:auto;"\x3e\r\n          \x3cdiv data-dojo-attach-point\x3d"basemapGalleryWidget"\x3e\x3c/div\x3e\r\n        \x3c/div\x3e\r\n      \x3c/div\x3e\r\n    \x3c/div\x3e\r\n  \x3c/div\x3e\r\n\x3c/div\x3e',
"url:widgets/GridOverlay/setting/css/style.css":'.grid-overlay-setting .grid-overlay-setting-style {padding-top: 10px;}.grid-overlay-setting .grid-overlay-setting-style table {color: #333333; width: 300px; border-collapse: collapse;}.grid-overlay-setting .grid-overlay-setting-style th {font-size: 13.5px; text-align: center; color: #000000;}.grid-overlay-setting .grid-overlay-setting-style tr {background-color: #ffffff;}.grid-overlay-setting .grid-overlay-setting-style td {padding: 5px;}.grid-overlay-setting .settings-section {padding-bottom: 0px;}.grid-overlay-setting .settings-section tr {vertical-align: middle;}.grid-overlay-setting .settings-section\x3etbody\x3etr\x3etd:first-child {width: 200px;}.grid-overlay-setting .settings-section\x3etbody\x3etr:nth-child(2n) {padding-left: 5px; font-size: 12px; letter-spacing: 0.33px;}.grid-overlay-setting .settings-section\x3etbody\x3etr:nth-child(2n+1) {width: 100px; font-size: 14px; letter-spacing: 0.39px;}.grid-overlay-setting .font-size,.line-size {width: 68px; font-style: normal;}.grid-overlay-setting .grid-overlay-setting-color-picker {width: 70px;}.grid-overlay-setting .grid-overlay-setting-color-picker-text {text-align: center; position: relative; top: 50%; transform: translateY(-50%); font-size: 14px;}.grid-overlay-setting .grid-overlay-setting-interval-width {border-color: #000; border-style: hidden solid solid solid; border-width: 1px; height: 10px; margin: auto;}.grid-overlay-setting .grid-overlay-setting-style-map {width: 60%; height: 100%; float: left; padding: 0 5px;}.jimu-rtl .grid-overlay-setting .grid-overlay-setting-style-map {float: right; width: 60%;}.grid-overlay-setting .grid-overlay-setting-slider {width: 100%;}.grid-overlay-setting .grid-overlay-setting-slider-value {width: 50px;}.grid-overlay-setting .neo {float: left; height: 100%; overflow: hidden;}.jimu-rtl .grid-overlay-setting .neo {float: right;}.grid-overlay-setting .sectionTitle {color: #353535; letter-spacing: 0.39px; padding-bottom: 7px; font-size: 14px;}.grid-overlay-setting .sliderValue {font-size: 13px; color: #353535; letter-spacing: 0.39px;}.grid-overlay-setting .gridPlacementSection {width: 80%; margin: auto; display: inline-flex;}.grid-overlay-setting .verticalLineSection {width: 80%; margin: auto; display: inline-flex;}.grid-overlay-setting .image-labels {background-repeat: no-repeat; background-color: transparent; width: 24px; height: 24px; margin-right: 10px; border: 1px solid #CCCCCC;}.grid-overlay-setting .horizontalLabel {background: url("../../images/Horizontal.png");}.grid-overlay-setting .horizontalLabelClicked {background: url("../../images/Horizontal_selected.png"); border: 1px solid #008B9C;}.grid-overlay-setting .horizontalLabel:hover {background: url("../../images/Horizontal_selected.png"); border: 1px solid #008B9C; cursor: pointer;}.grid-overlay-setting .verticalLabel {background: url("../../images/Vertical.png");}.grid-overlay-setting .verticalLabelClicked {background: url("../../images/Vertical_selected.png"); border: 1px solid #008B9C;}.grid-overlay-setting .verticalLabel:hover {background: url("../../images/Vertical_selected.png"); border: 1px solid #008B9C; cursor: pointer;}.grid-overlay-setting .upperLeftLabel {background: url("../../images/Upper_Left.png");}.grid-overlay-setting .upperLeftLabelClicked,.upperLeftLabel:hover {background: url("../../images/Upper_Left_selected.png"); border: 1px solid #008B9C; cursor: pointer;}.grid-overlay-setting .upperRightLabel {background: url("../../images/Upper_Right.png");}.grid-overlay-setting .upperRightLabelClicked,.upperRightLabel:hover {background: url("../../images/Upper_Right_selected.png"); border: 1px solid #008B9C; cursor: pointer;}.grid-overlay-setting .lowerLeftLabel {background: url("../../images/Lower_Left.png");}.grid-overlay-setting .lowerLeftLabelClicked,.lowerLeftLabel:hover {background: url("../../images/Lower_Left_selected.png"); border: 1px solid #008B9C; cursor: pointer;}.grid-overlay-setting .lowerRightLabel {background: url("../../images/Lower_Right.png");}.grid-overlay-setting .lowerRightLabelClicked,.lowerRightLabel:hover {background: url("../../images/Lower_Right_selected.png"); border: 1px solid #008B9C; cursor: pointer;}.grid-overlay-setting .centerLabel {background: url("../../images/Center.png");}.grid-overlay-setting .centerLabelClicked,.centerLabel:hover {background: url("../../images/Center_selected.png"); border: 1px solid #008B9C; cursor: pointer;}.grid-overlay-setting .table-options ul {list-style-type: none; padding: 0;}.grid-overlay-setting .jimu-checkbox {margin-right: 20px; width: 100%;}.grid-overlay-setting .switch-toggle-group {padding: 5px;}.grid-overlay-setting .switch-toggle-group .checkbox-inline {padding-left: 36px; vertical-align: top;}.grid-overlay-setting .switch-toggle-group .switch-toggle.dijitCheckBox {margin-left: -36px;}.grid-overlay-setting .switch-toggle.dijitCheckBox {height: 16px; width: 28px; border: 0 none; background: #adadad; position: relative; display: inline-block; cursor: pointer; -moz-border-radius: 10px; -webkit-border-radius: 10px; border-radius: 10px; margin-left: 2px;}.grid-overlay-setting .switch-toggle.dijitCheckBox:before {content: ""; background: #f8f8f8; position: absolute; padding: 0; height: 12px; width: 12px; left: auto; right: 14px; top: 2px; z-index: 1; -webkit-transition: right 0.3s; -moz-transition: right 0.3s; -o-transition: right 0.3s; transition: right 0.3s; -moz-border-radius: 50%; -webkit-border-radius: 50%; border-radius: 50%;}.grid-overlay-setting .switch-toggle.dijitCheckBox input {width: 100%; height: 100%; position: absolute; left: 0; z-index: 2;}.grid-overlay-setting .switch-toggle.dijitCheckBox.dijitCheckBoxChecked {background: #50ad4e;}.grid-overlay-setting .switch-toggle.dijitCheckBox.dijitCheckBoxChecked:before {right: 2px;}.grid-overlay-setting .basemapButton {position: absolute; right: 22px; top: 2px; z-Index: 999;}.jimu-rtl .grid-overlay-setting .basemapButton {left: 10px; right: auto;}.grid-overlay-setting .mapContentPane {width: 400px; height: 280px; overflow: auto;}.grid-overlay-setting .neo {width: 40%;}.grid-overlay-setting img.esriBasemapGalleryThumbnail {margin: 0px !important;}',
"*now":function(f){f(['dojo/i18n!*preload*widgets/GridOverlay/setting/nls/Setting*["ar","bs","ca","cs","da","de","en","el","es","et","fi","fr","he","hr","hu","id","it","ja","ko","lt","lv","nb","nl","pl","pt-br","pt-pt","ro","ru","sl","sr","sv","th","tr","zh-cn","uk","vi","zh-hk","zh-tw","ROOT"]'])},"*noref":1}});
define("dojo/_base/declare dojo/dom-class dojo/dom-style dojo/query dojo/_base/array dojo/promise/all dojo/Deferred jimu/BaseWidgetSetting dojo/_base/lang dijit/_WidgetsInTemplateMixin dijit/registry dojo/_base/Color ../lib/GridOverlay esri/map esri/dijit/BasemapGallery esri/dijit/BasemapLayer esri/dijit/Basemap jimu/dijit/Message jimu/portalUtils jimu/portalUrlUtils jimu/utils ./utils dijit/form/HorizontalSlider dijit/ColorPalette dijit/form/NumberSpinner jimu/dijit/ColorPicker dijit/TitlePane dijit/layout/ContentPane".split(" "),function(f,
d,c,l,g,a,b,p,q,r,m,e,v,z,n,u,h,k,P,Q,C,R){var H=function(a,b){b instanceof e||(b=new e(b));var c=b.toHex();b=128<.2126*b.r+.7152*b.g+.0722*b.b?new e([0,0,0]):new e([255,255,255]);a.innerHTML=C.sanitizeHTML("\x3cdiv class\x3d'grid-overlay-setting-color-picker-text' style\x3d'"+("color:"+b+";")+"'\x3e"+c+"\x3c/div\x3e")},J=function(a,b,c,d){isNaN(d)?(a.value=5,a.setDisplayedValue(5)):4<d&&73>d&&b.setFontSize(c,d)},I=function(a,b,c,d){isNaN(d)?(a.value=1,a.setDisplayedValue(1)):0<d&&11>d&&b.setLineWidth(c,
d)};return f([p,r],{baseClass:"grid-overlay-setting",verticalLabelsClicked:!1,horizontalLabelsClicked:!1,basemapDict:null,sampmap:null,postCreate:function(){this.setConfig(this.config);this.switchBasemapBtn.set("title",this.nls.switchBasemap);this.sampmap=new z(this.sampleMap,{center:this.map.extent.getCenter(),basemap:"topo",zoom:this.map.getLevel()});this._getBasemapsConfig().then(q.hitch(this,function(a){a.map=this.sampmap;a=new n(a,this.basemapGalleryWidget);a.startup();a.on("selection-change",
q.hitch(this,this._basemapGalleryOnSelectionChanged))}));var a=this,b=new v(q.mixin({map:this.sampmap,enabled:!0},this.config));this.sampleGrid=b;this.minIntervalSpacing.onChange=q.hitch(this,function(a){this.minIntervalSpacingVal.innerHTML=C.sanitizeHTML(window.isRTL?"px"+a:a+"px");b.setMinIntervalSpacing(a)});this.lineOpacity.onChange=q.hitch(this,function(a){this.lineOpacityVal.innerHTML=window.isRTL?C.sanitizeHTML("%"+Math.round(100*a)):C.sanitizeHTML(Math.round(100*a)+"%");b.setLineOpacity(a)});
this.labelOpacity.onChange=q.hitch(this,function(a){this.labelOpacityVal.innerHTML=window.isRTL?C.sanitizeHTML("%"+Math.round(100*a)):C.sanitizeHTML(Math.round(100*a)+"%");b.setLabelOpacity(a)});this.colorPicker0.onChange=function(a){H(this.domNode,a);b.setColor(0,a.toHex())};this.colorPicker1.onChange=function(a){H(this.domNode,a);b.setColor(1,a.toHex())};this.colorPicker2.onChange=function(a){H(this.domNode,a);b.setColor(2,a.toHex())};this.colorPicker3.onChange=function(a){H(this.domNode,a);b.setColor(3,
a.toHex())};this.colorPicker4.onChange=function(a){H(this.domNode,a);b.setColor(4,a.toHex())};this.colorPicker5.onChange=function(a){H(this.domNode,a);b.setColor(5,a.toHex())};this.fontSize0.onChange=function(a){J(this,b,0,a)};this.fontSize1.onChange=function(a){J(this,b,1,a)};this.fontSize2.onChange=function(a){J(this,b,2,a)};this.fontSize3.onChange=function(a){J(this,b,3,a)};this.fontSize4.onChange=function(a){J(this,b,4,a)};this.fontSize5.onChange=function(a){J(this,b,5,a)};this.lineSize0.onChange=
function(a){I(this,b,0,a)};this.lineSize1.onChange=function(a){I(this,b,1,a)};this.lineSize2.onChange=function(a){I(this,b,2,a)};this.lineSize3.onChange=function(a){I(this,b,3,a)};this.lineSize4.onChange=function(a){I(this,b,4,a)};this.lineSize5.onChange=function(a){I(this,b,5,a)};this.verticalLabels.onclick=function(){a.verticalLabelsClicked=!0;a.horizontalLabelsClicked=!1;a._toggleHorzVertOptions(!1);b.setVerticalLabels(a.verticalLabelsClicked)};this.horizontalLabels.onclick=function(){a.verticalLabelsClicked=
!1;a.horizontalLabelsClicked=!0;a._toggleHorzVertOptions(!0);b.setVerticalLabels(!a.horizontalLabelsClicked)};this._addOverflow()},setConfig:function(){this.minIntervalSpacing.set("value",this.config.minIntervalSpacing);this.minIntervalSpacingVal.innerHTML=window.isRTL?C.sanitizeHTML("px"+this.config.minIntervalSpacing):C.sanitizeHTML(this.config.minIntervalSpacing+"px");this.lineOpacity.set("value",this.config.lineOpacity);this.lineOpacityVal.innerHTML=window.isRTL?C.sanitizeHTML("%"+Math.round(100*
this.config.lineOpacity)):C.sanitizeHTML(Math.round(100*this.config.lineOpacity)+"%");this.labelOpacity.set("value",this.config.labelOpacity);this.labelOpacityVal.innerHTML=window.isRTL?C.sanitizeHTML("%"+Math.round(100*this.config.labelOpacity)):C.sanitizeHTML(Math.round(100*this.config.labelOpacity)+"%");for(var a=0;6>a;a++)this["colorPicker"+a].setColor(new e(this.config.colors[a])),this["colorPicker"+a].picker.setColor(this.config.colors[a]),H(this["colorPicker"+a].domNode,this.config.colors[a]);
this.fontSize0.setValue(this.config.fontSizes[0]);this.fontSize1.setValue(this.config.fontSizes[1]);this.fontSize2.setValue(this.config.fontSizes[2]);this.fontSize3.setValue(this.config.fontSizes[3]);this.fontSize4.setValue(this.config.fontSizes[4]);this.fontSize5.setValue(this.config.fontSizes[5]);this.lineSize0.setValue(this.config.lineWidths[0]);this.lineSize1.setValue(this.config.lineWidths[1]);this.lineSize2.setValue(this.config.lineWidths[2]);this.lineSize3.setValue(this.config.lineWidths[3]);
this.lineSize4.setValue(this.config.lineWidths[4]);this.lineSize5.setValue(this.config.lineWidths[5]);this._toggleHorzVertOptions(!this.config.verticalLabels)},getConfig:function(){return this._checkValidValues()?(new k({message:this.nls.errorMessage}),!1):this.config=this.sampleGrid.getSettings()},_addOverflow:function(){var a=l(".neo",this.domNode);a&&g.forEach(a,function(a){c.set(a,"overflow-y","scroll")},this)},_checkValidValues:function(){return g.some([this.fontSize0,this.fontSize1,this.fontSize2,
this.fontSize3,this.fontSize4,this.fontSize5,this.lineSize0,this.lineSize1,this.lineSize2,this.lineSize3,this.lineSize4,this.lineSize5],function(a){if((a=m.byId(a))&&(a.value<a.constraints.min||a.value>a.constraints.max))return!0},this)},_toggleHorzVertOptions:function(a){a?(d.remove(this.horizontalLabels,"image-labels horizontalLabel"),d.add(this.horizontalLabels,"image-labels horizontalLabelClicked"),d.remove(this.verticalLabels,"image-labels verticalLabelClicked"),d.add(this.verticalLabels,"image-labels verticalLabel")):
(d.remove(this.horizontalLabels,"image-labels horizontalLabelClicked"),d.add(this.horizontalLabels,"image-labels horizontalLabel"),d.remove(this.verticalLabels,"image-labels verticalLabel"),d.add(this.verticalLabels,"image-labels verticalLabelClicked"))},_toggleLabelPlacement:function(a,b){if(a){var c=a.className.replace("image-labels","").trim();b?(d.remove(a,"image-labels "+c),d.add(a,"image-labels "+c+"Clicked")):(b=c.substring(0,c.indexOf("Clicked")),d.remove(a,"image-labels "+c),d.add(a,"image-labels "+
b))}},_basemapGalleryOnSelectionChanged:function(a){a=a.target._selectedBasemap.layers[0].initialExtent;void 0!==a&&this.sampmap.centerAt(a.getCenter())},_getWebmapBasemap:function(){var a;a=this.map.itemInfo.item.thumbnail?Q.getItemUrl(this.appConfig.portalUrl,this.map.itemInfo.item.id)+"/info/"+this.map.itemInfo.item.thumbnail:null;return{title:this.map.itemInfo.itemData.baseMap.title,thumbnailUrl:a,layers:this.map.itemInfo.itemData.baseMap.baseMapLayers,spatialReference:this.map.spatialReference}},
_getBasemapsConfig:function(){var c=new b,d=R._loadPortalBaseMaps(this.appConfig.portalUrl,this.map),e=P.getPortal(this.appConfig.portalUrl).loadSelfInfo();a({portalSelf:e,basemaps:d}).then(q.hitch(this,function(a){for(var b=a.basemaps,d=[],e=0,f=this._getWebmapBasemap(),b=g.filter(b,function(b){if(!b||!b.title)return!1;var c;c=R.isBingMap(b)?a.portalSelf.bingKey?!0:!1:!0;return b.title&&c},this),e=0;e<b.length&&!R.compareSameBasemapByOrder(b[e],f);e++);e===b.length&&b.push(f);for(e=0;e<b.length;e++){"OpenStreetMap"===
b[e].title&&(b[e].title="Open Street Map");for(var f=b[e].layers.length,k=[],l=0;l<f;l++)k.push(new u(b[e].layers[l]));b[e].layers=k;b[e].thumbnailUrl?/^(https?:)?\/\//.test(b[e].thumbnailUrl)?b[e].thumbnailUrl+=R.getToken(this.appConfig.portalUrl):b[e].thumbnailUrl=C.processUrlInWidgetConfig(b[e].thumbnailUrl,this.folderUrl):b[e].thumbnailUrl=this.folderUrl+"images/default.jpg";d.push(new h(b[e]))}c.resolve({portalUrl:this.appConfig.portalUrl?this.appConfig.portalUrl:"",basemaps:d,showArcGISBasemaps:!1,
bingMapsKey:a.portalSelf.bingKey})}));return c.promise}})});