// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See http://js.arcgis.com/3.15/esri/copyright.txt and http://www.arcgis.com/apps/webappbuilder/copyright.txt for details.
//>>built
require({cache:{"widgets/Swipe/utils":function(){define(["dojo/_base/lang","dojo/_base/array","dojo/_base/Color","dojo/_base/html"],function(h,p,m,k){var c={defaultColor:"#dadada",handlerPosition:{top:null,bottom:null,left:null,right:null},_isNewAddedLayer:function(a,c){c=c.getLayerInfoArrayOfWebmap();for(var d=0,e=c.length;d<e;d++)if(c[d].id===a.id)return!1;return!0},zoomToCurrentLayer:function(a){var c=a.config.isZoom,d=a.layerInfosObj;a=a.getSelection();var g;a&&a[0]&&(g=a[0]);c&&g&&(c=d.getLayerInfoById(g))&&
c.zoomTo&&c.zoomTo()},shouldHideInfoWindow:function(a,c){if(!c.map.infoWindow.isShowing)return!1;var d=c.map.infoWindow.getSelectedFeature();return a&&p.some(a,function(a){var e=d&&d.getLayer&&d.getLayer(),f=c.layerInfosObj.getLayerInfoById(a.id),f=e&&f&&f.traversal(function(b){return b.id===e.id});return e===a||f},c)},getVisibleLayerInfos:function(a,c){a=a.getLayerInfoArray();if(c){for(var d=[],e=0,n=a.length;e<n;e++){var f=a[e];if(f.isShowInMap())d.push(f);else for(var b=0,l=c.length;b<l;b++)c[b]===
f.id&&d.push(f)}return d}return p.filter(a,function(b){return b.isShowInMap()})},isDefaultSelectedLayerAndInShow:function(a,c,d,g){if("mult"===g){if(d&&d.defaultLayers&&d.defaultLayers.length){a=a.value;for(var e=0,f=d.defaultLayers.length;e<f;e++)if(a===d.defaultLayers[e]&&(g=c.getLayerInfoById(a),g.isShowInMap()))return!0}}else if(d&&d.layer&&(a=a.value,a===d.layer&&(g=c.getLayerInfoById(a),g.isShowInMap())))return!0;return!1},isTherePreconfiguredLayer:function(a,c){if(c)return!0;if(a&&a.layerState){a=
a.layerState;for(var d in a)if(a.hasOwnProperty(d)&&!0===a[d].selected)return!0}return!1},processColor:function(a){return a?new m(a):new m(c.defaultColor)},getScreenMiddle:function(a){var c=0,d=0;a&&(a.root?(a=k.getMarginBox(a.root),c=a.w/2,d=a.h/2):a.width&&a.height&&(c=a.width/2,d=a.height/2));return{left:c,top:d}},hideSelectorPopup:function(a){k.addClass(a,"hide")},showSelectorPopup:function(a){k.removeClass(a,"hide")},hackToRefreshSwipe:function(a){setTimeout(h.hitch(a,function(){a.swipeDijit.swipe&&
a.swipeDijit.swipe()}),200)},cleanHandlerPosition:function(){c.handlerPosition={top:null,bottom:null,left:null,right:null}},isCacheHandlerPosition:function(){return c.handlerPosition.top||c.handlerPosition.bottom||c.handlerPosition.left||c.handlerPosition.right?!0:!1},saveHandlerPosition:function(a){a&&(c.handlerPosition.top=a.top,c.handlerPosition.bottom=a.bottom,c.handlerPosition.left=a.left,c.handlerPosition.right=a.right)},setHandlerPosition:function(a,e,d){e.style&&"scope"===e.style?(c.handlerPosition.top&&
(a.top=c.handlerPosition.top-9),c.handlerPosition.bottom&&(a.bottom=c.handlerPosition.bottom),c.handlerPosition.left&&(a.left=c.handlerPosition.left-9),c.handlerPosition.right&&(a.right=c.handlerPosition.right)):e.invertPlacement?(c.handlerPosition.right&&(a.right=c.handlerPosition.right),c.handlerPosition.left&&(a.left=c.handlerPosition.left),c.handlerPosition.bottom&&(a.bottom=c.handlerPosition.bottom),c.handlerPosition.top&&(a.top=c.handlerPosition.top)):(c.handlerPosition.right&&(a.left=c.handlerPosition.right),
c.handlerPosition.left&&(a.right=c.handlerPosition.left),c.handlerPosition.bottom&&(a.top=c.handlerPosition.bottom),c.handlerPosition.top&&(a.bottom=c.handlerPosition.top));0>a.top&&(a.top=0);a.top>d.height&&(a.top=d.height);0>a.left&&(a.left=0);a.left>d.width&&(a.left=d.width)},getLayerNode:function(a){return a._heatmapManager&&a._heatmapManager.imageLayer&&a._heatmapManager.imageLayer._div||a._div},getLayerTransform:function(a,e){var d=a.layer;a={dx:0,dy:0};if(d.getNavigationTransform)a=d.getNavigationTransform();
else if(d._getTransform){if(e=d._getTransform())a.dx=e.dx,a.dy=e.dy}else(d=c.getLayerNode(d).style)&&"css-transforms"===e.map.navigationMode&&(d=e._getTransformValue(d))&&(e=e._parseTransformValue(d),a.dx=e.x,a.dy=e.y);return a}};return c})},"widgets/Swipe/setting/LayersSetting":function(){define("dojo/Evented dojo/_base/declare dojo/_base/lang dijit/_WidgetBase dijit/_TemplatedMixin dijit/_WidgetsInTemplateMixin dojo/on dojo/_base/array dojo/_base/html jimu/LayerInfos/LayerInfos jimu/dijit/LayerChooserFromMapLite dojo/Deferred ../MultSelector/MultSelector dojo/text!./LayersSetting.html jimu/dijit/LoadingShelter jimu/utils jimu/dijit/CheckBox dijit/form/Select dojox/form/CheckedMultiSelect dijit/form/ValidationTextBox".split(" "),
function(h,p,m,k,c,a,e,d,g,n,f,b,l,t,x,q){return p([k,c,a,h],{templateString:t,postCreate:function(){this.shelter=new x({hidden:!0});this.defaultLayersSelector=new l({nls:this.nls},this.defaultLayersSelectorContainer);this.defaultLayersSelector.startup();this.shelter.show();this._getLayerInfoObj(this.map).then(m.hitch(this,function(){this._setDefaultLayerByState(this.config.layerState)}),function(b){console.log(b)}).always(m.hitch(this,function(){this.shelter.hide()}));this.own(e(this.singleLayerRaido,
"change",m.hitch(this,function(){this.singleLayerRaido.checked&&(g.addClass(this.defaultLayersContainer,"hide"),g.removeClass(this.swipeLayersContainer,"hide"),this.emit("change",{mode:"single"}))})));this.own(e(this.multipleLayerRaido,"change",m.hitch(this,function(){this.multipleLayerRaido.checked&&(g.removeClass(this.defaultLayersContainer,"hide"),g.addClass(this.swipeLayersContainer,"hide"),this.emit("change",{mode:"mult"}))})));this.inherited(arguments)},startup:function(){this.inherited(arguments)},
setConfig:function(a){this.config=a;"mult"===this.config.layerMode?this.multipleLayerRaido.setChecked(!0):this.singleLayerRaido.setChecked(!0);this._layerChooserFromMap||(this._layerChooserFromMap=new f({showTables:!1,onlyShowWebMapLayers:!0,customFilter:m.hitch(this,function(a){var c=new b,f=n.getInstanceSync().getLayerInfoArrayOfWebmap();d.some(f,function(b){if(b.id===a.id)return!0},this)?a.isRootLayer()?c.resolve(!0):this.map.getLayer(a.id)?c.resolve(!0):c.resolve(!1):c.resolve(!1);return c}),
layerState:this.config.layerState}),this._layerChooserFromMap.placeAt(this.layersChooser),this._layerChooserFromMap.startup(),d.forEach(this._layerInfosObj.getLayerInfoArray(),function(b){b&&b.layerObject&&b.layerObject.declaredClass&&("esri.layers.ArcGISDynamicMapServiceLayer"===b.layerObject.declaredClass||"esri.layers.ArcGISTiledMapServiceLayer"===b.layerObject.declaredClass||"esri.layers.FeatureCollection"===b.layerObject.declaredClass)&&(b=this._layerChooserFromMap.getLayerAssociateDomNodesById(b.id))&&
g.addClass(b.collapseIcon,"transparent")},this),this.own(e(this._layerChooserFromMap,"tree-click",m.hitch(this,function(){var b=this._layerChooserFromMap.getState();this._setDefaultLayerByState(b);this._isLayersChooserStateEmpty()&&(this.swipeLayers.set("options",[{value:"",label:""}]),this.swipeLayers.reset(),this.defaultLayersSelector.reset())}))));a=this._getOptionsFromState(this.config.layerState);this._isSelectedLayerInOptions(a)&&this.swipeLayers.set("value",this.config.layer);this.config.defaultLayers||
(this.config.defaultLayers=[]);this.defaultLayersSelector.setConfig(this.config.defaultLayers)},getConfig:function(b){b.layerMode=this.multipleLayerRaido.checked?"mult":"single";b.layer=this.swipeLayers.get("value");b.defaultLayers=this.defaultLayersSelector.getConfig();b.layerState=this._layerChooserFromMap.getState();return this.config},setLayerInfoText:function(b){this.layerTextNode.innerHTML=q.sanitizeHTML(b)},_getLayerInfoObj:function(b){return n.getInstance(b,b.itemInfo).then(m.hitch(this,function(b){this._layerInfosObj=
b;b=this._layerInfosObj.getLayerInfoArray();b=d.filter(b,m.hitch(this,function(b){if(!this._isNewAddedLayer(b))return!0}));b=d.map(b,function(b){return{label:b.title,value:b.id}});this.swipeLayers.set("options",b);this.defaultLayersSelector.setOptions(b)}))},_isSelectedLayerInOptions:function(b){for(var a=this.config.layer||this.swipeLayers.getValue(),c=0,f=b.length;c<f;c++)if(b[c].value===a)return!0;return!1},_setDefaultLayerByState:function(b){"undefined"===typeof b||null===b?this.defaultLayersSelector.initOptions(this.swipeLayers.getOptions(),
!0):(b=this._getOptionsFromState(b,!0),this.swipeLayers.set("options",m.clone(b)),this._isSelectedLayerInOptions(b)&&0!==b.length?this.swipeLayers.setValue(this.config.layer||this.swipeLayers.getValue()):this.swipeLayers.reset(),this.defaultLayersSelector.initOptions(b,!0))},_getOptionsFromState:function(b,a){var c=[];if(!b)return c;for(var f in b)if(b.hasOwnProperty(f)){var d=b[f];if(!0===d.selected){var l=this._layerInfosObj.getLayerInfoById(f);l&&!this._isNewAddedLayer(l)&&(l=l.title)&&(l={value:f,
label:l},a&&d.selected&&(l.selected=!0),c.push(l))}}return c},_isNewAddedLayer:function(b){for(var a=this._layerInfosObj.getLayerInfoArrayOfWebmap(),c=0,f=a.length;c<f;c++)if(a[c].id===b.id)return!1;return!0},_isLayersChooserStateEmpty:function(){return 0===this._getOptionsFromState(this._layerChooserFromMap.getState()).length?!0:!1}})})},"jimu/dijit/LayerChooserFromMapLite":function(){define("dojo/on dojo/_base/declare dojo/promise/all dojo/_base/lang dojo/_base/html dojo/_base/array jimu/dijit/CheckBox jimu/dijit/LayerChooserFromMap jimu/LayerStructure".split(" "),
function(h,p,m,k,c,a,e,d,g){var n=p([d],{templateString:'\x3cdiv style\x3d"width:100%;"\x3e\x3cdiv data-dojo-attach-point\x3d"errorTipSection" class\x3d"error-tip-section"\x3e\x3cspan class\x3d"jimu-icon jimu-icon-error"\x3e\x3c/span\x3e\x3cspan class\x3d"jimu-state-error-text" data-dojo-attach-point\x3d"errTip"\x3e${nls.noLayersTip}\x3c/span\x3e\x3c/div\x3e\x3cdiv data-dojo-attach-point\x3d"treeSection" class\x3d"tree-section"\x3e\x3cul data-dojo-attach-point\x3d"treeUl" class\x3d"tree-ul tree-root-ul"\x3e\x3c/ul\x3e\x3c/div\x3e\x3c/div\x3e',
map:null,layerStateController:null,layerState:null,customFilter:null,onlySelectLeafLayer:!1,displayLayerTypeIcon:!0,showTables:!0,viewMode:!1,onlyShowWebMapLayers:!1,layerStructure:null,_layerDatas:null,_eventHandles:null,postMixInProperties:function(){this.nls=window.jimuNls.basicLayerChooserFromMap},postCreate:function(){c.addClass(this.domNode,"jimu-basic-layer-chooser-from-map");c.addClass(this.domNode,"jimu-basic-layer-chooser-from-map-lite");this._layerDatas={};this._eventHandles=[];this.layerStructure=
this.map?g.createInstance(this.map):g.getInstance();this.layerInfosObj=this.layerStructure._layerInfos;this.layerState=this._clearLayerState(this.layerState)||{};this.layerStateController||(this.layerStateController=new n.LayerStateController);var a;a=this.customFilter?k.hitch(this,this.customFilter):k.hitch(this,this.filter);this.filter=d.andCombineFilters([this.basicFilter,a]);this._createTree()},_createTree:function(){var a,b;this.onlyShowWebMapLayers?(a=this.layerStructure.getWebmapLayerNodes(),
b=this.layerStructure.getWebmapTableNodes()):(a=this.layerStructure.getLayerNodes(),b=this.layerStructure.getTableNodes());0<this._createLayerNodes(a.concat(this.showTables?b:[]),this.treeUl)&&(c.setStyle(this.errorTipSection,"display","none"),this.layerStateController.restoreState(this.layerState,this.layerStructure))},_createLayerNodes:function(c,b){var f=a.map(c,function(b){return this.filter(b._layerInfo)},this),d=0;m(f).then(k.hitch(this,function(f){a.forEach(f,function(a,f){a&&(this._createLayerNode(c[f],
b),d++)},this)}));return d},_createLayerNode:function(a,b){var f=c.create("li",{"class":"tree-node-li",id:"layerchooserlite-tree-node-li-"+a.id},b),d=c.create("div",{"class":"tree-node-div"},f);b=c.create("span",{"class":"tree-node-column-span collapse-span"},d);var g=c.create("span",{"class":"tree-node-column-span check-box-span"},d),g=c.create("div",{"class":"tree-node-column-div check-box-div"},g),n=c.create("span",{"class":"tree-node-column-span icon-span "+(this.displayLayerTypeIcon?"display":
"")},d),m;m=(m=this.layerState[a.id])?m.selected:this.layerStateController.getState(a);m=new e({checked:m},g);var z=c.create("span",{"class":"tree-node-column-span title-span",innerHTML:a.title},d),r=c.create("ul",{"class":"tree-ul tree-subnode-ul",style:"display:none; "},f),f={layerNode:a,layerNodeLi:f,layerNodeDiv:d,collapseSpan:b,iconSpan:n,checkBox:m,subLayerNodeUl:r,hasBeenOpened:!1};this._layerDatas[a.id]=f;a.isLeaf()||(c.addClass(b,"is-leaf"),c.addClass(z,"is-leaf"),a=h(b,"click",k.hitch(this,
this._onCollapse,f)),this._eventHandles.push(a),a=h(z,"click",k.hitch(this,this._onCollapse,f)),this._eventHandles.push(a),this.onlySelectLeafLayer&&(m.setStatus(!1),c.setStyle(g,"display","none")));!0===this.viewMode&&m.setStatus(!1);a=h(m.domNode,"click",k.hitch(this,this._onCheckBoxChange,f));this._eventHandles.push(a);this._setIconImage(f,!1);return f},_setIconImage:function(a,b){if(this.displayLayerTypeIcon){var f=a.layerNode,d=f.getLayerType(),e=f.getLayerObject();m({layerType:d,layerObject:e}).then(k.hitch(this,
function(d){var e;d.layerType&&d.layerObject&&(e={type:d.layerType,layerInfo:f._layerInfo},d=window.location.protocol+"//"+window.location.host+require.toUrl("jimu"),(e=this._getIconInfo(e,b).imageName)&&c.setStyle(a.iconSpan,"background-image","url("+d+"/css/images/"+e+")"))}))}},_getCheckBoxValue:function(a){return a.getStatus()?a.getValue():!1},_clearLayerState:function(a){var b={};a&&this.layerStructure.traversal(k.hitch(this,function(c){a[c.id]&&(b[c.id]={selected:a[c.id].selected})}));return b},
_selectOrDeselectLayer:function(a,b){if(a=this._layerDatas[a])a.checkBox.setValue(b),this._onCheckBoxChange(a)},selectLayer:function(a){this._selectOrDeselectLayer(a,!0)},deselectLayer:function(a){this._selectOrDeselectLayer(a,!1)},getState:function(){var a=k.clone(this.layerState),b;for(b in this._layerDatas)this._layerDatas.hasOwnProperty(b)&&"function"!==typeof this._layerDatas[b]&&(this._getCheckBoxValue(this._layerDatas[b].checkBox)?a[b]={selected:!0}:a[b]={selected:!1});return a},restoreState:function(a){this.layerState=
this._clearLayerState(a);for(var b in this._layerDatas)if(this._layerDatas.hasOwnProperty(b)&&"function"!==typeof this._layerDatas[b]){var c=(a=this._layerDatas[b])&&a.checkBox,d=this.layerState[b];d?c.setValue(d.selected):c.setValue(this.layerStateController.getState(a.layerNode))}this.layerStateController.restoreState(this.layerState,this.layerStructure)},setViewMode:function(a){for(var b in this._layerDatas)if(this._layerDatas.hasOwnProperty(b)&&"function"!==typeof this._layerDatas[b]){var c=this._layerDatas[b],
c=c&&c.checkBox;!0===a?(this.viewMode=!0,c.setStatus(!1)):(this.viewMode=!1,c.setStatus(!0))}},getSelectedLayerNodes:function(){var a=[],b=this.getState(),c;for(c in b)if(b.hasOwnProperty(c)&&"function"!==typeof b[c]&&b[c].selected){var d=this.layerStructure.getNodeById(c);d&&a.push(d)}return a},getLoadedLayerNodes:function(){var a=[],b;for(b in this._layerDatas)if(this._layerDatas.hasOwnProperty(b)&&"function"!==typeof this._layerDatas[b]){var c=this.layerStructure.getNodeById(b);c&&a.push(c)}return a},
getLayerAssociateDomNodesById:function(a){var b=null;(a=this._layerDatas[a])&&(b={collapseIcon:a.collapseSpan,checkBox:a.checkBox.domNode,layerTypeIcon:a.iconSpan});return b},getSelectedItems:function(){var c=[];return c=a.map(this.getSelectedLayerNodes(),function(a){return{name:a.title,url:a.getUrl(),layerInfo:a._layerInfo}},this)},getAllItems:function(){return[]},_clear:function(){this._layerDatas={};a.forEach(this._eventHandles,function(a){a.remove()},this);this._eventHandles=[];c.empty(this.treeUl)},
destroy:function(){this._clear();this.map&&this.layerStructure.destroy();this.shelter&&(this.shelter.destroy(),this.shelter=null);this.inherited(arguments)},_onCollapse:function(a){var b="none"===c.getStyle(a.subLayerNodeUl,"display")?!0:!1;b?(c.setStyle(a.subLayerNodeUl,"display","block"),c.addClass(a.collapseSpan,"opened")):(c.setStyle(a.subLayerNodeUl,"display","none"),c.removeClass(a.collapseSpan,"opened"));this._setIconImage(a,b);a.hasBeenOpened||(this._createLayerNodes(a.layerNode.getSubNodes(),
a.subLayerNodeUl),a.hasBeenOpened=!0)},_onCheckBoxChange:function(a,b){this.layerStateController.setState(a.layerNode,this._getCheckBoxValue(a.checkBox));this.emit("selection-change",a.layerNode,this._getCheckBoxValue(a.checkBox));this._onTreeClick(a,b)},_onLayerInfosChanged:function(){this._createTree();this.emit("update")},_onLayerInfosIsShowInMapChanged:function(){this._createTree();this.emit("update")},_onTreeClick:function(a,b){a={name:a.layerNode.title||"",parent:null,layerInfo:a.layerNode._layerInfo,
type:null,layerClass:null,id:null,isLeaf:a.layerNode.isLeaf(),hasChildren:a.layerNode.isLeaf()?!1:!0};this.emit("tree-click",a,null,b)}});n.LayerStateController=p(null,{getState:function(a){return!0},setState:function(a,b){return this},restoreState:function(a,b){return this}});n.LayerVisibilityStateController=p(n.LayerStateController,{getState:function(a){return a.isToggledOn()},setState:function(a,b){a.toggle();return this},restoreState:function(a,b){var c={layerOptions:{}},d;for(d in a)a.hasOwnProperty(d)&&
"function"!==typeof a[d]&&(c.layerOptions[d]={visible:a[d].selected});b.restoreState(c);return this}});n.layerVisibilityStateController=new n.LayerVisibilityStateController;n.LayerLegendStateController=p(n.LayerStateController,{getState:function(a){return a.isShowLegend()}});n.layerLegendStateController=new n.LayerLegendStateController;return n})},"jimu/dijit/LayerChooserFromMap":function(){define("dojo/on dojo/Evented dojo/_base/declare dijit/_WidgetBase dijit/_TemplatedMixin dijit/_WidgetsInTemplateMixin dojo/store/Memory dojo/Deferred dojo/store/Observable dijit/tree/ObjectStoreModel dojo/promise/all dojo/_base/lang dojo/_base/html dojo/_base/array jimu/utils jimu/dijit/_Tree jimu/LayerInfos/LayerInfos jimu/dijit/LoadingIndicator".split(" "),
function(h,p,m,k,c,a,e,d,g,n,f,b,l,t,x,q,v,z){var r=m([k,c,a,p],{templateString:'\x3cdiv style\x3d"width:100%;"\x3e\x3cdiv data-dojo-attach-point\x3d"errorTipSection" class\x3d"error-tip-section"\x3e\x3cspan class\x3d"jimu-icon jimu-icon-error"\x3e\x3c/span\x3e\x3cspan class\x3d"jimu-state-error-text" data-dojo-attach-point\x3d"errTip"\x3e${nls.noLayersTip}\x3c/span\x3e\x3c/div\x3e\x3c/div\x3e',_store:null,_id:0,_treeClass:"layer-chooser-tree",createMapResponse:null,multiple:!1,onlyShowVisible:!1,
updateWhenLayerInfosIsShowInMapChanged:!1,onlyShowWebMapLayers:!1,displayTooltipForTreeNode:!1,postMixInProperties:function(){this.nls=window.jimuNls.basicLayerChooserFromMap},postCreate:function(){this.inherited(arguments);l.addClass(this.domNode,"jimu-basic-layer-chooser-from-map");this.multiple=!!this.multiple;this.shelter=new z({hidden:!0});this.shelter.placeAt(this.domNode);this.shelter.startup();this._createTree();this.basicFilter=b.hitch(this,this.basicFilter);this.filter=r.andCombineFilters([this.basicFilter,
this.filter]);this.createMapResponse&&this.setCreateMapResponse(this.createMapResponse)},basicFilter:function(a){var b=new d;this.onlyShowVisible?b.resolve(a.isShowInMap()):b.resolve(!0);return b},filter:function(a){a=new d;a.resolve(!0);return a},getSelectedItems:function(){var a=this.tree.getSelectedItems();return t.map(a,b.hitch(this,function(a){return this.getHandledItem(a)}))},getAllItems:function(){var a=this.tree.getAllItems(),c=[];t.forEach(a,b.hitch(this,function(a){"root"!==a.id&&(a=this.getHandledItem(a),
c.push(a))}));return c},getHandledItem:function(a){return{name:a.name,layerInfo:a.layerInfo}},_isLeafItem:function(a){return a.isLeaf},setCreateMapResponse:function(a){this.createMapResponse=a;v.getInstance(this.createMapResponse.map,this.createMapResponse.itemInfo).then(b.hitch(this,function(a){this.layerInfosObj=a;this.own(h(this.layerInfosObj,"layerInfosChanged",b.hitch(this,this._onLayerInfosChanged)));this.updateWhenLayerInfosIsShowInMapChanged&&this.own(h(this.layerInfosObj,"layerInfosIsShowInMapChanged",
b.hitch(this,this._onLayerInfosIsShowInMapChanged)));this._buildTree(this.layerInfosObj)}))},_onLayerInfosChanged:function(a,b){this._buildTree(this.layerInfosObj);this.emit("update")},_onLayerInfosIsShowInMapChanged:function(a){this._buildTree(this.layerInfosObj);this.emit("update")},_buildTree:function(a){this._clear();l.setStyle(this.errorTipSection,"display","block");var c=[];this.onlyShowWebMapLayers?(c=a.getLayerInfoArrayOfWebmap(),c=c.concat(a.getTableInfoArrayOfWebmap())):(c=a.getLayerInfoArray(),
c=c.concat(a.getTableInfoArray()));0!==c.length&&(l.setStyle(this.errorTipSection,"display","none"),t.forEach(c,b.hitch(this,function(a){this._addDirectLayerInfo(a)})))},_addDirectLayerInfo:function(a){a&&a.getLayerObject().then(b.hitch(this,function(){this._addItem("root",a)}),b.hitch(this,function(a){console.error(a)}))},_clear:function(){var a=this._store.query({parent:"root"});t.forEach(a,b.hitch(this,function(a){a&&"root"!==a.id&&this._store.remove(a.id)}))},_addItem:function(a,c){var d=null,
e=c.getLayerType(),l=this.filter(c);f({layerType:e,valid:l}).then(b.hitch(this,function(e){if(e.valid){var l=b.hitch(this,function(b,l){this._id++;d={name:c.title||"",parent:a,layerInfo:c,type:e.layerType,layerClass:c.layerObject.declaredClass,id:this._id.toString(),isLeaf:b,hasChildren:l};this._store.add(d)}),g=c.getSubLayers(),n=0===g.length;n?l(n,!1):(g=t.map(g,b.hitch(this,function(a){return this.filter(a)})),f(g).then(b.hitch(this,function(a){(a=t.some(a,function(a){return a}))&&l(n,a)})))}}))},
_getRootItem:function(){return{id:"root",name:"Map Root",type:"root",isLeaf:!1,hasChildren:!0}},_createTree:function(){var a=this._getRootItem(),a=new e({data:[a],getChildren:function(a){return this.query({parent:a.id})}});this._store=new g(a);a=new n({store:this._store,query:{id:"root"},mayHaveChildren:b.hitch(this,this._mayHaveChildren)});this.tree=new q({multiple:this.multiple,model:a,showRoot:!1,isLeafItem:b.hitch(this,this._isLeafItem),style:{width:"100%"},onOpen:b.hitch(this,function(a,b){"root"!==
a.id&&this._onTreeOpen(a,b)}),onClick:b.hitch(this,function(a,b,c){this._onTreeClick(a,b,c);this.emit("tree-click",a,b,c)}),getIconStyle:b.hitch(this,function(a,b){var c=null;if(!a||"root"===a.id)return null;var d={width:"20px",height:"20px",backgroundRepeat:"no-repeat",backgroundPosition:"center center",backgroundImage:""},e=window.location.protocol+"//"+window.location.host+require.toUrl("jimu");if(a=this._getIconInfo(a,b).imageName)d.backgroundImage="url("+e+"/css/images/"+a+")",c=d;return c}),
getIconClass:b.hitch(this,function(a,b){return this._getIconInfo(a,b).className}),getTooltip:b.hitch(this,function(a){return this.displayTooltipForTreeNode?a.layerInfo.title:""})});l.addClass(this.tree.domNode,this._treeClass);this.tree.placeAt(this.shelter.domNode,"before")},_mayHaveChildren:function(a){return a.hasChildren},_getIconInfo:function(a,b){var c="",d="";"ArcGISDynamicMapServiceLayer"===a.type||"ArcGISTiledMapServiceLayer"===a.type?b?(c="mapserver_open.png",d="mapservice-layer-icon open"):
(c="mapserver_close.png",d="mapservice-layer-icon close"):"GroupLayer"===a.type?b?(c="group_layer2.png",d="group-layer-icon open"):(c="group_layer1.png",d="group-layer-icon close"):"FeatureLayer"===a.type?(a=x.getTypeByGeometryType(a.layerInfo.layerObject.geometryType),"point"===a?(c="point_layer1.png",d="point-layer-icon"):"polyline"===a?(c="line_layer1.png",d="line-layer-icon"):"polygon"===a&&(c="polygon_layer1.png",d="polygon-layer-icon")):"Table"===a.type?(c="table.png",d="table-icon"):"ArcGISImageServiceLayer"===
a.type||"ArcGISImageServiceVectorLayer"===a.type?(c="image_layer.png",d="iamge-layer-icon"):b?(c="mapserver_open.png",d="mapservice-layer-icon open"):(c="mapserver_close.png",d="mapservice-layer-icon close");return{imageName:c,className:d}},_onTreeOpen:function(a,c){if("root"!==a.id){var d=[];c=[];d=a.layerInfo.getSubLayers();a.checked||(this.shelter.show(),c=t.map(d,b.hitch(this,function(a){return a.getLayerObject()})),f(c).then(b.hitch(this,function(){this.domNode&&(t.forEach(d,b.hitch(this,function(b){this._addItem(a.id,
b)})),a.checked=!0,this.shelter.hide())}),b.hitch(this,function(a){console.error(a);this.shelter.hide()})))}},_onTreeClick:function(a,b,c){},destroy:function(){this.shelter&&(this.shelter.destroy(),this.shelter=null);this.tree&&this.tree.destroy();this.inherited(arguments)}});r.createFilterByLayerType=function(a){b.isArrayLike(a)||(a=[]);return function(b){var c=new d;if(0===a.length)c.resolve(!0);else{var e=[];b.traversal(function(a){e.push(a.getLayerType())});f(e).then(function(b){for(var d=0;d<
b.length;d++)for(var e=0;e<a.length;e++)if(b[d]===a[e]){c.resolve(!0);return}c.resolve(!1)},function(a){console.error(a);c.reject(a)})}return c}};r.createFeaturelayerFilter=function(a,b,c,d){var e=["point","polyline","polygon"];a&&0<a.length?(a=t.filter(a,function(a){return 0<=e.indexOf(a)}),0===a.length&&(a=e)):a=e;return function(e){var l=e.getLayerType();e=e.getLayerObject();return f({layerType:l,layerObject:e}).then(function(e){var l=e.layerType;e=e.layerObject;if("ArcGISDynamicMapServiceLayer"===
l||"ArcGISTiledMapServiceLayer"===l||"GroupLayer"===l||"FeatureCollection"===l)return!0;if("FeatureLayer"===l){var l=x.getTypeByGeometryType(e.geometryType),l=0<=t.indexOf(a,l),f=r._shouldPassStatisticsCheck(d,e);return e.url?(e=x.isFeaturelayerUrlSupportQuery(e.url,e.capabilities),l&&e&&f):b&&l}return"Table"===l?(l=x.isFeaturelayerUrlSupportQuery(e.url,e.capabilities),e=r._shouldPassStatisticsCheck(d,e),c&&l&&e):!1})}};r.createImageServiceLayerFilter=function(a,b){return function(c){var d=c.getLayerType();
c=c.getLayerObject();return f({layerType:d,layerObject:c}).then(function(c){var d=c.layerType,e=c.layerObject;return"ArcGISImageServiceLayer"===d||"ArcGISImageServiceVectorLayer"===d?a?x.isImageServiceSupportQuery(c.layerObject.capabilities)?b?r._shouldPassStatisticsCheck(b,e):!0:!1:!0:!1})}};r._shouldPassStatisticsCheck=function(a,b){return a?(a=!1,a=b.advancedQueryCapabilities?!!b.advancedQueryCapabilities.supportsStatistics:!!b.supportsStatistics):!0};r.createQueryableLayerFilter=function(a){var b=
r.createFeaturelayerFilter(["point","polyline","polygon"],!1,!0,a);a=r.createImageServiceLayerFilter(!0,a);return r.orCombineFilters([b,a])};r.andCombineFilters=function(a){return r._combineFilters(a,!0)};r.orCombineFilters=function(a){return r._combineFilters(a,!1)};r._combineFilters=function(a,b){return function(c){var e=new d,l=t.map(a,function(a){return a(c)});f(l).then(function(a){var c=!1,c=b?t.every(a,function(a){return a}):t.some(a,function(a){return a});e.resolve(c)},function(a){console.error(a);
e.reject(a)});return e}};return r})},"dijit/tree/ObjectStoreModel":function(){define("dojo/_base/array dojo/aspect dojo/_base/declare dojo/Deferred dojo/_base/lang dojo/when ../Destroyable".split(" "),function(h,p,m,k,c,a,e){return m("dijit.tree.ObjectStoreModel",e,{store:null,labelAttr:"name",labelType:"text",root:null,query:null,constructor:function(a){c.mixin(this,a);this.childrenCache={}},getRoot:function(d,e){if(this.root)d(this.root);else{var g=this.store.query(this.query);g.then&&this.own(g);
a(g,c.hitch(this,function(a){if(1!=a.length)throw Error("dijit.tree.ObjectStoreModel: root query returned "+a.length+" items, but must return exactly one");this.root=a[0];d(this.root);g.observe&&g.observe(c.hitch(this,function(a){this.onChange(a)}),!0)}),e)}},mayHaveChildren:function(){return!0},getChildren:function(d,e,n){var f=this.store.getIdentity(d);if(this.childrenCache[f])a(this.childrenCache[f],e,n);else{var b=this.childrenCache[f]=this.store.getChildren(d);b.then&&this.own(b);b.observe&&
this.own(b.observe(c.hitch(this,function(e,f,g){this.onChange(e);f!=g&&a(b,c.hitch(this,"onChildrenChange",d))}),!0));a(b,e,n)}},isItem:function(){return!0},getIdentity:function(a){return this.store.getIdentity(a)},getLabel:function(a){return a[this.labelAttr]},newItem:function(a,c,e,f){return this.store.put(a,{parent:c,before:f})},pasteItem:function(a,e,n,f,b,l){var d=new k;if(e===n&&!f&&!l)return d.resolve(!0),d;e&&!f?this.getChildren(e,c.hitch(this,function(b){b=[].concat(b);var c=h.indexOf(b,
a);b.splice(c,1);this.onChildrenChange(e,b);d.resolve(this.store.put(a,{overwrite:!0,parent:n,oldParent:e,before:l,isCopy:!1}))})):d.resolve(this.store.put(a,{overwrite:!0,parent:n,oldParent:e,before:l,isCopy:!0}));return d},onChange:function(){},onChildrenChange:function(){},onDelete:function(){}})})},"jimu/dijit/_Tree":function(){define("dojo/_base/declare dijit/_WidgetBase dijit/_TemplatedMixin dojo/text!./templates/_TreeNode.html dojo/_base/lang dojo/_base/html dojo/_base/array dojo/_base/event dojo/query dojo/aspect dojo/on dojo/keys dojo/Evented dijit/registry dijit/Tree jimu/utils".split(" "),
function(h,p,m,k,c,a,e,d,g,n,f,b,l,t,x,q){var v=h([x._TreeNode,l],{templateString:k,declaredClass:"jimu._TreeNode",isLeaf:!1,groupId:"",postCreate:function(){this.inherited(arguments);a.addClass(this.domNode,"jimu-tree-node");this.isLeaf=!!this.isLeaf;this.groupId?(this.checkNode=a.toDom('\x3cinput type\x3d"radio" /\x3e'),this.checkNode.name=this.groupId):this.checkNode=a.toDom('\x3cinput type\x3d"checkbox" /\x3e');a.addClass(this.checkNode,"jimu-tree-check-node");a.place(this.checkNode,this.contentNode,
"first");this.own(f(this.checkNode,"click",c.hitch(this,this._onClick)));this.own(f(this.rowNode,"keydown",c.hitch(this,function(a,c){c.target=a;c.keyCode!==b.ENTER&&c.keyCode!==b.SPACE||this._onClick(c)},this.checkNode)));this.isLeaf?this.groupId?a.setStyle(this.checkNode,"display","none"):a.setStyle(this.checkNode,"display","inline"):a.setStyle(this.checkNode,"display","none");this.isLeaf?a.addClass(this.domNode,"jimu-tree-leaf-node"):a.addClass(this.domNode,"jimu-tree-not-leaf-node")},select:function(){this.isLeaf&&
(this.checkNode.checked=!0,a.addClass(this.domNode,"jimu-tree-selected-leaf-node"))},unselect:function(){this.isLeaf&&(this.checkNode.checked=!1,a.removeClass(this.domNode,"jimu-tree-selected-leaf-node"))},toggleSelect:function(){this.isLeaf&&(this.checkNode.checked?this.unselect():this.select())},_onClick:function(a){(a.target||a.srcElement)===this.checkNode?this.tree._onCheckNodeClick(this,this.checkNode.checked,a):this.tree._onClick(this,a)},_onChange:function(){this.isLeaf&&setTimeout(c.hitch(this,
function(){this.checkNode.checked?this.emit("tn-select",this):this.emit("tn-unselect",this)}),100)},destroy:function(){delete this.tree;this.inherited(arguments)}});return h([x,l],{declaredClass:"jimu._Tree",openOnClick:!0,multiple:!0,uniqueId:"",showRoot:!1,postMixInProperties:function(){this.inherited(arguments);this.uniqueId="tree_"+q.getRandomString()},postCreate:function(){this.inherited(arguments);a.addClass(this.domNode,"jimu-tree");this.own(n.before(this,"onClick",c.hitch(this,this._jimuBeforeClick)));
this.rootLoadingIndicator&&a.setStyle(this.rootLoadingIndicator,"display","none");this.dndController.singular=!0;a.setAttr(this.domNode,"tabindex",0)},removeItem:function(a){this.model.store.remove(a)},getAllItems:function(){var a=this.getAllTreeNodeWidgets();return e.map(a,c.hitch(this,function(a){var b=a.item;b.selected=a.checkNode.checked;return b}))},getSelectedItems:function(){var a=this.getAllTreeNodeWidgets(),a=e.filter(a,c.hitch(this,function(a){return a.checkNode.checked}));return e.map(a,
c.hitch(this,function(a){return a.item}))},getFilteredItems:function(a){var b=this.getAllTreeNodeWidgets(),b=e.map(b,c.hitch(this,function(a){var b=a.item;b.selected=a.checkNode.checked;return b}));return e.filter(b,c.hitch(this,function(b){return a(b)}))},getTreeNodeByItemId:function(a){for(var b=this._getAllTreeNodeDoms(),c=0;c<b.length;c++){var d=t.byNode(b[c]);if(d.item.id.toString()===a.toString())return d}return null},selectItem:function(a){(a=this.getTreeNodeByItemId(a))&&a.isLeaf&&this.selectNodeWidget(a)},
unselectItem:function(a){(a=this.getTreeNodeByItemId(a))&&a.isLeaf&&a.unselect()},getAllLeafTreeNodeWidgets:function(){var a=this.getAllTreeNodeWidgets();return e.filter(a,c.hitch(this,function(a){return a.isLeaf}))},getAllTreeNodeWidgets:function(){var a=this._getAllTreeNodeDoms();return e.map(a,c.hitch(this,function(a){return t.byNode(a)}))},isLeafItem:function(a){return a&&a.isLeaf},_getAllTreeNodeDoms:function(){return g(".dijitTreeNode",this.domNode)},_createTreeNode:function(a){a.isLeaf=this.isLeafItem(a.item);
this.multiple||(a.groupId=this.uniqueId);return new v(a)},_onTreeNodeSelect:function(a){this.emit("item-select",{item:a.item,treeNode:a})},_onTreeNodeUnselect:function(a){this.emit("item-unselect",{item:a.item,treeNode:a})},selectNodeWidget:function(a){this.multiple||this.unselectAllLeafNodeWidgets();a.select()},_jimuBeforeClick:function(b,c,d){c.isLeaf&&(a.hasClass(d.target||d.srcElement,"jimu-tree-check-node")||(this.multiple?c.toggleSelect():this.selectNodeWidget(c)));return arguments},_onCheckNodeClick:function(a,
b,e){!this.multiple&&b&&this.unselectAllLeafNodeWidgets();d.stop(e);this.focusNode(a);setTimeout(c.hitch(this,function(){b?this.selectNodeWidget(a):a.unselect();this.onClick(a.item,a,e)}),0)},unselectAllLeafNodeWidgets:function(){var a=this.getAllLeafTreeNodeWidgets();e.forEach(a,c.hitch(this,function(a){a.unselect()}))}})})},"dijit/Tree":function(){define("dojo/_base/array dojo/aspect dojo/cookie dojo/_base/declare dojo/Deferred dojo/promise/all dojo/dom dojo/dom-class dojo/dom-geometry dojo/dom-style dojo/errors/create dojo/fx dojo/has dojo/_base/kernel dojo/keys dojo/_base/lang dojo/on dojo/topic dojo/touch dojo/when ./a11yclick ./focus ./registry ./_base/manager ./_Widget ./_TemplatedMixin ./_Container ./_Contained ./_CssStateMixin ./_KeyNavMixin dojo/text!./templates/TreeNode.html dojo/text!./templates/Tree.html ./tree/TreeStoreModel ./tree/ForestStoreModel ./tree/_dndSelector dojo/query!css2".split(" "),
function(h,p,m,k,c,a,e,d,g,n,f,b,l,t,x,q,v,z,r,J,D,K,B,E,F,H,I,M,G,L,N,O,R,P,Q){function y(a){return q.delegate(a.promise||a,{addCallback:function(a){this.then(a)},addErrback:function(a){this.otherwise(a)}})}var C=k("dijit._TreeNode",[F,H,I,M,G],{item:null,isTreeNode:!0,label:"",_setLabelAttr:function(a){this.labelNode["html"==this.labelType?"innerHTML":"innerText"in this.labelNode?"innerText":"textContent"]=a;this._set("label",a);l("dojo-bidi")&&this.applyTextDir(this.labelNode)},labelType:"text",
isExpandable:null,isExpanded:!1,state:"NotLoaded",templateString:N,baseClass:"dijitTreeNode",cssStateNodes:{rowNode:"dijitTreeRow"},_setTooltipAttr:{node:"rowNode",type:"attribute",attribute:"title"},buildRendering:function(){this.inherited(arguments);this._setExpando();this._updateItemClasses(this.item);this.isExpandable&&this.labelNode.setAttribute("aria-expanded",this.isExpanded);this.setSelected(!1)},_setIndentAttr:function(a){var b=Math.max(a,0)*this.tree._nodePixelIndent+"px";n.set(this.domNode,
"backgroundPosition",b+" 0px");n.set(this.rowNode,this.isLeftToRight()?"paddingLeft":"paddingRight",b);h.forEach(this.getChildren(),function(b){b.set("indent",a+1)});this._set("indent",a)},markProcessing:function(){this.state="Loading";this._setExpando(!0)},unmarkProcessing:function(){this._setExpando(!1)},_updateItemClasses:function(a){var b=this.tree,c=b.model;b._v10Compat&&a===c.root&&(a=null);this._applyClassAndStyle(a,"icon","Icon");this._applyClassAndStyle(a,"label","Label");this._applyClassAndStyle(a,
"row","Row");this.tree._startPaint(!0)},_applyClassAndStyle:function(a,b,c){var u="_"+b+"Class";b+="Node";var e=this[u];this[u]=this.tree["get"+c+"Class"](a,this.isExpanded);d.replace(this[b],this[u]||"",e||"");n.set(this[b],this.tree["get"+c+"Style"](a,this.isExpanded)||{})},_updateLayout:function(){var a=this.getParent(),a=!a||!a.rowNode||"none"==a.rowNode.style.display;d.toggle(this.domNode,"dijitTreeIsRoot",a);d.toggle(this.domNode,"dijitTreeIsLast",!a&&!this.getNextSibling())},_setExpando:function(a){var b=
["dijitTreeExpandoLoading","dijitTreeExpandoOpened","dijitTreeExpandoClosed","dijitTreeExpandoLeaf"];a=a?0:this.isExpandable?this.isExpanded?1:2:3;d.replace(this.expandoNode,b[a],b);this.expandoNodeText.innerHTML=["*","-","+","*"][a]},expand:function(){if(this._expandDeferred)return y(this._expandDeferred);this._collapseDeferred&&(this._collapseDeferred.cancel(),delete this._collapseDeferred);this.isExpanded=!0;this.labelNode.setAttribute("aria-expanded","true");(this.tree.showRoot||this!==this.tree.rootNode)&&
this.containerNode.setAttribute("role","group");d.add(this.contentNode,"dijitTreeContentExpanded");this._setExpando();this._updateItemClasses(this.item);this==this.tree.rootNode&&this.tree.showRoot&&this.tree.domNode.setAttribute("aria-expanded","true");var a=b.wipeIn({node:this.containerNode,duration:E.defaultDuration}),e=this._expandDeferred=new c(function(){a.stop()});p.after(a,"onEnd",function(){e.resolve(!0)},!0);a.play();return y(e)},collapse:function(){if(this._collapseDeferred)return y(this._collapseDeferred);
this._expandDeferred&&(this._expandDeferred.cancel(),delete this._expandDeferred);this.isExpanded=!1;this.labelNode.setAttribute("aria-expanded","false");this==this.tree.rootNode&&this.tree.showRoot&&this.tree.domNode.setAttribute("aria-expanded","false");d.remove(this.contentNode,"dijitTreeContentExpanded");this._setExpando();this._updateItemClasses(this.item);var a=b.wipeOut({node:this.containerNode,duration:E.defaultDuration}),e=this._collapseDeferred=new c(function(){a.stop()});p.after(a,"onEnd",
function(){e.resolve(!0)},!0);a.play();return y(e)},indent:0,setChildItems:function(b){var c=this.tree,d=c.model,u=[],l=c.focusedChild,f=this.getChildren();h.forEach(f,function(a){I.prototype.removeChild.call(this,a)},this);this.defer(function(){h.forEach(f,function(a){if(!a._destroyed&&!a.getParent()){var b=function(a){var e=d.getIdentity(a.item),u=c._itemNodesMap[e];1==u.length?delete c._itemNodesMap[e]:(e=h.indexOf(u,a),-1!=e&&u.splice(e,1));h.forEach(a.getChildren(),b)};c.dndController.removeTreeNode(a);
b(a);if(c.persist){var u=h.map(a.getTreePath(),function(a){return c.model.getIdentity(a)}).join("/"),w;for(w in c._openedNodes)w.substr(0,u.length)==u&&delete c._openedNodes[w];c._saveExpandedNodes()}c.lastFocusedChild&&!e.isDescendant(c.lastFocusedChild.domNode,c.domNode)&&delete c.lastFocusedChild;l&&!e.isDescendant(l.domNode,c.domNode)&&c.focus();a.destroyRecursive()}})});this.state="Loaded";b&&0<b.length?(this.isExpandable=!0,h.forEach(b,function(a){var b=d.getIdentity(a),e=c._itemNodesMap[b],
w;if(e)for(var l=0;l<e.length;l++)if(e[l]&&!e[l].getParent()){w=e[l];w.set("indent",this.indent+1);break}w||(w=this.tree._createTreeNode({item:a,tree:c,isExpandable:d.mayHaveChildren(a),label:c.getLabel(a),labelType:c.model&&c.model.labelType||"text",tooltip:c.getTooltip(a),ownerDocument:c.ownerDocument,dir:c.dir,lang:c.lang,textDir:c.textDir,indent:this.indent+1}),e?e.push(w):c._itemNodesMap[b]=[w]);this.addChild(w);(this.tree.autoExpand||this.tree._state(w))&&u.push(c._expandNode(w))},this),h.forEach(this.getChildren(),
function(a){a._updateLayout()})):this.isExpandable=!1;this._setExpando&&this._setExpando(!1);this._updateItemClasses(this.item);b=a(u);this.tree._startPaint(b);return y(b)},getTreePath:function(){for(var a=this,b=[];a&&a!==this.tree.rootNode;)b.unshift(a.item),a=a.getParent();b.unshift(this.tree.rootNode.item);return b},getIdentity:function(){return this.tree.model.getIdentity(this.item)},removeChild:function(a){this.inherited(arguments);var b=this.getChildren();0==b.length&&(this.isExpandable=!1,
this.collapse());h.forEach(b,function(a){a._updateLayout()})},makeExpandable:function(){this.isExpandable=!0;this._setExpando(!1)},setSelected:function(a){this.labelNode.setAttribute("aria-selected",a?"true":"false");d.toggle(this.rowNode,"dijitTreeRowSelected",a)},focus:function(){K.focus(this.focusNode)}});l("dojo-bidi")&&C.extend({_setTextDirAttr:function(a){!a||this.textDir==a&&this._created||(this._set("textDir",a),this.applyTextDir(this.labelNode),h.forEach(this.getChildren(),function(b){b.set("textDir",
a)},this))}});var A=k("dijit.Tree",[F,L,H,G],{baseClass:"dijitTree",store:null,model:null,query:null,label:"",showRoot:!0,childrenAttr:["children"],paths:[],path:[],selectedItems:null,selectedItem:null,openOnClick:!1,openOnDblClick:!1,templateString:O,persist:!1,autoExpand:!1,dndController:Q,dndParams:"onDndDrop itemCreator onDndCancel checkAcceptance checkItemAcceptance dragThreshold betweenThreshold".split(" "),onDndDrop:null,itemCreator:null,onDndCancel:null,checkAcceptance:null,checkItemAcceptance:null,
dragThreshold:5,betweenThreshold:0,_nodePixelIndent:19,_publish:function(a,b){z.publish(this.id,q.mixin({tree:this,event:a},b||{}))},postMixInProperties:function(){this.tree=this;this.autoExpand&&(this.persist=!1);this._itemNodesMap={};!this.cookieName&&this.id&&(this.cookieName=this.id+"SaveStateCookie");this.expandChildrenDeferred=new c;this.pendingCommandsPromise=this.expandChildrenDeferred.promise;this.inherited(arguments)},postCreate:function(){this._initState();var a=this;this.own(v(this.containerNode,
v.selector(".dijitTreeNode",r.enter),function(b){a._onNodeMouseEnter(B.byNode(this),b)}),v(this.containerNode,v.selector(".dijitTreeNode",r.leave),function(b){a._onNodeMouseLeave(B.byNode(this),b)}),v(this.containerNode,v.selector(".dijitTreeRow",D.press),function(b){a._onNodePress(B.getEnclosingWidget(this),b)}),v(this.containerNode,v.selector(".dijitTreeRow",D),function(b){a._onClick(B.getEnclosingWidget(this),b)}),v(this.containerNode,v.selector(".dijitTreeRow","dblclick"),function(b){a._onDblClick(B.getEnclosingWidget(this),
b)}));this.model||this._store2model();this.own(p.after(this.model,"onChange",q.hitch(this,"_onItemChange"),!0),p.after(this.model,"onChildrenChange",q.hitch(this,"_onItemChildrenChange"),!0),p.after(this.model,"onDelete",q.hitch(this,"_onItemDelete"),!0));this.inherited(arguments);if(this.dndController){q.isString(this.dndController)&&(this.dndController=q.getObject(this.dndController));for(var b={},c=0;c<this.dndParams.length;c++)this[this.dndParams[c]]&&(b[this.dndParams[c]]=this[this.dndParams[c]]);
this.dndController=new this.dndController(this,b)}this._load();this.onLoadDeferred=y(this.pendingCommandsPromise);this.onLoadDeferred.then(q.hitch(this,"onLoad"))},_store2model:function(){this._v10Compat=!0;t.deprecated("Tree: from version 2.0, should specify a model object rather than a store/query");var a={id:this.id+"_ForestStoreModel",store:this.store,query:this.query,childrenAttrs:this.childrenAttr};this.params.mayHaveChildren&&(a.mayHaveChildren=q.hitch(this,"mayHaveChildren"));this.params.getItemChildren&&
(a.getChildren=q.hitch(this,function(a,b,c){this.getItemChildren(this._v10Compat&&a===this.model.root?null:a,b,c)}));this.model=new P(a);this.showRoot=!!this.label},onLoad:function(){},_load:function(){this.model.getRoot(q.hitch(this,function(a){var b=this.rootNode=this.tree._createTreeNode({item:a,tree:this,isExpandable:!0,label:this.label||this.getLabel(a),labelType:this.model.labelType||"text",textDir:this.textDir,indent:this.showRoot?0:-1});this.showRoot?(this.domNode.setAttribute("aria-multiselectable",
!this.dndController.singular),this.rootLoadingIndicator.style.display="none"):(b.rowNode.style.display="none",this.domNode.setAttribute("role","presentation"),this.domNode.removeAttribute("aria-expanded"),this.domNode.removeAttribute("aria-multiselectable"),this["aria-label"]?(b.containerNode.setAttribute("aria-label",this["aria-label"]),this.domNode.removeAttribute("aria-label")):this["aria-labelledby"]&&(b.containerNode.setAttribute("aria-labelledby",this["aria-labelledby"]),this.domNode.removeAttribute("aria-labelledby")),
b.labelNode.setAttribute("role","presentation"),b.labelNode.removeAttribute("aria-selected"),b.containerNode.setAttribute("role","tree"),b.containerNode.setAttribute("aria-expanded","true"),b.containerNode.setAttribute("aria-multiselectable",!this.dndController.singular));this.containerNode.appendChild(b.domNode);a=this.model.getIdentity(a);this._itemNodesMap[a]?this._itemNodesMap[a].push(b):this._itemNodesMap[a]=[b];b._updateLayout();this._expandNode(b).then(q.hitch(this,function(){this._destroyed||
(this.rootLoadingIndicator.style.display="none",this.expandChildrenDeferred.resolve(!0))}))}),q.hitch(this,function(a){console.error(this,": error loading root: ",a)}))},getNodesByItem:function(a){if(!a)return[];a=q.isString(a)?a:this.model.getIdentity(a);return[].concat(this._itemNodesMap[a])},_setSelectedItemAttr:function(a){this.set("selectedItems",[a])},_setSelectedItemsAttr:function(a){var b=this;return this.pendingCommandsPromise=this.pendingCommandsPromise.always(q.hitch(this,function(){var c=
h.map(a,function(a){return!a||q.isString(a)?a:b.model.getIdentity(a)}),e=[];h.forEach(c,function(a){e=e.concat(b._itemNodesMap[a]||[])});this.set("selectedNodes",e)}))},_setPathAttr:function(a){return a.length?y(this.set("paths",[a]).then(function(a){return a[0]})):y(this.set("paths",[]).then(function(a){return a[0]}))},_setPathsAttr:function(b){function c(a,b){var d=a.shift(),u=h.filter(b,function(a){return a.getIdentity()==d})[0];if(u)return a.length?e._expandNode(u).then(function(){return c(a,
u.getChildren())}):u;throw new A.PathError("Could not expand path at "+d);}var e=this;return y(this.pendingCommandsPromise=this.pendingCommandsPromise.always(function(){return a(h.map(b,function(a){a=h.map(a,function(a){return a&&q.isObject(a)?e.model.getIdentity(a):a});if(a.length)return c(a,[e.rootNode]);throw new A.PathError("Empty path");}))}).then(function(a){e.set("selectedNodes",a);return e.paths}))},_setSelectedNodeAttr:function(a){this.set("selectedNodes",[a])},_setSelectedNodesAttr:function(a){this.dndController.setSelection(a)},
expandAll:function(){function b(e){return c._expandNode(e).then(function(){var c=h.filter(e.getChildren()||[],function(a){return a.isExpandable});return a(h.map(c,b))})}var c=this;return y(b(this.rootNode))},collapseAll:function(){function b(e){var d=h.filter(e.getChildren()||[],function(a){return a.isExpandable}),d=a(h.map(d,b));return!e.isExpanded||e==c.rootNode&&!c.showRoot?d:d.then(function(){return c._collapseNode(e)})}var c=this;return y(b(this.rootNode))},mayHaveChildren:function(){},getItemChildren:function(){},
getLabel:function(a){return this.model.getLabel(a)},getIconClass:function(a,b){return!a||this.model.mayHaveChildren(a)?b?"dijitFolderOpened":"dijitFolderClosed":"dijitLeaf"},getLabelClass:function(){},getRowClass:function(){},getIconStyle:function(){},getLabelStyle:function(){},getRowStyle:function(){},getTooltip:function(){return""},_onDownArrow:function(a,b){(a=this._getNext(b))&&a.isTreeNode&&this.focusNode(a)},_onUpArrow:function(a,b){if(a=b.getPreviousSibling())for(b=a;b.isExpandable&&b.isExpanded&&
b.hasChildren();)b=b.getChildren(),b=b[b.length-1];else if(a=b.getParent(),this.showRoot||a!==this.rootNode)b=a;b&&b.isTreeNode&&this.focusNode(b)},_onRightArrow:function(a,b){b.isExpandable&&!b.isExpanded?this._expandNode(b):b.hasChildren()&&(b=b.getChildren()[0])&&b.isTreeNode&&this.focusNode(b)},_onLeftArrow:function(a,b){b.isExpandable&&b.isExpanded?this._collapseNode(b):(a=b.getParent())&&a.isTreeNode&&(this.showRoot||a!==this.rootNode)&&this.focusNode(a)},focusLastChild:function(){var a=this._getLast();
a&&a.isTreeNode&&this.focusNode(a)},_getFirst:function(){return this.showRoot?this.rootNode:this.rootNode.getChildren()[0]},_getLast:function(){for(var a=this.rootNode;a.isExpanded;){var b=a.getChildren();if(!b.length)break;a=b[b.length-1]}return a},_getNext:function(a){if(a.isExpandable&&a.isExpanded&&a.hasChildren())return a.getChildren()[0];for(;a&&a.isTreeNode;){var b=a.getNextSibling();if(b)return b;a=a.getParent()}return null},childSelector:".dijitTreeRow",isExpandoNode:function(a,b){return e.isDescendant(a,
b.expandoNode)||e.isDescendant(a,b.expandoNodeText)},_onNodePress:function(a,b){this.focusNode(a)},__click:function(a,b,c,e){var d=this.isExpandoNode(b.target,a);a.isExpandable&&(c||d)?this._onExpandoClick({node:a}):(this._publish("execute",{item:a.item,node:a,evt:b}),this[e](a.item,a,b),this.focusNode(a));b.stopPropagation();b.preventDefault()},_onClick:function(a,b){this.__click(a,b,this.openOnClick,"onClick")},_onDblClick:function(a,b){this.__click(a,b,this.openOnDblClick,"onDblClick")},_onExpandoClick:function(a){a=
a.node;this.focusNode(a);a.isExpanded?this._collapseNode(a):this._expandNode(a)},onClick:function(){},onDblClick:function(){},onOpen:function(){},onClose:function(){},_getNextNode:function(a){t.deprecated(this.declaredClass+"::_getNextNode(node) is deprecated. Use _getNext(node) instead.","","2.0");return this._getNext(a)},_getRootOrFirstNode:function(){t.deprecated(this.declaredClass+"::_getRootOrFirstNode() is deprecated. Use _getFirst() instead.","","2.0");return this._getFirst()},_collapseNode:function(a){a._expandNodeDeferred&&
delete a._expandNodeDeferred;if("Loading"!=a.state&&a.isExpanded){var b=a.collapse();this.onClose(a.item,a);this._state(a,!1);this._startPaint(b);return b}},_expandNode:function(a){if(a._expandNodeDeferred)return a._expandNodeDeferred;var b=this.model,e=a.item,d=this;a._loadDeferred||(a.markProcessing(),a._loadDeferred=new c,b.getChildren(e,function(b){a.unmarkProcessing();a.setChildItems(b).then(function(){a._loadDeferred.resolve(b)})},function(b){console.error(d,": error loading "+a.label+" children: ",
b);a._loadDeferred.reject(b)}));b=a._loadDeferred.then(q.hitch(this,function(){var b=a.expand();this.onOpen(a.item,a);this._state(a,!0);return b}));this._startPaint(b);return b},focusNode:function(a){for(var b=[],c=this.domNode;c&&c.tagName&&"IFRAME"!==c.tagName.toUpperCase();c=c.parentNode)b.push({domNode:c.contentWindow||c,scrollLeft:c.scrollLeft||0,scrollTop:c.scrollTop||0});this.focusChild(a);this.defer(function(){for(var a=0,c=b.length;a<c;a++)b[a].domNode.scrollLeft=b[a].scrollLeft,b[a].domNode.scrollTop=
b[a].scrollTop},0)},_onNodeMouseEnter:function(){},_onNodeMouseLeave:function(){},_onItemChange:function(a){var b=this.model.getIdentity(a);if(b=this._itemNodesMap[b]){var c=this.getLabel(a),e=this.getTooltip(a);h.forEach(b,function(b){b.set({item:a,label:c,tooltip:e});b._updateItemClasses(a)})}},_onItemChildrenChange:function(a,b){a=this.model.getIdentity(a);(a=this._itemNodesMap[a])&&h.forEach(a,function(a){a.setChildItems(b)})},_onItemDelete:function(a){a=this.model.getIdentity(a);var b=this._itemNodesMap[a];
b&&(h.forEach(b,function(a){this.dndController.removeTreeNode(a);var b=a.getParent();b&&b.removeChild(a);this.lastFocusedChild&&!e.isDescendant(this.lastFocusedChild.domNode,this.domNode)&&delete this.lastFocusedChild;this.focusedChild&&!e.isDescendant(this.focusedChild.domNode,this.domNode)&&this.focus();a.destroyRecursive()},this),delete this._itemNodesMap[a])},_initState:function(){this._openedNodes={};if(this.persist&&this.cookieName){var a=m(this.cookieName);a&&h.forEach(a.split(","),function(a){this._openedNodes[a]=
!0},this)}},_state:function(a,b){if(!this.persist)return!1;var c=h.map(a.getTreePath(),function(a){return this.model.getIdentity(a)},this).join("/");if(1===arguments.length)return this._openedNodes[c];b?this._openedNodes[c]=!0:delete this._openedNodes[c];this._saveExpandedNodes()},_saveExpandedNodes:function(){if(this.persist&&this.cookieName){var a=[],b;for(b in this._openedNodes)a.push(b);m(this.cookieName,a.join(","),{expires:365})}},destroy:function(){this._curSearch&&(this._curSearch.timer.remove(),
delete this._curSearch);this.rootNode&&this.rootNode.destroyRecursive();this.dndController&&!q.isString(this.dndController)&&this.dndController.destroy();this.rootNode=null;this.inherited(arguments)},destroyRecursive:function(){this.destroy()},resize:function(a){a&&g.setMarginBox(this.domNode,a);this._nodePixelIndent=g.position(this.tree.indentDetector).w||this._nodePixelIndent;this.expandChildrenDeferred.then(q.hitch(this,function(){this.rootNode.set("indent",this.showRoot?0:-1);this._adjustWidths()}))},
_outstandingPaintOperations:0,_startPaint:function(a){this._outstandingPaintOperations++;this._adjustWidthsTimer&&(this._adjustWidthsTimer.remove(),delete this._adjustWidthsTimer);var b=q.hitch(this,function(){this._outstandingPaintOperations--;0>=this._outstandingPaintOperations&&!this._adjustWidthsTimer&&this._started&&(this._adjustWidthsTimer=this.defer("_adjustWidths"))});J(a,b,b)},_adjustWidths:function(){this._adjustWidthsTimer&&(this._adjustWidthsTimer.remove(),delete this._adjustWidthsTimer);
this.containerNode.style.width="auto";this.containerNode.style.width=this.domNode.scrollWidth>this.domNode.offsetWidth?"auto":"100%"},_createTreeNode:function(a){return new C(a)},focus:function(){this.lastFocusedChild?this.focusNode(this.lastFocusedChild):this.focusFirstChild()}});l("dojo-bidi")&&A.extend({_setTextDirAttr:function(a){a&&this.textDir!=a&&(this._set("textDir",a),this.rootNode.set("textDir",a))}});A.PathError=f("TreePathError");A._TreeNode=C;return A})},"dijit/tree/TreeStoreModel":function(){define(["dojo/_base/array",
"dojo/aspect","dojo/_base/declare","dojo/_base/lang"],function(h,p,m,k){return m("dijit.tree.TreeStoreModel",null,{store:null,childrenAttrs:["children"],newItemIdAttr:"id",labelAttr:"",root:null,query:null,deferItemLoadingUntilExpand:!1,constructor:function(c){k.mixin(this,c);this.connects=[];c=this.store;if(!c.getFeatures()["dojo.data.api.Identity"])throw Error("dijit.tree.TreeStoreModel: store must support dojo.data.Identity");c.getFeatures()["dojo.data.api.Notification"]&&(this.connects=this.connects.concat([p.after(c,
"onNew",k.hitch(this,"onNewItem"),!0),p.after(c,"onDelete",k.hitch(this,"onDeleteItem"),!0),p.after(c,"onSet",k.hitch(this,"onSetItem"),!0)]))},destroy:function(){for(var c;c=this.connects.pop();)c.remove()},getRoot:function(c,a){this.root?c(this.root):this.store.fetch({query:this.query,onComplete:k.hitch(this,function(a){if(1!=a.length)throw Error("dijit.tree.TreeStoreModel: root query returned "+a.length+" items, but must return exactly one");this.root=a[0];c(this.root)}),onError:a})},mayHaveChildren:function(c){return h.some(this.childrenAttrs,
function(a){return this.store.hasAttribute(c,a)},this)},getChildren:function(c,a,e){var d=this.store;if(d.isItemLoaded(c)){for(var g=[],n=0;n<this.childrenAttrs.length;n++)var f=d.getValues(c,this.childrenAttrs[n]),g=g.concat(f);var b=0;this.deferItemLoadingUntilExpand||h.forEach(g,function(a){d.isItemLoaded(a)||b++});0==b?a(g):h.forEach(g,function(c,l){d.isItemLoaded(c)||d.loadItem({item:c,onItem:function(c){g[l]=c;0==--b&&a(g)},onError:e})})}else{var l=k.hitch(this,arguments.callee);d.loadItem({item:c,
onItem:function(b){l(b,a,e)},onError:e})}},isItem:function(c){return this.store.isItem(c)},fetchItemByIdentity:function(c){this.store.fetchItemByIdentity(c)},getIdentity:function(c){return this.store.getIdentity(c)},getLabel:function(c){return this.labelAttr?this.store.getValue(c,this.labelAttr):this.store.getLabel(c)},newItem:function(c,a,e){var d={parent:a,attribute:this.childrenAttrs[0]},g;this.newItemIdAttr&&c[this.newItemIdAttr]?this.fetchItemByIdentity({identity:c[this.newItemIdAttr],scope:this,
onItem:function(h){h?this.pasteItem(h,null,a,!0,e):(g=this.store.newItem(c,d))&&void 0!=e&&this.pasteItem(g,a,a,!1,e)}}):(g=this.store.newItem(c,d))&&void 0!=e&&this.pasteItem(g,a,a,!1,e)},pasteItem:function(c,a,e,d,g){var n=this.store,f=this.childrenAttrs[0];a&&h.forEach(this.childrenAttrs,function(b){if(n.containsValue(a,b,c)){if(!d){var e=h.filter(n.getValues(a,b),function(a){return a!=c});n.setValues(a,b,e)}f=b}});if(e)if("number"==typeof g){var b=n.getValues(e,f).slice();b.splice(g,0,c);n.setValues(e,
f,b)}else n.setValues(e,f,n.getValues(e,f).concat(c))},onChange:function(){},onChildrenChange:function(){},onDelete:function(){},onNewItem:function(c,a){a&&this.getChildren(a.item,k.hitch(this,function(c){this.onChildrenChange(a.item,c)}))},onDeleteItem:function(c){this.onDelete(c)},onSetItem:function(c,a){if(-1!=h.indexOf(this.childrenAttrs,a))this.getChildren(c,k.hitch(this,function(a){this.onChildrenChange(c,a)}));else this.onChange(c)}})})},"dijit/tree/ForestStoreModel":function(){define(["dojo/_base/array",
"dojo/_base/declare","dojo/_base/kernel","dojo/_base/lang","./TreeStoreModel"],function(h,p,m,k,c){return p("dijit.tree.ForestStoreModel",c,{rootId:"$root$",rootLabel:"ROOT",query:null,constructor:function(a){this.root={store:this,root:!0,id:a.rootId,label:a.rootLabel,children:a.rootChildren}},mayHaveChildren:function(a){return a===this.root||this.inherited(arguments)},getChildren:function(a,c,d){a===this.root?this.root.children?c(this.root.children):this.store.fetch({query:this.query,onComplete:k.hitch(this,
function(a){this.root.children=a;c(a)}),onError:d}):this.inherited(arguments)},isItem:function(a){return a===this.root?!0:this.inherited(arguments)},fetchItemByIdentity:function(a){if(a.identity==this.root.id){var c=a.scope||m.global;a.onItem&&a.onItem.call(c,this.root)}else this.inherited(arguments)},getIdentity:function(a){return a===this.root?this.root.id:this.inherited(arguments)},getLabel:function(a){return a===this.root?this.root.label:this.inherited(arguments)},newItem:function(a,c,d){return c===
this.root?(this.onNewRootItem(a),this.store.newItem(a)):this.inherited(arguments)},onNewRootItem:function(){},pasteItem:function(a,c,d,g,h){if(c===this.root&&!g)this.onLeaveRoot(a);this.inherited(arguments,[a,c===this.root?null:c,d===this.root?null:d,g,h]);if(d===this.root)this.onAddToRoot(a)},onAddToRoot:function(a){console.log(this,": item ",a," added to root")},onLeaveRoot:function(a){console.log(this,": item ",a," removed from root")},_requeryTop:function(){var a=this.root.children||[];this.store.fetch({query:this.query,
onComplete:k.hitch(this,function(c){this.root.children=c;if(a.length!=c.length||h.some(a,function(a,e){return c[e]!=a}))this.onChildrenChange(this.root,c)})})},onNewItem:function(a,c){this._requeryTop();this.inherited(arguments)},onDeleteItem:function(a){-1!=h.indexOf(this.root.children,a)&&this._requeryTop();this.inherited(arguments)},onSetItem:function(a,c,d,g){this._requeryTop();this.inherited(arguments)}})})},"dijit/tree/_dndSelector":function(){define("dojo/_base/array dojo/_base/declare dojo/_base/kernel dojo/_base/lang dojo/dnd/common dojo/dom dojo/mouse dojo/on dojo/touch ../a11yclick ./_dndContainer".split(" "),
function(h,p,m,k,c,a,e,d,g,n,f){return p("dijit.tree._dndSelector",f,{constructor:function(){this.selection={};this.anchor=null;this.events.push(d(this.tree.domNode,g.press,k.hitch(this,"onMouseDown")),d(this.tree.domNode,g.release,k.hitch(this,"onMouseUp")),d(this.tree.domNode,g.move,k.hitch(this,"onMouseMove")),d(this.tree.domNode,n.press,k.hitch(this,"onClickPress")),d(this.tree.domNode,n.release,k.hitch(this,"onClickRelease")))},singular:!1,getSelectedTreeNodes:function(){var a=[],c=this.selection,
d;for(d in c)a.push(c[d]);return a},selectNone:function(){this.setSelection([]);return this},destroy:function(){this.inherited(arguments);this.selection=this.anchor=null},addTreeNode:function(a,c){this.setSelection(this.getSelectedTreeNodes().concat([a]));c&&(this.anchor=a);return a},removeTreeNode:function(b){var c=h.filter(this.getSelectedTreeNodes(),function(c){return!a.isDescendant(c.domNode,b.domNode)});this.setSelection(c);return b},isTreeNodeSelected:function(a){return a.id&&!!this.selection[a.id]},
setSelection:function(a){var b=this.getSelectedTreeNodes();h.forEach(this._setDifference(b,a),k.hitch(this,function(a){a.setSelected(!1);this.anchor==a&&delete this.anchor;delete this.selection[a.id]}));h.forEach(this._setDifference(a,b),k.hitch(this,function(a){a.setSelected(!0);this.selection[a.id]=a}));this._updateSelectionProperties()},_setDifference:function(a,c){h.forEach(c,function(a){a.__exclude__=!0});a=h.filter(a,function(a){return!a.__exclude__});h.forEach(c,function(a){delete a.__exclude__});
return a},_updateSelectionProperties:function(){var a=this.getSelectedTreeNodes(),c=[],d=[];h.forEach(a,function(a){var b=a.getTreePath();d.push(a);c.push(b)},this);a=h.map(d,function(a){return a.item});this.tree._set("paths",c);this.tree._set("path",c[0]||[]);this.tree._set("selectedNodes",d);this.tree._set("selectedNode",d[0]||null);this.tree._set("selectedItems",a);this.tree._set("selectedItem",a[0]||null)},onClickPress:function(a){if(!(this.current&&this.current.isExpandable&&this.tree.isExpandoNode(a.target,
this.current))){"mousedown"==a.type&&e.isLeft(a)&&a.preventDefault();var b="keydown"==a.type?this.tree.focusedChild:this.current;if(b){var d=c.getCopyKeyState(a),f=b.id;this.singular||a.shiftKey||!this.selection[f]?(this._doDeselect=!1,this.userSelect(b,d,a.shiftKey)):this._doDeselect=!0}}},onClickRelease:function(a){this._doDeselect&&(this._doDeselect=!1,this.userSelect("keyup"==a.type?this.tree.focusedChild:this.current,c.getCopyKeyState(a),a.shiftKey))},onMouseMove:function(){this._doDeselect=
!1},onMouseDown:function(){},onMouseUp:function(){},_compareNodes:function(a,c){if(a===c)return 0;if("sourceIndex"in document.documentElement)return a.sourceIndex-c.sourceIndex;if("compareDocumentPosition"in document.documentElement)return a.compareDocumentPosition(c)&2?1:-1;if(document.createRange){var b=doc.createRange();b.setStartBefore(a);a=doc.createRange();a.setStartBefore(c);return b.compareBoundaryPoints(b.END_TO_END,a)}throw Error("dijit.tree._compareNodes don't know how to compare two different nodes in this browser");
},userSelect:function(a,c,d){if(this.singular)this.anchor==a&&c?this.selectNone():(this.setSelection([a]),this.anchor=a);else if(d&&this.anchor){c=this._compareNodes(this.anchor.rowNode,a.rowNode);d=this.anchor;0>c?c=d:(c=a,a=d);for(d=[];c!=a;)d.push(c),c=this.tree._getNext(c);d.push(a);this.setSelection(d)}else this.selection[a.id]&&c?this.removeTreeNode(a):c?this.addTreeNode(a,!0):(this.setSelection([a]),this.anchor=a)},getItem:function(a){return{data:this.selection[a],type:["treeNode"]}},forInSelectedItems:function(a,
c){c=c||m.global;for(var b in this.selection)a.call(c,this.getItem(b),b,this)}})})},"dijit/tree/_dndContainer":function(){define("dojo/aspect dojo/_base/declare dojo/dom-class dojo/_base/lang dojo/on dojo/touch".split(" "),function(h,p,m,k,c,a){return p("dijit.tree._dndContainer",null,{constructor:function(e,d){this.tree=e;this.node=e.domNode;k.mixin(this,d);this.containerState="";m.add(this.node,"dojoDndContainer");this.events=[c(this.node,a.enter,k.hitch(this,"onOverEvent")),c(this.node,a.leave,
k.hitch(this,"onOutEvent")),h.after(this.tree,"_onNodeMouseEnter",k.hitch(this,"onMouseOver"),!0),h.after(this.tree,"_onNodeMouseLeave",k.hitch(this,"onMouseOut"),!0),c(this.node,"dragstart, selectstart",function(a){a.preventDefault()})]},destroy:function(){for(var a;a=this.events.pop();)a.remove();this.node=this.parent=null},onMouseOver:function(a){this.current=a},onMouseOut:function(){this.current=null},_changeState:function(a,c){var d="dojoDnd"+a;a=a.toLowerCase()+"State";m.replace(this.node,d+
c,d+this[a]);this[a]=c},_addItemClass:function(a,c){m.add(a,"dojoDndItem"+c)},_removeItemClass:function(a,c){m.remove(a,"dojoDndItem"+c)},onOverEvent:function(){this._changeState("Container","Over")},onOutEvent:function(){this._changeState("Container","")}})})},"widgets/Swipe/MultSelector/MultSelector":function(){define("dojo/Evented dojo/_base/declare dojo/_base/lang dijit/_WidgetBase dijit/_TemplatedMixin dijit/_WidgetsInTemplateMixin dojo/on jimu/utils dojo/_base/html ./a11y/MultSelector dojo/text!./MultSelector.html jimu/dijit/CheckBox dijit/form/Select dojox/form/CheckedMultiSelect dijit/form/ValidationTextBox xstyle/css!dojox/form/resources/CheckedMultiSelect.css".split(" "),
function(h,p,m,k,c,a,e,d,g,n,f){h=p([k,c,a,h],{templateString:f,_LAST_VALUEL:"",postCreate:function(){this.inherited(arguments)},startup:function(){this.inherited(arguments);this.a11y_initEvents();this.own(e(this.selector,"change",m.hitch(this,function(a){this._updateMultSelectorLabel(this._getOptionsLabelsByValues(a));this._LAST_VALUEL.toString()!==a.toString()&&(this.selector.dropDownButton.toggleDropDown(),this.selector.dropDownButton.toggleDropDown(),this.selector.dropDownButton.dropDown.lastFocusedChild&&
this.selector.dropDownButton.dropDown.lastFocusedChild.domNode&&this.selector.dropDownButton.dropDown.lastFocusedChild.domNode.focus(),this.emit("change",a),this._LAST_VALUEL=a)})))},initOptions:function(a,c){this.disable();this._initMultSelectorLabel();var b=null;c&&(b=this.selector.getOptions());this.selector.removeOption(this.selector.getOptions());for(var d=[],e=0,f=a.length;e<f;e++){var l=a[e];this.selector.addOption(l);this._hasOptionMultSelected(l,c?b:a)&&d.push(l.value)}this.selector.set("value",
d);this._updateMultSelectorLabel(this._getOptionsLabelsByValues(d));this.enable()},setOptions:function(a){this.selector.set("options",a)},getOptions:function(){return this.selector.get("options")},reset:function(){this.selector.set("options",[{value:"",label:""}]);this.selector.reset()},setValue:function(a){this.setConfig(a)},setConfig:function(a){this._setMultSelectorEmpty();this.selector.set("value",a)},getConfig:function(){return this.selector.getValue()},disable:function(){this.selector.set("disabled",
!0);this._DISABLED=!0},enable:function(){this.selector.set("disabled",!1);this._DISABLED=!1},_initMultSelectorLabel:function(){this.selector.labelDiv&&(g.empty(this.selector.labelDiv),g.destroy(this.selector.labelDiv),this.selector.labelDiv=null);this.a11y_initSelectorLabel();this.selector.labelDiv=g.create("div",{"class":"dijitReset dijitInline dijitButtonText multselector-label-container",tabindex:"-1"},this.selector.dropDownButton._buttonNode,"first");g.addClass(this.selector.labelDiv,"label-max-height");
g.addClass(this.selector.dropDownMenu.domNode,"mult-selector-dropdown-max-height");this._updateMultSelectorLabel([this.nls.defaultLayerHolder])},_setMultSelectorEmpty:function(){this.selector.set("value",[]);this._updateMultSelectorLabel([this.nls.defaultLayerHolder])},_updateMultSelectorLabel:function(a){g.empty(this.selector.labelDiv);a&&0!==a.length||this._setMultSelectorEmpty();for(var b=0,c=a.length;b<c;b++)g.create("div",{"class":"dijitReset dijitButtonText multselector-label",innerHTML:d.sanitizeHTML(a[b])},
this.selector.labelDiv)},_getOptionsLabelsByValues:function(a){for(var b=this.getOptions(),c=[],d=0,e=b.length;d<e;d++)for(var f=b[d],g=0,h=a.length;g<h;g++)f.value===a[g]&&c.push(f.label);return c},_hasOptionMultSelected:function(a,c){for(var b=0,d=c.length;b<d;b++){var e=c[b];if(e.value===a.value&&!0===e.selected)return!0}return!1}});h.extend(n);return h})},"widgets/Swipe/MultSelector/a11y/MultSelector":function(){define(["dojo/_base/lang","dojo/on","dojo/query","dojo/_base/html","dijit/a11yclick"],
function(h,p,m,k,c){return{a11y_init:function(){},a11y_initEvents:function(){this.own(p(this.selector,c,h.hitch(this,function(){this.selector.dropDownButton.toggleDropDown();for(var a=m(".dijitReset.dijitMenuItemLabel",this.selector.dropDown.domNode),c=0,d=a.length;c<d;c++){var g=a[c];k.attr(g,"title",g.innerText)}})))},a11y_initSelectorLabel:function(){var a=m(".dijitButtonText",this.selector.dropDownButton.buttonNode)[0];k.addClass(a,"hide");k.addClass(this.selector.dropDownButton.buttonNode,"hide");
k.setAttr(this.selector.dropDownButton.titleNode,"tabindex",-1)}}})},"widgets/Swipe/setting/Placement":function(){define("dojo/Evented dojo/_base/declare dojo/_base/lang dijit/_WidgetBase dijit/_TemplatedMixin dijit/_WidgetsInTemplateMixin dojo/on dojo/_base/html dojo/text!./Placement.html".split(" "),function(h,p,m,k,c,a,e,d,g){return p([k,c,a,h],{templateString:g,state:{direction:""},postCreate:function(){this.inherited(arguments)},startup:function(){this.own(e(this.showLeftSide,"click",m.hitch(this,
function(){this._setDisplay(this.showLeftSide)})));this.own(e(this.showRigthSide,"click",m.hitch(this,function(){this._setDisplay(this.showRigthSide)})));this.own(e(this.showUpSide,"click",m.hitch(this,function(){this._setDisplay(this.showUpSide)})));this.own(e(this.showDownSide,"click",m.hitch(this,function(){this._setDisplay(this.showDownSide)})));this.setVH(this.config.style);this.initInvert(this.config.invertPlacement);this.inherited(arguments)},setConfig:function(){},getConfig:function(){var a=
!1;if(d.hasClass(this.showLeftSide,"selected")||d.hasClass(this.showUpSide,"selected"))a=!1;else if(d.hasClass(this.showRigthSide,"selected")||d.hasClass(this.showDownSide,"selected"))a=!0;return a},setVH:function(a){"scope"===a?d.addClass(this.domNode,"hide"):(d.removeClass(this.domNode,"hide"),d.removeClass(this.vertical,"hide"),d.removeClass(this.horizontal,"hide"),"horizontal"===a?(d.addClass(this.vertical,"hide"),this.state.direction="horizontal"):(d.addClass(this.horizontal,"hide"),this.state.direction=
"vertical"),a=this.getConfig(),this.initInvert(a))},initInvert:function(a){d.removeClass(this.showLeftSide,"selected");d.removeClass(this.showRigthSide,"selected");d.removeClass(this.showUpSide,"selected");d.removeClass(this.showDownSide,"selected");a?"vertical"===this.state.direction?d.addClass(this.showRigthSide,"selected"):d.addClass(this.showDownSide,"selected"):"vertical"===this.state.direction?d.addClass(this.showLeftSide,"selected"):d.addClass(this.showUpSide,"selected")},_setDisplay:function(a){d.removeClass(this.showLeftSide,
"selected");d.removeClass(this.showRigthSide,"selected");d.removeClass(this.showUpSide,"selected");d.removeClass(this.showDownSide,"selected");a&&d.addClass(a,"selected")}})})},"jimu/dijit/ColorPickerButton":function(){define("dojo/_base/declare dijit/_WidgetBase dijit/_TemplatedMixin dojo/_base/lang dojo/_base/html dojo/on dojo/_base/Color dijit/TooltipDialog dijit/popup jimu/dijit/ColorSelector".split(" "),function(h,p,m,k,c,a,e,d,g,n){return h([p,m],{baseClass:"jimu-color-picker-btn",declaredClass:"jimu.dijit.ColorPickerButton",
templateString:'\x3cdiv\x3e\x3cdiv class\x3d"color-node" data-dojo-attach-point\x3d"colorNode"\x3e\x3c/div\x3e\x3cdiv class\x3d"seperator"\x3e\x3c/div\x3e\x3cdiv class\x3d"action-node" data-dojo-attach-point\x3d"actionNode"\x3e\x3c/div\x3e\x3c/div\x3e',_isTooltipDialogOpened:!1,color:null,showHex:!0,showHsv:!0,showRgb:!0,ensureMode:!1,postMixInProperties:function(){this.nls=window.jimuNls.common},postCreate:function(){this.inherited(arguments);this.color?this.color instanceof e||(this.color=new e(this.color)):
this.color=new e("#ccc");c.setStyle(this.colorNode,"backgroundColor",this.color.toHex());this.colorNode.title=this.color.toHex();this.showLabel&&this._changeLabel(this.color);this._createTooltipDialog(this.domNode);this._hideTooltipDialog();this.own(a(this.colorNode,"click",k.hitch(this,this._onNodeClick)));this.own(a(this.actionNode,"click",k.hitch(this,this._onNodeClick)));this.own(a(document.body,"click",k.hitch(this,function(a){this.isPartOfPopup(a.target||a.srcElement)||this._hideTooltipDialog()})))},
_onNodeClick:function(a){a.stopPropagation();a.preventDefault();this._isTooltipDialogOpened?this._hideTooltipDialog():this._showTooltipDialog()},destroy:function(){g.close(this.tooltipDialog);this.picker.destroy();this.tooltipDialog.destroy();this.inherited(arguments)},isPartOfPopup:function(a){var b=this.tooltipDialog.domNode;return a===b||c.isDescendant(a,b)},hideTooltipDialog:function(){this._hideTooltipDialog()},_showTooltipDialog:function(){g.open({parent:this.getParent(),popup:this.tooltipDialog,
around:this.domNode});this._isTooltipDialogOpened=!0},_hideTooltipDialog:function(){g.close(this.tooltipDialog);this._isTooltipDialogOpened=!1},_createTooltipDialog:function(){var f=c.create("div");this.tooltipDialog=new d({content:f});c.addClass(this.tooltipDialog.domNode,"jimu-color-picker-dialog");this.picker=new n({showHex:this.showHex,showRgb:this.showRgb,showHsv:this.showHsv,value:this.color.toHex(),onChange:k.hitch(this,function(a){this.ensureMode||(a=new e(a),this.setColor(a))})});this.picker.placeAt(f);
this.picker.startup();if(this.ensureMode){var b=c.create("div",{"class":"jimu-btn jimu-btn-vacation jimu-float-trailing jimu-leading-margin1",title:this.nls.cancel,innerHTML:this.nls.cancel},f);this.own(a(b,"click",k.hitch(this,function(){this._hideTooltipDialog()})));b=c.create("div",{"class":"jimu-btn jimu-float-trailing jimu-leading-margin1",title:this.nls.ok,innerHTML:this.nls.ok},f);this.own(a(b,"click",k.hitch(this,function(){var a=this.picker.get("value");this.setColor(new e(a));this._hideTooltipDialog()})));
f=c.create("div",{"class":"jimu-btn jimu-float-trailing jimu-leading-margin1",title:this.nls.apply,innerHTML:this.nls.apply},f);this.own(a(f,"click",k.hitch(this,function(){var a=this.picker.get("value");this.setColor(new e(a))})))}},setColor:function(a){if(a instanceof e){var b=this.color,d="";b&&(d=b.toHex());b=a.toHex();this.color=a;c.setStyle(this.colorNode,"backgroundColor",b);d!==b&&(this.picker.set("value",b),this.onChange(new e(b)))}},getColor:function(){return this.color},onChange:function(a){}})})},
"widgets/Swipe/setting/_build-generate_module":function(){define(["dojo/text!./Setting.html","dojo/text!./css/style.css","dojo/i18n!./nls/strings"],function(){})},"url:jimu/dijit/templates/_TreeNode.html":'\x3cdiv class\x3d"dijitTreeNode" role\x3d"presentation"\x3e\r\n\t\x3cdiv data-dojo-attach-point\x3d"rowNode" class\x3d"dijitTreeRow" role\x3d"presentation"\x3e\r\n\t\t\x3cspan data-dojo-attach-point\x3d"expandoNode" class\x3d"dijitInline dijitTreeExpando" role\x3d"presentation"\x3e\x3c/span\x3e\r\n\t\t\x3cspan data-dojo-attach-point\x3d"expandoNodeText" class\x3d"dijitExpandoText" role\x3d"presentation"\x3e\x3c/span\x3e\r\n\t\t\x3cspan data-dojo-attach-point\x3d"contentNode" class\x3d"dijitTreeContent" role\x3d"presentation"\x3e\r\n\t\t\t\x3cspan role\x3d"presentation" class\x3d"dijitInline dijitIcon dijitTreeIcon" data-dojo-attach-point\x3d"iconNode"\x3e\x3c/span\x3e\r\n\t\t\t\x3cspan data-dojo-attach-point\x3d"labelNode,focusNode" class\x3d"dijitTreeLabel" role\x3d"treeitem" tabindex\x3d"-1" aria-selected\x3d"false"\x3e\x3c/span\x3e\r\n\t\t\x3c/span\x3e\r\n\t\x3c/div\x3e\r\n\t\x3cdiv data-dojo-attach-point\x3d"containerNode" class\x3d"dijitTreeNodeContainer" role\x3d"presentation" style\x3d"display: none;"\x3e\x3c/div\x3e\r\n\x3c/div\x3e',
"url:dijit/templates/TreeNode.html":'\x3cdiv class\x3d"dijitTreeNode" role\x3d"presentation"\r\n\t\x3e\x3cdiv data-dojo-attach-point\x3d"rowNode" class\x3d"dijitTreeRow" role\x3d"presentation"\r\n\t\t\x3e\x3cspan data-dojo-attach-point\x3d"expandoNode" class\x3d"dijitInline dijitTreeExpando" role\x3d"presentation"\x3e\x3c/span\r\n\t\t\x3e\x3cspan data-dojo-attach-point\x3d"expandoNodeText" class\x3d"dijitExpandoText" role\x3d"presentation"\x3e\x3c/span\r\n\t\t\x3e\x3cspan data-dojo-attach-point\x3d"contentNode"\r\n\t\t\tclass\x3d"dijitTreeContent" role\x3d"presentation"\x3e\r\n\t\t\t\x3cspan role\x3d"presentation" class\x3d"dijitInline dijitIcon dijitTreeIcon" data-dojo-attach-point\x3d"iconNode"\x3e\x3c/span\r\n\t\t\t\x3e\x3cspan data-dojo-attach-point\x3d"labelNode,focusNode" class\x3d"dijitTreeLabel" role\x3d"treeitem"\r\n\t\t\t\t   tabindex\x3d"-1" aria-selected\x3d"false" id\x3d"${id}_label"\x3e\x3c/span\x3e\r\n\t\t\x3c/span\r\n\t\x3e\x3c/div\x3e\r\n\t\x3cdiv data-dojo-attach-point\x3d"containerNode" class\x3d"dijitTreeNodeContainer" role\x3d"presentation"\r\n\t\t style\x3d"display: none;" aria-labelledby\x3d"${id}_label"\x3e\x3c/div\x3e\r\n\x3c/div\x3e\r\n',
"url:dijit/templates/Tree.html":'\x3cdiv role\x3d"tree"\x3e\r\n\t\x3cdiv class\x3d"dijitInline dijitTreeIndent" style\x3d"position: absolute; top: -9999px" data-dojo-attach-point\x3d"indentDetector"\x3e\x3c/div\x3e\r\n\t\x3cdiv class\x3d"dijitTreeExpando dijitTreeExpandoLoading" data-dojo-attach-point\x3d"rootLoadingIndicator"\x3e\x3c/div\x3e\r\n\t\x3cdiv data-dojo-attach-point\x3d"containerNode" class\x3d"dijitTreeContainer" role\x3d"presentation"\x3e\r\n\t\x3c/div\x3e\r\n\x3c/div\x3e\r\n',"url:widgets/Swipe/MultSelector/MultSelector.html":'\x3cdiv class\x3d"mult-selector"\x3e\r\n\t\x3cselect data-dojo-type\x3d"dojox/form/CheckedMultiSelect" multiple\x3d"true" dropDown\x3d"true"\r\n\t\tdata-dojo-attach-point\x3d"selector"\x3e\x3c/select\x3e\r\n\x3c/div\x3e',
"url:widgets/Swipe/setting/LayersSetting.html":'\x3cdiv class\x3d"default-layer-setting"\x3e\r\n\t\x3cdiv class\x3d"layer-section swipe-mode"\x3e\r\n\t\t\x3cspan class\x3d"layer-text sub-title"\x3e${nls.swipeMode}\x3c/span\x3e\r\n\t\t\x3cdiv class\x3d"swipe-radio"\x3e\r\n\t\t\t\x3cinput data-dojo-attach-point\x3d"singleLayerRaido" data-dojo-type\x3d"dijit/form/RadioButton" type\x3d"radio" class\x3d"jimu-radio-btn blue-radio"\r\n\t\t\t name\x3d"modeRaido" id\x3d"singleLayerRaido" /\x3e\r\n\t\t\t\x3clabel data-dojo-attach-point\x3d"singleLayerRaidoLabel" for\x3d"singleLayerRaido"\x3e${nls.singleLayer}\x3c/label\x3e\r\n\t\t\x3c/div\x3e\r\n\t\t\x3cdiv class\x3d"swipe-radio"\x3e\r\n\t\t\t\x3cinput data-dojo-attach-point\x3d"multipleLayerRaido" data-dojo-type\x3d"dijit/form/RadioButton" type\x3d"radio" class\x3d"jimu-radio-btn blue-radio"\r\n\t\t\t name\x3d"modeRaido" id\x3d"multipleLayerRaido" /\x3e\r\n\t\t\t\x3clabel data-dojo-attach-point\x3d"multipleLayerRaidoLabel" for\x3d"multipleLayerRaido"\x3e${nls.MultipleLayers}\x3c/label\x3e\r\n\t\t\x3c/div\x3e\r\n\t\x3c/div\x3e\r\n\r\n\t\x3cdiv class\x3d"layer-section"\x3e\r\n\t\t\x3cspan class\x3d"layer-text"\x3e${nls.layersAvailable}\x3c/span\x3e\r\n\t\t\x3cspan class\x3d"jimu-icon jimu-icon-error hide" data-dojo-attach-point\x3d"layersChooserError"\x3e\x3c/span\x3e\r\n\t\t\x3cdiv class\x3d"layers-chooser" data-dojo-attach-point\x3d"layersChooser"\x3e\x3c/div\x3e\r\n\t\x3c/div\x3e\r\n\t\x3cdiv class\x3d"layer-section"\x3e\r\n\t\t\x3cspan class\x3d"layer-text" data-dojo-attach-point\x3d"layerTextNode"\x3e${nls.layerText}\x3c/span\x3e\r\n\t\t\x3cdiv class\x3d"select-container default-layers-selector"\x3e\r\n\t\t\t\x3cdiv data-dojo-attach-point\x3d"swipeLayersContainer"\x3e\r\n\t\t\t\t\x3cdiv data-dojo-type\x3d"dijit/form/Select" data-dojo-attach-point\x3d"swipeLayers"\x3e\x3c/div\x3e\r\n\t\t\t\x3c/div\x3e\r\n\t\t\r\n\t\t\t\x3cdiv data-dojo-attach-point\x3d"defaultLayersContainer" class\x3d"hide"\x3e\r\n\t\t\t\t\x3cdiv data-dojo-attach-point\x3d"defaultLayersSelectorContainer"\x3e\x3c/div\x3e\r\n\t\t\t\x3c/div\x3e\r\n\t\t\x3c/div\x3e\r\n\r\n\t\t\x3clabel class\x3d"layer-hint"\x3e${nls.layerHint}\x3c/label\x3e\r\n\t\x3c/div\x3e\r\n\x3c/div\x3e',
"url:widgets/Swipe/setting/Placement.html":'\x3cdiv class\x3d"default-layer-setting placement"\x3e\r\n\t\x3cspan class\x3d"layer-text sub-title"\x3e${nls.placement}\x3c/span\x3e\r\n\t\x3cdiv data-dojo-attach-point\x3d"vertical" class\x3d"vh"\x3e\r\n\t\t\x3cdiv data-dojo-attach-point\x3d"showLeftSide" title\x3d"${nls.showLeftSide}"\r\n\t\t\tclass\x3d"show-leftside placement-icons selected"\x3e\x3c/div\x3e\r\n\t\t\x3cdiv data-dojo-attach-point\x3d"showRigthSide" title\x3d"${nls.showRigthSide}"\r\n\t\tclass\x3d"show-rightside placement-icons"\x3e\x3c/div\x3e\r\n\t\x3c/div\x3e\r\n\t\x3cdiv data-dojo-attach-point\x3d"horizontal" class\x3d"vh hide"\x3e\r\n\t\t\x3cdiv data-dojo-attach-point\x3d"showUpSide" title\x3d"${nls.showUpSide}"\r\n\t\t\tclass\x3d"show-upside placement-icons selected"\x3e\x3c/div\x3e\r\n\t\t\x3cdiv data-dojo-attach-point\x3d"showDownSide" title\x3d"${nls.showDownSide}"\r\n\t\t\tclass\x3d"show-downside placement-icons"\x3e\x3c/div\x3e\r\n\t\x3c/div\x3e\r\n\x3c/div\x3e',
"url:widgets/Swipe/setting/Setting.html":'\x3cdiv style\x3d"width:100%;height:300px;"\x3e\r\n  \x3cdiv class\x3d"style-section"\x3e\r\n    \x3cspan class\x3d"style-text"\x3e${nls.styleText}\x3c/span\x3e\r\n    \x3cdiv class\x3d"style-items"\x3e\r\n      \x3cdiv class\x3d"style-item jimu-float-leading jimu-leading-margin2" data-dojo-attach-point\x3d"verticalNode"\x3e\r\n        \x3cdiv class\x3d"style-vertical style-item-image"\x3e\x3c/div\x3e\r\n        \x3cinput data-dojo-type\x3d"dijit/form/RadioButton" id\x3d"vertical-radio" data-dojo-attach-point\x3d"vertical"/\x3e\r\n        \x3clabel for\x3d"vertical-radio"\x3e${nls.vertical}\x3c/label\x3e\r\n      \x3c/div\x3e\r\n      \x3cdiv class\x3d"style-item jimu-float-leading jimu-leading-margin2" data-dojo-attach-point\x3d"horizontalNode"\x3e\r\n        \x3cdiv class\x3d"style-horizontal style-item-image"\x3e\x3c/div\x3e\r\n        \x3cinput data-dojo-type\x3d"dijit/form/RadioButton" id\x3d"horizontal-radio" data-dojo-attach-point\x3d"horizontal"/\x3e\r\n        \x3clabel for\x3d"horizontal-radio"\x3e${nls.horizontal}\x3c/label\x3e\r\n      \x3c/div\x3e\r\n      \x3cdiv class\x3d"style-item jimu-float-leading jimu-leading-margin2" data-dojo-attach-point\x3d"scopeNode"\x3e\r\n        \x3cdiv class\x3d"style-scope style-item-image"\x3e\x3c/div\x3e\r\n        \x3cinput data-dojo-type\x3d"dijit/form/RadioButton" id\x3d"scope-radio" data-dojo-attach-point\x3d"scope"/\x3e\r\n        \x3clabel for\x3d"scope-radio"\x3e${nls.scope}\x3c/label\x3e\r\n      \x3c/div\x3e\r\n    \x3c/div\x3e\r\n\r\n    \x3cdiv class\x3d"layer-section" data-dojo-attach-point\x3d"placementContainer"\x3e\x3c/div\x3e\r\n\r\n    \x3cdiv class\x3d"layer-section" data-dojo-attach-point\x3d"handlerColorPicker"\x3e\r\n      \x3cspan class\x3d"layer-text sub-title"\x3e${nls.barColor}\x3c/span\x3e\r\n      \x3cdiv class\x3d"handler-color-picker" data-dojo-attach-point\x3d"colorPicker" data-dojo-type\x3d"jimu/dijit/ColorPickerButton"\x3e\x3c/div\x3e\r\n    \x3c/div\x3e\r\n  \x3c/div\x3e\r\n\r\n  \x3cdiv class\x3d"layer-section"\x3e\r\n    \x3cdiv data-dojo-attach-point\x3d"layersSettingContainer"\x3e\x3c/div\x3e\r\n  \x3c/div\x3e\r\n\r\n  \x3cdiv class\x3d"layer-section" data-dojo-attach-point\x3d"isZoomNodeContainer"\x3e\r\n    \x3cdiv class\x3d"layer-text zoom-node" data-dojo-attach-point\x3d"isZoomNode"\x3e\x3c/div\x3e\r\n  \x3c/div\x3e\r\n  \x3cdiv class\x3d"layer-section"\x3e\r\n    \x3cdiv class\x3d"layer-text zoom-node" data-dojo-attach-point\x3d"isHidePanelNode"\x3e\x3c/div\x3e\r\n  \x3c/div\x3e\r\n\x3c/div\x3e',
"url:widgets/Swipe/setting/css/style.css":'.mult-selector .dojoxCheckedMultiSelect{width: 100%;}.mult-selector .label-max-height{max-height: 84px; overflow-y: auto;}.mult-selector .dojoxCheckedMultiSelect .dojoxCheckedMultiSelectButton{width: 100%; border: none !important; background-color: transparent !important; table-layout: fixed;}.mult-selector .dojoxCheckedMultiSelect .dojoxCheckedMultiSelectButton .multselector-label-container{width: 100%; overflow-x: hidden;}.mult-selector .dojoxCheckedMultiSelect .dojoxCheckedMultiSelectButton .multselector-label-container::-webkit-scrollbar{background:#000;} .mult-selector .dojoxCheckedMultiSelect .dojoxCheckedMultiSelectButton .dijitButtonNode .multselector-label-container .multselector-label{width: 100%; font-family: none !important; height: 26px; text-align: left !important; padding: 4px 10px; text-overflow: ellipsis; white-space: nowrap; table-layout: fixed; overflow: hidden; text-align: start;}.jimu-rtl .mult-selector .dojoxCheckedMultiSelect .dojoxCheckedMultiSelectButton .dijitButtonNode .multselector-label-container .multselector-label{text-align: right !important;}.mult-selector .dojoxCheckedMultiSelect .dojoxCheckedMultiSelectButton .dijitArrowButton {width: 100%; display: flex; background-color: transparent;}.mult-selector .dojoxCheckedMultiSelect .dojoxCheckedMultiSelectButton .dijitArrowButton .dijitArrowButtonInner{align-self: center;}.mult-selector .dojoxCheckedMultiSelectHover .dijitDownArrowButtonHover,.mult-selector .dojoxCheckedMultiSelectButtonFocused .dijitArrowButton{background-color: transparent !important;}.mult-selector .dojoxCheckedMultiSelect .dojoxCheckedMultiSelectButton .dijitButtonContents {border: none;}.dijitMenuPopup .dojoxCheckedMultiSelectMenu.mult-selector-dropdown-max-height{max-height: 260px; overflow-y: auto;}.dijitMenuPopup .dojoxCheckedMultiSelectMenu .dijitMenuTable {background-color: transparent; table-layout: fixed;}.dijitMenuPopup .dojoxCheckedMultiSelectMenu .dijitMenuTable .dijitMenuItem{height: 26px;}.dijitMenuPopup .dojoxCheckedMultiSelectMenu .dijitMenuTable .dijitMenuItem,.dijitMenuPopup .dojoxCheckedMultiSelectMenu .dijitMenuTable .dijitMenuItem td{border: none;}.dijitMenuPopup .dojoxCheckedMultiSelectMenu .dijitReset .dijitMenuItemIconCell{width: 36px; padding: 0 10px; padding: 3px 10px; border: none;}.dijitMenuPopup .dojoxCheckedMultiSelectMenu .dojoxCheckedMultiSelectSelectedOption{height: 26px;}.dijitMenuPopup .dojoxCheckedMultiSelectMenu .dojoxCheckedMultiSelectCheckBoxInput{display: none;} .claro .LaunchpadTheme .mult-selector .dijitDropDownButton .dijitArrowButtonInner:before,.claro .LaunchpadTheme .mult-selector .dijitArrowButton:before {content: "n"; display: none;}.claro .LaunchpadTheme .jimu-widget-swipe .mult-selector .dijitArrowButton {padding: 0; height: 100%;}.claro .LaunchpadTheme .mult-selector .dojoxCheckedMultiSelect .dojoxCheckedMultiSelectButton .dijitButtonNode .multselector-label-container .multselector-label{font-size: 14px; height: 30px;}.jimu-widget-swipe-setting{margin:0; padding:0; font-size:14px; color: #000;}.jimu-widget-swipe-setting .hide{display: none !important;}.jimu-widget-swipe-setting .transparent{visibility: hidden;}.jimu-widget-swipe-setting .style-text,.jimu-widget-swipe-setting .layer-text{font-weight: bold;}.jimu-widget-swipe-setting .style-section .style-items{margin: 5px 0 5px 0; overflow: hidden; font-size: 10px;}.jimu-widget-swipe-setting .style-section .style-item {text-align: center; color: #000; cursor: pointer;}.jimu-widget-swipe-setting .style-section .style-item label {font-size: 14px;}.jimu-widget-swipe-setting .style-section .style-item:first-child{margin-left: 0;}.jimu-rtl .style-item:first-child {margin-left: 2em; margin-right: 0;}.jimu-widget-swipe-setting .style-section .style-item-image{position: relative; width: 166px; height: 100px; margin-bottom: 10px;}.jimu-widget-swipe-setting .sub-title{min-width: 120px;}.jimu-widget-swipe-setting .layers-chooser{width: 100%; height: 130px; overflow-y: scroll; border: 1px solid #D7D7D7;}.jimu-widget-swipe-setting .default-layers-selector{border: 1px solid #D7D7D7;}.jimu-widget-swipe-setting .layers-chooser .jimu-basic-layer-chooser-from-map {position: relative;}.jimu-widget-swipe-setting .layers-chooser .jimu-basic-layer-chooser-from-map .jimu-tree{position: relative !important;}.jimu-widget-swipe-setting .layers-chooser .jimu-basic-layer-chooser-from-map-lite .tree-root-ul{border: none;}.jimu-widget-swipe-setting .style-item .style-vertical{background: url(images/vertical.png) center center; background-size: contain; background-repeat: no-repeat;}.jimu-widget-swipe-setting .style-item .style-horizontal{background: url(images/horizontal.png) center center; background-size: contain; background-repeat: no-repeat;}.jimu-widget-swipe-setting .style-item .style-scope{background: url(images/scope.png) center center; background-size: contain; background-repeat: no-repeat;}.jimu-widget-swipe-setting .placement{display: flex; align-items: center;}.jimu-widget-swipe-setting .placement .vh{display: flex;}.jimu-widget-swipe-setting .placement .placement-icons{display: flex; background-size: contain; background-repeat: no-repeat; background-position: center; height: 24px; width: 24px; margin: 0 10px;}.jimu-widget-swipe-setting .placement .show-leftside{background-image: url(images/l2r.svg);}.jimu-widget-swipe-setting .placement .show-leftside.selected{background-image: url(images/l2r_selected.svg);}.jimu-widget-swipe-setting .placement .show-rightside{background-image: url(images/r2l.svg); margin: 0;}.jimu-widget-swipe-setting .placement .show-rightside.selected{background-image: url(images/r2l_selected.svg);}.jimu-widget-swipe-setting .placement .show-upside{background-image: url(images/u2d.svg);}.jimu-widget-swipe-setting .placement .show-upside.selected{background-image: url(images/u2d_selected.svg);}.jimu-widget-swipe-setting .placement .show-downside{background-image: url(images/d2u.svg); margin: 0;}.jimu-widget-swipe-setting .placement .show-downside.selected{background-image: url(images/d2u_selected.svg);}.jimu-widget-swipe-setting .layer-text{margin: 10px 0 10px 0; display: inline-block;}.jimu-widget-swipe-setting .layer-hint{display: inline-block; margin-top: 5px; color: #a0acbf; font-size: 12px; font-style: italic;}.claro .jimu-widget-swipe-setting .dijitSelect {color: #7989a0;}.claro .jimu-widget-swipe-setting .dijitSelectHover,.claro .jimu-widget-swipe-setting .dijitSelectFocused {border-color: #759dc0;}.claro .jimu-widget-swipe-setting .dijitSelect .dijitButtonContents {border-style: none; background: #fafafc !important;}.claro .jimu-widget-swipe-setting .dijitSelect .dijitArrowButton {border-style: none; background: #fafafc !important;}.jimu-widget-swipe-setting .layer-section .dijitValidationTextBox {width: 100%; border: none;}.jimu-widget-swipe-setting .swipe-mode{display: flex; margin-top: 5px; align-items: center;}.jimu-widget-swipe-setting .default-layer-setting .swipe-radio{margin: 0 10px;}.jimu-widget-swipe-setting .layer-section .jimu-icon-error{vertical-align: sub;}.jimu-widget-swipe-setting .layers-chooser.error {-webkit-animation: swipe-err-glow 800ms ease-out infinite alternate; -moz-animation: swipe-err-glow 800ms ease-out infinite alternate; -o-animation: swipe-err-glow 800ms ease-out infinite alternate; -ms-animation: swipe-err-glow 800ms ease-out infinite alternate; animation: swipe-err-glow 800ms ease-out infinite alternate; box-shadow: 0 0 3px rgba(255, 0, 0, .2), inset 0 0 3px rgba(255, 0, 0, .1), 0 2px 0 #FFF; outline: none;}@-webkit-keyframes swipe-err-glow {0% {border-color: rgb(179, 22, 22); box-shadow: 0 0 3px rgba(255, 0, 0, .2), inset 0 0 3px rgba(255, 0, 0, .1), 0 2px 0 #FFF;} 100% {border-color: #F00; box-shadow: 0 0 10px rgba(255, 0, 0, .6), inset 0 0 10px rgba(255, 0, 0, .4), 0 2px 0 #FFF;}}@-moz-keyframes swipe-err-glow {0% {border-color: rgb(179, 22, 22); box-shadow: 0 0 3px rgba(255, 0, 0, .2), inset 0 0 3px rgba(255, 0, 0, .1), 0 2px 0 #FFF;} 100% {border-color: #F00; box-shadow: 0 0 10px rgba(255, 0, 0, .6), inset 0 0 10px rgba(255, 0, 0, .4), 0 2px 0 #FFF;}}@-o-keyframes swipe-err-glow {0% {border-color: rgb(179, 22, 22); box-shadow: 0 0 3px rgba(255, 0, 0, .2), inset 0 0 3px rgba(255, 0, 0, .1), 0 2px 0 #FFF;} 100% {border-color: #F00; box-shadow: 0 0 10px rgba(255, 0, 0, .6), inset 0 0 10px rgba(255, 0, 0, .4), 0 2px 0 #FFF;}}@-ms-keyframes swipe-err-glow {0% {border-color: rgb(179, 22, 22); box-shadow: 0 0 3px rgba(255, 0, 0, .2), inset 0 0 3px rgba(255, 0, 0, .1), 0 2px 0 #FFF;} 100% {border-color: #F00; box-shadow: 0 0 10px rgba(255, 0, 0, .6), inset 0 0 10px rgba(255, 0, 0, .4), 0 2px 0 #FFF;}}@keyframes swipe-err-glow {0% {border-color: rgb(179, 22, 22); box-shadow: 0 0 3px rgba(255, 0, 0, .2), inset 0 0 3px rgba(255, 0, 0, .1), 0 2px 0 #FFF;} 100% {border-color:#F00; box-shadow: 0 0 10px rgba(255, 0, 0, .6), inset 0 0 10px rgba(255, 0, 0, .4), 0 2px 0 #FFF;}}.jimu-widget-swipe-setting .bar-color-tip{margin-top: 0;}.jimu-widget-swipe-setting .handler-color-picker{display: inline-block; vertical-align: middle; margin: 0 6px;}.jimu-widget-swipe-setting .layer-text.zoom-node{margin: 10px 0 0 0;}',
"*now":function(h){h(['dojo/i18n!*preload*widgets/Swipe/setting/nls/Setting*["ar","bs","ca","cs","da","de","en","el","es","et","fi","fr","he","hr","hu","id","it","ja","ko","lt","lv","nb","nl","pl","pt-br","pt-pt","ro","ru","sl","sr","sv","th","tr","zh-cn","uk","vi","zh-hk","zh-tw","ROOT"]'])},"*noref":1}});
define("dojo/_base/declare jimu/BaseWidgetSetting dijit/_WidgetsInTemplateMixin dojo/_base/lang dojo/on dojo/_base/html ../utils ./LayersSetting ./Placement jimu/dijit/LoadingShelter jimu/dijit/CheckBox jimu/dijit/RadioBtn dijit/form/Select jimu/dijit/ColorPickerButton".split(" "),function(h,p,m,k,c,a,e,d,g,n,f){return h([p,m],{baseClass:"jimu-widget-swipe-setting",_selectedStyle:"",postCreate:function(){this.placement=new g({nls:this.nls,config:this.config},this.placementContainer);this.placement.startup();
this.own(c(this.verticalNode,"click",k.hitch(this,function(){this._selectItem("vertical")})));this.own(c(this.horizontalNode,"click",k.hitch(this,function(){this._selectItem("horizontal")})));this.own(c(this.scopeNode,"click",k.hitch(this,function(){this._selectItem("scope")})));this.shelter=new n({hidden:!0});this.shelter.placeAt(this.domNode);this.shelter.startup();this.layersSetting=new d({nls:this.nls,map:this.map,config:this.config},this.layersSettingContainer);this.layersSetting.startup();this.own(c(this.layersSetting,
"change",k.hitch(this,function(b){b.mode&&("single"===b.mode?a.removeClass(this.isZoomNodeContainer,"hide"):a.addClass(this.isZoomNodeContainer,"hide"))})));this.isZoomCheckBox=new f({label:this.nls.isZoom,checked:!1},this.isZoomNode);this.isHidePanel=new f({label:this.nls.hidePanel,checked:!1},this.isHidePanelNode)},startup:function(){this.inherited(arguments);this.setConfig(this.config)},getConfig:function(){this.config.style=this._selectedStyle;this.config.isZoom=this.isZoomCheckBox.getValue();
this.config.isHidePanel=this.isHidePanel.getValue();this.config.handleColor=this.colorPicker.getColor().toHex();this.config=this.layersSetting.getConfig(this.config);this.config.invertPlacement=this.placement.getConfig();return this.config},setConfig:function(a){this.config=a;this.config.style?this._selectItem(this.config.style):this._selectItem("vertical");this.layersSetting.setConfig(this.config);!0===this.config.isZoom?this.isZoomCheckBox.setValue(!0):this.isZoomCheckBox.setValue(!1);!0===this.config.isHidePanel?
this.isHidePanel.setValue(!0):this.isHidePanel.setValue(!1);this.config.handleColor?this.colorPicker.setColor(e.processColor(this.config.handleColor)):this.colorPicker.setColor(e.processColor())},_selectItem:function(b){var c="";this.placement.setVH(b);"scope"===b?(c=this.nls.spyglassText,a.addClass(this.handlerColorPicker,"hide")):(c=this.nls.layerText,a.removeClass(this.handlerColorPicker,"hide"));this.layersSetting.setLayerInfoText(c);this[b]&&this[b].setChecked&&this[b].setChecked(!0);this._selectedStyle=
b}})});