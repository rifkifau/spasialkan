// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See http://js.arcgis.com/3.15/esri/copyright.txt and http://www.arcgis.com/apps/webappbuilder/copyright.txt for details.
//>>built
require({cache:{"jimu/dijit/StatisticsChart":function(){define("dojo/on dojo/Evented dojo/Deferred dojo/_base/declare dojo/_base/lang dojo/_base/array dojo/_base/html dojo/_base/query dojo/_base/Color dijit/popup dijit/_WidgetBase dijit/TooltipDialog dijit/_TemplatedMixin dijit/_WidgetsInTemplateMixin dojo/text!./templates/StatisticsChart.html esri/lang esri/graphic esri/symbols/jsonUtils esri/layers/FeatureLayer jimu/utils jimu/clientStatisticsUtils jimu/dijit/Chart jimu/dijit/_StatisticsChartSettings dojo/keys dijit/focus jimu/dijit/LoadingIndicator".split(" "),
function(q,f,l,m,e,p,h,a,b,c,k,d,g,n,t,v,C,B,r,u,x,z,D,w,E){return m([k,g,n,f],{baseClass:"jimu-dijit-statistics-chart",templateString:t,theme:"light",noMoreThanOneChartClassName:"no-more-than-one-chart",hasTitleClassName:"has-title",charts:null,paramsDijits:null,tooltipDialogs:null,currentChartIndex:-1,tempGraphics:null,maxPreviewFeaturesCount:20,tooltipColor:"green",floatNumberFieldDecimalPlace:null,popupFieldInfosObj:null,config:null,features:null,featureLayer:null,map:null,fontColor:"#333333",
isBigPreview:!1,showSettingIcon:!1,showZoomIcon:!1,zoomToFeaturesWhenClick:!1,initialChartIndex:0,postMixInProperties:function(){this.nls=window.jimuNls.statisticsChart;e.mixin(this.nls,window.jimuNls.common);this.charts=[];this.paramsDijits=[];this.tooltipDialogs=[];this.isBigPreview&&(this.showZoomIcon=!1)},postCreate:function(){this.inherited(arguments);this.showSettingIcon?(this.own(q(document.body,"click",e.hitch(this,this._onDocumentBodyClick))),this.own(q(this.settingsIcon,"keydown",e.hitch(this,
function(a){a.keyCode===w.ENTER?this._onSettingsIconClicked():a.keyCode===w.TAB&&a.shiftKey&&(a.preventDefault(),E.focus(this.pagingUl))})))):h.destroy(this.settingsIcon);this.showZoomIcon?(this.own(q(this.zoominIcon,"click",e.hitch(this,function(){this.emit("zoomin")}))),this.own(q(this.zoominIcon,"keydown",e.hitch(this,function(a){a.keyCode===w.ENTER&&this.emit("zoomin")})))):h.destroy(this.zoominIcon);this.isBigPreview&&(this.chartRealContainer.style.maxHeight="auto",h.addClass(this.domNode,"big-preview"));
this.zoominIcon.title=this.nls.enlarge;this.settingsIcon.title=this.nls.setting;h.addClass(this.domNode,this.noMoreThanOneChartClassName)},destroy:function(){this.clear();this.inherited(arguments)},resize:function(a,d){if(0<a||"string"===typeof a&&0<a.length)this.domNode.style.width=a;if(0<d||"string"===typeof d&&0<d.length)this.domNode.style.height=d;this._resize()},resizeByParent:function(){this.domNode.style.width="100%";this.domNode.style.height="100%";this._resize()},_resize:function(){this._calculateChartBox();
0<=this.currentChartIndex&&this._showChart(this.currentChartIndex)},createServerStatisticsCharts:function(a,d,b){var g=a.fields,c={type:"Table",fields:[]},n=e.clone(b),y=b.mode;"category"===y?(n.valueFields=[],c.fields=p.map(b.valueFields,e.hitch(this,function(a){var d=b.operation;"average"===d&&(d="avg");var g=a+"_"+u.upperCaseString(d);a=a+"_"+u.upperCaseString(d);n.valueFields.push(g);return{name:g,type:"esriFieldTypeDouble",alias:a}})),p.some(g,e.hitch(this,function(a){return a.name===b.categoryField?
(c.fields.push(a),!0):!1}))):"count"===y?(n.mode="feature",n.labelField=b.categoryField,a=a.fields[0].name+"_count",n.valueFields=[a],p.some(g,e.hitch(this,function(a){return a.name===b.categoryField?(c.fields.push(a),!0):!1})),c.fields.push({name:a,type:"esriFieldTypeInteger",alias:this.nls.count})):"field"===y&&(n.valueFields=[],c.fields=p.map(b.valueFields,e.hitch(this,function(a){var d=b.operation;"average"===d&&(d="avg");var g=a+"_"+u.upperCaseString(d);a=a+"_"+u.upperCaseString(d);n.valueFields.push(g);
return{name:g,type:"esriFieldTypeDouble",alias:a}})));return this._getLoadedLayer(c).then(e.hitch(this,function(a){this._createChartsAsync({featureLayer:a,features:d,config:n})}))},createClientCharts:function(a,d,b,g,c){c&&(this.featureLayerForChartSymbologyChart=c);return this._getLoadedLayer(a).then(e.hitch(this,function(a){this._createChartsAsync({featureLayer:a,features:d,config:b,popupFieldInfosObj:g})}))},_getLoadedLayer:function(a){var d=new l,b=null,b="string"===typeof a?new r(a):"esri.layers.FeatureLayer"===
a.declaredClass?a:new r({layerDefinition:e.clone(a),featureSet:null});b.loaded?d.resolve(b):this.own(q(b,"load",e.hitch(this,function(){d.resolve(b)})));return d},_createChartsAsync:function(a){setTimeout(e.hitch(this,function(){this._createCharts(a)}),0)},_createCharts:function(a){try{this.loading.hide();this.clear();var b=!1;a.features&&(b=!!a.features.isSelectedFeatures,a.features=p.filter(a.features,e.hitch(this,function(a){return!!a.attributes})));this.config=a.config;this.features=a.features;
this.featureLayer=a.featureLayer;this.popupFieldInfosObj=a.popupFieldInfosObj?a.popupFieldInfosObj:{};this.config.highLightColor||(this.config.highLightColor=b?"#ff0000":"#00ffff");this._calculateDecimalPlaceForFloatField();this.chartTitle.innerHTML=u.stripHTML(this.config.name||"");this.chartTitle.title=this.chartTitle.innerHTML;this.chartTitle.title?h.addClass(this.domNode,this.hasTitleClassName):h.removeClass(this.domNode,this.hasTitleClassName);if(this.config.description){h.setStyle(this.descriptionContainer,
"display","block");var g=u.stripHTML(this.config.description);this.descriptionContainer.innerHTML=g;this.descriptionContainer.title=g}else this.descriptionContainer.innerHTML="",this.descriptionContainer.title="",h.setStyle(this.descriptionContainer,"display","none");1>=a.config.types.length?h.addClass(this.domNode,this.noMoreThanOneChartClassName):h.removeClass(this.domNode,this.noMoreThanOneChartClassName);var c=this._calculateChartBox(),n=c.w+"px",k=c.h+"px",y={};(a.config&&a.config.types||[]).forEach(function(a){if(a=
a&&a.type)"column"===a?y.column=this.nls.columnChart:"bar"===a?y.bar=this.nls.barChart:"line"===a?y.line=this.nls.lineChart:"pie"===a&&(y.pie=this.nls.pieChart)}.bind(this));var t=p.map(a.config.types,e.hitch(this,function(a){var d=h.create("div",{"class":"chart-div",style:{width:n,height:k}},this.chartRealContainer),b=a.type,g=h.toDom("\x3cli class\x3d'paging-li'\x3e\x3ca tabindex\x3d'0' role\x3d'link' aria-label\x3d'"+y[b]+"'class\x3d'paging-a'\x3e\x3c/a\x3e\x3c/li\x3e");h.place(g,this.pagingUl);
a=a.display;a.backgroundColor||(a.backgroundColor="transparent");a.hasOwnProperty("showLegend")||(a.showLegend=!1);a.legendTextColor||(a.legendTextColor=this.fontColor);"pie"===b?(a.hasOwnProperty("showDataLabel")||(a.showDataLabel=!0),a.dataLabelColor||(a.dataLabelColor=this.fontColor)):(a.hasOwnProperty("showHorizontalAxis")||(a.showHorizontalAxis=!0),a.horizontalAxisTextColor||(a.horizontalAxisTextColor=this.fontColor),a.hasOwnProperty("showVerticalAxis")||(a.showVerticalAxis=!0),a.verticalAxisTextColor||
(a.verticalAxisTextColor=this.fontColor));return d})),b=null;"feature"===this.config.mode?b=this._createFeatureModeCharts(a,t):"category"===this.config.mode?b=this._createCategoryModeCharts(a,t):"count"===this.config.mode?b=this._createCountModeCharts(a,t):"field"===this.config.mode&&(b=this._createFieldModeCharts(a,t));this.charts=b.charts;this.paramsDijits=b.paramsDijits;this.tooltipDialogs=p.map(this.paramsDijits,e.hitch(this,function(a){var b=h.create("div");a.placeAt(b);return new d({content:b})}));
a=0;0<=this.initialChartIndex&&this.charts.length>=this.initialChartIndex+1&&(a=this.initialChartIndex);this._showChart(a)}catch(J){console.error(J)}},_calculateChartBox:function(){var a=!!this.config.description,d=h.getContentBox(this.domNode).h,b=d;0<this.resultsHeader.clientHeight&&(b=h.getMarginBox(this.resultsHeader),b=d-b.h);var g=0;a&&(g=parseInt(.15*d,10),b-=g);a=60;b<a&&(a=b);h.setStyle(this.leftArrow,"height",a+"px");h.setStyle(this.rightArrow,"height",a+"px");h.setStyle(this.chartRealContainer,
"height",b+"px");h.setStyle(this.descriptionContainer,"max-height",g+"px");h.setStyle(this.faildRenderInfo,"height",b+"px");return h.getContentBox(this.chartRealContainer)},_calculateDecimalPlaceForFloatField:function(){this.floatNumberFieldDecimalPlace={};var a=[];this.config.labelField&&a.push(this.config.labelField);this.config.categoryField&&a.push(this.config.categoryField);this.config.valueFields&&(a=a.concat(this.config.valueFields));var b=p.filter(a,e.hitch(this,function(a){return this._isFloatNumberField(a)})),
d={};p.forEach(b,e.hitch(this,function(a){d[a]=[]}));(a=this.features)&&0<a.length&&p.forEach(a,e.hitch(this,function(a){var g=a.attributes;g&&p.forEach(b,e.hitch(this,function(a){var b=g[a];"number"===typeof b&&d[a].push(b)}))}));p.forEach(b,e.hitch(this,function(a){this.floatNumberFieldDecimalPlace[a]=0;var b=d[a];if(0<b.length)try{var g=this._getBestDecimalPlace(b);this.floatNumberFieldDecimalPlace[a]=g}catch(I){this.floatNumberFieldDecimalPlace[a]=0,console.error(I)}this.popupFieldInfosObj&&(b=
this.popupFieldInfosObj[a])&&b.format&&0<=b.format.places&&(this.floatNumberFieldDecimalPlace[a]=b.format.places)}))},_onDocumentBodyClick:function(a){if(0<=this.currentChartIndex&&this.tooltipDialogs){var b=this.tooltipDialogs[this.currentChartIndex];if(b){var d=!!b.isOpendNow;this._hideAllTooltipDialogs();var g=a.target||a.srcElement;g===this.leftArrow||g===this.rightArrow||h.hasClass(g,"paging-a")||h.hasClass(g,"paging-li")||(g===this.settingsIcon?d?this._hideTooltipDialog(b):this._showTooltipDialog(b):
(a=g===b.domNode,g=h.isDescendant(g,b.domNode),a||g?d?this._showTooltipDialog(b):this._hideTooltipDialog(b):this._hideTooltipDialog(b)))}else this._hideAllTooltipDialogs()}else this._hideAllTooltipDialogs()},_onSettingsIconClicked:function(){var a=this.tooltipDialogs[this.currentChartIndex];a&&(a.isOpendNow?(this._hideTooltipDialog(a),E.focus(this.settingsIcon)):(this._showTooltipDialog(a),(a=this.paramsDijits[this.currentChartIndex])&&E.focus(a.domNode)))},clear:function(){this.featureLayer=this.features=
this.config=null;this.chartTitle.innerHTML="";this.chartTitle.title="";this.currentChartIndex=-1;this.popupFieldInfosObj=this.floatNumberFieldDecimalPlace=null;a("li",this.pagingUl).removeClass("selected");this.charts||(this.charts=[]);this.paramsDijits||(this.paramsDijits=[]);this.tooltipDialogs||(this.tooltipDialogs=[]);for(var b=0;b<this.charts.length;b++)this.charts[b]&&this.charts[b].destroy(),this.charts[b]=null,this.paramsDijits[b]&&this.paramsDijits[b].destroy(),this.paramsDijits[b]=null,
this.tooltipDialogs[b]&&this.tooltipDialogs[b].destroy(),this.tooltipDialogs[b]=null;this.charts=[];this.paramsDijits=[];this.tooltipDialogs=[];h.empty(this.pagingUl);h.empty(this.chartRealContainer);h.empty(this.descriptionContainer);h.addClass(this.domNode,this.noMoreThanOneChartClassName)},_showFialdRenderInfo:function(){h.addClass(this.chartSection,"render-faild")},_hideFialdRenderInfo:function(){h.removeClass(this.chartSection,"render-faild")},_showChart:function(b){this.currentChartIndex=-1;
var d=a(".chart-div",this.chartRealContainer);d.style({display:"none"});var g=a("li",this.pagingUl);g.removeClass("selected");if(!(0>b)){if(d=d[b])this.currentChartIndex=b,h.setStyle(d,"display","block");(g=g[b])&&h.addClass(g,"selected");this.charts&&0<this.charts.length&&(g=this.charts[b])&&this._handlePieChartDisplay(g);if(!this.isBigPreview&&(g=null,this.charts&&0<this.charts.length&&(g=this.charts[b]))){b=this._calculateChartBox();var c=h.getContentBox(d);if(b.w!==c.w||b.h!==c.h)this.loading.show(),
c=b.w+"px",b=b.h+"px",h.setStyle(d,"width",c),h.setStyle(d,"height",b),g.resize(c,b),this.loading.hide()}}},_handlePieChartDisplay:function(a){var b=!1;a&&a.config&&"pie"===a.config.type&&(a=a.config.labels)&&150<a.length&&(b=!0);b?this._showFialdRenderInfo():this._hideFialdRenderInfo()},_hideAllTooltipDialogs:function(){this.tooltipDialogs&&0<this.tooltipDialogs.length&&p.forEach(this.tooltipDialogs,e.hitch(this,function(a){this._hideTooltipDialog(a)}))},_hideTooltipDialog:function(a){a&&(c.close(a),
a.isOpendNow=!1)},_showTooltipDialog:function(a){a&&(c.open({popup:a,around:this.settingsIcon}),a.isOpendNow=!0)},_onPagingUlKeydown:function(a){a.keyCode!==w.TAB||a.shiftKey||(a.preventDefault(),E.focus(this.settingsIcon));if(a.keyCode===w.RIGHT_ARROW||a.keyCode===w.DOWN_ARROW)this._onRightArrowClicked(a),this._focusPagingLink();if(a.keyCode===w.LEFT_ARROW||a.keyCode===w.UP_ARROW)this._onLeftArrowClicked(a),this._focusPagingLink()},_focusPagingLink:function(){var b=a(".paging-li:nth-child("+(this.currentChartIndex+
1)+")",this.pagingUl)[0];(b=b&&b.firstChild)&&E.focus(b)},_onPagingUlClicked:function(b){b.stopPropagation();this._hideAllTooltipDialogs();b=b.target||b.srcElement;if("a"===b.tagName.toLowerCase()){var d=a("a",this.pagingUl);b=p.indexOf(d,b);0<=b&&this._showChart(b)}},_onLeftArrowClicked:function(a){a.stopPropagation();this._hideAllTooltipDialogs();a=(this.currentChartIndex-1+this.charts.length)%this.charts.length;0<=a&&this._showChart(a)},_onLeftArrowKeydown:function(a){a.keyCode===w.ENTER&&this._onLeftArrowClicked(a)},
_onRightArrowClicked:function(a){a.stopPropagation();this._hideAllTooltipDialogs();a=(this.currentChartIndex+1+this.charts.length)%this.charts.length;0<=a&&this._showChart(a)},_onRightArrowKeydown:function(a){a.keyCode===w.ENTER&&this._onRightArrowClicked(a)},_getHighLightMarkerSymbol:function(){var a=B.fromJson({color:[255,255,255,0],size:18,angle:0,xoffset:0,yoffset:0,type:"esriSMS",style:"esriSMSSquare",outline:{color:[0,0,128,255],width:.75,type:"esriSLS",style:"esriSLSSolid"}});a.setSize(30);
a.outline.setColor(new b(this.config.highLightColor));return a},_getHighLightLineSymbol:function(a){var d=B.fromJson({color:[0,255,255,255],width:1.5,type:"esriSLS",style:"esriSLSSolid"});d.setColor(new b(a||this.config.highLightColor));return d},_getDefaultHighLightFillSymbol:function(){var a=B.fromJson({color:[0,255,255,128],outline:{color:[0,255,255,255],width:1.5,type:"esriSLS",style:"esriSLSSolid"},type:"esriSFS",style:"esriSFSSolid"});a.outline.setColor(new b(this.config.highLightColor));return a},
_getVisualVariableByType:function(a,b){return b&&(b=p.filter(b,function(b){return b.type===a&&!b.target}),b.length)?b[0]:null},_getSymbolByRenderer:function(a,b){var d=this._getDefaultHighLightFillSymbol(),g=this._getVisualVariableByType("colorInfo",a.visualVariables);if(g){if(a=a.getColor(b,{colorInfo:g}))a=e.clone(a),d.setColor(a)}else d=a.getSymbol(b);return d},_getHighLightFillSymbol:function(a,b,d){var g=null,c=b.symbol,g=a.renderer;!c&&g&&(c=this._getSymbolByRenderer(g,b));c&&"function"===typeof c.setOutline?
(g=B.fromJson(c.toJson()),b=1.5,c.outline&&0<c.outline.width&&(b=c.outline.width+1),d=this._getHighLightLineSymbol(d?"#ff0000":this.config.highLightColor),d.setWidth(b),g.setOutline(d)):g=this._getDefaultHighLightFillSymbol();return g},_zoomToGraphics:function(a){if(this.map&&this.featureLayer&&this.featureLayer.visible){var b;a&&0<a.length&&(b=p.filter(a,function(a){a=a.geometry;return"point"!==a.type?!0:u.isVaildPointGeometry(a)}.bind(this)));if(b&&0<b.length){a=u.toFeatureSet(b);try{u.zoomToFeatureSet(this.map,
a)}catch(F){console.error(F)}}}},_removeTempGraphics:function(){if(this.featureLayer&&this.tempGraphics&&0<this.tempGraphics.length)for(;0<this.tempGraphics.length;)this.featureLayer.remove(this.tempGraphics[0]),this.tempGraphics.splice(0,1);this.tempGraphics=null},_mouseOverChartItem:function(a){this._removeTempGraphics();p.forEach(a,e.hitch(this,function(a){a._originalSymbol=a.symbol}));if(this.featureLayer&&this.featureLayer.getMap()&&this.featureLayer.visible){var b=u.getTypeByGeometryType(this.featureLayer.geometryType),
d=null;if("point"===b)d=this._getHighLightMarkerSymbol(),this.tempGraphics=[],p.forEach(a,e.hitch(this,function(a){a=new C(a.geometry,d);this.tempGraphics.push(a);this.featureLayer.add(a)}));else if("polyline"===b)d=this._getHighLightLineSymbol(),p.forEach(a,e.hitch(this,function(a){a.setSymbol(d)}));else if("polygon"===b){var g=this.featureLayer.getSelectedFeatures()||[];p.forEach(a,e.hitch(this,function(a){var b=0<=g.indexOf(a),b=this._getHighLightFillSymbol(this.featureLayer,a,b);a.setSymbol(b)}));
this.features.length!==a.length&&"polygon"===b&&(p.forEach(a,e.hitch(this,function(a){this.featureLayer.remove(a)})),p.forEach(a,e.hitch(this,function(a){this.featureLayer.add(a)})))}}},_mouseOutChartItem:function(a){this._removeTempGraphics();p.forEach(a,e.hitch(this,function(a){a.setSymbol(a._originalSymbol||null)}))},_isNumber:function(a){return"[object number]"===Object.prototype.toString.call(a).toLowerCase()},_tryLocaleNumber:function(a,b){var d=a;if(v.isDefined(a)&&isFinite(a))try{var g;if(b&&
this._isNumberField(b)){var c=this.popupFieldInfosObj[b];g=c&&e.exists("format.places",c)?u.localizeNumberByFieldInfo(a,c):u.localizeNumber(a)}else g=a;"string"===typeof g&&(d=g)}catch(H){console.error(H)}return d+""},_getBestDisplayValue:function(a,b){var d=this._tryLocaleNumber(b,a);if(this.featureLayer.typeIdField===a){var g=this.featureLayer.types;if(g&&0<g.length&&(g=p.filter(g,e.hitch(this,function(a){return a.id===b})),0<g.length))return d=g[0].name}(a=this._getFieldInfo(a))&&a.domain&&(a=
a.domain.codedValues)&&0<a.length&&p.some(a,function(a){return a.code===b?(d=a.name,!0):!1});return d},_getFieldAliasArray:function(a){return p.map(a,e.hitch(this,function(a){return this._getFieldAlias(a)}))},_getFieldAlias:function(a){var b=a;(a=this._getFieldInfo(a))&&(b=a.alias||b);return b},_getFieldInfo:function(a){if(this.featureLayer)for(var b=this.featureLayer.fields,d=0;d<b.length;d++)if(b[d].name===a)return b[d];return null},_isNumberField:function(a){var b=["esriFieldTypeSmallInteger",
"esriFieldTypeInteger","esriFieldTypeSingle","esriFieldTypeDouble"];return p.some(this.featureLayer.fields,e.hitch(this,function(d){return d.name===a&&0<=b.indexOf(d.type)}))},_isFloatNumberField:function(a){var b=["esriFieldTypeSingle","esriFieldTypeDouble"];return p.some(this.featureLayer.fields,e.hitch(this,function(d){return d.name===a&&0<=b.indexOf(d.type)}))},_isDateField:function(a){return(a=this._getFieldInfo(a))?"esriFieldTypeDate"===a.type:!1},_getBestDecimalPlace:function(a){var b=0,d=
{};p.forEach(a,function(a){a=a.toString().split(".");var b=null;1===a.length?b=0:2===a.length&&(b=a[1].length);null!==b&&(d[b]=void 0===d[b]?1:d[b]+1)});a=null;for(var g in d){g=parseInt(g,10);var c=d[g];a?c>a.value&&(a={key:g,value:c}):a={key:g,value:c}}a&&(b=parseInt(a.key,10));return b},_getFloatNumberFieldDecimalPlace:function(a){var b=0;this.floatNumberFieldDecimalPlace&&(a=this.floatNumberFieldDecimalPlace[a],"number"===typeof a&&(b=a));return b},_getBestValueForFloatNumberField:function(a,
b){b=this._getFloatNumberFieldDecimalPlace(b);a=a.toFixed(b);return parseFloat(a)},_getColors:function(a,b){var d=[];a=e.clone(a);if(2===a.colors.length)d=this._createGradientColors(a.colors[0],a.colors[a.colors.length-1],b);else{for(var g=Math.ceil(b/a.colors.length),c=0;c<g;c++)d=d.concat(a.colors);d=d.slice(0,b)}return d},_createGradientColors:function(a,d,g){var c=[];a=new b(a);var n=new b(d);d=(n.r-a.r)/g;for(var k=(n.g-a.g)/g,n=(n.b-a.b)/g,e=new b,t=0,f=0,h=0,v=0;v<g;v++)t=parseInt(a.r+d*v,
10),f=parseInt(a.g+k*v,10),h=parseInt(a.b+n*v,10),e.setColor([t,f,h]),c.push(e.toHex());return c},_createParamsDijit:function(a,b,d){a=new D({isInWidget:this.map?!0:!1,type:a,config:b});this.own(q(a.domNode,"keydown",e.hitch(this,function(a){a.keyCode===w.ESCAPE&&this._onSettingsIconClicked()})));a._updateLegendDisplayByMode(d);return a},_createJimuChart:function(a,b,d,g,c){var n=c.type,k=this._createParamsDijit(n,c.display,b),t=k.getConfig();t&&e.mixin(c.display,t);var f=this._getBasicChartOptionsByStatisticsInfo(b,
d,g,n);this._udpateJimuChartDisplayOptions(f,c);var h=new z({chartDom:a,config:{type:n||"column",labels:[],series:[{data:[]}]}});h.placeAt(a);h.resize();h.updateConfig(f);this._bindChartEvent(h,b,g);this.showSettingIcon&&this.own(q(k,"change",e.hitch(this,function(){k.showShelter();if(h){var a=k.getConfig();e.mixin(c.display,a);this._udpateJimuChartDisplayOptions(f,c);h.updateConfig(f)}k.hideShelter()})));return[h,k]},_udpateJimuChartDisplayOptions:function(a,b){var d=b.type;b=b.display;this._settingAxisDisplay(a,
b,d);a.type=d;a.dataZoom=["inside","slider"];a.confine=!0;a.backgroundColor=b.backgroundColor;a.color=b.colors;var g={show:b.showLegend,textStyle:{}};b.legendTextColor&&(g.textStyle.color=b.legendTextColor);b.legendTextSize&&(g.textStyle.fontSize=b.legendTextSize);a.legend=g;g={show:b.showDataLabel,textStyle:{}};b.dataLabelColor&&(g.textStyle.color=b.dataLabelColor);b.dataLabelSize&&(g.textStyle.fontSize=b.dataLabelSize);a.dataLabel=g;"pie"===d&&(a.innerRadius=b.innerRadius);return a},_settingAxisDisplay:function(a,
b,d){if(!(0>["column","bar","line"].indexOf(d))){var g={show:b.showHorizontalAxis,textStyle:{}};b.horizontalAxisTextColor&&(g.textStyle.color=b.horizontalAxisTextColor);b.horizontalAxisTextSize&&(g.textStyle.fontSize=b.horizontalAxisTextSize);a.xAxis=g;g={show:b.showVerticalAxis,textStyle:{}};b.verticalAxisTextColor&&(g.textStyle.color=b.verticalAxisTextColor);b.verticalAxisTextSize&&(g.textStyle.fontSize=b.verticalAxisTextSize);a.yAxis=g;b.stack||(b.stack=!1);if("column"===d||"bar"===d||"line"===
d&&b.area)a.stack=b.stack;"line"!==d||b.area||(b.area=!1);"line"===d&&(a.area=b.area);a.axisPointer=!0;a.scale=!1}},_getBasicChartOptionsByStatisticsInfo:function(a,b,d,g){return"feature"===a||"category"===a?this._getCategoryModeChartOptionsByStatisticsInfo(b,d,g):"count"===a?this._getCountModeChartOptionsByStatisticsInfo(d,g):"field"===a?this._getFieldModeChartOptionByStatisticsInfo(d,g):null},_bindChartEvent:function(a,b,d){if(this.map&&0!==d.length){var g=e.hitch(this,function(a){if("series"===
a.componentType){var g=null;if("field"===b)g=this.features;else{var c=d[a.dataIndex];c&&(g=c.dataFeatures)}g&&("mouseover"===a.type?this._mouseOverChartItem(g):"mouseout"===a.type?this._mouseOutChartItem(g):"click"===a.type&&this.zoomToFeaturesWhenClick&&this._zoomToGraphics(g))}}),c=[{name:"mouseover",callback:g},{name:"mouseout",callback:g}];this.zoomToFeaturesWhenClick&&c.push({name:"click",callback:g});p.forEach(c,e.hitch(this,function(b){a.chart.on(b.name,b.callback)}))}},_createFeatureModeCharts:function(a,
b){var d=[],g=[],c=a.config,n={layerDefinition:this.featureLayer,popupFieldInfosObj:this.popupFieldInfosObj,features:a.features,labelField:c.labelField,valueFields:c.valueFields,sortOrder:c.sortOrder,maxLabels:c.maxLabels,useLayerSymbology:c.useLayerSymbology};this.featureLayerForChartSymbologyChart&&(n.featureLayerForChartSymbologyChart=this.featureLayerForChartSymbologyChart);var k=x.getFeatureModeStatisticsInfo(n);p.forEach(c.types,e.hitch(this,function(a,c){try{var e=this._createJimuChart(b[c],
"feature",n,k,a);d.push(e[0]);g.push(e[1])}catch(A){console.error(A)}}));return{charts:d,paramsDijits:g}},_createCategoryModeCharts:function(a,b){var d=[],g=[],c=a.config,n={layerDefinition:this.featureLayer,popupFieldInfosObj:this.popupFieldInfosObj,features:a.features,categoryField:c.categoryField,valueFields:c.valueFields,operation:a.config.operation,sortOrder:c.sortOrder,dateConfig:c.dateConfig,maxLabels:c.maxLabels,nullValue:c.nullValue,useLayerSymbology:c.useLayerSymbology,splitField:c.splitField};
this.featureLayerForChartSymbologyChart&&(n.featureLayerForChartSymbologyChart=this.featureLayerForChartSymbologyChart);var k=x.getCategoryModeStatisticsInfo(n);p.forEach(c.types,e.hitch(this,function(a,c){try{var e=this._createJimuChart(b[c],"category",n,k,a);d.push(e[0]);g.push(e[1])}catch(A){console.error(A)}}));return{charts:d,paramsDijits:g}},_getSplitedSeriesForCategoryOrCountMode:function(a,b){var d={type:b,labels:[],series:[]},g=[];a.forEach(function(a){if(a=a.splitedValueFields)a=a.map(function(a){return a.field}),
g=g.concat(a)});var c=u.uniqueArray(g);d.series=p.map(c,e.hitch(this,function(d){for(var g=[],c=0;c<a.length;c++)g[c]=null;return{name:d,type:b,data:g}}));p.forEach(a,e.hitch(this,function(a,b){var g="";a.category?g=a.category:a.fieldValue&&(g=a.fieldValue);d.labels.push(g);a.splitedValueFields.forEach(function(g){d.series.forEach(function(d){if(d.name===g.field)if("undefined"!==typeof a.color){var c=this._getSerieData(a,g.value);d.data[b]=c}else d.data[b]=g.value}.bind(this))}.bind(this))}));return d},
_getCategoryModeChartOptionsByStatisticsInfo:function(a,b,d){a=this._getFieldAliasArray(a.valueFields);var g=null,g={type:d,labels:[],series:[]};g.series=p.map(a,e.hitch(this,function(a){return{name:a,type:d,data:[]}}));p.forEach(b,e.hitch(this,function(a){g.labels.push(a.category);for(var b=0;b<a.valueFields.length;b++){var d=a.valueFields[b];"undefined"!==typeof a.color&&(d=this._getSerieData(a,d));g.series[b].data.push(d)}}));return g},_getSeriesOfRadar:function(a){a=a.map(function(a){return{name:a.category,
value:a.valueFields}});return[{type:"radar",data:a}]},_isAllFalseColor:function(a){return a.every(function(a){return!a.color})},_getSerieData:function(a,b){a.color||(a.color="transparent");return{value:b,itemStyle:{normal:{color:a.color},emphasis:{color:a.color}}}},_createCountModeCharts:function(a,b){var d=[],g=[],c=a.config,n={layerDefinition:this.featureLayer,popupFieldInfosObj:this.popupFieldInfosObj,features:a.features,categoryField:c.categoryField,sortOrder:c.sortOrder,dateConfig:c.dateConfig,
maxLabels:c.maxLabels,useLayerSymbology:c.useLayerSymbology,splitField:c.splitField};this.featureLayerForChartSymbologyChart&&(n.featureLayerForChartSymbologyChart=this.featureLayerForChartSymbologyChart);var k=x.getCountModeStatisticsInfo(n);p.forEach(c.types,e.hitch(this,function(a,c){try{var e=this._createJimuChart(b[c],"count",n,k,a);d.push(e[0]);g.push(e[1])}catch(A){console.error(A)}}));return{charts:d,paramsDijits:g}},_getCountModeChartOptionsByStatisticsInfo:function(a,b){var d={type:b,labels:[],
series:[{name:"",type:b,data:[]}]};p.forEach(a,e.hitch(this,function(a){var b=a.count;d.labels.push(a.fieldValue);"undefined"!==typeof a.color?(a=this._getSerieData(a,b),d.series[0].data.push(a)):d.series[0].data.push(b)}));return d},_createFieldModeCharts:function(a,b){var d=[],g=[],c=a.config,n={layerDefinition:this.featureLayer,popupFieldInfosObj:this.popupFieldInfosObj,features:a.features,valueFields:c.valueFields,operation:c.operation,sortOrder:c.sortOrder,maxLabels:c.maxLabels,nullValue:c.nullValue},
k=x.getFieldModeStatisticsInfo(n);p.forEach(c.types,e.hitch(this,function(a,c){try{var e=this._createJimuChart(b[c],"field",n,k,a);d.push(e[0]);g.push(e[1])}catch(A){console.error(A)}}));return{charts:d,paramsDijits:g}},_getFieldModeChartOptionByStatisticsInfo:function(a,b){var d={type:b,labels:[],series:[{name:"",type:b,data:[]}]};p.forEach(a,e.hitch(this,function(a){var b=this._getFieldAlias(a.label);d.labels.push(b);d.series[0].data.push(a.value)}));return d}})})},"jimu/clientStatisticsUtils":function(){define(["dojo/_base/lang",
"moment/moment","./_chartHelpUtils","jimu/utils","libs/moment/twix"],function(q,f,l,m){window.makeTwix&&window.makeTwix(f);return{getClietStatisticsData:function(e){var f=e.mode;if("feature"===f)return this.getFeatureModeStatisticsData(e);if("category"===f)return this.getCategoryModeStatisticsData(e);if("count"===f)return this.getCountModeStatisticsData(e);if("field"===f)return this.getFieldModeStatisticsData(e)},sortClientStatisticsData:function(e,f,h){return this.sortStatisticsData(e,f.mode,f.sortOrder,
f.clusterField,f.valueFields,h)},getDataForMaxLabels:function(e,f){return e&&e.length&&"number"===typeof f&&0<f&&f<e.length?e.slice(0,f):e},getFeatureModeStatisticsData:function(e){var f=e.features,h=e.clusterField,a=e.valueFields;e=void 0!==e.showNullLabelData?e.showNullLabelData:!0;var b=this.separateFeaturesWhetherFieldValueNull(h,f),f=b.notNullLabelFeatures,b=b.nullLabelFeatures,f=e?f.concat(b):f;e=[];return e=f.map(function(b){var c=b.attributes,d=c&&c[h],d=this.convertingNullOrUndefinedAsPlaceholders(d);
b={label:d,values:[],features:[b]};b.values=a.map(function(a){return c[a]});return b}.bind(this))},getCategoryModeStatisticsData:function(e){function f(g){var n=[],k=null,e;for(e in g){k=g[e];e=this.keepFieldValueType(e,k.type,c);var f=this.calcValuesByFeaturesForCatetoryMode(a,k,h,b,d);n.push({label:e,values:f,features:k.features,unit:k.unit})}return n}var h=e.hasStatisticsed,a=e.valueFields,b=e.operation,c=e.dateConfig,k=void 0!==e.showNullLabelData?e.showNullLabelData:!0,d=e.nullValue,g=[],g=this.getCluseringObj(e.clusterField,
e.features,c);e=g.nullLabel;g=f.call(this,g.notNullLabel);e=f.call(this,e);return g=k?g.concat(e):g},getCountModeStatisticsData:function(e){function f(a){var b=[],g=null,n;for(n in a){var g=a[n],k=this.calcValuesByFeaturesForCountMode(g,c);n=this.keepFieldValueType(n,g.type,h);b.push({label:n,values:k,features:g.features,unit:g.unit})}return b}var h=e.dateConfig,a=void 0!==e.showNullLabelData?e.showNullLabelData:!0,b=[],c=e.hasStatisticsed&&!h,b=this.getCluseringObj(e.clusterField,e.features,h);e=
b.nullLabel;b=f.call(this,b.notNullLabel);e=f.call(this,e);return b=a?b.concat(e):b},calcValuesByFeaturesForCountMode:function(e,f){return f?e.features.map(function(e){var a=(e=e.attributes)&&e.STAT_COUNT;"undefined"===typeof a&&(a=e.stat_count);return a}.bind(this)):[e.count]},getFieldModeStatisticsData:function(e){var f=e.hasStatisticsed,h=e.features,a=e.operation,b=e.nullValue,c=[];return c=e.valueFields.map(q.hitch(this,function(c){var d=this.getValuesByValueFieldForFieldMode(c,h,f,a),d=this.calcValueByOperation(d,
a,b);return{label:c,values:[d]}}))},getValueFromAttributes:function(e,f,h,a){if(e)return h="average"===h?"avg":h,a?(a=m.upperCaseString(f+"_"+h),a=e[a],"undefined"===typeof a&&(a=m.lowerCaseString(f+"_"+h),a=e[a])):a=e[f],a},getValuesByValueFieldForFieldMode:function(e,f,h,a){return f.map(q.hitch(this,function(b){return this.getValueFromAttributes(b.attributes,e,a,h)}))},sortStatisticsData:function(e,f,h,a,b,c){function k(d,c,k){var g;if("category"===c)k.isLabelAxis?k.isLabelAxis&&(g=d.label):k.field||
1!==d.values.length?(k=b.indexOf(k.field),g=d.values[k]):g=d.values[0];else if("count"===c)g=d.label,g=k.isLabelAxis?g:d.values[0];else if("field"===c)g=k.isLabelAxis?d.label:d.values[0];else if("feature"===c){var n=k.field;d&&d.features&&d.features[0]&&(c=d.features[0].attributes)&&(k.isLabelAxis?g=c[a]:n?g=c[n]:d.values.length&&(g=d.values[0]))}return g}if(!h)return e;var d=h.isAsc;if(!Array.isArray(e))return e;e.sort(function(b,n){b=k(b,f,h);n=k(n,f,h);if(h.isLabelAxis&&c&&"field"!==f){var g={};
g[a]=b;var g=m.getDisplayValueForCodedValueOrSubtype(c,a,g),e={};e[a]=n;e=m.getDisplayValueForCodedValueOrSubtype(c,a,e);g.isCodedValueOrSubtype&&e.isCodedValueOrSubtype&&(b=g.displayValue,n=e.displayValue)}"_NULL\x26UNDEFINED_"===b&&(b=Infinity);"_NULL\x26UNDEFINED_"===n&&(n=Infinity);m.isNumberOrNumberString(b)&&(b=Number(b));m.isNumberOrNumberString(n)&&(n=Number(n));g=b>n?d:!d;Infinity===b?g=d:Infinity===n&&(g=!d);e=0;b!==n&&(e=g?1:-1);return e}.bind(this));return e},convertingNullOrUndefinedAsPlaceholders:function(e){return null===
e||void 0===e?"_NULL\x26UNDEFINED_":e},keepFieldValueType:function(e,f,h){"number"===f&&(e=Number(e));h&&"_NULL\x26UNDEFINED_"!==e&&(e=Number(e));return e},calcValuesByFeaturesForCatetoryMode:function(e,f,h,a,b){return e.map(function(c){c=this.getValuesByValueFieldForCategoryMode(c,f.features,h,a);return this.calcValueByOperation(c,a,b)}.bind(this))},getValuesByValueFieldForCategoryMode:function(e,f,h,a){return f.map(q.hitch(this,function(b){return this.getValueFromAttributes(b.attributes,e,a,h)}))},
_isNumber:function(e){return"[object number]"===Object.prototype.toString.call(e).toLowerCase()},_getDateUnit:function(e,p){var h=p;"automatic"===p&&(p=f(e[0]).local(),e=f(e[1]).local(),e=Math.round(e.diff(p,"minute",!0)),0<=e&&1>=e?h="second":1<e&&60>=e?h="minute":60<e&&1440>=e?h="hour":1440<e&&43200>=e?h="day":43200<e&&518400>=e?h="month":518400<e&&(h="year"));return h},_getTimeRange:function(e,f){var h=e.map(q.hitch(this,function(a){return(a=a.attributes)&&a[f]})),h=h.filter(function(a){return!!a});
e=Math.min.apply(Math,h);h=Math.max.apply(Math,h);return[e,h]},_getTimeTwixs:function(e,p,h){if(0>"year quarter month day hour minute second automatic".split(" ").indexOf(h))return console.log("Invaild data formatter: "+h),!1;e=this._getTimeRange(e,p);if(e[0]===e[1])return!1;h=this._getDateUnit(e,h);p=this.getStartTimeByUnit(e[0],h);p=f(p).local();e=f(e[1]).local();e=p.twix(e).split(1,h);p={startValue:e[e.length-1].end().valueOf(),endValue:Infinity};e.push(p);return{twixs:e,dateUnit:h}},getCluseringObj:function(e,
f,h){var a={},b={};h?(e=this.getClusteringObjForDateType(e,f,h),a=e.notNullLabel,b=e.nullLabel):(a=this.separateFeaturesWhetherFieldValueNull(e,f),f=a.nullLabelFeatures,a=this.getClusteringObjByField(a.notNullLabelFeatures,e),b=this.getClusteringObjByField(f,e));return{notNullLabel:a,nullLabel:b}},calcValueByOperation:function(e,f,h){if(e&&1===e.length){if(!h)return e[0];if(!this._isNumber(e[0]))return 0}var a;if(0!==e.length){a=0;"max"===f?a=-Infinity:"min"===f&&(a=Infinity);e=h?e.map(function(a){this._isNumber(a)||
(a=0);return a}.bind(this)):e.filter(function(a){return this._isNumber(a)}.bind(this));var b=0;e.forEach(q.hitch(this,function(c){b++;"average"===f||"sum"===f?a+=c:"max"===f?a=Math.max(a,c):"min"===f&&(a=Math.min(a,c))}));0<b?"average"===f&&(a/=b):a=null}else a=null;return a},getClusteringObjByField:function(e,f){var h={};e.forEach(q.hitch(this,function(a){var b=a.attributes,b=b&&b[f],c=typeof b,b=this.convertingNullOrUndefinedAsPlaceholders(b),k=null;h.hasOwnProperty(b)?(k=h[b],k.features.push(a),
k.count++):(k={count:1,features:[a],type:c},h[b]=k)}));return h},_removeNaNDataItem:function(e){return e.filter(function(e){var f=!1;e=e.category;"number"===typeof e&&(f=isNaN(e));return!f})},separateFeaturesWhetherFieldValueNull:function(e,f){var h=[],a=[];Array.isArray(f)&&(a=f.filter(function(a){var b=a.attributes,b=b&&b[e];if(null===b||void 0===b)h.push(a);else return!0}));return{nullLabelFeatures:h,notNullLabelFeatures:a}},getStartTimeByUnit:function(e,m){return f(e).startOf(m).utc().valueOf()},
_mosaicFieldNameWithOperatorAndUpper:function(e,f){return m.upperCaseString(e+"_"+f)},_mosaicFieldNameWithOperatorAndLower:function(e,f){return m.lowerCaseString(e+"_"+f)},getClusteringObjForDateType:function(e,f,h){function a(a,b,d){a[b]?(a=a[b],a.count+=d.count,a.features=a.features.concat(d.features)):a[b]=d}function b(a,b,d,g){b=Number(b);g=this.getStartTimeByUnit(b,g);a[g]?(a=a[g],a.count+=d.count,a.features=a.features.concat(d.features)):(d.originTime=b,a[g]=d)}function c(a,b,d){d[a[0].attributes[b]]=
{count:1,features:a};return d}var k=this.separateFeaturesWhetherFieldValueNull(e,f),d=k.notNullLabelFeatures;f={};f=this.getClusteringObjByField(k.nullLabelFeatures,e);k={};if(1===d.length)k=c.call(this,d,e,k,h);else if(0!==d.length){var g=this._getTimeTwixs(d,e,h.minPeriod);if(g){var n={},t=g.dateUnit;g.twixs.forEach(function(b){var g="undefined"!==typeof b.startValue?b.startValue:b.start().valueOf(),c="undefined"!==typeof b.endValue?b.endValue:b.end().valueOf(),k={unit:t,count:0,features:[]};d.forEach(q.hitch(this,
function(a){var b=a.attributes,b=b&&b[e];b>=g&&b<c&&(k.features.push(a),k.count++)}));h.isNeedFilled?a.call(this,n,g,k):0<k.count&&a.call(this,n,g,k)}.bind(this));var g={},v,m;for(v in n)n.hasOwnProperty(v)&&(m=n[v],b.call(this,g,v,m,t));for(v in g)if(g.hasOwnProperty(v)){m=g[v];var l=m.originTime;delete m.originTime;k[l]=m}}else k=c.call(this,d,e,k,h)}return{notNullLabel:k,nullLabel:f}},_mapOptions:function(e,f){"feature"===f?(f=e.labelField,delete e.labelField,e.clusterField=f,e.showNullLabelData=
!0):"category"===f?(f=e.categoryField,delete e.categoryField,e.clusterField=f,e.showNullLabelData=!0):"count"===f?(f=e.categoryField,delete e.categoryField,e.clusterField=f):"field"===f&&(e.showNullLabelData=!0);return e},_mapDataItemForStatisticsChart:function(e,f){var h,a,b;return e.map(function(c){h=c.label;delete c.label;a=c.values;delete c.values;b=c.features;delete c.features;"feature"===f?(c.category=h,c.valueFields=a,c.dataFeatures=b):"category"===f?(c.category=h,c.valueFields=a,c.dataFeatures=
b):"count"===f?(c.fieldValue=h,c.count=a[0],c.dataFeatures=b):"field"===f&&(c.label=h,c.value=a[0]);return c})},getFeatureModeStatisticsInfo:function(e){var f=new l({featureLayer:e.layerDefinition,popupInfo:e.popupFieldInfosObj});e=this._mapOptions(e,"feature");var h=e.clusterField,a=this.getFeatureModeStatisticsData(e),a=this.sortStatisticsData(a,"feature",e.sortOrder,h),a=this.getDataForMaxLabels(a,e.maxLabels),a=f.getBestLabelDisplay(a,h,"feature"),a=f.keepStatisticsDataBestDecimalPlace(e,a,"feature");
return this._mapDataItemForStatisticsChart(a,"feature")},getCategoryModeStatisticsInfo:function(e){var f=new l({featureLayer:e.layerDefinition,popupInfo:e.popupFieldInfosObj});e=this._mapOptions(e,"category");var h=e.clusterField,a=this.getCategoryModeStatisticsData(e),a=this.sortStatisticsData(a,"category",e.sortOrder,null,e.valueFields),a=this._removeNaNDataItem(a),a=this.getDataForMaxLabels(a,e.maxLabels),a=f.getBestLabelDisplay(a,h,"category"),a=f.keepStatisticsDataBestDecimalPlace(e,a,"category");
return this._mapDataItemForStatisticsChart(a,"category")},getCountModeStatisticsInfo:function(e){var f=new l({featureLayer:e.layerDefinition,popupInfo:e.popupFieldInfosObj});e=this._mapOptions(e,"count");var h=e.clusterField,a=this.getCountModeStatisticsData(e),a=this.sortStatisticsData(a,"count",e.sortOrder),a=this.getDataForMaxLabels(a,e.maxLabels),a=f.getBestLabelDisplay(a,h,"count");return this._mapDataItemForStatisticsChart(a,"count")},getFieldModeStatisticsInfo:function(e){var f=new l({featureLayer:e.layerDefinition,
popupInfo:e.popupFieldInfosObj});e=this._mapOptions(e,"category");var h=this.getFieldModeStatisticsData(e),h=this.sortStatisticsData(h,"field",e.sortOrder),h=this.getDataForMaxLabels(h,e.maxLabels),h=f.getBestLabelDisplay(h,null,"field"),h=f.keepStatisticsDataBestDecimalPlace(e,h,"field");return this._mapDataItemForStatisticsChart(h,"field")}}})},"jimu/_chartHelpUtils":function(){define("dojo/_base/declare jimu/utils dojo/_base/lang dojo/_base/config dojo/_base/Color ./_dateFormat moment/moment esri/lang esri/graphic esri/layers/GraphicsLayer esri/symbols/jsonUtils".split(" "),
function(q,f,l,m,e,p,h,a,b,c,k){return q(null,{constructor:function(a){a&&l.mixin(this,a);this.popupInfo||(this.popupInfo={});this.featureLayer||(this.featureLayer={});this._cachePlaces={}},setLayerFeatureLayer:function(a){this.featureLayer=a;this.map&&((a=this.map.getLayer("chart_highLight_GraphicLayer"))?this.graphicLayer=a:(this.graphicLayer=new c({id:"chart_highLight_GraphicLayer"}),this.map.addLayer(this.graphicLayer)),this.graphicLayer.clear())},setLayerObject:function(a){this.layerObject=a},
setSymbolLayer:function(a){this.symbolLayer=a},setPopupInfo:function(a){this.popupInfo=a},setMap:function(a){this.map=a},getBestLabelDisplay:function(a,b,c){if("feature"===c)return this.betterDataCategoryForFeatureMode(a,b);if("category"===c||"count"===c)return this.betterDataCategoryForCategoryCountMode(a,b);if("field"===c)return this.betterDataCategoryForFieldMode(a)},betterDataCategoryForFeatureMode:function(a,b){a.forEach(l.hitch(this,function(a){a.label=this.getBestDisplayValue(b,a.label)}));
return a},betterDataCategoryForFieldMode:function(a){a.forEach(l.hitch(this,function(a){a.label=this.getFieldAlias(a.label)}));return a},betterDataCategoryForCategoryCountMode:function(a,b){a.forEach(l.hitch(this,function(a){a.label="undefined"!==typeof a.unit?this.getCategoryDisplayForDateUnit(a.label,a.unit):this.getBestDisplayValue(b,a.label)}));return a},keepStatisticsDataBestDecimalPlace:function(a,b,c){if("count"===c)return b;var d=a.valueFields,g=a.operation,n=a.hasStatisticsed;this.cacheDecimalPlace(d,
a.features,this.popupInfo,g,n);"feature"===c||"category"===c?b.forEach(l.hitch(this,function(a){a.originalValues=l.clone(a.values);d.forEach(l.hitch(this,function(b,d){var c=a.values[d],c=this.formatedValueDecimalplace(b,c,g,n);a.values[d]=c}))})):"field"===c&&d.forEach(l.hitch(this,function(a){b.some(l.hitch(this,function(b){if(b.label===a){var d=b.values[0],d=this.formatedValueDecimalplace(a,d,g,n);b.values[0]=d;return!0}return!1}))}));return b},formatedValueDecimalplace:function(a,b,c,k){this.isIntegerNumberField(a)&&
"average"===c?b=this.handleValueMaxDecimalplaces(b,6):this.isFloatNumberField(a)&&(a=this.getFieldDecimalPlaceFromCache(a),b=this.formatValuePlaces(b,a),k&&!this.popupInfo&&(b=this.handleValueMaxDecimalplaces(b,6)));return b},isIntegerNumberField:function(a){if(!this.featureLayer||!this.featureLayer.fields)return!1;var b=["esriFieldTypeSmallInteger","esriFieldTypeInteger"];return this.featureLayer.fields.some(l.hitch(this,function(d){return d.name===a&&0<=b.indexOf(d.type)}))},formatValuePlaces:function(a,
b){return"number"!==typeof b||!a&&0!==a?a:a.toFixed(b)},handleValueMaxDecimalplaces:function(a,b){a=Number(a);if("number"!==typeof a)return a;var d=0,g=a.toString().split(".");1===g.length?d=0:2===g.length&&(d=g[1].length);return 0<d?(d>b&&(d=b),a=a.toFixed(d),parseFloat(a)):a},getFieldDecimalPlaceFromCache:function(a){var b;this._cachePlaces&&(a=this._cachePlaces[a],"number"===typeof a&&(b=a));return b},getValueFromAttributes:function(a,b,c,k){if(a)return c="average"===c?"avg":c,k?(k=f.upperCaseString(b+
"_"+c),k=a[k],"undefined"===typeof k&&(k=f.lowerCaseString(b+"_"+c),k=a[k])):k=a[b],k},cacheDecimalPlace:function(a,b,c,k,e){this._cachePlaces={};if(a&&a.length){var d=a.filter(l.hitch(this,function(a){return this.isFloatNumberField(a)})),g={};d.forEach(l.hitch(this,function(a){g[a]=[]}));b&&0<b.length&&b.forEach(l.hitch(this,function(a){var b=a.attributes;b&&d.forEach(l.hitch(this,function(a){var d=this.getValueFromAttributes(b,a,k,e);"number"===typeof d&&g[a].push(d)}))}));d.forEach(l.hitch(this,
function(a){var b=this.getFieldInfoFromPopupInfo(c,a);this._cachePlaces[a]=0;var d=g[a];if(0<d.length)try{var n=this.getBestDecimalPlaceForArrayValues(d);this._cachePlaces[a]=n}catch(D){this._cachePlaces[a]=0,console.error(D)}c&&((b=this.getPlacesFromPopupFieldInfo(b))||0===b)&&(this._cachePlaces[a]=b)}))}},getBestDecimalPlaceForArrayValues:function(a){var b=0,d={};a.forEach(function(a){a=a.toString().split(".");var b=null;1===a.length?b=0:2===a.length&&(b=a[1].length);null!==b&&(d[b]=void 0===d[b]?
1:d[b]+1)});a=null;for(var c in d){c=parseInt(c,10);var k=d[c];a?k>a.value&&(a={key:c,value:k}):a={key:c,value:k}}a&&(b=parseInt(a.key,10));return b},getFieldInfoFromPopupInfo:function(a,b){var d=null;return a&&a.fieldInfos?d=a.fieldInfos.filter(function(a){return a.fieldName===b})[0]:d},getPlacesFromPopupFieldInfo:function(a){return a&&a.format&&a.format.places},getAliasFromPopupInfo:function(a,b){var d=b;if(!a||!a.fieldInfos)return d;(a=a.fieldInfos)&&0<a.length&&a.some(function(a){if(a.fieldName===
b)return d=a.label,!0});return d},isFloatNumberField:function(a){if(!this.featureLayer||!this.featureLayer.fields)return!1;var b=["esriFieldTypeSingle","esriFieldTypeDouble"];return this.featureLayer.fields.some(l.hitch(this,function(d){return d.name===a&&0<=b.indexOf(d.type)}))},isNumberField:function(a){if(!this.featureLayer||!this.featureLayer.fields)return!1;var b=["esriFieldTypeSmallInteger","esriFieldTypeInteger","esriFieldTypeSingle","esriFieldTypeDouble"];return this.featureLayer.fields.some(l.hitch(this,
function(d){return d.name===a&&0<=b.indexOf(d.type)}))},isDateField:function(a){return(a=this.getFieldInfo(a))?"esriFieldTypeDate"===a.type:!1},getFieldInfo:function(a){if(this.featureLayer)for(var b=this.featureLayer.fields,d=0;d<b.length;d++)if(b[d].name===a)return b[d];return null},getFieldAliasArray:function(a){return a.map(l.hitch(this,function(a){return this.getFieldAlias(a)}))},getBestDisplayValue:function(a,b){if("_NULL\x26UNDEFINED_"===b)return"null";if(this.isDateField(a))return this.formatedDateByPopupInfoOrLocal(a,
b);var d={};d[a]=b;d=f.getDisplayValueForCodedValueOrSubtype(this.layerObject||this.featureLayer,a,d);d.isCodedValueOrSubtype?b=d.displayValue:this.isNumberField(a)&&(a=this.getFieldInfoFromPopupInfo(this.popupInfo,a),b=f.localizeNumberByFieldInfo(b,a));return b},formatedDateByPopupInfoOrLocal:function(b,g,c){c||(c=this.popupInfo);a:{if(c&&a.isDefined(c.fieldInfos))for(var d=0,k=c.fieldInfos.length;d<k;d++){var n=c.fieldInfos[d];if(n.fieldName===b){b=n.format;break a}}b=null}g=Number(g);return f.fieldFormatter.getFormattedDate(g,
b)},getDisplayValForNumberCodedValueSubTypes:function(a,b){var d=this.tryLocaleNumber(b,a);if(this.featureLayer&&this.featureLayer.typeIdField===a){var c=this.featureLayer.types;if(c&&0<c.length&&(c=c.filter(l.hitch(this,function(a){return a.id===b})),0<c.length))return d=c[0].name}(a=this.getFieldInfo(a))&&a.domain&&(a=a.domain.codedValues)&&0<a.length&&a.some(function(a){return a.code===b?(d=a.name,!0):!1});return d},tryLocaleNumber:function(b,c){var d=b;if(a.isDefined(b)&&isFinite(b))try{var g;
if(c&&this.isNumberField(c)){var k=this.popupInfo[c];g=k&&l.exists("format.places",k)?f.localizeNumberByFieldInfo(b,k):f.localizeNumber(b)}else g=b;"string"===typeof g&&(d=g)}catch(C){console.error(C)}return d+""},getCategoryDisplayForDateUnit:function(a,b){if(!b)return a;a=Number(a);return this._getFormatteredDate(a,b)},_getFormatteredDate:function(a,b){var d=this._getDateTemplate(b);0<=["year","quarter","month","day"].indexOf(b)?d=f.localizeDate(new Date(a),{selector:"date",datePattern:d.date}):
(b=f.localizeDate(new Date(a),{selector:"date",datePattern:d.date}),a=h(a).format(d.time),d=b+d.connector+a);return d},_getDateTemplate:function(a){var b=p[m.locale];(b=b||{},b.date)||(b.date={"short":"short"});b&&!b.time&&(b.time={medium:"HH:mm:ss a"});b&&!b.connector&&(b.connector=" ");b&&!b.sNoDay&&(b.sNoDay="MMM, y");var d={};"year"===a?d.date="y":"quarter"===a?d.date="y q":"month"===a?d.date=b.date.sNoDay:"day"===a?d.date=b.date["short"]:"hour"===a?(d.date=b.date["short"],d.time="HH a",d.connector=
b.connector):"minute"===a?(d.date=b.date["short"],d.time="HH:mm a",d.connector=b.connector):"second"===a&&(d.date=b.date["short"],d.time=b.time.medium,d.connector=b.connector);return d},_getSymbolLayerGraphics:function(a,b){if(!this.symbolLayer)return null;if(!this.symbolLayer.refreshInterval&&this.symbolGraphics&&!1===this.symbolGraphics.filterByExtent&&!1===this.symbolGraphics.useSelection)return this.symbolGraphics.graphics;var d=null;this.map&&this.symbolLayer&&(d=f.getClientFeaturesFromMap(this.map,
this.symbolLayer,b,!!a));this.symbolGraphics={filterByExtent:a,useSelection:b,graphics:d};return d},_isContainAttr:function(a,b){if("object"!==typeof b||"object"!==typeof b)return!1;var d=!0;Object.keys(b).some(function(c){return b[c]!==a[c]?(d=!1,!0):!1});return d},_getFeaturesByAttr:function(a,b){if(b){var d=null;b.some(function(b){return this._isContainAttr(b.attributes,a)?(d=b,!0):!1}.bind(this));return d}},_getFeaturesByClusterfield:function(a,b,c,k){var d=this._getSymbolLayerGraphics(c);if(d)return c=
null,a=this.clientStatisticsUtils.getCluseringObj(a,d,k),(b=l.mixin(a.notNullLabel,a.nullLabel)[b])&&b.features&&b.features.length&&(c=b.features),c},_getFeatureForSerieData:function(a,c,k){var d=c.clusterField,g=c.mode,e=c.filterByExtent;c=c.useSelection;var f={};f[d]=a.name;if("feature"===g)return this._getFeatureBySerieDataItem(a,d,k,e,c);if("category"===g||"count"===g)return new b(null,null,f)},_getFeatureBySerieDataItem:function(a,b,c,k,e){var d={};d[b]=a.name;d[c]=Number("undefined"!==typeof a.originValue?
a.originValue:a.value);a=this._getSymbolLayerGraphics(k,e);return this._getFeaturesByAttr(d,a)},_getFeatureBycsuDataItem:function(a,b,c,k,e,f){var d={};d[b]=a.label;a=a.originalValues||a.values;d[c]=Number(a&&a[k]);c=this._getSymbolLayerGraphics(e,f);return this._getFeaturesByAttr(d,c)},bindChartEvent:function(a,b,c){var d=b.filterByExtent,g=b.useSelection,k=b.clusterField,e=b.valueFields,f=null;"undefined"!==b.dateConfig&&(f=b.dateConfig);this.highLightColor=b.highLightColor||"#00ffff";var n=b.mode;
if(this.map&&0!==c.length){b=l.hitch(this,function(a){if("series"===a.componentType){var b=null,h=this._getSymbolLayerGraphics(d,g);if("field"===n)b=h;else if(h=c[a.dataIndex])if("feature"===n){var t=a.seriesIndex,m=e[t];if(!m)return;(h=this._getFeatureBycsuDataItem(h,k,m,t,d,g))&&(b=[h])}else h=h.label,"undefined"!==typeof h&&(b=this._getFeaturesByClusterfield(k,h,d,f));b&&"mouseover"===a.type&&this.graphicLayer&&(this._mouseoverFeatures=b,this._mouseOverChartItem(b))}});var h=l.hitch(this,function(){this._mouseoverFeatures&&
this.graphicLayer&&(this._mouseOutChartItem(this._mouseoverFeatures),this._mouseoverFeatures=null)});[{name:"mouseover",callback:b},{name:"mouseout",callback:h}].forEach(l.hitch(this,function(b){a.chart.off(b.name);a.chart.on(b.name,l.hitch(this,function(a){"mouseover"===a.type?(this._hasTriggerMouseoverEvent||(this._hasTriggerMouseoverEvent=!0,b.callback(a)),setTimeout(l.hitch(this,function(){this._hasTriggerMouseoverEvent=!1},500))):"mouseout"===a.type&&b.callback(a)}))}))}},_createHighLightFeatures:function(a,
c){a.forEach(l.hitch(this,function(a){a=new b(a.geometry,c);this.graphicLayer.add(a)}))},_mouseOverChartItem:function(a){if(this.featureLayer&&this.featureLayer.getMap()&&this.featureLayer.visible){var d=f.getTypeByGeometryType(this.featureLayer.geometryType);a.forEach(l.hitch(this,function(a){a._originalSymbol=a.symbol}));var c=null;if("point"===d)c=this._getHighLightMarkerSymbol(),this._createHighLightFeatures(a,c);else if("polyline"===d)c=this._getHighLightLineSymbol(this.highLightColor),this._createHighLightFeatures(a,
c);else if("polygon"===d){var k=this.featureLayer.getSelectedFeatures()||[];a.forEach(l.hitch(this,function(a){var d=0<=k.indexOf(a),d=this._getHighLightFillSymbol(this.featureLayer,a,d);a=new b(a.geometry,d);this.graphicLayer.add(a)}))}}},_mouseOutChartItem:function(){this.graphicLayer&&this.graphicLayer.clear()},_getHighLightMarkerSymbol:function(){var a=k.fromJson({color:[255,255,255,0],size:18,angle:0,xoffset:0,yoffset:0,type:"esriSMS",style:"esriSMSSquare",outline:{color:[0,0,128,255],width:.75,
type:"esriSLS",style:"esriSLSSolid"}});a.setSize(30);a.outline.setColor(new e(this.highLightColor));return a},_getHighLightLineSymbol:function(a){var b=k.fromJson({color:[0,255,255,255],width:1.5,type:"esriSLS",style:"esriSLSSolid"});b.setColor(new e(a||this.highLightColor));return b},_getDefaultHighLightFillSymbol:function(){var a=k.fromJson({color:[0,255,255,128],outline:{color:[0,255,255,255],width:1.5,type:"esriSLS",style:"esriSLSSolid"},type:"esriSFS",style:"esriSFSSolid"});a.outline.setColor(new e(this.highLightColor));
return a},_getSymbolByRenderer:function(a,b){var d=this._getDefaultHighLightFillSymbol(),c=this.getVisualVariableByType("colorInfo",a.visualVariables);if(c){if(a=a.getColor(b,{colorInfo:c}))a=l.clone(a),d.setColor(a)}else d=a.getSymbol(b);return d},getVisualVariableByType:function(a,b){return b&&(b=b.filter(function(b){return b.type===a&&!b.target}),b.length)?b[0]:null},_getHighLightFillSymbol:function(a,b,c){var d=null,g=b.symbol,d=a.renderer;!g&&d&&(g=this._getSymbolByRenderer(d,b));g&&"function"===
typeof g.setOutline?(d=k.fromJson(g.toJson()),b=1.5,g.outline&&0<g.outline.width&&(b=g.outline.width+1),c=this._getHighLightLineSymbol(c?"#ff0000":"#00ffff"),c.setWidth(b),d.setOutline(c)):d=this._getDefaultHighLightFillSymbol();return d},_isNumberField:function(a){var b=["esriFieldTypeSmallInteger","esriFieldTypeInteger","esriFieldTypeSingle","esriFieldTypeDouble"];return this.featureLayer.fields.some(l.hitch(this,function(d){return d.name===a&&0<=b.indexOf(d.type)}))},getFieldAlias:function(a){var b;
this.popupInfo&&(b=this.getAliasFromPopupInfo(this.popupInfo,a));b||(b=a,(a=this.getFieldInfo(a))&&a.alias&&(b=a.alias));return b},_removeDuplicateElementForObjArray:function(a){if(!Array.isArray(a))return a;var b=[];b.push(a[0]);a.forEach(function(a){b.some(function(b){return f.isEqual(b,a)})||b.push(a)});return b},assigneeSettingColor:function(a,b,c){if(!b||!b.length)return b;var d=a.seriesStyle;if(!d)return b;"layerSymbol"===d.type?b=this._assigneeStyleLayerSymbolColor(b,c):"series"===d.type?b=
this._assigneeStyleSeriesColor(a,b):"custom"===d.type&&(b=this._assigneeStyleCustomColor(a,b));return b},_assigneeStyleCustomColor:function(a,b){a=a.seriesStyle;if(!a||!a.customColor)return b;var d=a.customColor;a=d.categories;d=d.others;if(!(a&&a.length||d&&d.length))return b;d&&d.length&&this._setCustomOthersColor(d,b);a&&a.length&&this._setCustomCategoriesColor(a,b)},_setCustomCategoriesColor:function(a,b){b.forEach(function(b){(b=b.data)&&b.length&&b.forEach(function(b){if("undefined"!==typeof b.name){var d=
this._getMatchingCustomColor(b.name,a);this.setColorToDataItem(b,d)}}.bind(this))}.bind(this))},_getMatchingCustomColor:function(a,b){var d=!1;if(!b||!b.length)return d;(b=b.filter(function(b){return b.id===a})[0])&&b.color&&(d=b.color);return d},_getMatchingCustomLabel:function(a,b){var d=!1;if(!b||!b.length)return d;(b=b.filter(function(b){return b.id===a})[0])&&b.label&&(d=b.label);return d},_setCustomOthersColor:function(a,b){this._setOtherColorForCustomColor(a,b);this._setNullLabelColorForCustomColor(a,
b)},_setOtherColorForCustomColor:function(a,b){(a=a.filter(function(a){return"others"===a.id})[0])&&a.color&&this.setColorToAllSerieDataItem(b,a.color)},_setNullLabelColorForCustomColor:function(a,b){if((a=a.filter(function(a){return"null"===a.id})[0])&&a.color){var d=a.color;b.forEach(function(a){(a=a.data)&&a.length&&a.forEach(function(a){a.name&&"_NULL\x26UNDEFINED_"===a.name&&this.setColorToDataItem(a,d)}.bind(this))}.bind(this))}},_assigneeStyleSeriesColor:function(a,b){var d=a.seriesStyle;if(!d||
!d.styles||!d.styles[0])return b;var c=a.mode,g=a.area;return b.map(function(a){var b=null,k=a.type;if("field"===c)"line"===k?(b=d.styles[0].style,a=this._setStyleToSerie(b,a,g)):(k=a.data)&&k[0]&&(a.data=k.map(function(a){b=this._getMatchingStyle(a.name,d);return this.setStyleToSerieDataItem(b,a)}.bind(this)));else if("column"===k||"bar"===k||"line"===k)"count"===c?(b=d.styles[0].style,a=this._setStyleToSerie(b,a,g)):"undefined"!==typeof a.name&&(b=this._getMatchingStyle(a.name,d))&&(a=this._setStyleToSerie(b,
a,g));return a}.bind(this))},_assigneeStyleLayerSymbolColor:function(a,b){a.forEach(function(a){var d=a.name;(a=a.data)&&a.length&&a.forEach(function(a){var c=[this._getFeatureForSerieData(a,b,d)];if(c=this._getSymbolColorForDataItem(c))a.itemStyle={color:c}}.bind(this))}.bind(this))},_setStyleToSerie:function(a,b,c){b.itemStyle||(b.itemStyle={});a&&"undefined"!==typeof a.color&&(Array.isArray(a.color)?b.itemStyle.color=a.color[0]:b.itemStyle.color=a.color);a&&"undefined"!==typeof a.opacity&&(c?(b.areaStyle||
(b.areaStyle={}),b.areaStyle.opacity=1-parseFloat(a.opacity/10)):b.itemStyle.opacity=1-parseFloat(a.opacity/10));return b},_getMatchingStyle:function(a,b){var c=null;b=b.styles;if(!b||!b[0]||""===a)return c;b.forEach(function(b){b.name===a&&(c=b.style)});return c},_getSymbolColorForDataItem:function(a){var b=!1;if(!this.symbolLayer)return b;a=a&&a[0];return a?b=this._getColorForFeature(this.symbolLayer.renderer,a):b},_getColorForFeature:function(a,b){var c=!1,d=this.getVisualVariableByType("colorInfo",
a.visualVariables);d?(a=a.getColor(b,{colorInfo:d}))&&(c=this._convertToEchartsRbga(a)):(a=a.getSymbol(b))&&"undefined"!==typeof a.color&&(c=this._convertToEchartsRbga(a.color));return c},_convertToEchartsRbga:function(a){if(!a||"undefined"===typeof a.r)return a;a=window.JSON.parse(window.JSON.stringify(a));var b;b="rgba("+(a.r+",");b+=a.g+",";b+=a.b+",";return b+=a.a+")"},getColors:function(a,b){var c=[];if(2===a.length)c=this._createGradientColors(a[0],a[a.length-1],b);else{for(var d=Math.ceil(b/
a.length),g=0;g<d;g++)c=c.concat(a);c=c.slice(0,b)}return c},_createGradientColors:function(a,b,c){var d=[];a=new e(a);var g=new e(b);b=(g.r-a.r)/c;for(var k=(g.g-a.g)/c,g=(g.b-a.b)/c,f=new e,n=0,h=0,m=0,l=0;l<c;l++)n=parseInt(a.r+b*l,10),h=parseInt(a.g+k*l,10),m=parseInt(a.b+g*l,10),f.setColor([n,h,m]),d.push(f.toHex());return d},setStyleToSerieDataItem:function(a,b){b.itemStyle||(b.itemStyle={});a&&"undefined"!==typeof a.color&&(Array.isArray(a.color)?b.itemStyle.color=a.color[0]:b.itemStyle.color=
a.color);a&&"undefined"!==typeof a.opacity&&(b.itemStyle.opacity=1-parseFloat(a.opacity/10));return b},setColorToSerie:function(a,b){if(!a||"object"!==typeof a||Array.isArray(a))return a;a.itemStyle||(a.itemStyle={});b&&(a.itemStyle.color=b)},setColorToDataItem:function(a,b){if(!a||"object"!==typeof a)return a;a.itemStyle||(a.itemStyle={});b&&(a.itemStyle.color=b)},setColorToAllSerieDataItem:function(a,b){a.forEach(function(a){(a=a.data)&&a.length&&a.forEach(function(a){this.setColorToDataItem(a,
b)}.bind(this))}.bind(this))},_updateDataItemNameForCustom:function(a,b,c){var d;"undefined"!==typeof a.name&&(d=a.name,"_NULL\x26UNDEFINED_"===a.name&&b?d=b:(b=this._getMatchingCustomLabel("undefined"!==typeof a.originName?a.originName:a.name,c))&&(d=b),a.name=d);return d},_updateSerieDataItemName:function(a,b,c){var d=a.name,g=d,g=a.unit&&d?this.getCategoryDisplayForDateUnit(d,a.unit):"field"!==b?this.getBestDisplayValue(c,d):this.getFieldAlias(d);a.name=g;a.originName=d;return g},updateChartSeriesDisplayName:function(a,
b,c){var d=c.clusterField,g=c.mode;c=a.series;var k=[];b=b.seriesStyle;var e,f,h;c.forEach(function(a,b){a.name&&(a.name=this.getFieldAlias(a.name));(a=a.data)&&a.length&&a.forEach(function(a,c){h=this._updateSerieDataItemName(a,g,d);0===b&&(k[c]=h)}.bind(this))}.bind(this));"custom"===b.type&&((b=b.customColor)&&b.categories&&b.categories.length&&(e=b.categories,b=b.others||[],(b=b.filter(function(a){return"null"===a.id})[0])&&b.label&&(f=b.label)),c.forEach(function(a,b){(a=a.data)&&a.length&&a.forEach(function(a,
c){h=this._updateDataItemNameForCustom(a,f,e);0===b&&(k[c]=h)}.bind(this))}.bind(this)));a.labels=null;a.labels=k}})})},"jimu/_dateFormat":function(){define([],function(){return{ar:{date:{"short":"d/M/y",medium:"dd/MM/y","long":"d MMMM. y",onlyDate:"dd/MM",mNoDay:"MM/y",sNoDay:"M/y"},time:{"short":"h:mm a",medium:"h:mm:ss a"}},bs:{date:{"short":"d.M.yy.",medium:"d. MMM. y.","long":"d. MMMM y.",onlyDate:"d. MMM.",mNoDay:"MMM. y.",sNoDay:"M.yy"}},cs:{date:{"short":"dd.MM.yy",medium:"d. M. y",onlyDate:"d. M.",
mNoDay:"M. y",sNoDay:"MM.yy"}},da:{date:{"short":"dd/MM/y",medium:"d. MMM y","long":"d. MMMM y",onlyDate:"d. MMM",mNoDay:"MMM y",sNoDay:"MM/y"}},de:{date:{"short":"dd.MM.yy",medium:"dd.MM.y",onlyDate:"dd.MM."},connector:" , ",mNoDay:"MM.y",sNoDay:"MM.yy"},el:{date:{"short":"d/M/yy",medium:"d MMM y",onlyDate:"d MMM"},connector:" , ",mNoDay:"MMM y",sNoDay:"M/yy"},en:{date:{"short":"M/d/yy",medium:"MMM d, y",onlyDate:"MMM d",mNoDay:"MMM, y",sNoDay:"M/yy"}},es:{date:{"short":"d/M/yy",medium:"d MMM y",
onlyDate:"d MMM",mNoDay:"MMM y",sNoDay:"M/yy"}},et:{date:{"short":"d.MM.y",medium:"d. MMM y",onlyDate:"d. MMM",mNoDay:"MMM y",sNoDay:"MM.y"},time:{"short":"H:mm",medium:"H:mm:ss"}},fi:{date:{"short":"d.M.y",medium:"d.M.y",onlyDate:"d.M.",mNoDay:"M.y",sNoDay:"M.y"},connector:" 'klo' "},fr:{date:{"short":"dd/MM/y",medium:"d MMM y",onlyDate:"d MMM",mNoDay:"MMM y",sNoDay:"MM/y"},connector:" '\u00e0' "},he:{date:{"short":"dd/MM/yy",medium:"d '\u05d1'MMM y",onlyDate:"d '\u05d1'MMM",mNoDay:"'\u05d1'MMM y",
sNoDay:"MM/yy"},connector:" , "},hr:{date:{"short":"d.M.y",medium:"d. MMM y.",onlyDate:"d. MMM",mNoDay:"MMM y.",sNoDay:"M.y"}},id:{"short":"dd/MM/yy",date:{medium:"d MMM y",onlyDate:"d MMM",mNoDay:"MMM y",sNoDay:"MM/yy"}},it:{date:{medium:"dd MMM y","long":"d MMMM y",onlyDate:"dd MMM",mNoDay:"MMM y",sNoDay:"MM/yy"},connector:" , "},ja:{date:{medium:"y/MM/dd",onlyDate:"MM/dd",mNoDay:"y/MM",sNoDay:"y/MM"},time:{"short":"a h:mm",medium:"a h:mm:ss"}},ko:{date:{medium:"y. M. d.",onlyDate:"M. d.",mNoDay:"y. M.",
sNoDay:"yy. M."}},lt:{date:{medium:"y-MM-dd","long":"y 'm'. MMMM d 'd'.",onlyDate:"MM-dd",mNoDay:"y-MM",sNoDay:"y-MM"},time:{medium:"HH:mm:ss"}},lv:{date:{"short":"dd.MM.y",medium:"y. 'gada' d. MMM.","long":"y. 'gada' d. MMMM",onlyDate:"d. MMM.",mNoDay:"y. 'gada' MMM.",sNoDay:"MM.y"}},nb:{date:{"short":"dd.MM.y",medium:"d. MMM y","long":"d. MMMM y",onlyDate:"d. MMM",mNoDay:"MMM y",sNoDay:"MM.y"},time:{"short":"HH:mm",medium:"HH:mm:ss"},connector:" , "},nl:{date:{medium:"d MMM y",onlyDate:"d MMM",
mNoDay:"MMM y",sNoDay:"MM-yy"}},pl:{date:{medium:"d MMM y",onlyDate:"d MMM",mNoDay:"MMM y",sNoDay:"MM.y"},connector:" , "},"pt-br":{date:{"short":"dd/MM/y",medium:"d 'de' MMM 'de' y",onlyDate:"d 'de' MMM",mNoDay:"MMM 'de' y",sNoDay:"MM/y"}},"pt-pt":{date:{medium:"dd/MM/y",onlyDate:"dd/MM",mNoDay:"MM/y",sNoDay:"MM/yy"}},ro:{date:{medium:"d MMM y",onlyDate:"d MMM",mNoDay:"MMM y",sNoDay:"MM.y"},connector:" , "},ru:{date:{"short":"dd.MM.y",medium:"d MMM y '\u0433.'",onlyDate:"d MMM",mNoDay:"MMM y '\u0433.'",
sNoDay:"MM.y"},connector:" , "},sr:{date:{medium:"dd.MM.y.",onlyDate:"dd.MM.",mNoDay:"MM.y.",sNoDay:"M.yy."},time:{"short":"HH:mm",medium:"HH:mm:ss"}},sv:{date:{medium:"d MMM. y",onlyDate:"d MMM.",mNoDay:"MMM. y",sNoDay:"y-MM"}},th:{date:{medium:"d MMM y",onlyDate:"d MMM",mNoDay:"MMM y",sNoDay:"M/yy"}},tr:{date:{medium:"d MMM y",onlyDate:"d MMM",mNoDay:"MMM y",sNoDay:"MM.y"}},vi:{date:{"short":"dd/MM/y",medium:"d MMM, y","long":"'Ng\u00e0y' dd 'th\u00e1ng' MM 'n\u0103m' y",onlyDate:"d MMM",mNoDay:"MMM, y",
sNoDay:"MM/y"},time:{"short":"hh:mm a",medium:"hh:mm:ss a"},connector:" , "},"zh-cn":{date:{"short":"y/M/d",medium:"y'\u5e74'M'\u6708'd'\u65e5'",onlyDate:"M'\u6708'd'\u65e5'",mNoDay:"y'\u5e74'M'\u6708'",sNoDay:"y/M"}},"zh-hk":{date:{medium:"y'\u5e74'M'\u6708'd'\u65e5'",onlyDate:"M'\u6708'd'\u65e5'",mNoDay:"y'\u5e74'M'\u6708'",sNoDay:"M/y"}},"zh-tw":{date:{medium:"y'\u5e74'M'\u6708'd'\u65e5'",onlyDate:"M'\u6708'd'\u65e5'",mNoDay:"y'\u5e74'M'\u6708'",sNoDay:"y/M"}}}})},"libs/moment/twix":function(){(function(){var q,
f,l,m=[].slice;q="undefined"!==typeof module&&null!==module&&null!=module.exports&&"function"===typeof require;f=function(e){return"[object Array]"===Object.prototype.toString.call(e)};l=function(e){var l;if(null==e)throw Error("Can't find moment");l=function(){function h(a,b,c,k){var d;null==k&&(k={});"string"!==typeof c&&(k=null!=c?c:{},c=null);"boolean"===typeof k&&(k={allDay:k});this._oStart=e(a,c,k.parseStrict);this._oEnd=e(b,c,k.parseStrict);this.allDay=null!=(d=k.allDay)?d:!1;this._mutated()}
h._extend=function(){var a,b,c,k,d,g;b=arguments[0];g=2<=arguments.length?m.call(arguments,1):[];c=0;for(k=g.length;c<k;c++)for(a in d=g[c],d)"undefined"!==typeof d[a]&&(b[a]=d[a]);return b};h.prototype.start=function(){return this._start.clone()};h.prototype.end=function(){return this._end.clone()};h.prototype.isSame=function(a){return this._start.isSame(this._end,a)};h.prototype.length=function(a,b){null==b&&(b=!1);return this._displayEnd.diff(this._start,a,b)};h.prototype.count=function(a){var b;
b=this.start().startOf(a);return this.end().startOf(a).diff(b,a)+1};h.prototype.countInner=function(a){var b,c;b=this._inner(a);c=b[0];b=b[1];return c>=b?0:b.diff(c,a)};h.prototype.iterate=function(a,b,c){var k,d,g;d=this._prepIterateInputs(a,b,c);a=d[0];b=d[1];c=d[2];g=this.start().startOf(b);k=this.end().startOf(b);this.allDay&&(k=k.add(1,"d"));d=function(a){return function(){return!a.allDay&&g<=k&&(!c||!g.isSame(k)||a._end.hours()>c)||a.allDay&&g<k}}(this);return this._iterateHelper(b,g,d,a)};
h.prototype.iterateInner=function(a,b){var c,k,d;b=this._prepIterateInputs(a,b);a=b[0];b=b[1];k=this._inner(b,a);d=k[0];c=k[1];return this._iterateHelper(b,d,function(){return d<c},a)};h.prototype.humanizeLength=function(){return this.allDay?this.isSame("d")?"all day":this._start.from(this.end().add(1,"d"),!0):this._start.from(this._end,!0)};h.prototype.asDuration=function(a){a=this._end.diff(this._start);return e.duration(a)};h.prototype.isPast=function(){return this._lastMilli<e()};h.prototype.isFuture=
function(){return this._start>e()};h.prototype.isCurrent=function(){return!this.isPast()&&!this.isFuture()};h.prototype.contains=function(a){e.isMoment(a)||(a=e(a));return this._start<=a&&this._lastMilli>=a};h.prototype.isEmpty=function(){return this._start.isSame(this._displayEnd)};h.prototype.overlaps=function(a){return this._displayEnd.isAfter(a._start)&&this._start.isBefore(a._displayEnd)};h.prototype.engulfs=function(a){return this._start<=a._start&&this._displayEnd>=a._displayEnd};h.prototype.union=
function(a){var b;b=this.allDay&&a.allDay;return new h(this._start<a._start?this._start:a._start,this._lastMilli>a._lastMilli?b?this._end:this._displayEnd:b?a._end:a._displayEnd,b)};h.prototype.intersection=function(a){var b;b=this.allDay&&a.allDay;return new h(this._start>a._start?this._start:a._start,this._lastMilli<a._lastMilli?b?this._end:this._displayEnd:b?a._end:a._displayEnd,b)};h.prototype.xor=function(){var a,b,c,k,d,g,e,f,l,p,q,r;l=1<=arguments.length?m.call(arguments,0):[];f=0;r=null;q=
[];a=function(){var a,b,c;c=[];a=0;for(b=l.length;a<b;a++)e=l[a],e.allDay&&c.push(e);return c}().length===l.length;b=[];p=[this].concat(l);k=g=0;for(c=p.length;g<c;k=++g)d=p[k],b.push({time:d._start,i:k,type:0}),b.push({time:d._displayEnd,i:k,type:1});b=b.sort(function(a,b){return a.time-b.time});k=0;for(d=b.length;k<d;k++)g=b[k],1===g.type&&--f,f===g.type&&(r=g.time),f===(g.type+1)%2&&(r&&((c=q[q.length-1])&&c._end.isSame(r)?(c._oEnd=g.time,c._mutated()):(c=a?g.time.clone().subtract(1,"d"):g.time,
r=new h(r,c,a),r.isEmpty()||q.push(r))),r=null),0===g.type&&(f+=1);return q};h.prototype.difference=function(){var a,b,c,k,d;a=1<=arguments.length?m.call(arguments,0):[];c=this.xor.apply(this,a).map(function(a){return function(b){return a.intersection(b)}}(this));k=[];a=0;for(b=c.length;a<b;a++)d=c[a],!d.isEmpty()&&d.isValid()&&k.push(d);return k};h.prototype.split=function(){var a,b,c,k,d,g,h,t,l;a=1<=arguments.length?m.call(arguments,0):[];c=g=this.start();e.isDuration(a[0])?b=a[0]:!e.isMoment(a[0])&&
!f(a[0])&&"object"===typeof a[0]||"number"===typeof a[0]&&"string"===typeof a[1]?b=e.duration(a[0],a[1]):t=f(a[0])?a[0]:a;t&&(t=function(){var a,b,c;c=[];a=0;for(b=t.length;a<b;a++)h=t[a],c.push(e(h));return c}(),t=function(){var a,b,c;c=[];a=0;for(b=t.length;a<b;a++)d=t[a],d.isValid()&&d>=g&&c.push(d);return c}().sort(function(a,b){return a.valueOf()-b.valueOf()}));if(b&&0===b.asMilliseconds()||t&&0===t.length)return[this];l=[];k=0;for(a=this._displayEnd;g<a&&(null==t||t[k]);)c=b?g.clone().add(b):
t[k].clone(),c=e.min(a,c),g.isSame(c)||l.push(e.twix(g,c)),g=c,k+=1;!c.isSame(this._displayEnd)&&t&&l.push(e.twix(c,this._displayEnd));return l};h.prototype.divide=function(a){return this.split(this.length()/a,"ms").slice(0,+(a-1)+1||9E9)};h.prototype.isValid=function(){return this._start.isValid()&&this._end.isValid()&&this._start<=this._displayEnd};h.prototype.equals=function(a){return a instanceof h&&this.allDay===a.allDay&&this._start.valueOf()===a._start.valueOf()&&this._end.valueOf()===a._end.valueOf()};
h.prototype.toString=function(){return"{start: "+this._start.format()+", end: "+this._end.format()+", allDay: "+(this.allDay?"true":"false")+"}"};h.prototype.toArray=function(a,b,c){a=this.iterate(a,b,c);for(b=[];a.hasNext();)b.push(a.next());return b};h.prototype.simpleFormat=function(a,b){var c;c={allDay:"(all day)",template:h.formatTemplate};h._extend(c,b||{});a=c.template(this._start.format(a),this._end.format(a));this.allDay&&c.allDay&&(a+=" "+c.allDay);return a};h.prototype.format=function(a){var b,
c,k,d,g,f,m,l,p,q,r,u,x,z;if(this.isEmpty())return"";r={groupMeridiems:!0,spaceBeforeMeridiem:!0,showDayOfWeek:!1,hideTime:!1,hideYear:!1,implicitMinutes:!0,implicitDate:!1,implicitYear:!0,yearFormat:"YYYY",monthFormat:"MMM",weekdayFormat:"ddd",dayFormat:"D",meridiemFormat:"A",hourFormat:this._start.localeData()._longDateFormat.LT[0],minuteFormat:"mm",allDay:"all day",explicitAllDay:!1,lastNightEndsAt:0,template:h.formatTemplate};h._extend(r,a||{});a=[];q=r.hourFormat&&"h"===r.hourFormat[0];c=this._start.localeData()._longDateFormat.L;
b=c.indexOf("M")<c.indexOf("D");m=0<r.lastNightEndsAt&&!this.allDay&&this.end().startOf("d").valueOf()===this.start().add(1,"d").startOf("d").valueOf()&&12<this._start.hours()&&this._end.hours()<r.lastNightEndsAt;l=!r.hideDate&&(!r.implicitDate||this.start().startOf("d").valueOf()!==e().startOf("d").valueOf()||!(this.isSame("d")||m));c=!(this.allDay||r.hideTime);this.allDay&&this.isSame("d")&&(r.implicitDate||r.explicitAllDay)&&a.push({name:"all day simple",fn:function(){return r.allDay},pre:" ",
slot:0});!l||r.hideYear||r.implicitYear&&this._start.year()===e().year()&&this.isSame("y")||a.push({name:"year",fn:function(a){return a.format(r.yearFormat)},pre:b?", ":" ",slot:4});c&&l&&a.push({name:"month-date",fn:function(a){return a.format(b?r.monthFormat+" "+r.dayFormat:r.dayFormat+" "+r.monthFormat)},ignoreEnd:function(){return m},pre:" ",slot:2});!c&&l&&a.push({name:"month",fn:function(a){return a.format(r.monthFormat)},pre:" ",slot:b?2:3});!c&&l&&a.push({name:"date",fn:function(a){return a.format(r.dayFormat)},
pre:" ",slot:b?3:2});l&&r.showDayOfWeek&&a.push({name:"day of week",fn:function(a){return a.format(r.weekdayFormat)},pre:" ",slot:1});r.groupMeridiems&&q&&!this.allDay&&!r.hideTime&&a.push({name:"meridiem",fn:function(a){return a.format(r.meridiemFormat)},slot:6,pre:r.spaceBeforeMeridiem?" ":""});this.allDay||r.hideTime||a.push({name:"time",fn:function(a){var b;b=0===a.minutes()&&r.implicitMinutes&&q?a.format(r.hourFormat):a.format(r.hourFormat+":"+r.minuteFormat);!r.groupMeridiems&&q&&(r.spaceBeforeMeridiem&&
(b+=" "),b+=a.format(r.meridiemFormat));return b},slot:5,pre:", "});x=[];d=[];k=[];z=!0;u=function(a){return function(b){var c,e,f;f=b.fn(a._start);c=b.ignoreEnd&&b.ignoreEnd()?f:b.fn(a._end);e={format:b,value:function(){return f}};if(c===f&&z)return k.push(e);z&&(z=!1,k.push({format:{slot:b.slot,pre:""},value:function(){return r.template(g(x),g(d,!0).trim())}}));x.push(e);return d.push({format:b,value:function(){return c}})}}(this);l=0;for(p=a.length;l<p;l++)c=a[l],u(c);f=!0;g=function(a,b){var c,
d,g,k,e;d=!0;e="";g=a.sort(function(a,b){return a.format.slot-b.format.slot});a=0;for(c=g.length;a<c;a++)k=g[a],f||(e=d&&b?e+" ":e+k.format.pre),e+=k.value(),d=f=!1;return e};return g(k)};h.prototype._iterateHelper=function(a,b,c,k){return{next:function(){var d;return c()?(d=b.clone(),b.add(k,a),d):null},hasNext:c}};h.prototype._prepIterateInputs=function(){var a,b,c,k,d,g;a=1<=arguments.length?m.call(arguments,0):[];if("number"===typeof a[0])return a;"string"===typeof a[0]&&(k=a.shift(),b=null!=
(d=a.pop())?d:1,a.length&&(c=null!=(g=a[0])?g:!1));e.isDuration(a[0])&&(k="ms",b=a[0].as(k));return[b,k,c]};h.prototype._inner=function(a,b){var c,k,d;null==a&&(a="ms");null==b&&(b=1);d=this.start();k=this._displayEnd.clone();d>d.clone().startOf(a)&&d.startOf(a).add(b,a);k<k.clone().endOf(a)&&k.startOf(a);c=d.twix(k).asDuration(a).get(a);k.subtract(c%b,a);return[d,k]};h.prototype._mutated=function(){this._start=this.allDay?this._oStart.clone().startOf("d"):this._oStart;this._lastMilli=this.allDay?
this._oEnd.clone().endOf("d"):this._oEnd;this._end=this.allDay?this._oEnd.clone().startOf("d"):this._oEnd;return this._displayEnd=this.allDay?this._end.clone().add(1,"d"):this._end};return h}();l._extend(e.locale(),{_twix:l.defaults});l.formatTemplate=function(e,a){return e+" - "+a};e.twix=function(){return function(e,a,b){b.prototype=e.prototype;b=new b;e=e.apply(b,a);return Object(e)===e?e:b}(l,arguments,function(){})};e.fn.twix=function(){return function(e,a,b){b.prototype=e.prototype;b=new b;
e=e.apply(b,a);return Object(e)===e?e:b}(l,[this].concat(m.call(arguments)),function(){})};e.fn.forDuration=function(e,a){return new l(this,this.clone().add(e),a)};e.duration.fn&&(e.duration.fn.afterMoment=function(f,a){return new l(f,e(f).clone().add(this),a)},e.duration.fn.beforeMoment=function(f,a){return new l(e(f).clone().subtract(this),f,a)});return e.twixClass=l};if(q)return module.exports=l(require("moment/moment"));this.moment?this.Twix=l(this.moment):"undefined"!==typeof moment&&null!==
moment&&(this.Twix=l(moment));this.makeTwix=l}).call(this)},"jimu/dijit/Chart":function(){define("dojo/_base/declare dijit/_WidgetBase dojo/_base/lang dojo/_base/html dojo/Evented libs/echarts/echarts jimu/utils ./_chartUtils ./_Gauge ./_ChartOptionFactory libs/echarts/light libs/echarts/dark".split(" "),function(q,f,l,m,e,p,h,a,b,c){return q([f,e],{baseClass:"jimu-dijit-chart",templateString:"\x3cdiv\x3e\x3c/div\x3e",declaredClass:"jimu.dijit.chart",config:null,postCreate:function(){this.inherited(arguments);
this._initChart()},updateConfig:function(a){if(!a||!this.chart)return!1;var b=this.chart.getOption(),b=this.preview?null:this.getDatazoomRatio(b);this.config=a;this._specialThemeByConfig(a);var c=this._chartFactory(a);this.chart.setOption(c,!0);this._settingByGrid(a,c,b);return!0},_settingByGrid:function(a,b,c){if("gauge"===a.type)return this._resetGaugePosition(a);var d=this.chartUtils.getAxisZeroPosition();a.layout=this.chartUtils.calcDefaultLayout(a);this.chartUtils.isAxisChart(a)&&(b=this.chartUtils.settingGrid(b,
a),b=this.chartUtils.settingDataZoom(b,a,d,c));b=this.chartUtils.settingChartLayout(b,a);this.chart.setOption(b,!1)},_resetGaugePosition:function(a){this._resetGaugeGrid(a);this._resetGaugeGraphic(a)},setConfig:function(a){if(!a)return!1;this.config=a;this._specialThemeByConfig(this.config);this.clear();var b=this._chartFactory(this.config);this.chart.setOption(b,!0);this._setAixsGrid(a,b);this._resetGaugePosition(a,b);return!0},destroy:function(){this._offEvents();this.clear();this.inherited(arguments)},
_chartFactory:function(a){return this.option=this.chartOptionFactory.produceOption(a)},bindEvents:function(a){this.chart&&a.events&&a.events.length&&(this._offEvents(),a.events.forEach(l.hitch(this,function(a){this.chart.on(a.name,a.callback)})))},_offEvents:function(){this.config.events&&this.config.events[0]&&this.config.events.forEach(l.hitch(this,function(a){this.chart.off(a.name)}))},getDataURL:function(){if(this.chart)return this.chart.getDataURL()},clear:function(){this.chart&&this.chart.clear()},
resize:function(a,b){this.chart&&(m.setStyle(this.domNode,{width:a||"100%",height:b||"100%"}),this.chart.resize(),this._resetGaugePosition(this.config))},getDatazoomRatio:function(a){return(a=a&&a.dataZoom&&a.dataZoom[0])?[a.start,a.end]:null},_resizeDataZoom:function(){var a=this.option,b=this.config;if(a&&b){var c=this.chartUtils.getAxisZeroPosition(),a=this.chartUtils.settingDataZoom(a,b,c);this.chart.setOption(a)}},_setAixsGrid:function(a,b){this.chartUtils.isAxisChart(a)&&(b=this.chartUtils.settingGrid(b,
a),this.chart.setOption(b,!1))},_resetGaugeGraphic:function(a){"gauge"===a.type&&this.gauge.resetGraphic(a)},_resetGaugeGrid:function(a){"gauge"===a.type&&this.gauge.resetGrid(a)},_specialChartTheme:function(){this.chart&&(this.chart._theme.tooltip.axisPointer={type:"cross",label:{show:!0,precision:2,formatter:function(a){return"number"===typeof a.value?(a=parseFloat(a.value).toFixed(2),this.chartUtils.tryLocaleNumber(a)):a.value}.bind(this)},lineStyle:{color:"#27727B",type:"dashed"},crossStyle:{color:"#27727B"},
shadowStyle:{color:"rgba(200,200,200,0.3)"}},this.chart._theme.valueAxis||(this.chart._theme.valueAxis={}),this.chart._theme.valueAxis.axisLabel||(this.chart._theme.valueAxis.axisLabel={}),this.chart._theme.valueAxis.axisLabel.formatter=function(a){return h.localizeNumber(a)})},_specialThemeByConfig:function(a){this._initChartTheme();a.color&&a.color[0]&&(this.chart._theme.color=a.color);this.chart._theme.tooltip.confine=!0;var b="percent"===a.stack;this.chart._theme.tooltip.formatter=function(a){return this.chartUtils.handleToolTip(a,
null,!1,b)}.bind(this)},_initChartTheme:function(){this.chart&&(this.chart._theme||(this.chart._theme={}),this.chart._theme.tooltip||(this.chart._theme.tooltip={}),this.chart._theme.valueAxis||(this.chart._theme.valueAxis={}),this.chart._theme.valueAxis.axisLabel||(this.chart._theme.valueAxis.axisLabel={}))},_initChart:function(){this.chart=p.init(this.domNode,this.config&&this.config.theme||"light");this.chartUtils=new a({chart:this.chart});this.gauge=new b({chart:this.chart,chartUtils:this.chartUtils});
this.chartOptionFactory=new c({chart:this.chart,gauge:this.gauge,chartUtils:this.chartUtils});this._specialChartTheme(this.config)}})})},"jimu/dijit/_chartUtils":function(){define("dojo/_base/declare jimu/utils esri/lang dojo/_base/lang libs/echarts/echarts dojo/i18n!dojo/cldr/nls/number".split(" "),function(q,f,l,m,e,p){var h={curved:{name:"",type:"gauge",center:["50%","60%"],startAngle:200,endAngle:-20,axisLine:{lineStyle:{color:[[.31,"#5CB4CA"],[1,"#E5E5E5"]],shadowColor:"rgba(0, 0, 0, 0.5)",shadowBlur:0}},
axisTick:{show:!1},splitLine:{show:!1},axisLabel:{distance:-52,textStyle:{color:"#000"}},pointer:{length:"65%",width:5},itemStyle:{opacity:.7},detail:{show:!0,offsetCenter:[0,"68%"],textStyle:{color:"#24B5CC"}},title:{show:!1},data:[{value:0}],animationEasingUpdate:"bounceOut",animationDurationUpdate:500},vertical:{yAxis:{show:!0,offset:-10,type:"value",interval:1,scale:!1,axisTick:{show:!1},axisLine:{show:!1},axisLabel:{show:!1,showMinLabel:!0,showMaxLabel:!0,textStyle:{color:"#949494",fontStyle:"normal",
fontWeight:"normal"}},splitLine:{show:!1}},xAxis:{show:!1,type:"category",data:[]},series:[{name:"",type:"bar",barWidth:30,silent:!0,animation:!1,itemStyle:{color:"#E5E5E5"},barGap:"-100%",data:[100],z:1},{name:"",type:"bar",barWidth:30,label:{show:!0,position:"insideTopLeft",offset:[30,-15],textStyle:{}},data:[{value:40,label:{textStyle:{color:"#24B5CC",fontStyle:"normal",fontWeight:"normal",fontFamily:"Avenir Next",fontSize:12}},itemStyle:{}}],itemStyle:{color:"#24B5CC"},z:10}]},horizontal:{xAxis:{show:!0,
offset:-27,type:"value",scale:!1,interval:1,axisTick:{show:!1},axisLine:{show:!1},axisLabel:{show:!1,showMinLabel:!0,showMaxLabel:!0,textStyle:{color:"#949494",fontStyle:"normal",fontWeight:"normal",fontFamily:"Avenir Next",fontSize:12}},splitLine:{show:!1}},yAxis:{show:!1,type:"category",data:[]},series:[{name:"",type:"bar",barWidth:30,silent:!0,animation:!1,itemStyle:{color:"#E5E5E5"},barGap:"-100%",data:[100],z:1},{name:"",type:"bar",barWidth:30,label:{show:!0,position:"top",offset:[20,0],textStyle:{}},
data:[{value:40,label:{textStyle:{color:"#24B5CC",fontStyle:"normal",fontWeight:"normal",fontFamily:"Avenir Next",fontSize:12}},itemStyle:{}}],itemStyle:{color:"#24B5CC"},z:10}]}};return q([],{constructor:function(a){this.chart=a&&a.chart;this.horIconUrl="data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz4NCjxzdmcgd2lkdGg9IjdweCIgaGVpZ2h0PSI1cHgiIHZpZXdCb3g9IjAgMCA3IDUiIHZlcnNpb249IjEuMSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB4bWxuczp4bGluaz0iaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGluayI+DQogICAgPCEtLSBHZW5lcmF0b3I6IFNrZXRjaCA0NC4xICg0MTQ1NSkgLSBodHRwOi8vd3d3LmJvaGVtaWFuY29kaW5nLmNvbS9za2V0Y2ggLS0+DQogICAgPHRpdGxlPlRyaWFuZ2xlPC90aXRsZT4NCiAgICA8ZGVzYz5DcmVhdGVkIHdpdGggU2tldGNoLjwvZGVzYz4NCiAgICA8ZGVmcz48L2RlZnM+DQogICAgPGcgaWQ9IkxheW91dC0yTmV3IiBzdHJva2U9Im5vbmUiIHN0cm9rZS13aWR0aD0iMSIgZmlsbD0ibm9uZSIgZmlsbC1ydWxlPSJldmVub2RkIj4NCiAgICAgICAgPGcgaWQ9IkNhcmRXaWRnZXRfTGF5b3V0NCIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoLTg3NS4wMDAwMDAsIC0yOTcuMDAwMDAwKSIgZmlsbD0iIzkzOTM5MyI+DQogICAgICAgICAgICA8ZyBpZD0iQ2FyZDJfSG9yaXpvbnRhbEdhdWdlIiB0cmFuc2Zvcm09InRyYW5zbGF0ZSg3OTIuMDAwMDAwLCAxODEuMDAwMDAwKSI+DQogICAgICAgICAgICAgICAgPGcgaWQ9Ikhvcml6b250YWxHYXVnZSIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoMC4wMDAwMDAsIDY2LjAwMDAwMCkiPg0KICAgICAgICAgICAgICAgICAgICA8ZyB0cmFuc2Zvcm09InRyYW5zbGF0ZSgxMjguNTAwMDAwLCA0Mi41MDAwMDApIHJvdGF0ZSgtMjcwLjAwMDAwMCkgdHJhbnNsYXRlKC0xMjguNTAwMDAwLCAtNDIuNTAwMDAwKSB0cmFuc2xhdGUoODYuMDAwMDAwLCAtODYuMDAwMDAwKSIgaWQ9Ik51bWJlcnMrVHJpYW5nbGVzIj4NCiAgICAgICAgICAgICAgICAgICAgICAgIDxnIHRyYW5zZm9ybT0idHJhbnNsYXRlKDUwLjAwMDAwMCwgMC4wMDAwMDApIj4NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8cG9seWdvbiBpZD0iVHJpYW5nbGUiIHRyYW5zZm9ybT0idHJhbnNsYXRlKDIuNTAwMDAwLCAxNzAuNTQzODAzKSByb3RhdGUoLTE4MC4wMDAwMDApIHRyYW5zbGF0ZSgtMi41MDAwMDAsIC0xNzAuNTQzODAzKSAiIHBvaW50cz0iNSAxNzAuNTQzODAzIC0xLjcwNTMwMjU3ZS0xMyAxNzQuMDQzODAzIC0xLjY5NjQyMDc4ZS0xMyAxNjcuMDQzODAzIj48L3BvbHlnb24+DQogICAgICAgICAgICAgICAgICAgICAgICA8L2c+DQogICAgICAgICAgICAgICAgICAgIDwvZz4NCiAgICAgICAgICAgICAgICA8L2c+DQogICAgICAgICAgICA8L2c+DQogICAgICAgIDwvZz4NCiAgICA8L2c+DQo8L3N2Zz4\x3d";
this.verIconUrl="data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz4NCjxzdmcgd2lkdGg9IjVweCIgaGVpZ2h0PSI4cHgiIHZpZXdCb3g9IjAgMCA1IDgiIHZlcnNpb249IjEuMSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB4bWxuczp4bGluaz0iaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGluayI+DQogICAgPCEtLSBHZW5lcmF0b3I6IFNrZXRjaCA0NC4xICg0MTQ1NSkgLSBodHRwOi8vd3d3LmJvaGVtaWFuY29kaW5nLmNvbS9za2V0Y2ggLS0+DQogICAgPHRpdGxlPlRyaWFuZ2xlPC90aXRsZT4NCiAgICA8ZGVzYz5DcmVhdGVkIHdpdGggU2tldGNoLjwvZGVzYz4NCiAgICA8ZGVmcz48L2RlZnM+DQogICAgPGcgaWQ9IkxheW91dC0yTmV3IiBzdHJva2U9Im5vbmUiIHN0cm9rZS13aWR0aD0iMSIgZmlsbD0ibm9uZSIgZmlsbC1ydWxlPSJldmVub2RkIj4NCiAgICAgICAgPGcgaWQ9IkNhcmRXaWRnZXRfTGF5b3V0NCIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoLTg3Ni4wMDAwMDAsIC0zMjQuMDAwMDAwKSIgZmlsbD0iIzkzOTM5MyI+DQogICAgICAgICAgICA8ZyBpZD0iQ2FyZDJfSG9yaXpvbnRhbEdhdWdlIiB0cmFuc2Zvcm09InRyYW5zbGF0ZSg3OTIuMDAwMDAwLCAxODEuMDAwMDAwKSI+DQogICAgICAgICAgICAgICAgPGcgaWQ9Ikhvcml6b250YWxHYXVnZSIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoMC4wMDAwMDAsIDY2LjAwMDAwMCkiPg0KICAgICAgICAgICAgICAgICAgICA8ZyB0cmFuc2Zvcm09InRyYW5zbGF0ZSgxMjguNTAwMDAwLCA0Mi41MDAwMDApIHJvdGF0ZSgtMjcwLjAwMDAwMCkgdHJhbnNsYXRlKC0xMjguNTAwMDAwLCAtNDIuNTAwMDAwKSB0cmFuc2xhdGUoODYuMDAwMDAwLCAtODYuMDAwMDAwKSIgaWQ9Ik51bWJlcnMrVHJpYW5nbGVzIj4NCiAgICAgICAgICAgICAgICAgICAgICAgIDxnIHRyYW5zZm9ybT0idHJhbnNsYXRlKDUwLjAwMDAwMCwgMC4wMDAwMDApIj4NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8cG9seWdvbiBpZD0iVHJpYW5nbGUiIHRyYW5zZm9ybT0idHJhbnNsYXRlKDMwLjYyODk1MiwgMTcwLjQ1ODY1NCkgcm90YXRlKC05MC4wMDAwMDApIHRyYW5zbGF0ZSgtMzAuNjI4OTUyLCAtMTcwLjQ1ODY1NCkgIiBwb2ludHM9IjMzLjEyODk1MjMgMTcwLjQ1ODY1NCAyOC4xMjg5NTIzIDE3My45NTg2NTQgMjguMTI4OTUyMyAxNjYuOTU4NjU0Ij48L3BvbHlnb24+DQogICAgICAgICAgICAgICAgICAgICAgICA8L2c+DQogICAgICAgICAgICAgICAgICAgIDwvZz4NCiAgICAgICAgICAgICAgICA8L2c+DQogICAgICAgICAgICA8L2c+DQogICAgICAgIDwvZz4NCiAgICA8L2c+DQo8L3N2Zz4\x3d";
this.verIconUrlRTL="data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz4NCjxzdmcgd2lkdGg9IjVweCIgaGVpZ2h0PSI3cHgiIHZpZXdCb3g9IjAgMCA1IDciIHZlcnNpb249IjEuMSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB4bWxuczp4bGluaz0iaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGluayI+DQogICAgPCEtLSBHZW5lcmF0b3I6IFNrZXRjaCA0NC4xICg0MTQ1NSkgLSBodHRwOi8vd3d3LmJvaGVtaWFuY29kaW5nLmNvbS9za2V0Y2ggLS0+DQogICAgPHRpdGxlPlRyaWFuZ2xlPC90aXRsZT4NCiAgICA8ZGVzYz5DcmVhdGVkIHdpdGggU2tldGNoLjwvZGVzYz4NCiAgICA8ZGVmcz48L2RlZnM+DQogICAgPGcgaWQ9IkxheW91dC0yTmV3IiBzdHJva2U9Im5vbmUiIHN0cm9rZS13aWR0aD0iMSIgZmlsbD0ibm9uZSIgZmlsbC1ydWxlPSJldmVub2RkIj4NCiAgICAgICAgPGcgaWQ9IkFydGJvYXJkIiB0cmFuc2Zvcm09InRyYW5zbGF0ZSgtMTIxLjAwMDAwMCwgLTQ0Ny4wMDAwMDApIiBmaWxsPSIjOTM5MzkzIj4NCiAgICAgICAgICAgIDxwb2x5Z29uIGlkPSJUcmlhbmdsZSIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoMTIzLjUwMDAwMCwgNDUwLjUwMDAwMCkgcm90YXRlKC0xODAuMDAwMDAwKSB0cmFuc2xhdGUoLTEyMy41MDAwMDAsIC00NTAuNTAwMDAwKSAiIHBvaW50cz0iMTI2IDQ1MC41IDEyMSA0NTQgMTIxIDQ0NyI+PC9wb2x5Z29uPg0KICAgICAgICA8L2c+DQogICAgPC9nPg0KPC9zdmc+";
a=m.clone(h);this.curved=a.curved;this.vertical=a.vertical;this.horizontal=a.horizontal;this.unitDistance=23;this.defultGrid={top:10,bottom:10,left:10,right:10,containLabel:!0}},getAxisZeroPosition:function(){if(!this.chart)return!1;var a;try{a=this.chart.convertToPixel({xAxisIndex:0,yAxisIndex:0},[0,0])}catch(d){}if(!a)return{};var b=a[0];a=a[1];var c=this.chart.getHeight(),e=this.chart.getWidth();return{left:b,right:e-b,top:a,bottom:c-a}},getTextWidth:function(a,b){if(!a&&0!==a)return 0;var c=(this.getTextWidth.canvas||
(this.getTextWidth.canvas=document.createElement("canvas"))).getContext("2d");c.font=b;return c.measureText(a).width},getHeightByFontSize:function(a){a=Math.round(a);if("number"!==typeof a||6>a||40<a)return 0;var b=0;a-=6;switch(!0){case 7>=a:b=1*a;break;case 8<=a&&11>=a:b=1*(a-1)+2;break;case 12<=a&&15>=a:b=1*(a-2)+4;break;case 16<=a&&19>=a:b=1*(a-3)+6;break;case 20<=a&&21>=a:b=1*(a-4)+8;break;case 22<=a&&23>=a:b=1*(a-5)+8;break;case 24<=a&&27>=a:b=1*(a-6)+10;break;case 28<=a&&31>=a:b=1*(a-7)+12;
break;case 32<=a&&34>=a:b=1*(a-8)+14}return 8+b},tryLocaleNumber:function(a){var b=a;if(l.isDefined(a)&&isFinite(a))try{var c=f.localizeNumber(a);"string"===typeof c&&(b=c)}catch(k){console.error(k)}return b+""},isStrictNaN:function(a){return"number"===typeof a&&isNaN(a)},isNumberString:function(a){if(!a)return!1;a=Number(a);return"number"!==typeof a||isNaN(a)?!1:!0},isLocaleNumberString:function(a){if(!a)return!1;if(this.isNumberString(a))return!0;a=a.replace(new RegExp("\\"+p.group,"g"),"");return this.isNumberString(a)?
!0:!1},localizeNumberForDigitSeparator:function(a,b){if(!this.isLocaleNumberString(a))return a;var c=new RegExp("\\"+p.group,"g");return a.toString().match(c)?b?a:a.toString().replace(c,""):this._localizeNumberForDigitSeparator(a,b)},_localizeNumberForDigitSeparator:function(a,b){a=f.localizeNumber(a);return!1===b?a.toString().replace(new RegExp("\\"+p.group,"g"),""):a},isAxisChart:function(a){return"column"===a.type||"bar"===a.type||"line"===a.type},isBaseChartType:function(a){return this.isAxisChart(a)||
"pie"===a.type},_getTooltipDisplayValue:function(a,b){"number"===typeof Number(a)&&(a=b?f.convertNumberToPercentage(a):this.tryLocaleNumber(a));return a},generateToolTip:function(a,b,c,e,d){var g="",g=c?'\x3cdiv class\x3d"tooltip-tr reverse"\x3e':'\x3cdiv class\x3d"tooltip-tr"\x3e';c="";a.color&&"auto"!==a.color&&(c='\x3cdiv class\x3d"colorEl marginRight5" style\x3d"background-color:'+f.encodeHTML(a.color)+'"\x3e\x3c/div\x3e');g+=c;c="";"radar"!==a.seriesType&&this._isVaildValue(a.seriesName)?c=a.seriesName:
this._isVaildValue(d)&&(c=d);g=""===c?g+("\x3cdiv\x3e"+c+"\x3c/div\x3e"):g+("\x3cdiv\x3e"+c+"\x3c/div\x3e\x3cdiv\x3e : \x3c/div\x3e");d="null";this._isNotZeroBoolean(b)?d=b:this._isVaildValue(a.value)&&(d=a.value);g+="\x3cdiv\x3e"+this._getTooltipDisplayValue(d,e)+"\x3c/div\x3e";"pie"===a.seriesType&&(a=a.percent,a=this._isVaildValue(a)?a/100:0,g+='\x3cdiv class\x3d"space-left"\x3e('+f.convertNumberToPercentage(a)+")\x3c/div\x3e");return g+"\x3c/div\x3e"},handleToolTip:function(a,b,c,e,d){var g='\x3cdiv class\x3d"tooltip-div"\x3e';
Array.isArray(a)||(a=[a]);this._isVaildValue(a[0].name)&&(g+='\x3cdiv class\x3d"tr"\x3e'+a[0].name+"\x3c/div\x3e");a.forEach(function(a){g="radar"!==a.seriesType?g+this.generateToolTip(a,b,c,e,d):g+this._handleRadarTooltip(a,c,e,d)}.bind(this));return g+="\x3c/div\x3e"},_handleRadarTooltip:function(a,b,c,e){var d="";(a.value||[]).forEach(function(g,f){d+=this.generateToolTip(a,g,b,c,e[f])}.bind(this));return d},_isVaildValue:function(a){return"%00-"===encodeURI(a)?!1:this._isNotZeroBoolean(a)},_isNotZeroBoolean:function(a){return 0===
a?!0:!!a},settingAdvanceOption:function(a,b){b.advanceOption&&("object"===typeof b.advanceOption?m.mixin(a,b.advanceOption):"function"===typeof b.advanceOption&&b.advanceOption(a));return a},settingColor:function(a,b){b.color&&b.color[0]&&(a.color=b.color);return a},settingToolTip:function(a,b){var c=b.type;a.tooltip||(a.tooltip={});c={confine:!0,trigger:"radar"===c||"pie"===c?"item":"axis",axisPointer:"pie"!==c?{type:"line"===c?"cross":"shadow",snap:!0}:{type:""}};b=b.tooltip||c;a.tooltip.confine=
b.confine?b.confine:c.confine;a.tooltip.trigger=b.trigger?b.trigger:c.trigger;a.tooltip.axisPointer=b.axisPointer?b.axisPointer:c.axisPointer;return a},settingDataZoom:function(a,b,c,e){return this.isAxisChart(b)&&b.series&&b.series.length?b.dataZoom&&b.dataZoom.length?a=this._settingDataZoom(b,a,c,e):(a.dataZoom=[],a):a},_settingDataZoom:function(a,b,c,e){if(!this.chart)return b;var d=this.chart.getWidth(),g=a.series[0].data.length,f=a.series.length,g=a.stack?g:g*f;if(!g||!d)return b.dataZoom=[],
b;var d="bar"!==a.type?window.isRTL?c.left:d-c.left-b.grid.right:c.top,k=20>d/g;c=a.dataZoomOption&&a.dataZoomOption.mode||"AUTO";var h=0,l=100;e?(h=Number(e[0]),l=Number(e[1])):"AUTO"===c&&(h=0,l=d/(20*g),l=parseFloat(100*l,10).toFixed(3),l=100<l?100:l,l=0===l?.01:l);e=[];var p="bar"===a.type?"yAxisIndex":"xAxisIndex";e=a.dataZoom.map(m.hitch(this,function(a){a={type:a,show:k};a[p]=[0];a.start=h;a.end=l;a.showDataShadow=!1;a.realtime=!1;return a}));b.dataZoom=e;return b},mockChartDataWhenNoData:function(a){a&&
Array.isArray(a.labels)&&0===a.labels.length&&a.labels.push("");a&&Array.isArray(a.series)&&0<a.series.length&&a.series.forEach(function(a){a&&Array.isArray(a.data)&&0===a.data.length&&a.data.push(0)});return a},settingDefaultGrid:function(a){a.grid=m.clone(this.defultGrid);return a},settingGrid:function(a,b){if(!this.isAxisChart(b))return a;a.grid.containLabel=b.yAxis&&b.yAxis.show;var c=b.layout;if(!c||!c.length)return a;var e=0,d=0,g=0,f=0,h=1;c.forEach(function(a){a=a.layout&&a.layout.position;
if("xAixsName"===name||"yAixsName"===name)h=.7;"t"===a?e+=h:"b"===a?d+=h:"l"===a?g+=h:"r"===a&&(f+=h)}.bind(this));var l=m.clone(this.defultGrid),c=l.top||0,p=l.bottom||0,q=l.left||0,l=l.right||0,c=c+this.unitDistance*e,p=p+this.unitDistance*d,q=q+this.unitDistance*g,l=l+this.unitDistance*f;b.yAxis&&!b.yAxis.show&&(p+=this.unitDistance);a.grid.top=c;a.grid.bottom=p;a.grid.left=q;a.grid.right=l;a=this._settingxAxisNameGap(a,b);return a=this._settingGridForMarkName(a,b)},_settingGridForMarkName:function(a,
b){var c=b.markLine,e=b.markArea,d=[],g=[];c&&c.data&&c.data.length&&c.data.forEach(function(a){this._hasEndPosName(a)&&d.push(a.name+"");this._hasStartPosName(a)&&g.push(a.name+"")}.bind(this));e&&e.data&&e.data.length&&e.data.forEach(function(a){a=a[0];this._hasOutRightAxisName(b.type,a)&&d.push(a.name+"");this._hasOutLeftAxisName(b.type,a)&&g.push(a.name+"")}.bind(this));if(!d.length&&!g.length)return a;if("bar"===b.type)return a.grid.top+=15,a;c=this._getyAxisLabelWidth(b);e=this._getMaxLengthString(d);
e=this.getTextWidth(e,"normal 12px sans-serif");window.isRTL?a.grid.left+=e:a.grid.right+=e;e=this._getMaxLengthString(g);e=this.getTextWidth(e,"normal 12px sans-serif");e-=c;if(0>=e)return a;e+=10;window.isRTL?a.grid.right=e:a.grid.left=e;return a},_getyAxisLabelWidth:function(a){var b=a&&a.yAxis;return b&&b.show?(a=this._getMaxData(a))||0===a?this.getTextWidth(a,"normal "+(b&&b.textStyle&&b.textStyle.fontSize||12)+"px sans-serif"):0:0},_getMaxData:function(a){if((a=a.series)&&a.length)return a=
a.map(function(a){if((a=a.data)&&a.length)return a.map(function(a){var b;"number"===typeof a?b=a:a&&"undefined"!==typeof a.value&&(b=a.value);return b=parseInt(b,10)})}).map(function(a){if(a.length)return Math.max.apply(Math,a)}),a.length&&Math.max.apply(Math,a)},_getMaxLengthString:function(a){return a.sort(function(a,c){a=this.getTextWidth(a);c=this.getTextWidth(c);return c-a}.bind(this))[0]},_hasOutRightAxisName:function(a,b){var c=b.name||0===b.name;b=b.label;var e=window.isRTL?"eft":"ight";a=
b&&b.position&&-1<b.position.indexOf("bar"===a?"op":e);b=b&&b.position&&-1<b.position.indexOf("inside");return c&&a&&!b},_hasOutLeftAxisName:function(a,b){var c=b.name||0===b.name;b=b.label;var e=window.isRTL?"ight":"eft";a=b&&b.position&&-1<b.position.indexOf("bar"===a?"op":e);b=b&&b.position&&-1<b.position.indexOf("inside");return c&&a&&!b},_hasEndPosName:function(a){var b=a.label,b=!b||!b.position||"end"===b.position;return(a.name||0===a.name)&&b},_hasStartPosName:function(a){var b=a.label,b=!b||
!b.position||"start"===b.position;return(a.name||0===a.name)&&b},_settingxAxisNameGap:function(a,b){if(!this.isAxisChart(b)||!a.xAxis)return a;b=this.getHeightByFontSize(b.xAxis&&b.xAxis.textStyle&&b.xAxis.textStyle.fontSize||12);a.xAxis.nameGap=10+b;return a},calcDefaultLayout:function(a){if(this.isBaseChartType(a)){var b=a.legend,c=a.xAxis,e=null;a=a.type;"pie"!==a&&(e="bar"!==a?{name:"dataZoom",layout:{position:"t",inner:!1}}:{name:"dataZoom",layout:{position:window.isRTL?"l":"r",inner:!1}});a=
null;b&&b.show&&(a={name:"legend",layout:{position:"b",inner:!1}});b=null;c&&c.show&&"undefined"!==typeof c.name&&(b={name:"xAxisName",layout:{position:"b",inner:!1}},a&&(b.layout.inner=!0));c=[];a&&c.push(a);e&&c.push(e);b&&c.push(b);return c.length&&c}},settingRenderOption:function(a,b){if("curved"===b.shape)return a.animationThreshold=99999999,a.hoverLayerThreshold=99999,a.progressiveThreshold=99999,a;a.hoverLayerThreshold=500;a.progressiveThreshold=500;a.progressive=100;a.animationThreshold=500;
return a},settingBackgroundColor:function(a,b){b.backgroundColor&&(a.backgroundColor=b.backgroundColor);return a},settingAxisChartAxis:function(a,b){var c=b.xAxis,e=b.yAxis,d={nameLocation:"center"},g={nameLocation:"center"};"column"===b.type||"line"===b.type&&b.labels?(d.data=b.labels,d.type="category",g.type="value"):"bar"===b.type&&b.labels&&(g.data=b.labels,g.type="category",d.type="value");if(c){d.name=c.name;d.show=!!c.show;d.axisLabel||(d.axisLabel={});c.textStyle&&(d.axisLabel=c.textStyle);
c.nameTextStyle&&(d.nameTextStyle=c.nameTextStyle);var f=c.format;f&&("int"===f.type?d.minInterval=1:"float"===f.type&&(d.minInterval=0),"undefined"!==typeof f.digitSeparator&&(d.axisLabel.formatter=function(a){return this.localizeNumberForDigitSeparator(a,f.digitSeparator)}.bind(this)))}if(e){g.show=!!e.show;e.textStyle&&(g.axisLabel=e.textStyle);var h=e.format;h&&("int"===h.type?g.minInterval=1:"float"===h.type&&(g.minInterval=0),"undefined"!==typeof h.digitSeparator&&(g.axisLabel.formatter=function(a){return this.localizeNumberForDigitSeparator(a,
h.digitSeparator)}.bind(this)))}window.isRTL&&(d.inverse=!0,g.position="right");a.xAxis=d;a.yAxis=g;return a},settingRadar:function(a,b){if("radar"!==b.type)return a;a.radar={nameGap:6,radius:"70%"};a.radar.axisLabel={show:!0,formatter:function(){}};b.radarShape&&(a.radar.shape=b.radarShape);b.indicator?(this._handleRadarIndicator(b),a.radar.indicator=b.indicator):console.error("No radar indicator");return a},_handleRadarIndicator:function(a){var b=a.series[0].data,c=[];a.indicator.forEach(function(a,
d){if("undefined"!==typeof a.max)return a;c=b.map(function(a){c.push(a.value[d])});var e=Math.max.apply(Math,c);a.max=e})},settingArea:function(a,b){if("line"!==b.type||!b.area)return a;a.series=a.series.map(function(a){a.areaStyle||(a.areaStyle={});"undefined"===typeof a.areaStyle.opacity&&(a.areaStyle.opacity=.4);a.sthisoth=!0;a.smoothMonotone="x";return a});return a},_mockNegativeValue:function(a){return a&&a[0]&&a[0].data?a.map(function(a){a.data=a.data.map(function(a,b){var c=0===b%2;a&&"undefined"!==
typeof a.value?(b=a.value,b=Number(b),a.value=c?-b:b):(b=Number(a),a=-(c?-b:b));return a});return a}):a},hasNegativeValue:function(a){if((a=a.series)&&a[0]&&a[0].data)return a.some(function(a){return a.data.some(function(a){a=a&&"undefined"!==typeof a.value?a.value:a;a=Number(a);return"number"===typeof a&&0>a})})},allNegativeValue:function(a){return(a=a.series)&&a[0]&&a[0].data?a.every(function(a){return a.data.every(function(a){a=a&&a.value?a.value:a;a=Number(a);return"number"===typeof a&&0>a})}):
!1},settingStack:function(a,b){b=this._stackForPercent(b);if("percent"===b.stack){var c=this.hasNegativeValue(b),e=this.allNegativeValue(b),d=0,g=1;c&&(d=-1,e&&(g=0));"bar"===b.type?(a.xAxis.max=g,a.xAxis.min=d):(a.yAxis.max=g,a.yAxis.min=d)}b.stack&&(a.series=a.series.map(function(a){a.stack="stack";return a}));return a},_stackForPercent:function(a){if("percent"!==a.stack)return a;var b=[];a.series.forEach(function(a){m.clone(a.data).forEach(function(a,c){b[c]||(b[c]=[]);(a=a&&"undefined"!==typeof a.value?
a.value:a)||(a=0);b[c].push(a)})});var c=[];b.forEach(function(a,b){c[b]||(c[b]=0);a.forEach(function(a){c[b]+=Math.abs(a)})});var e=b.map(function(a,b){return a.map(function(a){return 0===c[b]?null:0<=a?Math.abs(a)/c[b]:-Math.abs(a)/c[b]})});a.series=a.series.map(function(a,b){var c=m.clone(a.data),c=c.map(function(a,c){if(!a)return a;"undefined"!==typeof a.value?a.value=e[c][b]:a=e[c][b];return a});a.data=c;return a});return a},settingLegend:function(a,b){var c=b.legend;if(!c)return a.legend={show:!1},
a;var f={show:c.show,type:"scroll",itemHeight:11,orient:"horizontal",pageButtonPosition:"end",pageTextStyle:{color:"#939393"}};c.textStyle&&(f.textStyle=c.textStyle);f.formatter=function(a){a=a||"";return 25<a.length?e.format.truncateText(a,140,null,"\u2026"):a};f.tooltip={show:!0,confine:!1,formatter:function(a){a=a&&a.name||"";if(!(25>=a.length))return a}};a.legend=f;return a=this._handleLegendRTL(a,b)},_handleLegendRTL:function(a,b){if(!b.legend)return a;b={};window.isRTL?(b.x="right",b.pageButtonPosition=
"start"):(b.x="left",b.pageButtonPosition="end");a.legend=m.mixin(a.legend,b);return a},settingScale:function(a,b){if(!b.scale)return a;if("bar"===b.type)a.xAxis.scale=!0;else if("line"===b.type||"column"===b.type)a.yAxis.scale=!0;return a},pieChartAvoidLegendLabelOverLap:function(a,b){if("pie"!==b.type)return a;var c=b.dataLabel&&b.dataLabel.show?.75:.85;b.legend&&b.legend.show&&(c-=.12);a.series[0].radius[1]=100*c+"%";return a},settingChartLayout:function(a,b){if(!this.isBaseChartType(b))return a;
(b=b.layout)&&b.length&&b.forEach(function(b){this._assigneeLayout(a,b)}.bind(this));return a},avoidAdjoiningColorSameForPie:function(a,b){if("pie"!==b.type||!a.color||2>=a.color.length)return a;a.series&&a.series[0]&&a.series.forEach(m.hitch(this,function(b){var c=b.data.length;0===(c-1)%a.color.length&&(b=b.data[c-1],b.itemStyle||(b.itemStyle={}),b.itemStyle.color||(b.itemStyle.color=a.color[1]))}));return a},_assigneeLayout:function(a,b){var c=b.name;if("xAxisName"!==c&&"yAxisName"!==c){var e=
b.layout;b=this._getOperateObjByProperty(a,c);if(!b)return a;var d=this._getSubPosition(e&&e.subPosition),g=e&&e.position,e=e&&e.inner,f={};"l"===g?f.left=e?this.unitDistance+this.defultGrid.left-5:this.defultGrid.left-5:"r"===g?f.right=e?this.unitDistance+this.defultGrid.right-5:this.defultGrid.right-5:"t"===g?f.top=e?this.defultGrid.top+this.unitDistance-5:this.defultGrid.top-5:"b"===g&&(f.bottom=e?this.unitDistance+this.defultGrid.bottom-5:this.defultGrid.bottom-5);m.mixin(b,f);m.mixin(b,d);this._specialLegend(b,
c,g);this._specialSliderDataZoom(b,c,g);return a}},_getSubPosition:function(a){if("l"===a)return{left:this.defultGrid.left-5,right:"auto"};if("r"===a)return{right:this.defultGrid.right-5,left:"auto"};if("t"===a)return{top:this.defultGrid.top-5,bottom:"auto"};if("b"===a)return{bottom:this.defultGrid.bottom-5,top:"auto"}},_specialLegend:function(a,b,c){"legend"===b&&(a.orient="l"===c||"r"===c?"vertical":"horizontal")},_specialSliderDataZoom:function(a,b,c){"dataZoom"===b&&("l"===c||"r"===c?(a.orient=
"vertical",a.width=15):(a.orient="horizontal",a.height=15))},_getOperateObjByProperty:function(a,b){if("dataZoom"===b)return this._getSliderDataZoom(a);if("legend"===b)return a.legend},_getSliderDataZoom:function(a){var b=null;(a=a.dataZoom)&&a.length&&a.some(function(a){return"slider"===a.type?(b=a,!0):!1});return b},settingAxisSeries:function(a,b){a=this._setTypeToSeries(a,b);a.series=b.series;return a},settingMarks:function(a,b){a=this.settingMarkLine(a,b);return a=this.settingMarkArea(a,b)},settingMarkLine:function(a,
b){(b=b.markLine)&&b.data&&(b.silent=!0,b.data.forEach(function(a){a.label||(a.label={show:!1,position:"end"});"undefined"!==typeof a.name&&(a.label.show=!0,a.label.formatter=a.name)}),a.series[0].markLine=m.clone(b));return a},settingMarkArea:function(a,b){b.markArea&&(this._handleMarkAreaRTL(b.markArea),b.markArea.silent=!0,a.series[0].markArea=b.markArea);return a},_handleMarkAreaRTL:function(a){window.isRTL&&a&&a.data&&a.data.length&&a.data.forEach(function(a){var b=(a=a&&a[0]&&a[0].label)&&a.position;
b&&("left"===b?b="right":"right"===b?b="left":"insideLeft"===b?b="insideRight":"insideRight"===b&&(b="insideLeft"),a.position=b)})},_settingSeriesDataLabel:function(a,b){b=b.dataLabel;if(!b)return a;var c={};c.show=!!b.show;"undefined"!==typeof b.textStyle&&(c.textStyle=b.textStyle);a.series.forEach(function(a){a.label=c});return a},settingRadarSeries:function(a,b){a=this._setTypeToSeries(a,b);a.series=b.series.map(m.hitch(this,function(a){a.data=this._handleSeriesDataForPieLikeType(a,b);return a=
this._settingRaderSerie(a,b)}));return a},_settingRaderSerie:function(a,b){if("radar"!==a.type)return a;var c=b.indicator.map(function(a){return a.name});a.tooltip={};a.tooltip.formatter=function(a){return this.handleToolTip(a,null,!1,!1,c)};return a},settingFunnelSeries:function(a,b){a=this._setTypeToSeries(a,b);a.series=b.series.map(m.hitch(this,function(a){a.data=this._handleSeriesDataForPieLikeType(a,b);return a=this._settingFunnelSerie(a,b)}));return a},_settingFunnelSerie:function(a,b){if("funnel"!==
a.type)return a;a.minSize="0%";a.maxSize="100%";a.min=b.min.value;a.max=b.max.value;a.sort=b.funnelSort||"descending";return a},settingPieSeries:function(a,b){a=this._setTypeToSeries(a,b);a.series=b.series.map(m.hitch(this,function(a){a.data=this._handleSeriesDataForPieLikeType(a,b);return a=this._settingPieSerie(a,b)}));return a},_settingPieSerie:function(a,b){if("pie"!==a.type)return a;var c=b.dataLabel&&b.dataLabel.show;a.selectedMode="single";a.selectedOffset=10;a.hoverOffset=5;a.radius=[0,"70%"];
a.labelLine={show:!0,length:5,length2:5};a.labelLine.show="undefined"===typeof b.labelLine?!0:b.labelLine;c||(a.labelLine.show=!1);"number"===typeof b.innerRadius&&(0>b.innerRadius&&(b.innerRadius=0),60<b.innerRadius&&(b.innerRadius=60),a.radius[0]=b.innerRadius+"%");"rose"===b.pieMode&&(a.roseType=b.roseType||"radius");return a=this._absoluteValueForPieChart(a)},_absoluteValueForPieChart:function(a){if(!a||!a.data||!a.data[0])return a;a.data=a.data.map(function(a){"number"===typeof a?a=Math.abs(a):
"object"===typeof a&&"number"===typeof a.value&&(a.value=Math.abs(a.value));return a});return a},_handleSeriesDataForPieLikeType:function(a,b){return a.data.map(m.hitch(this,function(a,e){var c={};a||"number"===typeof a?(c.value="undefined"!==typeof a.value?a.value:a,a.itemStyle&&(c.itemStyle||(c.itemStyle={}),c.itemStyle=m.mixin(c.itemStyle,a.itemStyle))):c.value=a;c.name=b.labels[e]||"";return c}))},_setTypeToSeries:function(a,b){var c=b.series;if(!c)return a;c.forEach(function(a){a.type||(a.type=
b.type);a.type="column"===b.type?"bar":b.type});return a},splitAxisStackColumn:function(a,b){var c=a.series;if(!c||!c.length)return a;var e;c.some(function(a){a=a.data;if(!a||!a.length)return!0;a.some(function(a){if(a&&a.itemStyle&&"undefined"!==typeof a.itemStyle.color&&"line"!==b.type)return e=b.stack?"stack":"single",!0;e=!1})});var d=0;"single"===e?d=.1:"stack"===e&&(d=1);var g="";"stack"===e&&(g="#fff",b.backgroundColor&&"transparent"!==b.backgroundColor&&(g=b.backgroundColor));a.series=a.series.map(function(a){if("bar"===
a.type||"pie"===a.type)a.itemStyle||(a.itemStyle={}),a.emphasis||(a.emphasis={}),a.itemStyle.borderWidth=d,a.emphasis.borderWidth=d,g?(a.itemStyle.borderColor=g,a.emphasis.borderColor=g):(a.itemStyle.borderColor="transparent",a.emphasis.borderColor="transparent");return a});return a},preProcessConfig:function(a,b){b.min=b.min||{value:0,format:{digitSeparator:!0}};b.max=b.max||{value:1E3,format:{digitSeparator:!0}};return a},settingLabelColor:function(a,b){var c="#000";b.gaugeOption&&b.gaugeOption.labelColor&&
(c=b.gaugeOption.labelColor);"curved"===b.shape?a.series[0].axisLabel.textStyle.color=c:"horizontal"===b.shape?a.xAxis.axisLabel.textStyle.color=c:"vertical"===b.shape&&(a.yAxis.axisLabel.textStyle.color=c);return a},settingValueStyle:function(a,b){var c=b.gaugeOption&&b.gaugeOption.valueStyle,e=c&&c.textStyle,c=c&&c.formatter;e&&m.mixin("curved"===b.shape?a.series[0].detail.textStyle:a.series[1].data[0].label.textStyle,e);c&&("curved"===b.shape?a.series[0].detail.formatter=c:a.series[1].data[0].label.formatter=
c);return a},settingGaugeColumnColor:function(a,b){var c=b.gaugeOption&&b.gaugeOption.bgColor;b=b.gaugeOption&&b.gaugeOption.columnColor;c&&(a.series[0].itemStyle.color=c);b&&(a.series[1].data[0].itemStyle.color=b);return a},initHorizontalOption:function(a){m.mixin(a,this.horizontal);return a},setHorizontalGrid:function(a){a.grid={top:"middle",height:90,left:"10%",right:"10%",containLabel:!0};return a},settingHorizontalAxis:function(a,b){a.xAxis.max=b.max.value;a.xAxis.min=b.min.value;a.xAxis.scale=
!0;return a},settingHorizontalSeries:function(a,b){var c=a.series;if(!c||!c.length)return a;var e=c[1];c[0].data[0]=b.max.value;a=this._handleValueDisplayForColumnGauge(a,b);e.data[0].name=b.labels&&b.labels[0]||"";e.name=b.series[0].name||"";return a},settingHorizontalGaugeRTL:function(a){if(!window.isRTL)return a;a.series[1].label.offset=[-20,0];a.xAxis.inverse=!0;a.yAxis.position="right";return a},initVerticalOption:function(a){m.mixin(a,this.vertical);return a},setVerticalGrid:function(a){a.grid=
{left:"middle",width:60,top:"10%",bottom:"10%",containLabel:!0};a.grid.left=this._getGridLeftOfVerticalGauge();return a},settingVerticalAxis:function(a,b){a.yAxis.max=b.max.value;a.yAxis.min=b.min.value;return a},settingVerticalSeries:function(a,b){var c=a.series;if(!c||!c.length)return a;var e=c[1];c[0].data[0]=b.max.value;a=this._handleValueDisplayForColumnGauge(a,b);e.data[0].name=b.labels&&b.labels[0]||"";e.name=b.series[0].name||"";return a},settingVerticalGaugeRTL:function(a,b){if(!window.isRTL)return a;
var c=(b.series[0].data[0]+"").length-1;b.gaugeOption&&b.gaugeOption.valueStyle&&"undefined"!==typeof b.gaugeOption.valueStyle.decimalPlaces&&(c+=b.gaugeOption.valueStyle.decimalPlaces);a.series[1].label.offset=[-17-9*c,-15];a.xAxis.inverse=!0;a.yAxis.position="right";return a},initCurvedOption:function(a){a.series=[this.curved];return a},settingCurvedTooltip:function(a){a.tooltip.formatter=function(a){return this.handleToolTip(a,null,!1)}.bind(this);return a},settingCurvedSeries:function(a,b){var c=
a.series&&a.series[0];if(!c)return a;var e=b.max.value,d=b.min.value;c.min=d;c.max=e;var g=b.series&&b.series[0]&&b.series[0].data&&b.series[0].data[0],g=g||0;c.data[0].value=g;e=g<=d?0:g>=e?1:parseFloat((g-d)/(e-d)).toFixed(2);c.axisLine.lineStyle.color[0][0]=e;if(e=b.labels&&b.labels[0])c.data[0].name=e;c.name=b.series[0]&&b.series[0].name||"";c.axisLine.lineStyle.width=30;a.series=[c];return a},settingCurvedGaugeColor:function(a,b){var c=a.series&&a.series[0];b.gaugeOption&&(b.gaugeOption.bgColor&&
(c.axisLine.lineStyle.color[1][1]=b.gaugeOption.bgColor),b.gaugeOption.columnColor&&(c.axisLine.lineStyle.color[0][1]=b.gaugeOption.columnColor,c.itemStyle.color=b.gaugeOption.columnColor));return a},settingCurvedTargets:function(a,b){if(!a.series)return a;a.series[0].splitNumber=1E3;a.series[0].axisTick.splitNumber=1;a.series[0].axisTick.show=!1;var c=this._getTargetValues(b);return a=this._showTargetsForCurved(a,b,c)},createTargetGraphic:function(a){var b=a.shape,c=[];if("vertical"!==b&&"horizontal"!==
b)return c;var e="#000";a.gaugeOption&&a.gaugeOption.labelColor&&(e=a.gaugeOption.labelColor);var d,g=a.min.value,f=a.max.value;a=this._getTargetValues(a);var h=a.range;a.values.forEach(function(a){if(!(a.value>f||a.value<g)){d=this._calcGraphicPosition(a.value,b);var k=d.top,h=d.textLeft,l=this._createGraphic(d.graphicLeft,k,a,e,"image",b);a=this._createGraphic(h,k,a,e,"text",b);c.push(l);c.push(a)}}.bind(this));h.forEach(function(a){a.value>f||a.value<g||(d=this._calcGraphicPosition(a.value,b),
a=this._createGraphic(d.textLeft,d.top,a,e,"text",b),c.push(a))}.bind(this));return c},_calcGraphicPosition:function(a,b){var c,e,d;"vertical"===b?(c=this.chart.convertToPixel({xAxisIndex:0},0),c=parseFloat(c,10).toFixed(2),c=Number(c),window.isRTL&&(c+=40),e=c-26,d=window.isRTL?e+11:e-11-6*(a.toString().length-1),c=this._getyAxisValueTop(a),c-=2):"horizontal"===b&&(c=this.chart.convertToPixel({yAxisIndex:0},0),c=parseInt(c,10),c=Number(c)+16,e=this._getxAxisValueLeft(a),a=6*(a.toString().length-
2),d=e,0<a&&(d=e-a));return{top:c,graphicLeft:e,textLeft:d}},_createGraphic:function(a,b,c,e,d,g){var h=this.horIconUrl;"vertical"===g&&(h=window.isRTL?this.verIconUrlRTL:this.verIconUrl);var k=null;"image"===d?k={z:10,type:"image",$action:"merge",id:"wab_gid_image-"+f.getRandomString(),left:a,style:{image:h,width:10,height:10},silent:!0,top:b}:"text"===d&&(c=this.localizeNumberForDigitSeparator(c.value,c.format&&c.format.digitSeparator),k={z:10,type:"text",$action:"merge",id:"wab_gid_text-"+f.getRandomString(),
left:a,style:{text:c,fill:e,font:"normal 11px sans-serif"},silent:!0});"text"===d&&(k.top="vertical"===g?b-2:b+11);return k},updateGridForVerticalGauge:function(a){if("gauge"===a.type&&"vertical"===a.shape)return{left:this._getGridLeftOfVerticalGauge(),width:60,top:"10%",bottom:"10%"}},_getTargetValues:function(a){var b=a.gaugeOption&&a.gaugeOption.showTargetValueLabel,c=a.gaugeOption&&a.gaugeOption.showDataRangeLabel,e=a.gaugeOption&&a.gaugeOption.targetValue,d=a.min;a=a.max;var g={values:[],range:[]};
e&&b&&e.forEach(function(a){g.values.push(a)});c&&(0>g.values.indexOf(d.value)&&(g.range[0]=d),0>g.values.indexOf(a.value)&&(g.range[1]=a));return g},_showTargetsForCurved:function(a,b,c){var e=c.values.concat(c.range),d=(b.max.value-b.min.value)/1E3;e.sort(function(a,b){return a.value-b.value});a.series[0].axisLabel.formatter=m.hitch(this,function(a){var b,c;e.forEach(function(e){"undefined"===typeof b&&e.value>=a&&e.value<a+d&&(b=e.value,c=e.format)});"number"===typeof b&&(b=this.localizeNumberForDigitSeparator(b,
c&&c.digitSeparator));return b});return a},_handleValueDisplayForColumnGauge:function(a,b){var c=b.min.value,e=b.max.value,d;d=b.series[0].data[0];b=d>=e?e:d<=c?c:d;a.tooltip.formatter=function(a){return this.handleToolTip(a,d,!1)}.bind(this);a.series[1].data[0].value=b;return a},_getGridLeftOfVerticalGauge:function(){return this.chart.getWidth()/2-30},_getxAxisValueLeft:function(a){a=this.chart.convertToPixel({xAxisIndex:0},a);return parseFloat(a,10)-4},_getyAxisValueTop:function(a){a=this.chart.convertToPixel({yAxisIndex:0},
a);return parseFloat(a,10)}})})},"jimu/dijit/_Gauge":function(){define(["dojo/_base/declare"],function(q){return q([],{constructor:function(f){this.chart=f.chart;this.chartUtils=f.chartUtils},produceOption:function(f,l){f=this.chartUtils.preProcessConfig(f,l);"curved"===l.shape?f=this.setCurvedGaugeOption(f,l):"vertical"===l.shape?f=this.setVerticalGaugeOption(f,l):"horizontal"===l.shape?f=this.setHorizontalGaugeOption(f,l):console.error("invaild gauge shape");f=this.chartUtils.settingLabelColor(f,
l);return f=this.chartUtils.settingValueStyle(f,l)},setCurvedGaugeOption:function(f,l){f=this.chartUtils.initCurvedOption(f);f=this.chartUtils.settingCurvedSeries(f,l);f=this.chartUtils.settingCurvedTooltip(f,l);f=this.chartUtils.settingCurvedGaugeColor(f,l);return f=this.chartUtils.settingCurvedTargets(f,l)},setVerticalGaugeOption:function(f,l){f=this.chartUtils.initVerticalOption(f,this.vertical);f=this.chartUtils.setVerticalGrid(f);f=this.chartUtils.settingVerticalAxis(f,l);f=this.chartUtils.settingVerticalSeries(f,
l);f=this.chartUtils.settingGaugeColumnColor(f,l);return f=this.chartUtils.settingVerticalGaugeRTL(f,l)},setHorizontalGaugeOption:function(f,l){f=this.chartUtils.initHorizontalOption(f,this.horizontal);f=this.chartUtils.setHorizontalGrid(f);f=this.chartUtils.settingHorizontalAxis(f,l);f=this.chartUtils.settingHorizontalSeries(f,l);f=this.chartUtils.settingGaugeColumnColor(f,l);return f=this.chartUtils.settingHorizontalGaugeRTL(f,l)},resetGraphic:function(f){if("horizontal"===f.shape||"vertical"===
f.shape)f=this.chartUtils.createTargetGraphic(f),this.clearGraphic(),this.chart.setOption({graphic:f}),this.cacheGraphic=null,this.cacheGraphic=f},clearGraphic:function(){this.cacheGraphic&&(this.cacheGraphic.forEach(function(f){f.$action="remove"}),this.chart.setOption({graphic:this.cacheGraphic}))},resetGrid:function(f){("horizontal"===f.shape||"vertical"===f.shape)&&(f=this.chartUtils.updateGridForVerticalGauge(f))&&this.chart.setOption({grid:f})}})})},"jimu/dijit/_ChartOptionFactory":function(){define(["dojo/_base/declare"],
function(q){return q([],{constructor:function(f){this.chart=f.chart;this.gauge=f.gauge;this.chartUtils=f.chartUtils},produceOption:function(f){if(f&&f.type){var l=f.type,m={},m=this.setCommonOption(m,f);this.chartUtils.isAxisChart(f)?m=this.setAxisChartOption(m,f):"pie"===l?m=this.setPieChartOption(m,f):"funnel"===l?m=this.setFunnelChartOption(m,f):"radar"===l?m=this.setRadarChartOption(m,f):f.shape&&(m=this.setGaugeChartOption(m,f));return m=this.chartUtils.settingAdvanceOption(m,f)}},setPieChartOption:function(f,
l){f=this.chartUtils.settingPieSeries(f,l);f=this.chartUtils._settingSeriesDataLabel(f,l);f=this.chartUtils.pieChartAvoidLegendLabelOverLap(f,l);return f=this.chartUtils.avoidAdjoiningColorSameForPie(f,l)},setGaugeChartOption:function(f,l){return f=this.gauge.produceOption(f,l)},setFunnelChartOption:function(f,l){return f=this.chartUtils.settingFunnelSeries(f,l)},setRadarChartOption:function(f,l){f=this.chartUtils.settingRadar(f,l);return f=this.chartUtils.settingRadarSeries(f,l)},setAxisChartOption:function(f,
l){f=this.chartUtils.settingDefaultGrid(f,l);f=this.chartUtils.settingAxisChartAxis(f,l);f=this.chartUtils.settingAxisSeries(f,l);f=this.chartUtils.settingMarks(f,l);f=this.chartUtils._settingSeriesDataLabel(f,l);f=this.chartUtils.splitAxisStackColumn(f,l);f=this.chartUtils.settingStack(f,l);f=this.chartUtils.settingArea(f,l);return f=this.chartUtils.settingScale(f,l)},setCommonOption:function(f,l){this.chart._theme||(this.chart._theme={});f=this.chartUtils.settingRenderOption(f,l);f=this.chartUtils.settingBackgroundColor(f,
l);f=this.chartUtils.settingColor(f,l);f=this.chartUtils.settingToolTip(f,l);return f=this.chartUtils.settingLegend(f,l)}})})},"libs/echarts/light":function(){(function(q,f){"function"===typeof define&&define.amd?define(["exports","./echarts"],f):"object"===typeof exports&&"string"!==typeof exports.nodeName?f(exports,require("./echarts")):f({},q.echarts)})(this,function(q,f){f?f.registerTheme("light",{color:"#2ec7c9 #b6a2de #5ab1ef #ffb980 #d87a80 #8d98b3 #e5cf0d #97b552 #95706d #dc69aa #07a2a4 #9a7fd1 #588dd5 #f5994e #c05050 #59678c #c9ab00 #7eb00a #6f5553 #c14089".split(" "),
textStyle:{},title:{textStyle:{color:"#008acd"},subtextStyle:{color:"#aaaaaa"}},line:{itemStyle:{normal:{}},lineStyle:{normal:{width:"1"}},symbolSize:"5",symbol:"circle",smooth:!1},radar:{itemStyle:{normal:{}},lineStyle:{normal:{width:"1"}},symbolSize:"6",symbol:"circle",smooth:!1},gauge:{axisLine:{lineStyle:{color:[[.31,"#58f7f3"],[1,"#E5E5E5"]]}},itemStyle:{normal:{color:"#686868"},emphasis:{color:"#686868"}}},categoryAxis:{axisLine:{show:!0,lineStyle:{color:"#008acd"}},axisTick:{show:!1,lineStyle:{color:"#333"}},
axisLabel:{show:!0,textStyle:{color:"#333"}},splitLine:{show:!0,lineStyle:{type:"dashed",color:["rgba(0,0,0,0.1)"]}},splitArea:{show:!1,areaStyle:{color:["rgba(250,250,250,0.3)","rgba(200,200,200,0.3)"]}}},valueAxis:{axisLine:{show:!0,lineStyle:{color:"#008acd"}},axisTick:{show:!1,lineStyle:{color:"#333"}},axisLabel:{show:!0,textStyle:{color:"#333"}},splitLine:{show:!0,lineStyle:{type:"dashed",color:["rgba(0,0,0,0.1)"]}},splitArea:{show:!1,areaStyle:{color:["rgba(250,250,250,0.3)","rgba(200,200,200,0.3)"]}}},
toolbox:{iconStyle:{normal:{borderColor:"#2ec7c9"},emphasis:{borderColor:"#18a4a6"}}},legend:{textStyle:{color:"#333333"}},tooltip:{axisPointer:{lineStyle:{color:"#008acd",width:"1"},crossStyle:{color:"#008acd",width:"1"}}},dataZoom:{backgroundColor:"#F4F4F4",dataBackgroundColor:"rgba(47,69,84,0.3)",fillerColor:"#E0E0E0",handleColor:"#777777",handleSize:"100%",borderColor:"#F4F4F4",textStyle:{color:"#939393"}}}):"undefined"!==typeof console&&console&&console.error&&console.error("ECharts is not Loaded")})},
"libs/echarts/dark":function(){(function(q,f){"function"===typeof define&&define.amd?define(["exports","./echarts"],f):"object"===typeof exports&&"string"!==typeof exports.nodeName?f(exports,require("./echarts")):f({},q.echarts)})(this,function(q,f){f?f.registerTheme("dark",{color:"#fc97af #87f7cf #f7f494 #72ccff #f7c5a0 #d4a4eb #d2f5a6 #76f2f2".split(" "),textStyle:{},title:{textStyle:{color:"#ffffff"},subtextStyle:{color:"#dddddd"}},line:{itemStyle:{normal:{}},lineStyle:{normal:{width:"1"}},symbolSize:"5",
symbol:"circle",smooth:!1},radar:{itemStyle:{normal:{}},lineStyle:{normal:{width:"1"}},symbolSize:"5",symbol:"circle",smooth:!1},gauge:{axisLine:{lineStyle:{color:[[.31,"#58f7f3"],[1,"#1E5F6F"]]}},itemStyle:{normal:{color:"#D9D9D9"},emphasis:{color:"#D9D9D9"}}},categoryAxis:{axisLine:{show:!0,lineStyle:{color:"#333"}},axisTick:{show:!1,lineStyle:{color:"#333"}},axisLabel:{show:!0,textStyle:{color:"#939393"}},splitLine:{show:!0,lineStyle:{type:"dashed",color:["rgba(255,255,255,0.1)"]}},splitArea:{show:!1,
areaStyle:{color:["rgba(250,250,250,0.3)","rgba(200,200,200,0.3)"]}}},valueAxis:{axisLine:{show:!0,lineStyle:{color:"#333"}},axisTick:{show:!1,lineStyle:{color:"#333"}},axisLabel:{show:!0,textStyle:{color:"#939393"}},splitLine:{show:!0,lineStyle:{type:"dashed",color:["rgba(255,255,255,0.1)"]}},splitArea:{show:!1,areaStyle:{color:["rgba(250,250,250,0.3)","rgba(200,200,200,0.3)"]}}},toolbox:{iconStyle:{normal:{borderColor:"#999999"},emphasis:{borderColor:"#666666"}}},legend:{textStyle:{color:"#999999"}},
tooltip:{axisPointer:{lineStyle:{color:"#cccccc",width:1},crossStyle:{color:"#cccccc",width:1}}},dataZoom:{backgroundColor:"#525252",dataBackgroundColor:"rgba(47,69,84,0.3)",fillerColor:"#737373",handleColor:"#BDBDBD",handleSize:"100%",borderColor:"#525252",textStyle:{color:"#939393"}}}):"undefined"!==typeof console&&console&&console.error&&console.error("ECharts is not Loaded")})},"jimu/dijit/_StatisticsChartSettings":function(){define("dojo/_base/declare dojo/_base/lang dojo/_base/array dojo/_base/html dojo/_base/query dojo/_base/Color dojo/on dojo/Evented dijit/_WidgetBase dijit/_TemplatedMixin dijit/_WidgetsInTemplateMixin dojo/text!./templates/_StatisticsChartSettings.html dijit/ColorPalette jimu/dijit/CheckBox".split(" "),
function(q,f,l,m,e,p,h,a,b,c,k,d,g,n){return q([b,c,k,a],{baseClass:"jimu-dijit-statistics-chart-settings",templateString:d,colors:{c1:"#5d9cd3 #eb7b3a #a5a5a5 #febf29 #4673c2 #72ad4c".split(" "),c2:"#5d9cd3 #a5a5a5 #4673c2 #285f8f #636363 #274577".split(" "),c3:"#eb7b3a #febf29 #72ad4c #9c4618 #987214 44682e".split(" "),c4:"#72ad4c #4673c2 #febf29 #44682e #274577 #987214".split(" "),g1:["#43729b","#c4d5ea"],g2:["#ac5928","#f5ccbf"],g3:["#787878","#d8d8d8"],g4:["#bb8b1b","#fee1be"],g5:["#30538d",
"#c0c9e3"],g6:["#517e36","#c9dbc2"],g7:["#c4d5ea","#43729b"],g8:["#f5ccbf","#ac5928"],g9:["#d8d8d8","#787878"],g10:["#fee1be","#bb8b1b"],g11:["#c0c9e3","#30538d"],g12:["#c9dbc2","#517e36"]},palette:null,defaultSingleColor:"#5d9cd3",multiColorValue:"c1",imagesUrl:window.require.toUrl("jimu/css/images/chart/"),isInWidget:!1,type:"",singleColor:!1,config:null,postMixInProperties:function(){this.nls=window.jimuNls.statisticsChart},postCreate:function(){this.inherited(arguments);this._initSelf();this.isInWidget&&
this._bindEvents();this.own(h(this.multiColorSection,"click",f.hitch(this,function(a){a=a.target||a.srcElement;if(m.hasClass(a,"multi-color")&&!m.hasClass(a,"selected")){var b=this.multiColorValue;this._selectMultiColorDiv(a);b!==a.colorValue&&this.isInWidget&&this._configChange()}})))},_initSelf:function(){this.config=f.clone(this.config);this.cbxAxisX=new n({label:this.nls.horizontalAxis});this.cbxAxisX.placeAt(this.divAxisX);this.cbxAxisY=new n({label:this.nls.verticalAxis});this.cbxAxisY.placeAt(this.divAxisY);
this.cbxLegend=new n({label:this.nls.legend});this.cbxLegend.placeAt(this.divLegend);this.cbxPieLabel=new n({label:this.nls.dataLabels});this.cbxPieLabel.placeAt(this.divPieLabel);this._setSingleColorForColorDiv(this.defaultSingleColor);this.palette=new g({palette:"7x10",cellClass:"cursor:pointer",style:{width:"220px"},onChange:f.hitch(this,function(a){var b=this._getSingleColorFromColorDiv();this._setSingleColorForColorDiv(a);this.isInWidget&&b!==a&&this._configChange()})});this.palette.placeAt(this.paletteContainer);
this.palette.startup();l.forEach(["c1","c2","c3","c4"],f.hitch(this,function(a){m.create("div",{"class":"multi-color colorful "+a,tabindex:"0"},this.colorfulContainer).colorValue=a}));l.forEach("g1 g2 g3 g4 g5 g6 g7 g8 g9 g10 g11 g12".split(" "),f.hitch(this,function(a){m.create("div",{"class":"multi-color monochromatic "+a,tabindex:"0"},this.monochromaticContainer).colorValue=a}));this._setMultiColorValue("c1");"pie"===this.type?(this.singleColor=!1,m.setStyle(this.divAxisX,"display","none"),m.setStyle(this.divAxisY,
"display","none")):m.setStyle(this.divPieLabel,"display","none");this.reset();this.config&&this.setConfig(this.config)},_updateLegendDisplayByMode:function(a){if("pie"===this.type)this._showLegendCbx=!0,m.setStyle(this.divLegend,"display","");else if("column"===this.type||"bar"===this.type||"line"===this.type)if("count"===a||"field"===a)m.setStyle(this.divLegend,"display","none"),this._showLegendCbx=!1;else if("feature"===a||"category"===a)this._showLegendCbx=!0,m.setStyle(this.divLegend,"display",
"")},_bindEvents:function(){this.own(h(this.cbxLegend,"change",f.hitch(this,this._configChange)));"pie"===this.type?this.own(h(this.cbxPieLabel,"change",f.hitch(this,this._configChange))):(this.own(h(this.cbxAxisX,"change",f.hitch(this,this._configChange))),this.own(h(this.cbxAxisY,"change",f.hitch(this,this._configChange))))},setConfig:function(a){this.reset();this.cbxAxisX.setValue(!1===a.showHorizontalAxis?!1:!0);this.cbxAxisY.setValue(!1===a.showVerticalAxis?!1:!0);this.cbxPieLabel.setValue(!1===
a.showDataLabel?!1:!0);this.cbxLegend.setValue(!1===a.showLegend?!1:!0);a=f.clone(a.colors||[]);(this.singleColor=1===a.length&&"pie"!==this.type)?this.showSingleColor(a[0]):this.showMultiColor(a)},getConfig:function(){var a={colors:[]};"pie"===this.type?(a.colors=this.colors[this._getMultiColorValue()],2===a.colors.length&&(a.colors=this._createHexColors(a.colors[0],a.colors[1],6)),a.showDataLabel=this.cbxPieLabel.checked):(a.showHorizontalAxis=this.cbxAxisX.checked,a.showVerticalAxis=this.cbxAxisY.checked,
a.colors=this.singleColor?[this._getSingleColorFromColorDiv()]:this.colors[this._getMultiColorValue()]);this._showLegendCbx&&(a.showLegend=this.cbxLegend.checked);return a},_setSingleColorForColorDiv:function(a){m.setStyle(this.colorDiv,"backgroundColor",a);this.colorDiv.bgHex=a},_getSingleColorFromColorDiv:function(){return this.colorDiv.bgHex},_setMultiColorValue:function(a){(a=e("."+a,this.multiColorSection))&&0<a.length&&this._selectMultiColorDiv(a[0])},_selectMultiColorDiv:function(a){e(".multi-color",
this.multiColorSection).removeClass("selected");m.addClass(a,"selected");this.multiColorValue=a.colorValue},_getMultiColorValue:function(){return this.multiColorValue},reset:function(){"pie"===this.type?this.cbxPieLabel.setValue(!0):(this.cbxAxisX.setValue(!0),this.cbxAxisY.setValue(!0));this.singleColor?this.showSingleColor():this.showMultiColor()},showSingleColor:function(a){"pie"===this.type?this.singleColor=!1:(this.singleColor=!0,m.setStyle(this.singleColorSection,"display","block"),m.setStyle(this.multiColorSection,
"display","none"),a&&this._setSingleColorForColorDiv(a))},showMultiColor:function(a){this.singleColor=!1;m.setStyle(this.singleColorSection,"display","none");m.setStyle(this.multiColorSection,"display","block");if(a&&0<a.length){var b=null,c=!1,d;for(d in this.colors)if(b=this.colors[d],c=!1,b.length===a.length&&(c=l.every(b,f.hitch(this,function(b,c){b=new p(b);c=new p(a[c]);return b.toHex().toLowerCase()===c.toHex().toLowerCase()})))){this._setMultiColorValue(d);break}}},showShelter:function(){m.setStyle(this.shelter,
"display","block")},hideShelter:function(){m.setStyle(this.shelter,"display","none")},_configChange:function(){var a=this.getConfig();this.emit("change",a)},_createHexColors:function(a,b,c){var d=[];a=p.fromHex(a);var e=p.fromHex(b);b=(e.r-a.r)/(c-1);for(var g=(e.g-a.g)/(c-1),e=(e.b-a.b)/(c-1),f=null,h=0;h<c;h++)f=new p,f.r=Math.floor(a.r+b*h),f.g=Math.floor(a.g+g*h),f.b=Math.floor(a.b+e*h),d.push(f.toHex());return d}})})},"widgets/Chart/Query":function(){define("dojo/_base/declare dojo/_base/lang dojo/_base/array dojo/Deferred esri/tasks/query esri/tasks/QueryTask jimu/utils jimu/dijit/Message".split(" "),
function(q,f,l,m,e,p,h,a){function b(){return{url:"",layerInfo:null,limit:1E4,spatialReference:null,queryType:-1,objectIdField:"",query:{maxRecordCount:1E3,where:"",geometry:null,relationship:e.SPATIAL_REL_INTERSECTS,outFields:["*"],nextIndex:0,allCount:0,objectIds:[],features:[]}}}q=q(null,{currentAttrs:null,constructor:function(a){this.currentAttrs=b();this.currentAttrs.url=a.url;this.currentAttrs.layerInfo=a.layerInfo;this.currentAttrs.spatialReference=a.spatialReference;this.currentAttrs.query.where=
a.where;this.currentAttrs.query.geometry=a.geometry;this.currentAttrs.query.maxRecordCount=a.layerInfo.maxRecordCount||1E3;this.currentAttrs.queryType=this._getQueryType(a.layerInfo);this.currentAttrs.objectIdField=h.getObjectIdField(a.layerInfo);a.relationship&&(this.currentAttrs.query.relationship=a.relationship);a.outFields&&(this.currentAttrs.query.outFields=a.outFields);if(0<a.limit||a.limit>this.currentAttrs.query.maxRecordCount)this.currentAttrs.limit=a.limit},getFeatures:function(){var a=
new m,a=this.currentAttrs.query.where,b=this.currentAttrs.query.geometry,d=this.currentAttrs.query.relationship;return a=2===this.currentAttrs.queryType?this._getAllFeatures_SupportObjectIds(a,b,d):this._getAllFeatures_NotSupportObjectIds(a,b,d)},_getQueryType:function(a){var b=-1;return b=this._isSupportObjectIds(a)?2:3},_isSupportObjectIds:function(a){var b=0;a.currentVersion&&(b=parseFloat(a.currentVersion));return 10<=b||a.hasOwnProperty("typeIdField")},_getAllFeatures_SupportObjectIds:function(a,
b,d){return this._queryIds(a,b,d).then(f.hitch(this,function(a){if(!(a&&0<a.length))return this.currentAttrs.query.allCount=0,{status:1,count:0,features:[]};var b=a.length;this.currentAttrs.query.allCount=b;this.currentAttrs.query.objectIds=a;this.currentAttrs.query.nextIndex=0;return b>this.currentAttrs.query.maxRecordCount?this._isContinue().then(f.hitch(this,function(a){return a?this._onResultsScroll_SupportObjectIds():{status:-1,count:b,features:[]}})):this._onResultsScroll_SupportObjectIds()}))},
_isContinue:function(){var b=new m,e=window.jimuNls.queryFeatures,d=new a({message:e.tooManyFeaturesTip+" "+e.askForContinue,buttons:[{label:window.jimuNls.common.continue1,onClick:f.hitch(this,function(){b.resolve(!0);d.close()})},{label:window.jimuNls.common.cancel,onClick:f.hitch(this,function(){b.resolve(!1);d.close()})}]});return b},_onResultsScroll_SupportObjectIds:function(){var a=new m,b=this.currentAttrs.query.objectIds,d=this.currentAttrs.query.allCount,e=this.currentAttrs.query.nextIndex,
h=this.currentAttrs.query.maxRecordCount,l=this.currentAttrs.query.relationship;if(e>=d)return a.resolve({status:1,count:d,features:this.currentAttrs.query.features}),a;b=b.slice(e,e+Math.min(b.length-e,h));return 0===b.length?(a.resolve({status:1,count:d,features:this.currentAttrs.query.features}),a):this._queryByObjectIds(b,!0,l).then(f.hitch(this,function(a){a=a.features;this.currentAttrs.query.nextIndex+=a.length;this.currentAttrs.query.features=this.currentAttrs.query.features.concat(a);return this._onResultsScroll_SupportObjectIds()}))},
_getAllFeatures_NotSupportObjectIds:function(a,b,d){return this._doQuery_NotSupportObjectIds(a,b,d).then(f.hitch(this,function(a){return{status:1,count:a.length,features:a}}))},_doQuery_NotSupportObjectIds:function(a,b,d){var c=new m;this._query(a,b,!0,d).then(f.hitch(this,function(a){a=a.features;this.currentAttrs.query.allCount=a.length;c.resolve(a)}),f.hitch(this,function(a){console.error(a);c.reject(a)}));return c},_getOutputFields:function(){return["*"]},_query:function(a,b,d,f){var c=new e;
c.where=a;b&&(c.geometry=b);c.outSpatialReference=this.currentAttrs.spatialReference;c.returnGeometry=!!d;c.spatialRelationship=f;c.outFields=this._getOutputFields();return(new p(this.currentAttrs.url)).execute(c)},_queryIds:function(a,b,d){var c=new e;c.where=a;b&&(c.geometry=b);c.returnGeometry=!1;c.spatialRelationship=d;c.outSpatialReference=this.currentAttrs.spatialReference;return(new p(this.currentAttrs.url)).executeForIds(c)},_queryByObjectIds:function(a,b,d){var c=new m,h=new e;h.returnGeometry=
!!b;h.outSpatialReference=this.currentAttrs.spatialReference;h.outFields=this._getOutputFields();h.objectIds=a;h.spatialRelationship=d;(new p(this.currentAttrs.url)).execute(h).then(f.hitch(this,function(a){c.resolve(a)}),f.hitch(this,function(e){if(400===e.code){var g=this.currentAttrs.objectIdField,h="",k=a.length;l.forEach(a,f.hitch(this,function(a,b){h+=g+" \x3d "+a;b!==k-1&&(h+=" OR ")}));this._query(h,null,b,d).then(f.hitch(this,function(a){c.resolve(a)}),f.hitch(this,function(a){c.reject(a)}))}else c.reject(e)}));
return c}});q.getCleanCurrentAttrsTemplate=b;return q})},"widgets/Chart/a11y/Widget":function(){define(["dojo/keys","dojo/_base/html","dijit/focus"],function(q,f,l){return{_onChartListKeydown:function(f){f.keyCode===q.ENTER&&this._enterIntoChartTr(f.target||f.srcElement)},_onChartParamsKeydown:function(f){f.keyCode===q.ESCAPE&&(f.stopPropagation(),l.focus(this.paramsBack))},_onBtnParamsBackKeydown:function(f){f.keyCode===q.ENTER&&this._onBtnParamsBackClicked()},_onClearBtnKeydown:function(m){var e=
"none"!==f.getStyle(this.chartParams,"display"),p="none"!==f.getStyle(this.chartResults,"display");m.keyCode===q.ESCAPE&&(m.stopPropagation(),e?l.focus(this.paramsBack):p&&l.focus(this.backOptions));m.keyCode!==q.TAB||m.shiftKey||(e?(m.preventDefault(),l.focus(this.btnApply)):p&&(m.preventDefault(),l.focus(this.resultsContainer)));m.keyCode===q.ENTER&&this._onBtnClearAllClicked()},_onApplyBtnKeydown:function(f){f.keyCode===q.ENTER&&this._onBtnApplyClicked()},_onChartResultsKeydown:function(f){f.keyCode===
q.ESCAPE&&(f.stopPropagation(),l.focus(this.backOptions))},_onResultsBackKeydown:function(f){f.keyCode===q.ENTER&&this._onBtnResultsBackClicked()}}})},"widgets/Chart/_build-generate_module":function(){define(["dojo/text!./Widget.html","dojo/text!./css/style.css","dojo/i18n!./nls/strings"],function(){})},"url:jimu/dijit/templates/StatisticsChart.html":'\x3cdiv\x3e\r\n\t\x3cdiv class\x3d"results-header" data-dojo-attach-point\x3d"resultsHeader" style\x3d"margin-bottom:15px;"\x3e\r\n\t\t\x3cdiv tabindex\x3d"0" class\x3d"chart-title jimu-float-leading" data-dojo-attach-point\x3d"chartTitle"\x3e\x3c/div\x3e\r\n\t\t\x3cdiv class\x3d"paging-section jimu-float-leading"\x3e\r\n\t\t\t\x3cul tabindex\x3d"0" data-dojo-attach-point\x3d"pagingUl" data-dojo-attach-event\x3d"onclick:_onPagingUlClicked, onkeydown:_onPagingUlKeydown"\x3e\x3c/ul\x3e\r\n\t\t\x3c/div\x3e\r\n\t\t\x3cdiv class\x3d"jimu-float-trailing"\x3e\r\n\t\t\t\x3cdiv role\x3d"button" tabindex\x3d"0" class\x3d"settings jimu-float-leading" data-dojo-attach-point\x3d"settingsIcon"\x3e\x3c/div\x3e\r\n\t\t\t\x3cdiv role\x3d"button" tabindex\x3d"0" class\x3d"zoomin jimu-float-trailing" data-dojo-attach-point\x3d"zoominIcon"\x3e\x3c/div\x3e\r\n\t\t\x3c/div\x3e\r\n\t\x3c/div\x3e\r\n\t\x3cdiv data-dojo-attach-point\x3d"chartSection" class\x3d"chart-section"\x3e\r\n\t\t\x3ctable cellpadding\x3d"0" cellspacing\x3d"0" style\x3d"width:100%;height:100%;table-layout:fixed;"\x3e\r\n\t\t\t\x3ctbody\x3e\r\n\t\t\t\t\x3ctr\x3e\r\n\t\t\t\t\t\x3ctd class\x3d"arrow-td"\x3e\r\n\t\t\t\t\t\t\x3cdiv tabindex\x3d"0" role\x3d"button" aria-label\x3d"${nls.previous}" class\x3d"chart-section-item left-arrow arrow" data-dojo-attach-point\x3d"leftArrow" data-dojo-attach-event\x3d"onclick:_onLeftArrowClicked, onkeydown:_onLeftArrowKeydown"\x3e\x3c/div\x3e\r\n\t\t\t\t\t\x3c/td\x3e\r\n\t\t\t\t\t\x3ctd class\x3d"content-td"\x3e\r\n\t\t\t\t\t\t\x3cdiv class\x3d"chart-section-item chart-container" data-dojo-attach-point\x3d"chartContainer"\x3e\r\n\t\t\t\t\t\t\t\x3cdiv class\x3d"chart-real-container" data-dojo-attach-point\x3d"chartRealContainer"\x3e\x3c/div\x3e\r\n\t\t\t\t\t\t\t\x3cdiv tabindex\x3d"0" class\x3d"description-container" data-dojo-attach-point\x3d"descriptionContainer"\x3e/div\x3e\r\n\t\t\t\t\t\t\x3c/div\x3e\r\n\t\t\t\t\t\t\x3cdiv class\x3d"fiald-render-info" data-dojo-attach-point\x3d"faildRenderInfo"\x3e\r\n\t\t\t\t\t\t\t${nls.fieldDisplayChartTip}\r\n\t\t\t\t\t\t\x3c/div\x3e\r\n\t\t\t\t\t\x3c/td\x3e\r\n\t\t\t\t\t\x3ctd class\x3d"arrow-td"\x3e\r\n\t\t\t\t\t\t\x3cdiv tabindex\x3d"0" role\x3d"button" aria-label\x3d"${nls.next}" class\x3d"chart-section-item right-arrow arrow" data-dojo-attach-point\x3d"rightArrow" data-dojo-attach-event\x3d"onclick:_onRightArrowClicked, onkeydown:_onRightArrowKeydown"\x3e\x3c/div\x3e\r\n\t\t\t\t\t\x3c/td\x3e\r\n\t\t\t\t\x3c/tr\x3e\r\n\t\t\t\x3c/tbody\x3e\r\n\t\t\x3c/table\x3e\r\n\t\x3c/div\x3e\r\n\t\x3cdiv data-dojo-attach-point\x3d"loading" data-dojo-type\x3d"jimu/dijit/LoadingIndicator" data-dojo-props\x3d\'hidden:true\'\x3e\x3c/div\x3e\r\n\x3c/div\x3e',
"url:jimu/dijit/templates/_StatisticsChartSettings.html":'\x3cdiv tabIndex\x3d"0"\x3e\r\n\t\x3cdiv data-dojo-attach-point\x3d"divAxisX" class\x3d"setting-item"\x3e\x3c/div\x3e\r\n\t\x3cdiv data-dojo-attach-point\x3d"divAxisY" class\x3d"setting-item"\x3e\x3c/div\x3e\r\n\t\x3cdiv data-dojo-attach-point\x3d"divLegend" class\x3d"setting-item"\x3e\x3c/div\x3e\r\n\t\x3cdiv data-dojo-attach-point\x3d"divPieLabel" class\x3d"setting-item"\x3e\x3c/div\x3e\r\n\t\x3cdiv\x3e\r\n\t\t\x3cdiv tabindex\x3d"0" aria-label\x3d"${nls.color}" class\x3d"color-tip"\x3e${nls.color}\x3c/div\x3e\r\n\t\t\x3cdiv data-dojo-attach-point\x3d"singleColorSection" class\x3d"single-color-section"\x3e\r\n\t\t\t\x3cdiv data-dojo-attach-point\x3d"colorDiv" class\x3d"single-color-div"\x3e\x3c/div\x3e\r\n\t\t\t\x3cdiv data-dojo-attach-point\x3d"paletteContainer" class\x3d"palette-container"\x3e\x3c/div\x3e\r\n\t\t\x3c/div\x3e\r\n\t\t\x3cdiv data-dojo-attach-point\x3d"multiColorSection" class\x3d"multi-color-section"\x3e\r\n\t\t\t\x3cdiv class\x3d"colorful-section"\x3e\r\n\t\t\t\t\x3cdiv data-dojo-attach-point\x3d"colorfulContainer"\x3e\x3c/div\x3e\r\n\t\t\t\x3c/div\x3e\r\n\t\t\t\x3cdiv class\x3d"monochromatic-section"\x3e\r\n\t\t\t\t\x3cdiv data-dojo-attach-point\x3d"monochromaticContainer"\x3e\x3c/div\x3e\r\n\t\t\t\x3c/div\x3e\r\n\t\t\x3c/div\x3e\r\n\t\x3c/div\x3e\r\n\t\x3cdiv class\x3d"shelter" data-dojo-attach-point\x3d"shelter"\x3e\x3c/div\x3e\r\n\x3c/div\x3e',
"url:widgets/Chart/Widget.html":'\x3cdiv\x3e\r\n  \x3cdiv class\x3d"chart-widget-content"\x3e\r\n    \x3cdiv data-dojo-attach-point\x3d"chartList" class\x3d"chart-step chart-list"\x3e\r\n      \x3cdiv data-dojo-attach-point\x3d"chartsNode" class\x3d"charts firstFocusNode" tabindex\x3d"0" data-a11y-label-by\x3d"chart-execute-tip"\x3e\r\n        \x3cdiv class\x3d"execute-tip" data-a11y-label-id\x3d"chart-execute-tip"\x3e\r\n          ${nls.executeChartTip}\r\n        \x3c/div\x3e\r\n        \x3cdiv class\x3d"charts-table-container"\x3e\r\n          \x3ctable data-dojo-attach-event\x3d"onclick:_onChartListClicked, onkeydown:_onChartListKeydown" cellpadding\x3d"0" cellspacing\x3d"0" class\x3d"charts-table" onselectstart\x3d"return false;"\x3e\r\n            \x3ccolgroup\x3e\r\n              \x3ccol width\x3d"14px"\x3e\x3c/col\x3e\r\n              \x3ccol width\x3d"auto"\x3e\x3c/col\x3e\r\n              \x3ccol width\x3d"30px"\x3e\x3c/col\x3e\r\n            \x3c/colgroup\x3e\r\n            \x3ctbody data-dojo-attach-point\x3d"chartsTbody"\x3e\r\n            \x3c/tbody\x3e\r\n          \x3c/table\x3e\r\n        \x3c/div\x3e\r\n      \x3c/div\x3e\r\n      \x3cdiv data-dojo-attach-point\x3d"invalidConfigNode" class\x3d"invalid-config"\x3e\r\n        \x3cdiv class\x3d"error"\x3e\r\n          ${nls.invalidConfig}\r\n        \x3c/div\x3e\r\n      \x3c/div\x3e\r\n      \x3cdiv data-dojo-attach-point\x3d"noChartTipSection" class\x3d"no-chart-tip"\x3e\r\n        ${nls.noneChartTip}\r\n      \x3c/div\x3e\r\n    \x3c/div\x3e\r\n\r\n    \x3cdiv data-dojo-attach-point\x3d"chartParams" data-dojo-attach-event\x3d"onkeydown: _onChartParamsKeydown" class\x3d"chart-step chart-params" style\x3d"display: none;"\x3e\r\n      \x3cdiv class\x3d"step-head chart-params-head"\x3e\r\n        \x3cdiv class\x3d"step-title params-title" data-a11y-label-id\x3d"chart-chart-params"\x3e${nls.chartParams}\x3c/div\x3e\r\n        \x3cdiv class\x3d"operations"\x3e\r\n          \x3cdiv role\x3d"button" aria-label\x3d"${nls.backCharts}" tabindex\x3d"0" data-dojo-attach-point\x3d"paramsBack" class\x3d"params-back jimu-float-leading" data-dojo-attach-event\x3d"onclick:_onBtnParamsBackClicked, onkeydown:_onBtnParamsBackKeydown"\x3e\r\n            \x3cdiv class\x3d"back-icon"\x3e\x3c/div\x3e\r\n            \x3cdiv class\x3d"back-tip"\x3e${nls.charts}\x3c/div\x3e\r\n          \x3c/div\x3e\r\n          \x3cdiv role\x3d"button" aria-label\x3d"${nls.apply}" tabindex\x3d"0" class\x3d"apply jimu-float-trailing" data-dojo-attach-point\x3d"btnApply" data-dojo-attach-event\x3d"onclick:_onBtnApplyClicked, onkeydown:_onApplyBtnKeydown"\x3e${nls.apply}\x3c/div\x3e\r\n        \x3c/div\x3e\r\n      \x3c/div\x3e\r\n      \x3cdiv class\x3d"params-container" tabindex\x3d"0" data-a11y-label-by\x3d"chart-chart-params" data-dojo-attach-point\x3d"paramsContainer"\x3e\r\n        \x3cdiv class\x3d"spatial-section" style\x3d"margin-top:20px; margin-bottom:20px;"\x3e\r\n          \x3cdiv class\x3d"use-spatial-div" data-dojo-attach-point\x3d"cbxUseSpatialDiv"\x3e\x3c/div\x3e\r\n          \x3cdiv data-dojo-attach-point\x3d"selectSpatialDiv" class\x3d"select-spatial"\x3e\r\n            \x3cdiv class\x3d"special-tr"\x3e\r\n              \x3cdiv class\x3d"radio-div"\x3e\r\n                \x3cinput data-dojo-type\x3d"dijit/form/RadioButton" data-label-id\x3d"chart-params-map-extent" data-dojo-attach-point\x3d"cbxUseMapExtent" data-dojo-attach-event\x3d"change:_onCbxUseMapExtentClicked" checked/\x3e\r\n              \x3c/div\x3e\r\n              \x3clabel data-label-for\x3d"chart-params-map-extent"\x3e${nls.useCurrentMapExtent}\x3c/label\x3e\r\n            \x3c/div\x3e\r\n            \x3cdiv class\x3d"special-tr"\x3e\r\n              \x3cdiv class\x3d"radio-div"\x3e\r\n                \x3cinput data-dojo-type\x3d"dijit/form/RadioButton" data-label-id\x3d"chart-params-draw-graphic" data-dojo-attach-point\x3d"cbxDrawGraphic" data-dojo-attach-event\x3d"change:_onCbxDrawGraphicClicked"/\x3e\r\n              \x3c/div\x3e\r\n              \x3clabel data-label-for\x3d"chart-params-draw-graphic"\x3e${nls.drawGraphicOnMap}\x3c/label\x3e\r\n            \x3c/div\x3e\r\n            \x3cdiv class\x3d"draw-graphic" data-dojo-attach-point\x3d"drawBoxDiv"\x3e\x3c/div\x3e\r\n          \x3c/div\x3e\r\n        \x3c/div\x3e\r\n      \x3c/div\x3e\r\n    \x3c/div\x3e\r\n\r\n    \x3cdiv data-dojo-attach-point\x3d"chartResults" data-dojo-attach-event\x3d"onkeydown: _onChartResultsKeydown" class\x3d"chart-step chart-results" style\x3d"display: none;"\x3e\r\n      \x3cdiv class\x3d"step-head chart-results-head"\x3e\r\n        \x3cdiv class\x3d"step-title results-title" data-a11y-label-id\x3d"chart-chart-result"\x3e${nls.chartResults}\x3c/div\x3e\r\n        \x3cdiv class\x3d"operations"\x3e\r\n          \x3cdiv role\x3d"button" data-dojo-attach-point\x3d"backOptions" tabindex\x3d"0" aria-label\x3d"${nls.backOptions}" class\x3d"params-back jimu-float-leading" data-dojo-attach-event\x3d"onclick:_onBtnResultsBackClicked, onkeydown:_onResultsBackKeydown"\x3e\r\n            \x3cdiv class\x3d"back-icon"\x3e\x3c/div\x3e\r\n            \x3cdiv class\x3d"back-tip" data-dojo-attach-point\x3d"btnResultsBack"\x3e${nls.chartParams}\x3c/div\x3e\r\n          \x3c/div\x3e\r\n        \x3c/div\x3e\r\n      \x3c/div\x3e\r\n      \x3cdiv tabindex\x3d"0" class\x3d"results-container" data-dojo-attach-point\x3d"resultsContainer" data-a11y-label-by\x3d"chart-chart-result"\x3e\r\n      \x3c/div\x3e\r\n    \x3c/div\x3e\r\n  \x3c/div\x3e\r\n  \x3cdiv class\x3d"btn-section"\x3e\r\n      \x3c!-- aria-disabled\x3d"true" aria-pressed\x3d"true"  --\x3e\r\n    \x3cdiv role\x3d"button" aria-label\x3d"${nls.clearCharts}" tabindex\x3d"0" data-dojo-attach-point\x3d"btnClearAll" data-dojo-attach-event\x3d"onclick:_onBtnClearAllClicked, onkeydown:_onClearBtnKeydown" class\x3d"jimu-btn jimu-priority-secondary btn-clear-all lastFocusNode" title\x3d"${nls.clearResults}"\x3e${nls.clearResults}\x3c/div\x3e\r\n  \x3c/div\x3e\r\n  \x3cdiv data-dojo-attach-point\x3d"shelter" data-dojo-type\x3d"jimu/dijit/LoadingIndicator" data-dojo-props\x3d\'hidden:true\'\x3e\x3c/div\x3e\r\n\x3c/div\x3e',
"url:widgets/Chart/css/style.css":".jimu-widget-chart .charts:focus,.jimu-widget-chart .params-container:focus,.jimu-widget-chart .params-back:focus,.jimu-widget-chart .apply:focus,.jimu-widget-chart .results-container:focus,.jimu-widget-chart .params-back:focus,.jimu-widget-chart .spatial-section .jimu-checkbox:focus,.jimu-widget-chart .btn-clear-all:focus{outline-offset: -2px !important;}.ie-gte-10 .jimu-widget-chart .btn-section .btn-clear-all {margin-bottom: 2px;} .ie-gte-10 .jimu-widget-chart \x3e .chart-widget-content \x3e .chart-list \x3e .charts{width: 99%; height: 99%; left: 2px; top: 2px;}.ie-gte-10 .jimu-widget-chart .spatial-section .jimu-checkbox {margin-left: 2px;}.jimu-rtl .ie-gte-10 .jimu-widget-chart .spatial-section .jimu-checkbox {margin-left: 0; margin-right: 2px;}.ie-gte-10 .jimu-widget-chart .apply {margin: 2px;}.ie-gte-10 .jimu-widget-chart .params-back {margin: 2px;}.ie-gte-10 .jimu-widget-chart \x3e .chart-widget-content \x3e .chart-params \x3e .params-container,.ie-gte-10 .jimu-widget-chart \x3e .chart-widget-content \x3e .chart-results \x3e .results-container {width: 99%; left: 2px;}.ie-gte-10 .jimu-widget-chart \x3e .chart-widget-content \x3e .chart-results \x3e .results-container {overflow: hidden;}.jimu-widget-chart{position: relative; width: 100%; height: 100%; min-width: 222px; min-height: 237px; overflow-x: hidden;}.jimu-widget-chart .chart-widget-content{position: absolute; width: 100%; left: 0; right: 0; height: auto; top: 0; bottom: 53px;}.jimu-widget-chart .btn-section{position: absolute; width: 100%; left: 0; right: 0; bottom: 0; height: auto; text-align: center;}.jimu-widget-chart .btn-section .btn-clear-all{margin-left: auto; margin-right: auto; overflow: hidden; text-overflow: ellipsis;}.jimu-widget-chart .chart-step{position: absolute; width: 100%; height: 100%; top: 0;}.jimu-widget-chart .chart-list{left: 0;}.jimu-widget-chart .chart-list .charts{position: absolute; width: 100%; height: 100%; left: 0; top: 0; overflow-y: auto;}.jimu-widget-chart .chart-list .charts .execute-tip{line-height: 20px;}.jimu-widget-chart .chart-list .charts .charts-table-container{width: 100%; margin-top: 15px;}.jimu-widget-chart .chart-list .charts .charts-table{width: 99%; border-collapse: collapse; table-layout: fixed; margin-left: auto; margin-right: auto;}.jimu-widget-chart .chart-list .charts .charts-table td{height: 30px; line-height: 30px; cursor: pointer;}.jimu-widget-chart .chart-list .charts .charts-table tr *{cursor: pointer;}.jimu-widget-chart .chart-list .charts .charts-table .second-td{color: #686868; font-size: 12px;}.jimu-widget-chart .chart-list .charts .charts-table .chart-name-div{width: 100%; overflow: hidden; text-overflow: ellipsis; height: 100%;}.jimu-widget-chart .chart-list .charts .charts-table .third-td .arrow{background-repeat: no-repeat; background-position: center; background-image: url(images/arrow_right1.png); width: 100%; height: 100%;}.jimu-rtl .jimu-widget-chart .chart-list .charts .charts-table .third-td .arrow{background-image: url(images/rtl_arrow_right1.png);}.jimu-widget-chart .charts-table .jimu-table-row.jimu-state-active .third-td .arrow{background-image: url(images/arrow_right2.png);}.jimu-rtl .jimu-widget-chart .charts-table .jimu-table-row.jimu-state-active .third-td .arrow{background-image: url(images/rtl_arrow_right2.png);}.jimu-widget-chart .charts-table .jimu-table-row:hover .third-td .arrow{background-image: url(images/arrow_right2.png);}.jimu-rtl .jimu-widget-chart .charts-table .jimu-table-row:hover .third-td .arrow{background-image: url(images/rtl_arrow_right2.png);}.jimu-widget-chart .chart-list .invalid-config{display: none; position: absolute; width: 100%; height: 100%; left: 0; top: 0;}.jimu-widget-chart .chart-list .no-chart-tip{display: none; line-height: 20px;}.jimu-widget-chart .step-head{position: relative; width: 100%; height: 30px; line-height: 30px;}.jimu-widget-chart .step-title{position: absolute; width: 100%; height: 100%; left: 0; top: 0; text-align: center; font-size: 14px; color: #86909c;}.jimu-widget-chart .step-head .operations{position: absolute; width: 100%; height: 100%; left: 0; right: 0; top: 0;}.jimu-widget-chart .step-head .operations .params-back{color: blue; cursor: pointer; height: 100%; white-space: nowrap; padding: 0 5px;}.jimu-widget-chart .step-head .operations .params-back \x3e *{display: inline-block; vertical-align: middle;}.jimu-widget-chart .step-head .operations .params-back .back-icon{width: 8px; height: 100%; background-repeat: no-repeat; background-position: center center; background-image: url(images/arrow_left.png); margin-right: 5px;}.jimu-rtl .jimu-widget-chart .step-head .operations .params-back .back-icon{background-image: url(images/rtl_arrow_left.png); margin-right: 0; margin-left: 5px;}.jimu-widget-chart .step-head .operations .params-back .back-tip{height: 100%; color: #51b1fe;}.jimu-widget-chart .chart-params{left: 100%;}.jimu-widget-chart .chart-params-head .operations .apply{cursor: pointer; height: 100%; color: #51b1fe; padding: 0 5px;}.jimu-widget-chart .params-container{position: absolute; width: 100%; left: 0; top: 40px; bottom: 0; overflow-y: auto;}.jimu-widget-chart .params-container .spatial-section .use-spatial-div .jimu-checkbox {width: 100%;}.jimu-widget-chart .params-container .spatial-section .use-spatial-div .jimu-checkbox \x3e .label {width: 90%; white-space: nowrap; overflow: hidden; text-overflow: ellipsis;}.jimu-widget-chart .chart-params .draw-graphic{margin-top: 5px; margin-left: 5px;}.jimu-rtl .jimu-widget-chart .chart-params .draw-graphic{margin-left: 0; margin-right: 5px;}.jimu-widget-chart .chart-params .select-spatial{margin-left: 7px; margin-top: 7px;}.jimu-rtl .jimu-widget-chart .chart-params .select-spatial{margin-left: 0; margin-right: 7px;}.jimu-widget-chart .chart-params .select-spatial .special-tr {display: flex; height: 30px; align-items: center;}.jimu-widget-chart .chart-params .select-spatial .radio-div {display: inline-flex; width: 30px; height: 30px; align-items: center; justify-content: center;}.jimu-widget-chart .chart-results{left: 200%;}.jimu-widget-chart .chart-results .results-container{position: absolute; width: 100%; left: 0; top: 50px; bottom: 0; overflow-x: hidden; overflow-y: auto;}",
"*now":function(q){q(['dojo/i18n!*preload*widgets/Chart/nls/Widget*["ar","bs","ca","cs","da","de","en","el","es","et","fi","fr","he","hr","hu","id","it","ja","ko","lt","lv","nb","nl","pl","pt-br","pt-pt","ro","ru","sl","sr","sv","th","tr","zh-cn","uk","vi","zh-hk","zh-tw","ROOT"]'])},"*noref":1}});
define("dojo/_base/declare dojo/_base/lang dojo/_base/query dojo/_base/html dojo/_base/array dojo/_base/fx dojo/on dijit/focus dijit/_WidgetsInTemplateMixin jimu/BaseWidget jimu/dijit/Message jimu/dijit/DrawBox jimu/dijit/CheckBox jimu/utils jimu/filterUtils esri/layers/FeatureLayer esri/renderers/SimpleRenderer esri/symbols/jsonUtils jimu/dijit/StatisticsChart ./Query jimu/LayerInfos/LayerInfos jimu/ServiceDefinitionManager jimu/dijit/Popup ./a11y/Widget jimu/dijit/LoadingIndicator dijit/form/RadioButton".split(" "),function(q,
f,l,m,e,p,h,a,b,c,k,d,g,n,t,v,C,B,r,u,x,z,D,w){q=q([c,b],{name:"Chart",baseClass:"jimu-widget-chart",isValidConfig:!1,currentAttrs:null,tempResultLayer:null,previewArgs:null,previewPopup:null,layerInfosObj:null,constructor:function(){this.cachePopUpInfos={}},_resetCurrentAttrs:function(){this.currentAttrs={chartTr:null,config:null,layerInfo:null}},postMixInProperties:function(){this.inherited(arguments);this.isRenderIdForAttrs=!0;this.nls.colorful=this.nls.colorful||"Colorful";this.nls.monochromatic=
this.nls.monochromatic||"Monochromatic";this.nls.clearResults=window.jimuNls.drawBox.clear;this.layerInfosObj=x.getInstanceSync();this.serviceDefinitionManager=z.getInstance();this.config&&(this._setUrlForConfig(),this._updateConfig())},_updateConfig:function(){this.config&&this.config.charts&&0<this.config.charts.length&&e.forEach(this.config.charts,f.hitch(this,function(a){this._rebuildFilter(a.url,a.filter)}))},_setUrlForConfig:function(){this.config&&this.config.charts&&0<this.config.charts.length&&
e.forEach(this.config.charts,f.hitch(this,function(a){if(a.webMapLayerId){var b=this.layerInfosObj.getLayerOrTableInfoById(a.webMapLayerId);b&&(a.url=b.getUrl())}}))},_rebuildFilter:function(a,b){try{if(b){delete b.expr;var c=new t;c.isHosted=n.isHostedService(a);c.getExprByFilterObj(b)}}catch(F){console.log(F)}},postCreate:function(){this.inherited(arguments);this.cbxUseSpatial=new g({label:this.nls.useSpatialFilter});this.cbxUseSpatial.placeAt(this.cbxUseSpatialDiv);this.own(h(this.cbxUseSpatial,
"change",function(){this._onCbxUseSpatialClicked()}.bind(this)));this._initDrawBox();this._initPreview();this._initSelf()},onOpen:function(){this.tempResultLayer&&this.tempResultLayer.show()},onDeActive:function(){this.drawBox.deactivate()},onClose:function(){this.tempResultLayer&&this.tempResultLayer.hide();this._hideInfoWindow();this.drawBox.clear();this.inherited(arguments)},resize:function(){var a="BoxTheme"===this.appConfig.theme.name?1100:100;setTimeout(f.hitch(this,function(){this._updatePreviewHeight();
this.preview.resize()}),a)},destroy:function(){this._clickClearButton(!0);this.inherited(arguments)},_isConfigValid:function(){return this.config&&"object"===typeof this.config},_initDrawBox:function(){this.drawBox=new d({types:["point","polyline","polygon"],map:this.map,showClear:!0,keepOneGraphic:!0});this.drawBox.placeAt(this.drawBoxDiv);this.drawBox.startup()},_createBigPreview:function(){if(this.previewArgs){var a=document.body.clientWidth-40,b=document.body.clientHeight-40;if(!(100>a||100>b)){var c=
this._getDefaultFontColor(),d=0;this.preview&&0<=this.preview.currentChartIndex&&(d=this.preview.currentChartIndex);var e=new r({map:this.map,fontColor:c,isBigPreview:!0,showSettingIcon:!0,showZoomIcon:!1,zoomToFeaturesWhenClick:!0,initialChartIndex:d,style:"width:100%;height:100%;"});this.previewPopup=new D({width:a,height:b,titleLabel:this.nls._widgetLabel,content:e,onClose:f.hitch(this,function(){e.destroy();this.previewPopup=e=null})});var g=this._getPopupFieldInfo()||{};setTimeout(f.hitch(this,
function(){e.createClientCharts(this.preview.featureLayer,this.preview.features,this.preview.config,g)}),100)}}},_getPopupFieldInfo:function(){var a=null;if(this.currentAttrs.config&&"undefined"!==typeof this.currentAttrs.config.webMapLayerId){var b=this.currentAttrs.config.webMapLayerId;if("undefined"!==typeof this.cachePopUpInfos[b])a=this.cachePopUpInfos[b];else{var c=this.layerInfosObj.getLayerInfoById(b);c&&(a=c.getPopupInfo())&&(this.cachePopUpInfos[b]=a)}}return a},_initPreview:function(){var a=
this._getDefaultFontColor();this.preview=new r({map:this.map,fontColor:a,isBigPreview:!1,showSettingIcon:!0,showZoomIcon:!0,zoomToFeaturesWhenClick:!0});this.preview.placeAt(this.resultsContainer);this.preview.startup();this.own(h(this.preview,"zoomin",f.hitch(this,this._createBigPreview)))},_getDefaultFontColor:function(){var a="#333333";"DashboardTheme"!==this.appConfig.theme.name||"default"!==this.appConfig.theme.styles[0]&&"style3"!==this.appConfig.theme.styles[0]?"DartTheme"===this.appConfig.theme.name&&
(a="#fff"):a="#fff";return a},_initSelf:function(){var a="Chart_"+n.getRandomString();this.cbxUseMapExtent.set("name",a);this.cbxDrawGraphic.set("name",a);(this.isValidConfig=this._isConfigValid())?(a=this.config.charts,0===a.length?(m.setStyle(this.chartsNode,"display","none"),m.setStyle(this.noChartTipSection,"display","block")):e.forEach(a,f.hitch(this,function(a,b){var c=a.name,d=m.toDom('\x3ctr tabindex\x3d"0" class\x3d"single-chart jimu-table-row"\x3e\x3ctd class\x3d"first-td"\x3e\x3c/td\x3e\x3ctd class\x3d"second-td"\x3e\x3cdiv class\x3d"chart-name-div"\x3e\x3c/div\x3e\x3c/td\x3e\x3ctd class\x3d"third-td"\x3e\x3cdiv class\x3d"arrow"\x3e\x3c/div\x3e\x3c/td\x3e\x3c/tr\x3e');
l(".chart-name-div",d)[0].innerHTML=n.stripHTML(c);m.place(d,this.chartsTbody);d.singleConfig=a;0===b%2?m.addClass(d,"even"):m.addClass(d,"odd")}))):(m.setStyle(this.chartsNode,"display","none"),m.setStyle(this.invalidConfigNode,{display:"block",left:0}))},_clickClearButton:function(b){this._hideInfoWindow();this.drawBox.clear();this._removeTempResultLayer();this._clearResultPage();b||this._fromCurrentPageToChartList();a.focus(this.chartsNode)},_slide:function(a,b,c){m.setStyle(a,"display","block");
m.setStyle(a,"left",b+"%");p.animateProperty({node:a,properties:{left:{start:b,end:c,units:"%"}},duration:500,onEnd:f.hitch(this,function(){m.setStyle(a,"left",c);0===c?m.setStyle(a,"display","block"):m.setStyle(a,"display","none")})}).play()},_onChartListClicked:function(a){a=n.getAncestorDom(a.target||a.srcElement,f.hitch(this,function(a){return m.hasClass(a,"single-chart")}),10);this._enterIntoChartTr(a)},_enterIntoChartTr:function(a){if(a){var b=a.singleConfig;this._resetCurrentAttrs();this.currentAttrs.chartTr=
a;this.currentAttrs.config=f.clone(b);this.currentAttrs.layerInfo=this.currentAttrs.chartTr.layerInfo;l("tr.single-chart",this.chartsTbody).removeClass("jimu-state-active");m.addClass(this.currentAttrs.chartTr,"jimu-state-active");var c=f.hitch(this,function(){this.currentAttrs.layerInfo=this.currentAttrs.chartTr.layerInfo;this._fromChartListToChartParams()});this.currentAttrs.chartTr.layerInfo?c():(this.shelter.show(),a=null,this.currentAttrs.config&&"undefined"!==typeof this.currentAttrs.config.webMapLayerId&&
(a=this.layerInfosObj.getLayerInfoById(this.currentAttrs.config.webMapLayerId)),a?a.getServiceDefinition().then(f.hitch(this,function(a){this.domNode&&(this.shelter.hide(),this.currentAttrs.chartTr.layerInfo=a,this.currentAttrs.layerInfo=this.currentAttrs.chartTr.layerInfo,c())}),f.hitch(this,function(a){console.error(a);if(this.domNode){this.shelter.hide();var b="";a&&403===a.httpCode&&(b=this.nls.noPermissionsMsg);this._showQueryErrorMsg(b)}})):this.serviceDefinitionManager.getServiceDefinition(this.currentAttrs.config.url).then(f.hitch(this,
function(a){this.domNode&&(this.shelter.hide(),this.currentAttrs.chartTr.layerInfo=a,this.currentAttrs.layerInfo=this.currentAttrs.chartTr.layerInfo,c())}),f.hitch(this,function(a){console.error(a);if(this.domNode){this.shelter.hide();var b="";a&&403===a.httpCode&&(b=this.nls.noPermissionsMsg);this._showQueryErrorMsg(b)}})))}},_fromCurrentPageToChartList:function(){m.setStyle(this.chartList,"display","block");"block"===m.getStyle(this.chartParams,"display")?(this._slide(this.chartList,-100,0),this._slide(this.chartParams,
0,100)):"block"===m.getStyle(this.chartResults,"display")&&(this._slide(this.chartList,-100,0),this._slide(this.chartResults,0,100))},_onCbxUseSpatialClicked:function(){this.cbxUseSpatial.checked?m.setStyle(this.selectSpatialDiv,"display","block"):m.setStyle(this.selectSpatialDiv,"display","none");this.cbxUseMapExtent.checked?this._onCbxUseMapExtentClicked():this._onCbxDrawGraphicClicked();this._resetDrawBox()},_onCbxUseMapExtentClicked:function(){this.cbxUseMapExtent.checked&&(this._resetDrawBox(),
m.setStyle(this.drawBoxDiv,"display","none"))},_onCbxDrawGraphicClicked:function(){this.cbxDrawGraphic.checked&&m.setStyle(this.drawBoxDiv,"display","block")},_onBtnClearAllClicked:function(){0!==this.chartsTbody.childElementCount&&this._clickClearButton("none"!==this.chartList.style.display)},_resetDrawBox:function(){this.drawBox.deactivate();this.drawBox.clear()},_resetChartParamsPage:function(){this.cbxUseSpatial.setValue(!1);this._onCbxUseSpatialClicked();this._resetDrawBox()},_fromChartListToChartParams:function(){this._resetChartParamsPage();
var b=this.chartParams,c=this.chartResults;m.setStyle(this.chartList,{left:0,display:"block"});m.setStyle(b,{left:"100%",display:"block"});m.setStyle(c,"display","none");this._slide(this.chartList,0,-100);this._slide(b,100,0);a.focus(this.cbxUseSpatial.domNode)},_onBtnParamsBackClicked:function(){this._resetDrawBox();m.setStyle(this.chartList,"display","block");m.setStyle(this.chartParams,"display","block");m.setStyle(this.chartResults,"display","none");this._slide(this.chartList,-100,0);this._slide(this.chartParams,
0,100);a.focus(this.chartsNode)},_onBtnApplyClicked:function(){this._clearResultPage();var b=this.currentAttrs.config.filter.expr,c=null;if(this.cbxUseSpatial.checked){if(this.cbxUseMapExtent.checked)c=this.map.extent;else{var d=this.drawBox.drawLayer.graphics;0<d.length&&(c=d[0].geometry)}if(!c){new k({message:this.nls.specifySpatialFilterMsg});return}}this.tempResultLayer&&this.map.removeLayer(this.tempResultLayer);this.tempResultLayer=null;this._createChartResultLayer();this._resetDrawBox();m.setStyle(this.chartList,
"display","none");m.setStyle(this.chartParams,"display","block");m.setStyle(this.chartResults,"display","block");this._slide(this.chartParams,0,-100);this._slide(this.chartResults,100,0);a.focus(this.resultsContainer);var g=this.currentAttrs.config,d=[],h=g.mode;"feature"===h?(d=f.clone(g.valueFields),0>d.indexOf(g.labelField)&&d.push(g.labelField)):"category"===h?(d=f.clone(g.valueFields),0>d.indexOf(g.categoryField)&&d.push(g.categoryField)):"count"===h?d=[g.categoryField]:"field"===h&&(d=f.clone(g.valueFields));
this.shelter.show();var l=this._getPopupFieldInfo()||{};(h=this._getBaseExpression(this.currentAttrs.config.webMapLayerId))&&(b="("+h+") AND ("+b+")");this._query(b,d,c).then(f.hitch(this,function(a){if(this.domNode&&(this.shelter.hide(),0<a.status)){var b={featureLayer:this.tempResultLayer,features:a.features,config:g};this.previewArgs=b;this._updatePreviewHeight();this.preview.createClientCharts(b.featureLayer,b.features,b.config,l);e.forEach(a.features,f.hitch(this,function(a){var b=a.geometry;
b&&("point"===b.type?n.isVaildPointGeometry(b)&&this.tempResultLayer.add(a):this.tempResultLayer.add(a))}));this._zoomToLayer(this.tempResultLayer)}}),f.hitch(this,function(a){console.error(a);this.domNode&&(this.shelter.hide(),this._removeTempResultLayer())}))},_getBaseExpression:function(a){var b="";if(a){var c=null;(c="Table"===this.currentAttrs.layerInfo.type?this.layerInfosObj.getTableInfoById(a):this.layerInfosObj.getLayerInfoById(a))&&(b=c.getFilter())}return b},_updatePreviewHeight:function(){var a=
m.getContentBox(this.domNode);m.setStyle(this.preview.domNode,"height",Math.max(a.h-120,150)+"px")},_createChartResultLayer:function(){this._removeTempResultLayer();var a=f.clone(this.currentAttrs.layerInfo);a.drawingInfo||(a.drawingInfo={});a.drawingInfo.transparency=0;a.minScale=0;a.maxScale=0;a.effectiveMinScale=0;a.effectiveMaxScale=0;a.defaultVisibility=!0;delete a.extent;this.tempResultLayer=new v({layerDefinition:a,featureSet:null});this.map.addLayer(this.tempResultLayer);a=B.fromJson(this.currentAttrs.config.symbol);
a=new C(a);this.tempResultLayer.setRenderer(a)},_removeTempResultLayer:function(){this.tempResultLayer&&this.map.removeLayer(this.tempResultLayer);this.tempResultLayer=null},_query:function(a,b,c){a||(a="1\x3d1");var d={};d.url=this.currentAttrs.config.url;d.layerInfo=this.currentAttrs.layerInfo;d.limit=1E4;d.spatialReference=this.map.spatialReference;d.where=a;d.geometry=c;d.outFields=b;return(new u(d)).getFeatures()},_clearResultPage:function(){this.previewPopup&&(this.previewPopup.close(),this.previewPopup=
null);this.previewArgs=null;this.preview.clear();this._hideInfoWindow()},_zoomToLayer:function(a){var b;a.graphics&&0<a.graphics.length&&(b=a.graphics.filter(function(a){a=a.geometry;return"point"!==a.type?!0:n.isVaildPointGeometry(a)}.bind(this)));if(b&&0<b.length){a=n.toFeatureSet(b);try{n.zoomToFeatureSet(this.map,a)}catch(G){console.error(G)}}},_showQueryErrorMsg:function(a){new k({message:a||this.nls.queryError})},_hideInfoWindow:function(){},_onBtnResultsBackClicked:function(){var b;b=this.chartParams;
m.setStyle(this.chartList,"display","none");m.setStyle(b,{display:"block",left:"-100%"});this._slide(b,-100,0);this._slide(this.chartResults,0,100);a.focus(this.paramsContainer)}});q.extend(w);return q});