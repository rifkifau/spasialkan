// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See http://js.arcgis.com/3.15/esri/copyright.txt and http://www.arcgis.com/apps/webappbuilder/copyright.txt for details.
//>>built
require({cache:{"widgets/DistanceAndDirection/views/TabLine":function(){define("dojo/_base/declare dojo/_base/lang dojo/_base/kernel dojo/on dojo/topic dojo/has dojo/touch dojo/dom-class dojo/string dojo/mouse dojo/number dojo/keys dojo/dom-attr dijit/_WidgetBase dijit/_TemplatedMixin dijit/_WidgetsInTemplateMixin dijit/TooltipDialog dijit/popup jimu/dijit/Message jimu/LayerInfos/LayerInfos jimu/utils esri/layers/GraphicsLayer esri/layers/FeatureLayer esri/layers/LabelClass esri/tasks/FeatureSet esri/geometry/geometryEngine esri/geometry/Polyline esri/geometry/Circle esri/symbols/SimpleMarkerSymbol esri/symbols/TextSymbol esri/graphic ../models/LineFeedback ../models/ShapeModel ../views/CoordinateInput ../views/EditOutputCoordinate ../models/DirectionalLineSymbol dojo/text!../templates/TabLine.html dijit/focus dojo/_base/event dojo/aspect dijit/form/NumberTextBox jimu/dijit/formSelect jimu/dijit/CheckBox".split(" "),
function(p,c,g,d,b,k,l,e,h,n,w,f,a,t,y,r,q,m,A,x,u,I,Q,M,N,J,v,B,O,F,K,H,L,D,G,S,E,z,C,T){return p([t,y,r],{templateString:E,baseClass:"jimu-widget-TabLine",_restrictFocusOnAddStartPointBtn:!1,_restrictFocusOnEndStartPointBtn:!1,_startPointInputKeyPressed:!1,_endPointInputKeyPressed:!1,constructor:function(a){p.safeMixin(this,a)},postCreate:function(){this._endPointInputKeyPressed=this._startPointInputKeyPressed=this._restrictFocusOnEndStartPointBtn=this._restrictFocusOnAddStartPointBtn=!1;this.currentLengthUnit=
this.lengthUnitDD.get("value");this.currentAngleUnit=this.angleUnitDD.get("value");var a={directionSymbol:"arrow1",directionPixelBuffer:1E5,showStartSymbol:!0,showEndSymbol:!0},a=c.mixin(a,this.lineSymbol);this._lineSym=new S(a);this._ptSym=new O(this.pointSymbol);this._labelSym=new F(this.labelSymbol);this._tsGL=new I;this.map.addLayer(this._tsGL);this.map.addLayer(this.getLayer());if(this._gl.loaded)a=x.getInstanceSync().getLayerInfoById("Distance \x26 Direction - Line Graphics"),a.showLabels(),
a.enablePopup();else this._gl.on("load",c.hitch(this,function(){var a=x.getInstanceSync().getLayerInfoById("Distance \x26 Direction - Line Graphics");a.showLabels();a.enablePopup()}));this.coordToolStart=new D({appConfig:this.appConfig,nls:this.nls,"aria-label":this.nls.startPointLabel},this.startPointCoordsLine);this.coordToolStart.inputCoordinate.formatType="DD";this.coordToolEnd=new D({appConfig:this.appConfig,nls:this.nls,"aria-label":this.nls.endPointLabel},this.endPointCoordsLine);this.coordToolEnd.inputCoordinate.formatTyp=
"DD";this.coordinateFormatStart=new q({content:new G({nls:this.nls}),style:"width: 400px"});T.after(this.coordinateFormatStart,"onClose",c.hitch(this,function(){z.focus(this.coordinateFormatButtonStart);if(this._restrictFocusOnAddStartPointBtn){var a=this.coordToolStart.getValue();if(""===a||null===a||void 0===a)this._restrictFocusOnAddStartPointBtn=!1}}));"DartTheme"===this.appConfig.theme.name&&e.add(this.coordinateFormatStart.domNode,"dartThemeClaroDijitTooltipContainerOverride");this.coordinateFormatEnd=
new q({content:new G({nls:this.nls}),style:"width: 400px"});T.after(this.coordinateFormatEnd,"onClose",c.hitch(this,function(){z.focus(this.coordinateFormatButtonEnd);if(this._restrictFocusOnEndStartPointBtn){var a=this.coordToolEnd.getValue();if(""===a||null===a||void 0===a)this._restrictFocusOnEndStartPointBtn=!1}}));"DartTheme"===this.appConfig.theme.name&&e.add(this.coordinateFormatEnd.domNode,"dartThemeClaroDijitTooltipContainerOverride");this.dtStart=new H({appConfig:this.appConfig,map:this.map,
coordTool:this.coordToolStart.inputCoordinate.util,nls:this.nls});this.dtEnd=new H({appConfig:this.appConfig,map:this.map,coordTool:this.coordToolStart.inputCoordinate.util,nls:this.nls});this.dtStart.setLineSymbol(this._lineSym);this.lineTypeDDDidChange();this.syncEvents();this.lengthInput.invalidMessage=this.nls.numericInvalidMessage;this.lengthInput.rangeMessage=this.nls.lineLengthErrorMessage;this.angleInput.invalidMessage=this.nls.numericInvalidMessage;this.angleInput.rangeMessage=this.nls.orientationErrorMessage},
getLayer:function(){if(!this._gl){var a={labelExpressionInfo:{value:this.nls.lengthLabel+": {GeoLength}"}},a=new M(a);a.labelPlacement="above-along";a.where="GeoLength \x3e 0";a.symbol=this._labelSym.setOffset(0,10);a={labelExpressionInfo:{value:this.nls.angleLabel+": {LineAngle}"}};a=new M(a);a.labelPlacement="below-along";a.where="LineAngle \x3e 0";a.symbol=c.clone(this._labelSym).setOffset(0,-10);a={layerDefinition:{geometryType:"esriGeometryPolyline",objectIdField:"ObjectID",fields:[{name:"ObjectID",
alias:"ObjectID",type:"esriFieldTypeOID"},{name:"GeoLength",type:"esriFieldTypeString",alias:"Length"},{name:"LineAngle",type:"esriFieldTypeString",alias:"Angle"}]},featureSet:new N};this._gl=new Q(a,{id:"Distance \x26 Direction - Line Graphics",outFields:["*"],showLabels:!0});this.own(d(this._gl,"visibility-change",c.hitch(this,function(a){this._tsGL.setVisibility(a.visible)})));return this._gl}},syncEvents:function(){b.subscribe("TAB_SWITCHED",c.hitch(this,this.tabSwitched));b.subscribe("DD-WIDGET-CLOSED",
c.hitch(this,this._closeDijit));b.subscribe(H.drawnLineLengthDidChange,c.hitch(this,this.lineLengthDidChange));b.subscribe(H.drawnLineAngleDidChange,c.hitch(this,this.lineAngleDidChange));this.dtStart.watch("startPoint",c.hitch(this,function(a,b,f){this.dtStart.addStartGraphic(f,this._ptSym)}));this.dtStart.watch("startPointDD",c.hitch(this,function(a,b,f){this.coordToolStart.inputCoordinate.set("coordinateEsriGeometry",f);this.coordToolStart.inputCoordinate.set("inputType",this.coordToolStart.inputCoordinate.formatType)}));
this.dtStart.watch("endPointDD",c.hitch(this,function(a,b,f){this.coordToolEnd.inputCoordinate.set("coordinateEsriGeometry",f);this.coordToolEnd.inputCoordinate.set("inputType",this.coordToolEnd.inputCoordinate.formatType)}));this.dtStart.on("draw-complete",c.hitch(this,this.feedbackDidCompleteStart));this.coordToolStart.inputCoordinate.watch("outputString",c.hitch(this,function(a,b,f){this.coordToolStart.manualInput||(this.currentLine=null,this.coordToolStart.set("value",f),this._restrictFocusOnAddStartPointBtn?
this._restrictFocusOnAddStartPointBtn=!1:this._startPointInputKeyPressed?this._startPointInputKeyPressed=!1:z.focus(this.addPointBtnStart))}));this.coordToolStart.on("keydown",c.hitch(this,this.coordToolStartKeyWasPressed));this.dtEnd.watch("startPoint",c.hitch(this,function(a,b,f){this.dtEnd.addStartGraphic(f,this._ptSym)}));this.dtEnd.watch("endPoint",c.hitch(this,function(a,b,f){this.dtEnd.addStartGraphic(f,this._ptSym)}));this.dtEnd.watch("startPointDD",c.hitch(this,function(a,b,f){this.coordToolEnd.inputCoordinate.set("coordinateEsriGeometry",
f);this.coordToolEnd.inputCoordinate.set("inputType",this.coordToolEnd.inputCoordinate.formatType)}));this.dtEnd.watch("endPointDD",c.hitch(this,function(a,b,f){this.coordToolEnd.inputCoordinate.set("coordinateEsriGeometry",f);this.coordToolEnd.inputCoordinate.set("inputType",this.coordToolEnd.inputCoordinate.formatType)}));this.dtEnd.on("draw-complete",c.hitch(this,this.feedbackDidCompleteEnd));this.coordToolEnd.inputCoordinate.watch("outputString",c.hitch(this,function(a,b,f){this.coordToolEnd.manualInput||
(this.coordToolEnd.set("value",f),this.currentLine&&this.currentLine.graphic&&this.currentLine.graphic.attributes&&""===this.currentLine.graphic.attributes.EndPoint&&(this.currentLine.graphic.attributes.EndPoint=this.coordToolEnd.getValue()),this._restrictFocusOnEndStartPointBtn?this._restrictFocusOnEndStartPointBtn=!1:this._endPointInputKeyPressed?this._endPointInputKeyPressed=!1:z.focus(this.addPointBtnEnd))}));this.coordToolEnd.on("keydown",c.hitch(this,this.coordToolEndKeyWasPressed));this.lengthUnitDD.on("change",
c.hitch(this,this.lengthUnitDDDidChange));this.angleUnitDD.on("change",c.hitch(this,this.angleUnitDDDidChange));this.lineTypeDD.on("change",c.hitch(this,this.lineTypeDDDidChange));this.own(d(this.coordinateFormatButtonStart,"click",c.hitch(this,this.coordinateFormatButtonStartClicked)),d(this.coordinateFormatButtonStart,"keydown",c.hitch(this,function(a){if(a.keyCode===f.ENTER||a.keyCode===f.SPACE)C.stop(a),this.coordinateFormatButtonStartClicked()})),d(this.coordinateFormatStart.content.applyButton,
"click",c.hitch(this,function(){this._restrictFocusOnAddStartPointBtn=!0;var a=this.coordinateFormatStart.content.formats[this.coordinateFormatStart.content.ct],b=a.defaultFormat,f=this.coordinateFormatStart.content.frmtSelect.get("value");a.useCustom&&(b=a.customFormat);this.coordToolStart.inputCoordinate.set("formatPrefix",this.coordinateFormatStart.content.addSignChkBox.checked);this.coordToolStart.inputCoordinate.set("formatString",b);this.coordToolStart.inputCoordinate.set("formatType",f);this.setCoordLabelStart(f);
m.close(this.coordinateFormatStart);z.focus(this.coordinateFormatButtonStart)})),d(this.coordinateFormatStart.content.applyButton,"keydown",c.hitch(this,function(a){if(a.keyCode===f.ENTER||a.keyCode===f.SPACE){C.stop(a);this._restrictFocusOnAddStartPointBtn=!0;var b=this.coordinateFormatStart.content.formats[this.coordinateFormatStart.content.ct],e=b.defaultFormat,c=this.coordinateFormatStart.content.frmtSelect.get("value");b.useCustom&&(e=b.customFormat);this.coordToolStart.inputCoordinate.set("formatPrefix",
this.coordinateFormatStart.content.addSignChkBox.checked);this.coordToolStart.inputCoordinate.set("formatString",e);this.coordToolStart.inputCoordinate.set("formatType",c);this.setCoordLabelStart(c);m.close(this.coordinateFormatStart);z.focus(this.coordinateFormatButtonStart)}a.keyCode===f.ESCAPE&&(C.stop(a),m.close(this.coordinateFormatStart),z.focus(this.coordinateFormatButtonStart))})),d(this.coordinateFormatStart.content.cancelButton,"click",c.hitch(this,function(){m.close(this.coordinateFormatStart)})),
d(this.coordinateFormatStart.content.cancelButton,"keydown",c.hitch(this,function(a){if(a.keyCode===f.ENTER||a.keyCode===f.SPACE)C.stop(a),m.close(this.coordinateFormatStart),z.focus(this.coordinateFormatButtonStart);a.keyCode===f.ESCAPE&&(C.stop(a),m.close(this.coordinateFormatStart),z.focus(this.coordinateFormatButtonStart))})),d(this.coordinateFormatButtonEnd,"click",c.hitch(this,this.coordinateFormatButtonEndClicked)),d(this.coordinateFormatButtonEnd,"keydown",c.hitch(this,function(a){if(a.keyCode===
f.ENTER||a.keyCode===f.SPACE)C.stop(a),this.coordinateFormatButtonEndClicked()})),d(this.coordinateFormatEnd.content.applyButton,"click",c.hitch(this,function(){this._restrictFocusOnEndStartPointBtn=!0;var a=this.coordinateFormatEnd.content.formats[this.coordinateFormatEnd.content.ct],b=a.defaultFormat,f=this.coordinateFormatEnd.content.frmtSelect.get("value");a.useCustom&&(b=a.customFormat);this.coordToolEnd.inputCoordinate.set("formatPrefix",this.coordinateFormatEnd.content.addSignChkBox.checked);
this.coordToolEnd.inputCoordinate.set("formatString",b);this.coordToolEnd.inputCoordinate.set("formatType",f);this.setCoordLabelEnd(f);m.close(this.coordinateFormatEnd);z.focus(this.coordinateFormatButtonEnd)})),d(this.coordinateFormatEnd.content.applyButton,"keydown",c.hitch(this,function(a){if(a.keyCode===f.ENTER||a.keyCode===f.SPACE){C.stop(a);this._restrictFocusOnEndStartPointBtn=!0;var b=this.coordinateFormatEnd.content.formats[this.coordinateFormatEnd.content.ct],e=b.defaultFormat,c=this.coordinateFormatEnd.content.frmtSelect.get("value");
b.useCustom&&(e=b.customFormat);this.coordToolEnd.inputCoordinate.set("formatPrefix",this.coordinateFormatEnd.content.addSignChkBox.checked);this.coordToolEnd.inputCoordinate.set("formatString",e);this.coordToolEnd.inputCoordinate.set("formatType",c);this.setCoordLabelEnd(c);m.close(this.coordinateFormatEnd);z.focus(this.coordinateFormatButtonEnd)}a.keyCode===f.ESCAPE&&(C.stop(a),m.close(this.coordinateFormatEnd),z.focus(this.coordinateFormatButtonEnd))})),d(this.coordinateFormatEnd.content.cancelButton,
"click",c.hitch(this,function(){m.close(this.coordinateFormatEnd)})),d(this.coordinateFormatEnd.content.cancelButton,"keydown",c.hitch(this,function(a){if(a.keyCode===f.ENTER||a.keyCode===f.SPACE)C.stop(a),m.close(this.coordinateFormatEnd),z.focus(this.coordinateFormatButtonEnd);a.keyCode===f.ESCAPE&&(C.stop(a),m.close(this.coordinateFormatEnd),z.focus(this.coordinateFormatButtonEnd))})),d(this.addPointBtnStart,"keydown",c.hitch(this,function(a){if(a.keyCode===f.ENTER||a.keyCode===f.SPACE)C.stop(a),
this.addStartPointButtonClicked()})),d(this.addPointBtnEnd,"click",c.hitch(this,this.addEndPointButtonClicked)),d(this.addPointBtnEnd,"keydown",c.hitch(this,function(a){if(a.keyCode===f.ENTER||a.keyCode===f.SPACE)C.stop(a),this.addEndPointButtonClicked()})),d(this.interactiveLine,"change",c.hitch(this,this.interactiveCheckBoxChanged)),d(this.interactiveLine,"keydown",c.hitch(this,function(a){a.keyCode===f.ENTER&&(this.interactiveLine.checked=this.interactiveLine.checked?!1:!0,this.interactiveCheckBoxChanged())})),
d(this.okButton,"keydown",c.hitch(this,function(a){if(a.keyCode===f.ENTER||a.keyCode===f.SPACE)C.stop(a),this.okButtonClicked()})),d(this.clearGraphicsButton,"keydown",c.hitch(this,function(a){if(a.keyCode===f.ENTER||a.keyCode===f.SPACE)C.stop(a),this.clearGraphics()})),d(this.coordinateFormatStart.content.frmtSelect,"keydown",c.hitch(this,function(a){a.keyCode===f.ESCAPE&&(C.stop(a),m.close(this.coordinateFormatStart),z.focus(this.coordinateFormatButtonStart))})),d(this.coordinateFormatStart.content.frmtVal,
"keydown",c.hitch(this,function(a){a.keyCode===f.ESCAPE&&(C.stop(a),m.close(this.coordinateFormatStart),z.focus(this.coordinateFormatButtonStart))})),d(this.coordinateFormatStart.content.addSignChkBox,"keydown",c.hitch(this,function(a){a.keyCode===f.ESCAPE&&(C.stop(a),m.close(this.coordinateFormatStart),z.focus(this.coordinateFormatButtonStart));a.keyCode===f.ENTER&&(C.stop(a),this.coordinateFormatStart.content.addSignChkBox.checked=this.coordinateFormatStart.content.addSignChkBox.checked?!1:!0)})),
d(this.coordinateFormatEnd.content.frmtSelect,"keydown",c.hitch(this,function(a){a.keyCode===f.ESCAPE&&(C.stop(a),m.close(this.coordinateFormatEnd),z.focus(this.coordinateFormatButtonEnd))})),d(this.coordinateFormatEnd.content.frmtVal,"keydown",c.hitch(this,function(a){a.keyCode===f.ESCAPE&&(C.stop(a),m.close(this.coordinateFormatEnd),z.focus(this.coordinateFormatButtonEnd))})),d(this.coordinateFormatEnd.content.addSignChkBox,"keydown",c.hitch(this,function(a){a.keyCode===f.ESCAPE&&(C.stop(a),m.close(this.coordinateFormatEnd),
z.focus(this.coordinateFormatButtonEnd));a.keyCode===f.ENTER&&(C.stop(a),this.coordinateFormatEnd.content.addSignChkBox.checked=this.coordinateFormatEnd.content.addSignChkBox.checked?!1:!0)})),d(this.lengthInputDiv,n.leave,c.hitch(this,this.checkValidInputs)),d(this.angleInputDiv,n.leave,c.hitch(this,this.checkValidInputs)));k("esri-touch")?this.own(d(this.addPointBtnStart,l.press,c.hitch(this,this.addStartPointButtonClicked))):this.own(d(this.addPointBtnStart,"click",c.hitch(this,this.addStartPointButtonClicked)))},
lineLengthDidChange:function(a){a=w.format(a,{places:2,locale:g.locale});this.lengthInput.set("value",a)},lineAngleDidChange:function(a){a=w.format(a,{places:2,locale:g.locale});this.angleInput.set("value",a)},interactiveCheckBoxChanged:function(){this.tabSwitched();this.coordToolEnd.set("disabled",this.interactiveLine.checked);this.interactiveLine.checked?(e.add(this.addPointBtnEndDiv,"controlGroupHidden"),this.addPointBtnStart.title=this.nls.drawLineLabel,this.addPointBtnEnd.hidden=!0):(this.coordToolEnd.clear(),
this.addPointBtnStart.title=this.nls.addPointLabel,e.remove(this.addPointBtnEndDiv,"controlGroupHidden"),this.addPointBtnEnd.hidden=!1);this.checkValidInputs()},lineTypeDDDidChange:function(){"Points"===this.lineTypeDD.get("value")?(this.addPointBtnStart.title=this.nls.addPointLabel,this.coordToolEnd.set("disabled",!1),this.angleInput.set("disabled",!0),this.lengthInput.set("disabled",!0),this.interactiveLine.disabled=!1,e.remove(this.addPointBtnEndDiv,"controlGroupHidden"),e.remove(this.interactiveLabel,
"disabledLabel"),this.addPointBtnEnd.hidden=!1):(this.addPointBtnStart.title=this.nls.addPointLabel,this.interactiveLine.disabled=!0,this.interactiveLine.checked&&(this.interactiveLine.checked=!1),this.coordToolEnd.set("value",""),this.coordToolEnd.set("disabled",!0),this.angleInput.set("disabled",!1),this.lengthInput.set("disabled",!1),e.add(this.addPointBtnEndDiv,"controlGroupHidden"),e.add(this.interactiveLabel,"disabledLabel"),this.addPointBtnEnd.hidden=!0);this.checkValidInputs()},coordinateFormatButtonStartClicked:function(){this.coordinateFormatStart.content.set("ct",
this.coordToolStart.inputCoordinate.formatType);m.open({popup:this.coordinateFormatStart,around:this.coordinateFormatButtonStart});z.focus(this.coordinateFormatStart.content.frmtSelect.focusNode)},_closeDijit:function(){this.coordinateFormatStart&&this.coordinateFormatStart.domNode.offsetParent&&m.close(this.coordinateFormatStart);this.coordinateFormatEnd&&this.coordinateFormatEnd.domNode.offsetParent&&m.close(this.coordinateFormatEnd)},coordinateFormatButtonEndClicked:function(){this.coordinateFormatEnd.content.set("ct",
this.coordToolEnd.inputCoordinate.formatType);m.open({popup:this.coordinateFormatEnd,around:this.coordinateFormatButtonEnd});z.focus(this.coordinateFormatEnd.content.frmtSelect.focusNode)},coordToolStartKeyWasPressed:function(a){this.dtStart.removeStartGraphic();a.keyCode===f.ENTER&&(this._startPointInputKeyPressed=this._restrictFocusOnAddStartPointBtn=!0,this.currentLine=null,this.coordToolStart.inputCoordinate.getInputType().then(c.hitch(this,function(a){"UNKNOWN"===a.inputType?(new A({message:this.nls.invalidCoordinateTypeMessage}),
this.coordToolStart.inputCoordinate.coordinateEsriGeometry=null,this.checkValidInputs()):this.dtStart.getProjectedGeometry(a.coordinateEsriGeometry,this.map.spatialReference).then(c.hitch(this,c.hitch(this,function(b){this.dtStart.onLineStartManualInputHandler(b);this.setCoordLabelStart(a.inputType);this.coordToolStart.inputCoordinate.set("formatString",this.coordinateFormatStart.content.formats[a.inputType].defaultFormat);this.coordToolStart.inputCoordinate.set("formatType",a.inputType);this.dtStart.addStartGraphic(b,
this._ptSym);this.checkValidInputs()})))})))},coordToolEndKeyWasPressed:function(a){this.dtEnd.removeStartGraphic();a.keyCode===f.ENTER&&(this._endPointInputKeyPressed=this._restrictFocusOnEndStartPointBtn=!0,this.currentLine=null,this.coordToolEnd.inputCoordinate.getInputType().then(c.hitch(this,function(a){"UNKNOWN"===a.inputType?(new A({message:this.nls.invalidCoordinateTypeMessage}),this.coordToolEnd.inputCoordinate.coordinateEsriGeometry=null,this.checkValidInputs()):this.dtEnd.getProjectedGeometry(a.coordinateEsriGeometry,
this.map.spatialReference).then(c.hitch(this,c.hitch(this,function(b){this.dtEnd.onLineStartManualInputHandler(b);this.setCoordLabelEnd(a.inputType);this.coordToolEnd.inputCoordinate.set("formatString",this.coordinateFormatEnd.content.formats[a.inputType].defaultFormat);this.coordToolEnd.inputCoordinate.set("formatType",a.inputType);this.dtEnd.addStartGraphic(b,this._ptSym);this.checkValidInputs()})))})))},setCoordLabelStart:function(b){b=u.sanitizeHTML(h.substitute(this.nls.startPointLabel+" (${crdType})",
{crdType:b}));this.lineStartPointLabel.innerHTML=b;a.set(this.coordToolStart.textbox,"aria-label",b)},setCoordLabelEnd:function(b){b=u.sanitizeHTML(h.substitute(this.nls.endPointLabel+" (${crdType})",{crdType:b}));this.lineEndPointLabel.innerHTML=b;a.set(this.coordToolEnd.textbox,"aria-label",b)},checkValidInputs:function(){e.add(this.okButton,"jimu-state-disabled");a.set(this.okButton,"tabindex",-1);"DistAndBearing"===this.lineTypeDD.get("value")?null!==this.coordToolStart.inputCoordinate.coordinateEsriGeometry&&
this.lengthInput.isValid()&&this.angleInput.isValid()&&(e.remove(this.okButton,"jimu-state-disabled"),a.set(this.okButton,"tabindex",0)):null!==this.coordToolStart.inputCoordinate.coordinateEsriGeometry&&null!==this.coordToolEnd.inputCoordinate.coordinateEsriGeometry&&(e.remove(this.okButton,"jimu-state-disabled"),a.set(this.okButton,"tabindex",0));this.okButton.innerHTML=this.interactiveLine.checked?this.nls.publishDDBtn:this.nls.common.ok},addStartPointButtonClicked:function(){e.contains(this.addPointBtnStart,
"drawPointBtn-active")?(this.dtStart.deactivate(),this._setMapNavigation(!0)):(this.tabSwitched(),this.coordToolStart.manualInput=!1,this.coordToolEnd.manualInput=!1,this._setMapNavigation(!1),"Points"===this.lineTypeDD.get("value")&&this.interactiveLine.checked?this.dtStart.activate("polyline"):this.dtStart.activate("point"));e.toggle(this.addPointBtnStart,"drawPointBtn-active")},addEndPointButtonClicked:function(){e.contains(this.addPointBtnEnd,"drawPointBtn-active")?(this.dtEnd.deactivate(),this._setMapNavigation(!0)):
(this.tabSwitched(),this.coordToolStart.manualInput=!1,this.coordToolEnd.manualInput=!1,this._setMapNavigation(!1),this.dtEnd.activate("point"));e.toggle(this.addPointBtnEnd,"drawPointBtn-active")},lengthUnitDDDidChange:function(){this.currentLengthUnit=this.lengthUnitDD.get("value");this.dtStart.set("lengthUnit",this.currentLengthUnit)},angleUnitDDDidChange:function(){this.currentAngleUnit=this.angleUnitDD.get("value");this.dtStart.set("angleUnit",this.currentAngleUnit);"degrees"===this.currentAngleUnit?
(this.angleInput.constraints.max=360,this.angleInput.rangeMessage=this.nls.degreesRangeMessage):(this.angleInput.constraints.max=6400,this.angleInput.rangeMessage=this.nls.millsRangeMessage)},feedbackDidCompleteStart:function(a){if("polyline"===a.geometry.type){if(this.interactiveLine.checked&&(a=a.geometry.result),void 0!==this.lengthInput.get("value")||void 0!==this.angleInput.get("value")){this.currentLine=new L(a);var b=null,b=new v({paths:4326===this.map.spatialReference.wkid?this.currentLine.geographicGeometry.paths:
this.currentLine.geometry.paths,spatialReference:this.map.spatialReference});if(4326===this.map.spatialReference.wkid||102100===this.map.spatialReference.wkid)b=J.geodesicDensify(b,1E4);this.currentLine.graphic=new K(b,this._lineSym,{GeoLength:this.lengthInput.get("displayedValue").toString()+" "+this.lengthUnitDD.get("displayedValue"),LineAngle:this.angleInput.get("displayedValue").toString()+" "+this.angleUnitDD.get("displayedValue"),Distance:parseFloat(this.lengthInput.get("value")),Unit:this.currentLengthUnit,
Angle:parseFloat(this.angleInput.get("value")),StartPoint:this.coordToolStart.getValue(),EndPoint:this.coordToolEnd.getValue(),AngleUnit:this.angleUnitDD.get("value")});var f=a.geometry.getExtent().getCenter();a=J.nearestCoordinate(a.geometry,f);var f={lengthLabel:this.nls.lengthLabel,spacerLabel:" ",lengthInputValue:this.lengthInput.get("displayedValue").toString(),abbrevLengthLabel:this._getLengthAbbrevation(this.lengthUnitDD.get("value")),angleLabel:this.nls.angleLabel,angleValue:this.angleInput.get("displayedValue").toString(),
abbrevAngleLabel:this._getDegreeAbbreviation(this.angleUnitDD.get("value"))},m=h.substitute(window.isRTL?"${spacerLabel}${lengthInputValue}${spacerLabel}${abbrevLengthLabel}${spacerLabel}${lengthLabel}":"${lengthLabel}${spacerLabel}${lengthInputValue}${spacerLabel}${abbrevLengthLabel}",f);this._tsGL.add(new K(a.coordinate,c.clone(this._labelSym).setOffset(0,30).setText(m)));m=h.substitute(window.isRTL?"${spacerLabel}${angleValue}${spacerLabel}${abbrevAngleLabel}${spacerLabel}${angleLabel}":"${angleLabel}${spacerLabel}${angleValue}${spacerLabel}${abbrevAngleLabel}",
f);this._tsGL.add(new K(a.coordinate,c.clone(this._labelSym).setText(m)));this._gl.add(this.currentLine.graphic);this._gl.refresh();this.dtStart.removeStartGraphic();this.dtEnd.removeStartGraphic();b=b.getExtent().expand(3);this.map.setExtent(b);this.interactiveLine.checked&&e.toggle(this.addPointBtnStart,"drawPointBtn-active")}}else e.toggle(this.addPointBtnStart,"drawPointBtn-active");this.checkValidInputs();this._setMapNavigation(!0);this.dtStart.deactivate()},feedbackDidCompleteEnd:function(a){this.checkValidInputs();
this._setMapNavigation(!0);this.dtEnd.deactivate();e.toggle(this.addPointBtnEnd,"drawPointBtn-active");"Points"===this.lineTypeDD.get("value")&&!this.interactiveLine.checked&&this.coordToolStart.inputCoordinate.coordinateEsriGeometry&&this.coordToolEnd.inputCoordinate.coordinateEsriGeometry&&this.createManualGraphic()},createManualGraphic:function(a){var b,f=this.coordToolStart.inputCoordinate.coordinateEsriGeometry,e=this.coordToolEnd.inputCoordinate.coordinateEsriGeometry,m=new v(this.coordToolStart.inputCoordinate.coordinateEsriGeometry.spatialReference);
m.addPath([f,e]);b=J.geodesicLength(m,9001);this.dtStart.getProjectedGeometry(m,this.map.spatialReference).then(c.hitch(this,function(c){this.lengthInput.set("value",this.dtStart.coordTool.convertMetersToUnits(b,this.lengthUnitDD.get("value")));this.angleInput.set("value",this.dtStart.getAngle(f,e));this.map.setExtent(c.getExtent().expand(3));this.feedbackDidCompleteStart({geometry:c,geographicGeometry:m});this.dtStart.clearPoints();this.dtEnd.clearPoints();a&&this.emit("show-publish",this._gl)}))},
okButtonClicked:function(a){if(!e.contains(this.okButton,"jimu-state-disabled"))if(this._restrictFocusOnEndStartPointBtn=this._restrictFocusOnAddStartPointBtn=!0,this.currentLine)this.emit("show-publish",this._gl);else if("Points"===this.lineTypeDD.get("value"))this.createManualGraphic(!0);else{a=this.coordToolStart.inputCoordinate.coordinateEsriGeometry;var b=this.coordToolStart.inputCoordinate.util.convertToMeters(this.lengthInput.get("value"),this.lengthUnitDD.get("value")),b=new B(a,{geodesic:!0,
radius:b,numberOfPoints:64E3}),f=this.angleInput.get("value"),f="degrees"===this.currentAngleUnit?parseInt(177.77777778*f,10):parseInt(10*f,10),b=b.getPoint(0,f),m=new v;m.addPath([a,b]);this.dtStart.getProjectedGeometry(m,this.map.spatialReference).then(c.hitch(this,function(a){this.feedbackDidCompleteStart({geometry:a,geographicGeometry:m});this.emit("show-publish",this._gl)}));this.coordToolEnd.inputCoordinate.set("coordinateEsriGeometry",b)}},clearGraphics:function(){this._gl&&(this._gl.clear(),
this._tsGL.clear(),this.dtStart.removeStartGraphic(),this.dtEnd.removeStartGraphic(),this.coordToolStart.clear(),this.coordToolEnd.clear(),this.tabSwitched());this.currentLine=null;this.checkValidInputs();for(var a=0;a<this.map.graphicsLayerIds.length;a++)this.map.getLayer(this.map.graphicsLayerIds[a]).refresh()},setGraphicsHidden:function(){this._gl&&this._gl.hide()},setGraphicsShown:function(){this._gl&&this._gl.show()},tabSwitched:function(){this.dtStart.deactivate();this.dtEnd.deactivate();this._setMapNavigation(!0);
this.addPointBtnStart&&e.remove(this.addPointBtnStart,"drawPointBtn-active");this.addPointBtnEnd&&e.remove(this.addPointBtnEnd,"drawPointBtn-active");m.close(this.coordinateFormat)},_setMapNavigation:function(a){a?this.map.enableMapNavigation():(this.map.disableMapNavigation(),this.map.enableScrollWheelZoom())},_getLengthAbbrevation:function(a){var b=null;if(a)switch(a){case "feet":b=this.nls.abbrevFeetLabel;break;case "kilometers":b=this.nls.abbrevKmLabel;break;case "miles":b=this.nls.abbrevMilesLabel;
break;case "meters":b=this.nls.abbrevMetersLabel;break;case "nautical-miles":b=this.nls.abbrevNauticalMilesLabel;break;case "yards":b=this.nls.abbrevYardsLabel;break;default:b=a}return b},_getDegreeAbbreviation:function(a){var b=null;if(a)switch(a){case "degrees":b=this.nls.abbrevDegreesLabel;break;case "mils":b=this.nls.abbrevMilsLabel;break;default:b=a}return b},setFirstFocusNode:function(){u.initFirstFocusNode(this.domNodeObj,this.lineTypeDD.focusNode)},focusFirstNodeOfSelectedTab:function(){z.focus(this.lineTypeDD.focusNode)},
setLastFocusNode:function(){u.initLastFocusNode(this.domNodeObj,this.clearGraphicsButton)}})})},"esri/geometry/Circle":function(){define("dojo/_base/declare dojo/_base/lang dojo/has ../kernel ./Point ./Polygon ./geodesicUtils ./webMercatorUtils ../WKIDUnitConversion ../units".split(" "),function(p,c,g,d,b,k,l,e,h,n){p=p(k,{declaredClass:"esri.geometry.Circle",_unitToMeters:{esriCentimeters:.01,esriDecimeters:.1,esriFeet:.3048,esriInches:.0254,esriKilometers:1E3,esriMeters:1,esriMiles:1609.344,esriMillimeters:.001,
esriNauticalMiles:1852,esriYards:.9144,esriDecimalDegrees:111320},constructor:function(e,f){e.center?f=e:(f=f||{},f.center=e);this.center=c.isArray(f.center)?new b(f.center[0],f.center[1]):f.center;this.radius=f.radius||1E3;this.radiusUnit=f.radiusUnit||n.METERS;this.geodesic=!0===f.geodesic?!0:!1;this.numberOfPoints=f.numberOfPoints||60;this._init()},toJson:function(){return this.inherited(arguments)},_init:function(){this.rings=[];this._ring=0;var b=this.radius*this._unitToMeters[this.radiusUnit],
f=this._srType(this.center.spatialReference);if(this.geodesic){var a;switch(f){case "webMercator":a=e.webMercatorToGeographic(this.center);break;case "projected":console.error("Creating a geodesic circle requires the center to be specified in web mercator or geographic coordinate system");break;case "geographic":a=this.center}b=this._createGeodesicCircle(a,b,this.numberOfPoints,a.spatialReference);"webMercator"===f&&(b=e.geographicToWebMercator(b))}else{var c;"webMercator"===f||"projected"===f?c=
b/this._convert2Meters(1,this.center.spatialReference):"geographic"===f&&(c=b/this._unitToMeters.esriDecimalDegrees);b=this._createPlanarCircle(this.center,c,this.numberOfPoints)}this.spatialReference=b.spatialReference;this.addRing(b.rings[0]);this.verifySR()},_createGeodesicCircle:function(b,f,a,e){for(var c=0,d=Math.PI/180,h=[],m;c<2*Math.PI;)m=l._directGeodeticSolver(b.y*d,b.x*d,c,f,e),h.push([m.x,m.y]),c+=Math.PI/(a/2);h.push(h[0]);return new k(h)},_createPlanarCircle:function(b,f,a){for(var c=
0,e=[],d,l;c<2*Math.PI;)d=b.x+Math.cos(c)*f,l=b.y+Math.sin(c)*f,e.push([d,l]),c+=Math.PI/(a/2);e.push(e[0]);b=new k(b.spatialReference);b.addRing(e);return b},_srType:function(b){return b.isWebMercator()?"webMercator":null!=h[b.wkid]||b.wkt&&0===b.wkt.indexOf("PROJCS")?"projected":"geographic"},_convert2Meters:function(b,f){if(null!=h[f.wkid])f=h.values[h[f.wkid]];else{f=f.wkt;var a=f.lastIndexOf(",")+1,c=f.lastIndexOf("]]");f=parseFloat(f.substring(a,c))}return b*f}});g("extend-esri")&&c.setObject("geometry.Circle",
p,d);return p})},"widgets/DistanceAndDirection/models/LineFeedback":function(){define("dojo/_base/declare dojo/_base/lang dojo/_base/connect dojo/has dojo/topic esri/toolbars/draw esri/graphic esri/geometry/Polyline esri/geometry/geometryEngine jimu/utils ./Feedback".split(" "),function(p,c,g,d,b,k,l,e,h,n,w){w=p([w],{constructor:function(b){p.safeMixin(this,b);this.syncEvents();this.initGeometryService()},syncEvents:function(){b.subscribe("manual-startpoint-input",c.hitch(this,this.onLineStartManualInputHandler));
b.subscribe("manual-line-end-point-input",c.hitch(this,this.onLineEndManualInputHandler));b.subscribe("clear-points",c.hitch(this,this.clearPoints))},clearPoints:function(b){b&&(this._points=[],this.map.graphics.clear())},onLineStartManualInputHandler:function(b){this._points=[];this._points.push(b.offset(0,0));this.set("startPoint",this._points[0]);this.map.centerAt(b)},onLineEndManualInputHandler:function(b){this._points.push(b.offset(0,0));this.set("endPoint",this._points[1])},getAngle:function(b,
a){var f=null,f=(180*Math.atan2(a.x-b.x,a.y-b.y)/Math.PI+360)%360;"mils"===this.angleUnit&&(f*=17.777777778);return f.toFixed(2)},_onClickHandler:function(b){var a;this.map.snappingManager&&(a=this.map.snappingManager._snappingPoint);var f=a||b.mapPoint,d=this.map,h,q;this._processAfterMapClick(f).then(c.hitch(this,function(a){this._points.push(f);switch(this._geometryType){case k.POINT:this.set("startPointDD",a);this.set("startPoint",this._points[0]);this._drawEnd(f);this._setTooltipMessage(0);break;
case k.POLYLINE:if(2===this._points.length){this.set("endPoint",this._points[1]);this.set("endPointDD",a);this._onDblClickHandler();return}1===this._points.length?(this.set("startPoint",this._points[0]),this.set("startPointDD",a),a=new e(d.spatialReference),a.addPath(this._points),this._graphic=d.graphics.add(new l(a,this.lineSymbol),!0),d.snappingManager&&d.snappingManager._setGraphic(this._graphic),this.canProjectLocally&&(this._onMouseMoveHandler_connect=g.connect(d,"onMouseMove",this._onMouseMoveHandler)),
this._tGraphic=d.graphics.add(new l(new e({paths:[[[f.x,f.y],[f.x,f.y]]],spatialReference:d.spatialReference}),this.lineSymbol),!0)):(this.set("endPoint",this._points[1]),this.set("endPointDD",a),this._graphic.geometry._insertPoints([f],0),this._graphic.setGeometry(this._graphic.geometry).setSymbol(this.lineSymbol),h=this._tGraphic,q=h.geometry,q.setPoint(0,0,f),q.setPoint(0,1,f),h.setGeometry(q))}this._setTooltipMessage(this._points.length);1===this._points.length&&"polyline"===this._geometryType&&
(a=this._tooltip)&&(a.innerHTML=n.sanitizeHTML(this.nls.clickToFinishLineMessage))}))},_onDblClickHandler:function(f){var a;a=this._points;var c=this.map.spatialReference;d("esri-touch")&&f&&a.push(f.mapPoint);f=new e({paths:[[[a[0].x,a[0].y],[a[1].x,a[1].y]]],spatialReference:c});a=new e({paths:[[[this.startPointDD.x,this.startPointDD.y],[this.endPointDD.x,this.endPointDD.y]]],spatialReference:this.startPointDD.spatialReference});a.geodesicLength=h.geodesicLength(a,9001);this._onMouseMoveHandler_connect&&
g.disconnect(this._onMouseMoveHandler_connect);var c=this.coordTool.convertMetersToUnits(a.geodesicLength,this.lengthUnit),l=this.getAngle(this.startPointDD,this.endPointDD);b.publish("DD_LINE_LENGTH_DID_CHANGE",c);b.publish("DD_LINE_ANGLE_DID_CHANGE",l);this._clear();this._setTooltipMessage(0);a={geometry:f,geographicGeometry:a};f=new e(f.toJson());f.result=a;this._drawEnd(f)},_onMouseMoveHandler:function(f){var a;this.map.snappingManager&&(a=this.map.snappingManager._snappingPoint);var c=this._geometryType===
k.POLYLINE?this._points[0]:this._points[this._points.length-1];f=a||f.mapPoint;var e=this._tGraphic.geometry;e.setPoint(0,0,{x:c.x,y:c.y});e.setPoint(0,1,{x:f.x,y:f.y});a=h.geodesicDensify(e,10001);e=h.geodesicLength(e,9001);this._graphic.setGeometry(a);a=this.coordTool.convertMetersToUnits(e,this.lengthUnit);c=this.getAngle(c,f);b.publish("DD_LINE_LENGTH_DID_CHANGE",a);b.publish("DD_LINE_ANGLE_DID_CHANGE",c)}});w.drawnLineLengthDidChange="DD_LINE_LENGTH_DID_CHANGE";w.drawnLineAngleDidChange="DD_LINE_ANGLE_DID_CHANGE";
return w})},"widgets/DistanceAndDirection/models/Feedback":function(){define("dojo/_base/declare dojo/Stateful dojo/_base/lang dojo/Deferred esri/toolbars/draw esri/geometry/Point esri/graphic esri/geometry/geometryEngineAsync esri/units esri/tasks/GeometryService esri/SpatialReference esri/request esri/tasks/ProjectParameters esri/geometry/webMercatorUtils".split(" "),function(p,c,g,d,b,k,l,e,h,n,w,f,a,t){return p([b,c],{startPoint:null,_setStartPoint:function(a){this._set("startPoint",a)},endPoint:null,
_setEndPoint:function(a){this._set("endPoint",a)},lengthUnit:"meters",_setLengthUnit:function(a){this._set("lengthUnit",a)},angleUnit:"degrees",_setAngle:function(a){this._set("angleUnit",a)},isDiameter:!0,canProjectLocally:!1,constructor:function(){e.isSimple(new k({x:-122.65,y:45.53,spatialReference:{wkid:4326}}))},initGeometryService:function(){var a=this.appConfig.geometryService;a||(a="//utility.arcgisonline.com/arcgis/rest/services/Geometry/GeometryServer");this.geomService=new n(a);a=new k({x:0,
y:0,spatialReference:this.map.spatialReference});t.canProject(a,new w(3857))&&(this.canProjectLocally=!0)},getRadiusUnitType:function(){var a=h.METERS;switch(this.lengthUnit){case "meters":a=h.METERS;break;case "feet":a=h.FEET;break;case "kilometers":a=h.KILOMETERS;break;case "miles":a=h.MILES;break;case "nautical-miles":a=h.NAUTICAL_MILES;break;case "yards":a=h.YARDS}return a},addStartGraphic:function(a,b){this.removeStartGraphic();this.startGraphic=new l(a,b);this.map.graphics.add(this.startGraphic)},
removeStartGraphic:function(){this.startGraphic&&this.map.graphics.remove(this.startGraphic);this.startGraphic=null},_processAfterMapClick:function(a){var b=new d;4326!==a.spatialReference.wkid?this.getDDPoint(a).then(g.hitch(this,function(a){b.resolve(a)}),function(a){b.reject(a)}):b.resolve(a);return b},getDDPoint:function(a){var b=new d,c=new w(3857);t.canProject(a,c)?b.resolve(t.webMercatorToGeographic(t.project(a,c))):(new f({url:this.geomService.url+"/findTransformations",content:{f:"json",
inSR:a.spatialReference.wkid,outSR:4326},handleAs:"json",callbackParamName:"callback"},{usePost:!1})).then(g.hitch(this,function(f){f=f&&f.transformations?f.transformations:void 0;this.projectPointForDD(b,a,4326,f&&0<f.length?f[0].wkid:void 0)}),g.hitch(this,function(){this.projectPointForDD(b,a,4326,null)}));return b},projectPointForDD:function(b,f,c,e){var d=new a;d.outSR=new w(c);d.geometries=[f];e&&(d.transformForward=!0,d.transformation=e);this.geomService.project(d,g.hitch(this,function(a){b.resolve(a[0])}),
function(a){b.reject(a)})},getProjectedGeometry:function(a,b){var f,c;f=new d;t.canProject(a,b)?(c=t.project(a,b),f.resolve(c)):this.geomService.project([a],b,function(a){c=a[0];f.resolve(c)});return f.promise}})})},"esri/geometry/geometryEngineAsync":function(){define("require exports esri/kernel module esri/geometry/Geometry esri/geometry/Polygon esri/geometry/Polyline esri/geometry/Point esri/geometry/Extent esri/geometry/Multipoint esri/workers/WorkerClient esri/arcade/polyfill/promiseUtils".split(" "),
function(p,c,g,d,b,k,l,e,h,n,w,f){function a(a){if(void 0===e.fromJson){if(void 0!==a.x&&void 0!==a.y)return new e(a);if(void 0!==a.paths)return new l(a);if(void 0!==a.rings)return new k(a);if(void 0!==a.points)return new n(a);if(void 0!==a.xmin&&void 0!==a.ymin&&void 0!==a.xmax&&void 0!==a.ymax)return new h(a)}else{if(void 0!==a.x&&void 0!==a.y)return e.fromJson(a);if(void 0!==a.paths)return l.fromJson(a);if(void 0!==a.rings)return k.fromJson(a);if(void 0!==a.points)return n.fromJson(a);if(void 0!==
a.xmin&&void 0!==a.ymin&&void 0!==a.xmax&&void 0!==a.ymax)return h.fromJson(a)}}function t(a,b){var f;if(null==a||void 0===a||"number"===typeof a)return a;var c=a.toString();if(""===c)return null;if(2==b){if(f=M[c],void 0!==f)return f}else if(0==b){f=Q[c];if(void 0!==f)return f;f=N[a];if(void 0!==f)return f}else if(3==b&&(f=Q[c],void 0!==f))return f;if(1==b&&(f=N[a],void 0!==f))return f;if(!0===/^\d+$/.test(c))return parseInt(c);throw Error("Unrecognised Unit Type");}function y(a){if(void 0!==a&&
null!==a)switch(a){case "loxodrome":return 1;case "great-elliptic":return 2;case "normal-section":return 3;case "shape-preserving":return 4}return 0}function r(a){if(null===a||void 0===a)return null;if(u)switch(a.type){case "point":return{x:a.x,y:a.y,z:a.z,m:a.m};case "multipoint":return{points:a.points,hasZ:a.hasZ,hasM:a.hasM};case "polyline":return{paths:a.paths,hasZ:a.hasZ,hasM:a.hasM};case "polygon":return{rings:a.rings,hasZ:a.hasZ,hasM:a.hasM};case "extent":return{xmin:a.xmin,ymin:a.ymin,xmax:a.xmax,
ymax:a.ymax,zmin:a.zmin,zmax:a.zmax,mmin:a.mmin,mmax:a.mmax}}else switch(a.type){case "point":return{x:a.x,y:a.y};case "multipoint":return{points:a.points};case "polyline":return{paths:a.paths};case "polygon":return{rings:a.rings};case "extent":return{xmin:a.xmin,ymin:a.ymin,xmax:a.xmax,ymax:a.ymax}}return null}function q(b,f){if(null===b)return null;b=a(b);u?b.set("spatialReference",f):b.setSpatialReference(f);return b}function m(a){return null==a||void 0===a?null:-1!=a.wkid&&null!==a.wkid&&void 0!==
a.wkid?{wkid:a.wkid}:""!==a.wkt&&void 0!==a.wkt&&null!==a.wkt?{wkt:a.wkt}:null}function A(a,b,c){return f.create(function(f,e){var d=b.spatialReference;v.a({action:a,geoma:r(b),geomb:r(c),spatialReference:m(b.spatialReference)}).then(function(a){0===a.status?e(Error(a.error.message)):f(q(a.result,d))},function(a){e(a)})})}function x(a,b,c){return f.create(function(f,e){v.a({action:a,geoma:r(b),geomb:r(c),spatialReference:m(b.spatialReference)}).then(function(a){0===a.status?e(Error(a.error.message)):
f(a.result)},function(a){e(a)})})}var u=0==g.version.indexOf("4."),I;(function(a){a[a.Linear=0]="Linear";a[a.Angular=1]="Angular";a[a.Area=2]="Area";a[a.LinearOrAngular=3]="LinearOrAngular"})(I||(I={}));var Q={feet:9002,kilometers:9036,meters:9001,miles:9035,"nautical-miles":9030,yards:9096},M={acres:109402,ares:109463,hectares:109401,"square-feet":109405,"square-kilometers":109414,"square-meters":109404,"square-miles":109413,"square-yards":109442},N={degrees:9102,radians:9101},J=function(){function a(){this.c=
!0;this.i=null}a.prototype.A=function(a){var b=this;this.i=new w;this.i.setWorker(this.l(),function(){b.c=!1;a()})};a.prototype.l=function(){return p.B?p.B("./geometryenginewebworker"):d.id.replace(/\/[^\/]*$/ig,"/")+"./geometryenginewebworker"};return a}(),v=function(){function a(){}a.a=function(b){return f.create(function(f,c){a.h.push({task:b,d:{resolve:f,reject:c}});a.f()})};a.f=function(){if(0<a.h.length){for(var b=null,f=0;f<a.b.length;f++)if(!1===a.b[f].c){b=a.b[f];break}null===b&&a.b.length<
a.g&&(f=new J,a.b.push(f),f.A(function(){a.f()}));if(null!==b){var c=this.h.shift();b.c=!0;b.i.postMessage(c.task).then(function(f){b.c=!1;try{c.d.resolve(f)}catch(L){}a.f()},function(f){b.c=!1;try{c.d.reject(f)}catch(L){}a.f()})}}};a.b=[];a.h=[];a.g=4;return a}();return function(){function a(){}a._removeAllWorkers=function(){v.b=[]};a._setMaxWorkers=function(b){a._removeAllWorkers();v.g=b};a._getMaxWorkers=function(){return v.g};a._getNumWorkers=function(){return v.b.length};a.extendedSpatialReferenceInfo=
function(a){return f.create(function(b,f){v.a({action:"extendedspatialreferenceinfo",spatialReference:m(a)}).then(function(a){0===a.status?f(Error(a.error.message)):b(a.result)},function(a){f(a)})})};a.equals=function(a,b){return null===a&&null!==b||null===b&&null!==a?!1:x("equals",a,b)};a.intersects=function(a,b){if(null===a||null===b)throw Error("Illegal Argument Exception");return x("intersects",a,b)};a.touches=function(a,b){if(null===a||null===b)throw Error("Illegal Argument Exception");return x("touches",
a,b)};a.within=function(a,b){if(null===a||null===b)throw Error("Illegal Argument Exception");return x("within",a,b)};a.disjoint=function(a,b){if(null===a||null===b)throw Error("Illegal Argument Exception");return x("disjoint",a,b)};a.overlaps=function(a,b){if(null===a||null===b)throw Error("Illegal Argument Exception");return x("overlaps",a,b)};a.crosses=function(a,b){if(null===a||null===b)throw Error("Illegal Argument Exception");return x("crosses",a,b)};a.contains=function(a,b){if(null===a||null===
b)throw Error("Illegal Argument Exception");return x("contains",a,b)};a.isSimple=function(a){return x("issimple",a,null)};a.clip=function(a,b){return A("clip",a,b)};a.simplify=function(a){return f.create(function(b,f){var c=a.spatialReference;v.a({action:"simplify",geoma:r(a),spatialReference:m(a.spatialReference)}).then(function(a){0===a.status?f(Error(a.error.message)):b(q(a.result,c))},function(a){f(a)})})};a.rotate=function(a,b,c){return f.create(function(f,e){var d=a.spatialReference;if(void 0===
c||null===c)switch(a.type){case "point":c=a;break;case "extent":c=u?a.get("center"):a.getCenter();break;default:c=u?a.get("extent").get("center"):a.getExtent().getCenter()}v.a({action:"rotate",geoma:r(a),spatialReference:m(a.spatialReference),angle:b,rotpt:r(c)}).then(function(a){0===a.status?e(Error(a.error.message)):f(q(a.result,d))},function(a){e(a)})})};a.flipHorizontal=function(a,b){return f.create(function(f,c){var e=a.spatialReference;if(void 0===b||null===b)switch(a.type){case "point":b=a;
break;case "extent":b=u?a.get("center"):a.getCenter();break;default:b=u?a.get("extent").get("center"):a.getExtent().getCenter()}v.a({action:"fliph",geoma:r(a),spatialReference:m(a.spatialReference),flippt:r(b)}).then(function(a){0===a.status?c(Error(a.error.message)):f(q(a.result,e))},function(a){c(a)})})};a.flipVertical=function(a,b){return f.create(function(f,c){var e=a.spatialReference;if(void 0===b||null===b)switch(a.type){case "point":b=a;break;case "extent":b=u?a.get("center"):a.getCenter();
break;default:b=u?a.get("extent").get("center"):a.getExtent().getCenter()}v.a({action:"flipv",geoma:r(a),spatialReference:m(a.spatialReference),flippt:r(b)}).then(function(a){0===a.status?c(Error(a.error.message)):f(q(a.result,e))},function(a){c(a)})})};a.distance=function(a,b,c){return f.create(function(f,e){v.a({action:"distance",geoma:r(a),geomb:r(b),spatialReference:m(a.spatialReference),distanceunits:t(c,3)}).then(function(a){0===a.status?e(Error(a.error.message)):f(a.result)},function(a){e(a)})})};
a.relate=function(a,b,c){return f.create(function(f,e){v.a({action:"relate",geoma:r(a),geomb:r(b),relation:c,spatialReference:m(a.spatialReference)}).then(function(a){0===a.status?e(Error(a.error.message)):f(a.result)},function(a){e(a)})})};a.nearestCoordinate=function(a,b,c){return f.create(function(f,e){var d=a.spatialReference;v.a({action:"nearestcoord",geoma:r(a),geomb:r(b),spatialReference:m(a.spatialReference),testinterior:void 0===c?!0:c}).then(function(a){0===a.status?e(Error(a.error.message)):
(a.result.coordinate=q(a.result.coordinate,d),f(a.result))},function(a){e(a)})})};a.nearestVertex=function(a,b){return f.create(function(f,c){var e=a.spatialReference;v.a({action:"nearestvertex",geoma:r(a),geomb:r(b),spatialReference:m(a.spatialReference)}).then(function(a){0===a.status?c(Error(a.error.message)):(a.result.coordinate=q(a.result.coordinate,e),f(a.result))},function(a){c(a)})})};a.nearestVertices=function(a,b,c,e){return f.create(function(f,d){var l=a.spatialReference;v.a({action:"nearestvertices",
geoma:r(a),geomb:r(b),spatialReference:m(a.spatialReference),searchradius:c,maxreturn:e}).then(function(a){if(0===a.status)d(Error(a.error.message));else{for(var b=0;b<a.result.length;b++)a.result[b].coordinate=q(a.result[b].coordinate,l);f(a.result)}},function(a){d(a)})})};a.cut=function(a,b){return f.create(function(f,c){var e=a.spatialReference;v.a({action:"cut",geoma:r(a),geomb:r(b),spatialReference:m(a.spatialReference)}).then(function(a){if(0===a.status)c(Error(a.error.message));else{for(var b=
0;b<a.result.length;b++)a.result[b]=q(a.result[b],e);f(a.result)}},function(a){c(a)})})};a.generalize=function(a,b,c,e){return f.create(function(f,d){var l=a.spatialReference;v.a({action:"generalize",geoma:r(a),maxdeviation:b,removedegenerateparts:c,maxdeviationunit:t(e,3),spatialReference:m(a.spatialReference)}).then(function(a){0===a.status?d(Error(a.error.message)):f(q(a.result,l))},function(a){d(a)})})};a.densify=function(a,b,c){return f.create(function(f,e){var d=a.spatialReference;v.a({action:"densify",
geoma:r(a),maxsegmentlength:b,maxsegmentlengthunit:t(c,3),spatialReference:m(a.spatialReference)}).then(function(a){0===a.status?e(Error(a.error.message)):f(q(a.result,d))},function(a){e(a)})})};a.geodesicDensify=function(a,b,c,e){void 0===e&&(e=0);return f.create(function(f,d){var l=a.spatialReference;v.a({action:"geodensify",geoma:r(a),maxsegmentlength:b,maxsegmentlengthunit:t(c,3),spatialReference:m(a.spatialReference),curveType:e}).then(function(a){0===a.status?d(Error(a.error.message)):f(q(a.result,
l))},function(a){d(a)})})};a.intersect=function(f,c){return f instanceof b?A("intersect",f,c):a.u(f,c)};a.u=function(a,b){return f.create(function(f,c){for(var e=[],d=0;d<a.length;d++)e.push(r(a[d]));var l=b.spatialReference;v.a({action:"intersectmany",geom:r(b),geometries:e,spatialReference:m(b.spatialReference)}).then(function(a){if(0===a.status)c(Error(a.error.message));else{for(var b=0;b<a.result.length;b++)a.result[b]=q(a.result[b],l);f(a.result)}},function(a){c(a)})})};a.difference=function(f,
c){return f instanceof b?A("difference",f,c):a.s(f,c)};a.s=function(a,b){return f.create(function(f,c){for(var e=[],d=0;d<a.length;d++)e.push(r(a[d]));var l=b.spatialReference;v.a({action:"differencemany",geom:r(b),geometries:e,spatialReference:m(b.spatialReference)}).then(function(a){if(0===a.status)c(Error(a.error.message));else{for(var b=0;b<a.result.length;b++)a.result[b]=q(a.result[b],l);f(a.result)}},function(a){c(a)})})};a.symmetricDifference=function(f,c){return f instanceof b?A("symdifference",
f,c):a.w(f,c)};a.w=function(a,b){return f.create(function(f,c){for(var e=[],d=0;d<a.length;d++)e.push(r(a[d]));var l=b.spatialReference;v.a({action:"symdifferencemany",geom:r(b),geometries:e,spatialReference:m(b.spatialReference)}).then(function(a){if(0===a.status)c(Error(a.error.message));else{for(var b=0;b<a.result.length;b++)a.result[b]=q(a.result[b],l);f(a.result)}},function(a){c(a)})})};a.union=function(a,c){void 0===c&&(c=null);return f.create(function(f,e){var d=[];if(null===a)f(null);else if(a instanceof
b&&(a=[a],null!==c&&a.push(c)),0===a.length)f(null);else{for(var l=0;l<a.length;l++)d.push(r(a[l]));var h=a[0].spatialReference;v.a({action:"unionmany",geometries:d,spatialReference:m(h)}).then(function(a){0===a.status?e(Error(a.error.message)):f(q(a.result,h))},function(a){e(a)})}})};a.buffer=function(c,e,d,l){void 0===l&&(l=!1);if(c instanceof b)return f.create(function(a,b){var f=c.spatialReference;v.a({action:"buffer",geoma:r(c),spatialReference:m(c.spatialReference),distance:e,unit:t(d,3),geodesic:!1,
geodesicmaxdeviation:NaN,geodesiccurvetype:0}).then(function(c){0===c.status?b(Error(c.error.message)):a(q(c.result,f))},function(a){b(a)})});if("[object Array]"!==Object.prototype.toString.call(e)){for(var h=[],k=0;k<c.length;k++)h.push(e);e=h}if(e.length!=c.length){if(0==e.length)throw Error("Illegal Argument Exception");for(var h=[],n=0,k=0;k<c.length;k++)void 0===e[k]?h.push(n):(h.push(e[k]),n=e[k]);e=h}return a.j(c,e,d,!1,l,"geodesic",NaN)};a.geodesicBuffer=function(c,e,d,l,h,k){if(c instanceof
b)return f.create(function(a,b){void 0===h&&(h=NaN);var f=c.spatialReference;v.a({action:"buffer",geoma:r(c),spatialReference:m(c.spatialReference),distance:e,unit:t(d,0),geodesic:!0,geodesicmaxdeviation:h,geodesiccurvetype:y(l)}).then(function(c){0===c.status?b(Error(c.error.message)):a(q(c.result,f))},function(a){b(a)})});if("[object Array]"!==Object.prototype.toString.call(e)){for(var n=[],u=0;u<c.length;u++)n.push(e);e=n}if(e.length!=c.length){if(0==e.length)throw Error("Illegal Argument Exception");
for(var n=[],E=0,u=0;u<c.length;u++)void 0===e[u]?n.push(E):(n.push(e[u]),E=e[u]);e=n}return a.j(c,e,d,!0,l,h,k)};a.j=function(a,b,c,e,d,l,h){return f.create(function(f,k){var n=[];void 0===h&&(h=NaN);if(null===a)f(null);else if(0===a.length)f(null);else{for(var u=0;u<a.length;u++)n.push(r(a[u]));c=e?t(c,0):t(c,3);var T=a[0].spatialReference;v.a({action:"buffermany",geometries:n,spatialReference:m(T),distances:b,tounionresults:d,unit:c,geodesic:e,geodesicmaxdeviation:h,geodesiccurvetype:y(l)}).then(function(a){if(0===
a.status)k(Error(a.error.message));else{for(var b=0;b<a.result.length;b++)a.result[b]=q(a.result[b],T);f(a.result)}},function(a){k(a)})}})};a.convexHull=function(c,e){void 0===e&&(e=!1);return c instanceof b?f.create(function(a,b){var f=c.spatialReference;v.a({action:"convexhull",geoma:r(c),spatialReference:m(c.spatialReference)}).then(function(c){0===c.status?b(Error(c.error.message)):a(q(c.result,f))},function(a){b(a)})}):a.o(c,e)};a.o=function(a,b){return f.create(function(f,c){for(var e=[],d=
0;d<a.length;d++)e.push(r(a[d]));var l=0<a.length?a[0].spatialReference:null;v.a({action:"convexhullmany",geometries:e,merge:b}).then(function(a){if(0===a.status)c(Error(a.error.message));else{for(var b=0;b<a.result.length;b++)a.result[b]=q(a.result[b],l);f(a.result)}},function(a){c(a)})})};a.offset=function(c,e,d,l,h,k){var n=0;if(null!=l&&void 0!=l)switch(l){case "round":n=0;break;case "bevel":n=1;break;case "miter":n=2;break;case "square":n=3}return c instanceof b?f.create(function(a,b){var f=
c.spatialReference;v.a({action:"offset",geoma:r(c),spatialReference:m(c.spatialReference),distance:e,joins:n,bevelratio:h,flattenerror:k,offsetunit:t(d,3)}).then(function(c){0===c.status?b(Error(c.error.message)):a(q(c.result,f))},function(a){b(a)})}):a.v(c,e,d,n,h,k)};a.v=function(a,b,c,e,d,l){return f.create(function(f,h){for(var k=[],n=0;n<a.length;n++)k.push(r(a[n]));var u=0<a.length?a[0].spatialReference:null;v.a({action:"offsetmany",geometries:k,spatialReference:m(u),distance:b,joins:e,bevelratio:d,
offsetunit:t(c,3),flattenerror:l}).then(function(a){if(0===a.status)h(Error(a.error.message));else{for(var b=0;b<a.result.length;b++)a.result[b]=q(a.result[b],u);f(a.result)}},function(a){h(a)})})};a.planarArea=function(a,b){return f.create(function(f,c){v.a({action:"area",geoma:r(a),unit:t(b,2),spatialReference:m(a.spatialReference)}).then(function(a){0===a.status?c(Error(a.error.message)):f(a.result)},function(a){c(a)})})};a.planarLength=function(a,b){return f.create(function(f,c){v.a({action:"length",
geoma:r(a),unit:t(b,3),spatialReference:m(a.spatialReference)}).then(function(a){0===a.status?c(Error(a.error.message)):f(a.result)},function(a){c(a)})})};a.geodesicArea=function(a,b,c){return f.create(function(f,e){v.a({action:"geodesicarea",geoma:r(a),unit:t(b,2),geodesiccurvetype:y(c),spatialReference:m(a.spatialReference)}).then(function(a){0===a.status?e(Error(a.error.message)):f(a.result)},function(a){e(a)})})};a.geodesicLength=function(a,b,c){return f.create(function(f,e){v.a({action:"geodesiclength",
geoma:r(a),unit:t(b,0),geodesiccurvetype:y(c),spatialReference:m(a.spatialReference)}).then(function(a){0===a.status?e(Error(a.error.message)):f(a.result)},function(a){e(a)})})};return a}()})},"esri/workers/WorkerClient":function(){define("dojo/Evented dojo/_base/declare dojo/Deferred dojo/_base/lang dojo/request ../sniff ../kernel ../urlUtils require".split(" "),function(p,c,g,d,b,k,l,e,h){var n=window.Blob||window.webkitBlob||window.mozBlob,w=window.URL||window.webkitURL||window.mozURL;p=c([p],
{declaredClass:"esri.workers.WorkerClient",worker:null,returnDeferreds:!1,_queue:null,constructor:function(b,a,c){this._isIE=k("ie");this.returnDeferreds=!!c;this._queue={};this._acceptMessage=d.hitch(this,this._acceptMessage);this._errorMessage=d.hitch(this,this._errorMessage);b&&this.setWorker(b,d.hitch(this,function(b){this.worker=b;a(b)}))},setWorker:function(b,a){if(b instanceof Array){var c=b;b=c.shift()}var f=this._getUrl(b),f=e.normalize(f);b=!e.hasSameOrigin(f,location.href);var l;if(!1===
f)return console.log("Can not resolve worker path"),!1;this.worker&&(l=this.worker,l.removeEventListener("message",this._acceptMessage,!1),l.removeEventListener("error",this._errorMessage,!1),l.terminate(),l=null);if(b){b=this._getUrl("./mutableWorker",!0);try{this._getRemoteText(b,d.hitch(this,function(b){b=w.createObjectURL(new n([b],{type:"text/javascript"}));a(this._createWorker(b,f))}))}catch(q){try{b=e.getProxyUrl(b).path+"?"+encodeURI(b),this._useProxy=!0,a(this._createWorker(b,c))}catch(m){return console.log("Can not create worker"),
!1}}}else setTimeout(d.hitch(this,function(){a(this._createWorker(f,c))}),0)},_createWorker:function(b,a){b=new Worker(b);b.addEventListener("message",this._acceptMessage,!1);b.addEventListener("error",this._errorMessage,!1);this.worker=b;a&&this.importScripts(a);return b},postMessage:function(b,a){if(b instanceof Array||"object"!=typeof b)b={data:b};var c=Math.floor(64E9*Math.random()).toString(36);b.msgId=c;c=this._queue[c]=new g;this.worker?(a?this.worker.postMessage(b,a):this.worker.postMessage(b),
this.emit("start-message",{target:this,message:b})):c.reject({message:"No worker was set."});return this.returnDeferreds?c:c.promise||c},terminate:function(){var b=Object.keys(this._queue);this.worker&&this.worker.terminate();for(var a=b.length-1;0<=a;a--)this._queue[b[a]].cancel("terminated"),delete this._queue[b[a]]},addWorkerCallback:function(b,a){var c=this._getUrl(b,!0);!1===c?(a=new g,a.reject({message:"Could not load text from "+b})):(a=this.postMessage({action:"add-callback",url:c,cbName:a||
"main"}),a.then(d.hitch(this,function(a){a.target=this;this.emit("callback-added",a)})));return a},importScripts:function(b){Array.isArray(b)||(b=[b]);b=b.map(function(a){a=this._getUrl(a,!0);this._useProxy&&!e.hasSameOrigin(a,location.href)&&(a=e.getProxyUrl(a).path+"?"+encodeURI(a));return a},this);b=this.postMessage({action:"import-script",url:b});b.then(d.hitch(this,function(a){a.target=this;this.emit("scripts-imported",a)}));return b},_acceptMessage:function(b){var a=b.data,c=a.msgId;if(a.status&&
"debug"==a.status)console[a.showAs||"debug"](a);else if(c&&c in this._queue){var f=this._queue[c];"progress"==a.status?f.progress(b.data):("error"==a.status?f.reject(b.data):f.resolve(b.data),delete this._queue[c])}this.emit("message",{message:b.data,event:b,target:this})},_errorMessage:function(b){this.onerror||this.onError?this.onerror?this.onerror(b):this.onError(b):console.log("Worker Error: "+b.message+"\nIn "+b.filename+" on "+b.lineno)},_getUrl:function(b,a){if(!b)return console.error("can not resolve empty path"),
!1;b.match(/\.js$/)||(b+=".js");b=h.toUrl(b);return a?e.getAbsoluteUrl(b):b},_getRemoteText:function(c,a){(c=this._getUrl(c))&&b.get(c,{sync:!1,handleAs:"text",headers:{"X-Requested-With":"","Content-Type":"text/plain"}}).then(function(b){a(b)})},_startBlobWorker:function(){var b=this._xdSource;b||(b=this._getUrl("./mutableWorker"),b=new n(["if(!self._mutable){importScripts('"+b+"');}"],{type:"text/javascript"}),b=this._xdSource=w.createObjectURL(b));try{return new Worker(b)}catch(a){return console.log(a.message),
!1}}});k("extend-esri")&&d.setObject("workers.WorkerClient",p,l);return p})},"widgets/DistanceAndDirection/models/ShapeModel":function(){define("dojo/_base/declare dojo/_base/array dojo/_base/lang dojo/string dojo/number esri/geometry/geometryEngine esri/geometry/webMercatorUtils esri/geometry/Polyline".split(" "),function(p,c,g,d,b,k,l,e){return p(null,{Units:"meters feet kilometers miles nautical-miles yards".split(" "),getAngle:function(b){var c=null,c=void 0===this.angle?(180*Math.atan2(this.endPoint.x-
this.startPoint.x,this.endPoint.y-this.startPoint.y)/Math.PI+360)%360:Number(this.angle);"mils"===b&&(c*=17.777777778);return c.toFixed(2)},getLength:function(b){var c=this.Units[0];-1<this.Units.indexOf(b.toLowerCase())&&(c=b.toLowerCase());return k.geodesicLength(this.geographicGeometry,c)},getFormattedLength:function(c){return b.format(this.getLength(c),{places:4})},formatLength:function(c){return b.format(c,{places:4})},constructor:function(h){p.safeMixin(this,h);if("polygon"===this.geometry.type)if(this.geometry.hasOwnProperty("drawType")){if("ellipse"===
this.geometry.drawType){var n=new e;c.forEach(this.geometry.geometry.rings,g.hitch(this,function(b){n.paths.push(b)}));n.spatialReference=this.geometry.spatialReference;this.geographicGeometry=n=l.webMercatorToGeographic(n);this.geodesicGeometry=k.geodesicDensify(this.geometry.geometry,1E4);this.wmGeometry=this.geometry.geometry;this.angle=this.geometry.angle;this.startPoint=l.webMercatorToGeographic(this.geometry.center);this.formattedStartPoint=d.substitute("${xStr}, ${yStr}",{xStr:b.format(this.startPoint.y,
{places:4}),yStr:b.format(this.startPoint.x,{places:4})})}}else h=new e({paths:[[this.geometry.paths[0][0],this.geometry.paths[0][1]]],spatialReference:{wkid:this.geometry.spatialReference.wkid}}),this.geographicGeometry=h=l.webMercatorToGeographic(h),this.geodesicGeometry=k.geodesicDensify(h,1E4),this.wmGeometry=this.geometry,this.startPoint=this.geodesicGeometry.getPoint(0,0),this.endPoint=this.geodesicGeometry.getPoint(0,this.geodesicGeometry.paths[0].length-1),this.formattedStartPoint=d.substitute("${xStr}, ${yStr}",
{xStr:b.format(this.startPoint.y,{places:4}),yStr:b.format(this.startPoint.x,{places:4})}),this.formattedEndPoint=d.substitute("${xStr}, ${yStr}",{xStr:b.format(this.endPoint.y,{places:4}),yStr:b.format(this.endPoint.x,{places:4})});else"point"===this.geometry.type?(this.geodesicGeometry=k.geodesicBuffer(this.geometry,this.calculatedDistance,"meters"),this.geographicGeometry=null!==this.lineGeometry?this.lineGeometry:this.geometry,102100!==this.geodesicGeometry.spatialReference.wkid&&3857!==this.geodesicGeometry.spatialReference.wkid?
(this.wgsGeometry=this.geodesicGeometry,this.wmGeometry=l.geographicToWebMercator(this.geodesicGeometry)):(this.wgsGeometry=l.webMercatorToGeographic(this.geodesicGeometry),this.wmGeometry=this.geodesicGeometry),this.formattedStartPoint=d.substitute("${xStr}, ${yStr}",{xStr:b.format(this.wgsGeometry.getCentroid().y,{places:4}),yStr:b.format(this.wgsGeometry.getCentroid().x,{places:4})})):(this.geodesicGeometry=4326===this.geographicGeometry.spatialReference.wkid||3857===this.geographicGeometry.spatialReference.wkid?
k.geodesicDensify(this.geographicGeometry,1E4):this.geographicGeometry,this.startPoint=this.geodesicGeometry.getPoint(0,0),this.endPoint=this.geodesicGeometry.getPoint(0,this.geodesicGeometry.paths[0].length-1),this.formattedStartPoint=d.substitute("${xStr}, ${yStr}",{xStr:b.format(this.startPoint.y,{places:4}),yStr:b.format(this.startPoint.x,{places:4})}),this.formattedEndPoint=d.substitute("${xStr}, ${yStr}",{xStr:b.format(this.endPoint.y,{places:4}),yStr:b.format(this.endPoint.x,{places:4})}))}})})},
"widgets/DistanceAndDirection/views/CoordinateInput":function(){define(["dojo/_base/declare","dijit/form/ValidationTextBox","../models/Coordinate"],function(p,c,g){return p("test",c,{required:!0,inputCoordinate:null,invalidMessage:"",validateOnInput:!0,_validateOnInputSetter:function(c){this.validateOnInput="true"===c},clear:function(){this.set("validateOnInput",!0);this.set("value","");this.inputCoordinate.coordinateEsriGeometry=null},constructor:function(c){p.safeMixin(this,c);this.inherited(arguments);
this.inputCoordinate=new g({appConfig:arguments[0].appConfig,nls:this.nls})},validator:function(c){if(!this.validateOnInput)return!0;this.inputCoordinate.set("inputString",c);this.set("invalidMessage",this.inputCoordinate.message);this.set("promptMessage",this.inputCoordinate.message);return!0}})})},"widgets/DistanceAndDirection/models/Coordinate":function(){define("dojo/_base/declare dojo/_base/array dojo/_base/lang dojo/dom-class dojo/Stateful dojo/Deferred esri/geometry/Point esri/SpatialReference jimu/dijit/Message ./util ./dialogConfirm ./ConfirmNotation".split(" "),
function(p,c,g,d,b,k,l,e,h,n,w,f){return p([b],{formatPrefix:!1,_formatPrefixSetter:function(a){this.formatPrefix=a},inputString:null,_inputStringSetter:function(a){this.inputString=a},formatString:"YN XE",_formatStringSetter:function(a){this.formatString=a},inputType:"UNKNOWN",formatType:"DD",_formatTypeSetter:function(a){this.formatType=a;this.getFormattedValue()},outputString:"",coordinateEsriGeometry:null,_coordinateEsriGeometrySetter:function(a){null!==a&&(this.coordinateEsriGeometry=a,this.getFormattedValue())},
constructor:function(a){p.safeMixin(this,a);this.util=new n({appConfig:this.appConfig,nls:this.nls})},getInputType:function(){this.inputTypeDef=new k;var a=this.util.getCleanInput(this.inputString);this.util.getCoordinateType(a).then(g.hitch(this,function(b){if(b)if(1===b.length){var h=this.processCoordTextInput(a,b[0],!1);this.util.getXYNotation(h,b[0].conversionType).then(g.hitch(this,function(a){0>=a.length||!a[0][0]&&0!==a[0][0]?(this.hasError=!0,this.valid=!1,this.message=this.nls.invalidCoordinateMessage):
(this.valid=this.isManual=!0,this.formatType=b[0].conversionType,this.inputType=b[0].conversionType,this.coordinateEsriGeometry=new l(a[0][0],a[0][1],new e({wkid:4326})),this.message="");this.inputTypeDef.resolve(this)}));g.hitch(this,function(){this.hasError=!0;this.valid=!1;this.inputType="UNKNOWN";this.message=this.nls.invalidCoordinateMessage;this.inputTypeDef.resolve(this)})}else{var k=new w({title:this.nls.confirmInputNotationMessage,nls:this.nls,content:new f({nls:this.nls},b),style:"width: 400px",
hasSkipCheckBox:!1});"DartTheme"===this.appConfig.theme.name&&d.add(k.domNode,"dartThemeClaroDijitTooltipContainerOverride");k.show().then(g.hitch(this,function(){var f=c.filter(b,function(a){return a.name===k.content.comboOptions.get("value")}),d=this.processCoordTextInput(a,f[0],!1);this.util.getXYNotation(d,f[0].conversionType).then(g.hitch(this,function(a){0>=a.length||!a[0][0]&&0!==a[0][0]?(this.hasError=!0,this.valid=!1,this.message=this.nls.invalidCoordinateMessage):(this.valid=this.isManual=
!0,this.inputType=b[0].conversionType,this.formatType=b[0].conversionType,this.coordinateEsriGeometry=new l(a[0][0],a[0][1],new e({wkid:4326})),this.message="");this.inputTypeDef.resolve(this)}));g.hitch(this,function(){this.hasError=!0;this.valid=!1;this.inputType="UNKNOWN";this.message=this.nls.invalidCoordinateMessage;this.inputTypeDef.resolve(this)})},function(){this.inputTypeDef.reject()}))}else this.hasError=!0,this.valid=!1,this.inputType="UNKNOWN",this.message=this.nls.invalidCoordinateMessage,
this.inputTypeDef.resolve(this)}));return this.inputTypeDef},processCoordTextInput:function(a,b,c){var e=b.pattern.exec(a),f,d,l,k,n,y,t,g,w,p,v=!1,B=b.name;switch(b.name){case "DD":f=e[2];d=e[7];l=e[10];k=e[16];n=e[3].replace(/[,:]/,".");y=e[11].replace(/[,:]/,".");B="DD";break;case "DDrev":f=e[11];d=e[16];l=e[2];k=e[8];n=e[12].replace(/[,:]/,".");y=e[3].replace(/[,:]/,".");B="DD";break;case "DDM":f=e[2];d=e[7];l=e[10];k=e[15];n=e[3];t=e[4].replace(/[,:]/,".");y=e[11];g=e[12].replace(/[,:]/,".");
B="DDM";break;case "DDMrev":f=e[10];d=e[15];l=e[2];k=e[7];n=e[11];t=e[12].replace(/[,:]/,".");y=e[3];g=e[4].replace(/[,:]/,".");B="DDM";break;case "DMS":f=e[2];d=e[8];l=e[11];k=e[17];n=e[3];t=e[4];w=e[5].replace(/[,:]/,".");y=e[12];g=e[13];p=e[14].replace(/[,:]/,".");B="DMS";break;case "DMSrev":f=e[11],d=e[17],l=e[2],k=e[8],n=e[12],t=e[13],w=e[14].replace(/[,:]/,"."),y=e[3],g=e[4],p=e[5].replace(/[,:]/,"."),B="DMS"}f&&d?(v=!0,f=(new RegExp(/[Ss-]/)).test(f)?"-":"+"):f=f&&(new RegExp(/[Ss-]/)).test(f)?
"-":d&&(new RegExp(/[Ss-]/)).test(d)?"-":"+";l&&k?(v=!0,l=(new RegExp(/[Ww-]/)).test(l)?"-":"+"):l=l&&(new RegExp(/[Ww-]/)).test(l)?"-":k&&(new RegExp(/[Ww-]/)).test(k)?"-":"+";v&&(c||new h({message:this.nls.prefixSuffixMessage}));switch(B){case "DD":a=f+n+","+l+y;break;case "DDM":a=f+n+" "+t+","+l+y+" "+g;break;case "DMS":a=f+n+" "+t+" "+w+","+l+y+" "+g+" "+p}return a},getInputTypeSync:function(){return null!==this.util.getCoordinateType(this.inputString)},getFormattedValue:function(){this.coordinateEsriGeometry&&
this.util.getCoordValues({x:this.coordinateEsriGeometry.x,y:this.coordinateEsriGeometry.y},this.formatType,6).then(g.hitch(this,function(a){this.set("outputString",this.getCoordUI(a))}))},getCoordUI:function(a){var b=this.get("formatPrefix"),c;switch(this.formatType){case "DD":a=this.util.getFormattedDDStr(a,this.formatString,b);c=a.formatResult;break;case "DDM":a=this.util.getFormattedDDMStr(a,this.formatString,b);c=a.formatResult;break;case "DMS":a=this.util.getFormattedDMSStr(a,this.formatString,
b);c=a.formatResult;break;case "USNG":a=this.util.getFormattedUSNGStr(a,this.formatString,b);c=a.formatResult;break;case "MGRS":a=this.util.getFormattedMGRSStr(a,this.formatString,b);c=a.formatResult;break;case "GARS":a=this.util.getFormattedGARSStr(a,this.formatString,b);c=a.formatResult;break;case "GEOREF":a=this.util.getFormattedGEOREFStr(a,this.formatString,b);c=a.formatResult;break;case "UTM":a=this.util.getFormattedUTMStr(a,this.formatString,b);c=a.formatResult;break;case "UTM (H)":a=this.util.getFormattedUTMHStr(a,
this.formatString,b),c=a.formatResult}return c}})})},"widgets/DistanceAndDirection/models/util":function(){define(["dojo/_base/declare","dojo/_base/array","dojo/_base/Deferred","esri/tasks/GeometryService"],function(p,c,g,d){return p(null,{constructor:function(b){this.appConfig=b.appConfig;this.nls=b.nls;(b=this.appConfig.geometryService)||(b="//utility.arcgisonline.com/arcgis/rest/services/Geometry/GeometryServer");this.geomService=new d(b)},getCleanInput:function(b){b=b.replace(/\n/g,"");b=b.replace(/\s+/g,
" ").trim();return b.toUpperCase()},getCoordValues:function(b,c,d){var e=new g;b={sr:4326,coordinates:[[b.x,b.y]],conversionType:c.name?c.name:c,numOfDigits:d||6,rounding:!0,addSpaces:!1};switch(c){case "DD":b.numOfDigits=6;break;case "USNG":b.numOfDigits=5;break;case "MGRS":b.conversionMode="mgrsDefault";b.numOfDigits=5;break;case "UTM (H)":b.conversionType="utm";b.conversionMode="utmNorthSouth";b.addSpaces=!0;break;case "UTM":b.conversionType="utm";b.conversionMode="utmDefault";b.addSpaces=!0;break;
case "GARS":b.conversionMode="garsDefault"}this.geomService.toGeoCoordinateString(b).then(function(b){e.resolve(b)},function(){e.resolve(null)});return e.promise},getXYNotation:function(b,c){var d=new g,e;e=c.name?c.name:c;c={sr:4326,conversionType:e,strings:[]};switch(e){case "DD":case "DDM":case "DMS":c.numOfDigits=2;b=b.replace(/[\u00b0\u02da\u00ba^~*"'\u2032\u00a8\u02dd]/g,"");c.strings.push(b);break;case "USNG":c.strings.push(b);c.addSpaces="false";break;case "MGRS":c.conversionMode="mgrsNewStyle";
c.strings.push(b);c.addSpaces="false";break;case "UTM (H)":c.conversionType="utm";c.conversionMode="utmNorthSouth";c.strings.push(b);break;case "UTM":c.conversionType="utm";c.conversionMode="utmDefault";c.strings.push(b);break;case "GARS":c.conversionMode="garsCenter";c.strings.push(b);break;case "GEOREF":c.strings.push(b)}this.geomService.fromGeoCoordinateString(c).then(function(b){d.resolve(b)},function(){d.resolve(null)});return d.promise},getNotations:function(){return[{name:"DD",pattern:/^(([NS\+\-\s])*([0-8]?\d([,.]\d*)?|90([,.]0*)?)([\u00b0\u02da\u00ba^~*]*)([NS\+\-\s])*)([,:;\s|\/\\]+)(([EW\+\-\s])*([0]?\d?\d([,.]\d*)?|1[0-7]\d([,.]\d*)?|180([,.]0*)?)([\u00b0\u02da\u00ba^~*]*)([EW\+\-\s])*)$/,
notationType:this.nls.DDLatLongNotation,conversionType:"DD"},{name:"DDrev",pattern:/^(([EW\+\-\s])*([0]?\d?\d([,.]\d*)?|1[0-7]\d([,.]\d*)?|180([,.]0*)?)([\u00b0\u02da\u00ba^~*]*)([EW\+\-\s])*)([,:;\s|\/\\]+)(([NS\+\-\s])*([0-8]?\d([,.]\d*)?|90([,.]0*)?)([\u00b0\u02da\u00ba^~*]*)([NS\+\-\s])*)$/,notationType:this.nls.DDLongLatNotation,conversionType:"DD"},{name:"DDM",pattern:/^(([NS\+\-\s])*([0-8]?\d|90)[\u00b0\u02da\u00ba^~*\s\-_]+(([0-5]?\d|\d)([,.]\d*)?)['\u2032\s_]*([NS\+\-\s])*)([,:;\s|\/\\]+)(([EW\+\-\s])*([0]?\d?\d|1[0-7]\d|180)[\u00b0\u02da\u00ba^~*\s\-_]+(([0-5]\d|\d)([,.]\d*)?)['\u2032\s_]*([EW\+\-\s])*)[\s]*$/,
notationType:this.nls.DDMLatLongNotation,conversionType:"DDM"},{name:"DDMrev",pattern:/^(([EW\+\-\s])*([0]?\d?\d|1[0-7]\d|180)[\u00b0\u02da\u00ba^~*\s\-_]+(([0-5]\d|\d)([,.]\d*)?)['\u2032\s_]*([EW\+\-\s])*)([,:;\s|\/\\]+)(([NS\+\-\s])*([0-8]?\d|90)[\u00b0\u02da\u00ba^~*\s\-_]+(([0-5]?\d|\d)([,.]\d*)?)['\u2032\s_]*([NS\+\-\s])*)[\s]*$/,notationType:this.nls.DDMLongLatNotation,conversionType:"DDM"},{name:"DMS",pattern:/^(([NS\+\-\s])*([0-8]?\d|90)[\u00b0\u02da\u00ba^~*\s\-_]+([0-5]?\d|\d)['\u2032\s\-_]+(([0-5]?\d|\d)([,.]\d*)?)["\u00a8\u02dd\s_]*([NS\+\-\s])*)([,:;\s|\/\\]+)(([EW\+\-\s])*([0]?\d?\d|1[0-7]\d|180)[\u00b0\u02da\u00ba^~*\s\-_]+([0-5]\d|\d)['\u2032\s\-_]+(([0-5]?\d|\d)([,.]\d*)?)["\u00a8\u02dd\s_]*([EW\+\-\s])*)[\s]*$/,
notationType:this.nls.DMSLatLongNotation,conversionType:"DMS"},{name:"DMSrev",pattern:/^(([EW\+\-\s])*([0]?\d?\d|1[0-7]\d|180)[\u00b0\u02da\u00ba^~*\s\-_]+([0-5]\d|\d)['\u2032\s\-_]+(([0-5]?\d|\d)([,.]\d*)?)["\u00a8\u02dd\s_]*([EW\+\-\s])*)([,:;\s|\/\\]+)(([NS\+\-\s])*([0-8]?\d|90)[\u00b0\u02da\u00ba^~*\s\-_]+([0-5]?\d|\d)['\u2032\s\-_]+(([0-5]?\d|\d)([,.]\d*)?)["\u00a8\u02dd\s_]*([NS\+\-\s])*)[\s]*$/,notationType:this.nls.DMSLongLatNotation,conversionType:"DMS"},{name:"GARS",pattern:/^\d{3}[a-zA-Z]{2}[1-4]?[1-9]?$/,
notationType:this.nls.GARSNotation,conversionType:"GARS"},{name:"GEOREF",pattern:/^[a-zA-Z]{4}\d{1,8}$/,notationType:this.nls.GEOREFNotation,conversionType:"GEOREF"},{name:"MGRS",pattern:/^\d{1,2}[-,;:\s]*[C-HJ-NP-X][-,;:\s]*[A-HJ-NP-Z]{2}[-,;:\s]*(\d[-,;:\s]+\d|\d{2}[-,;:\s]+\d{2}|\d{3}[-,;:\s]+\d{3}|\d{4}[-,;:\s]+\d{4}|\d{5}[-,;:\s]+\d{5})$|^(\d{1,2}[-,;:\s]*[C-HJ-NP-X][-,;:\s]*[A-HJ-NP-Z]{2}[-,;:\s]*)(\d{2}|\d{4}|\d{6}|\d{8}|\d{10})?$|^[ABYZ][-,;:\s]*[A-HJ-NP-Z]{2}[-,;:\s]*(\d[-,;:\s]+\d|\d{2}[-,;:\s]+\d{2}|\d{3}[-,;:\s]+\d{3}|\d{4}[-,;:\s]+\d{4}|\d{5}[-,;:\s]+\d{5})$|^[ABYZ][-,;:\s]*[A-HJ-NP-Z]{2}[-,;:\s]*(\d{2}|\d{4}|\d{6}|\d{8}|\d{10})?$/,
notationType:this.nls.MGRSNotation,conversionType:"MGRS"},{name:"UTM",pattern:/^\d{1,2}[-,;:\s]*[c-hj-np-xC-HJ-NP-X][-,;:\s]*\d{1,6}\.?\d*[mM]?[-,;:\s]?\d{1,7}\.?\d*[mM]?$/,notationType:this.nls.UTMBandNotation,conversionType:"UTM"},{name:"UTM (H)",pattern:/^\d{1,2}[-,;:\s]*[NnSs][-,;:\s]*\d{1,6}\.?\d*[mM]?[-,;:\s]+\d{1,7}\.?\d*[mM]?$/,notationType:this.nls.UTMHemNotation,conversionType:"UTM (H)"}]},getCoordinateType:function(b){var d=this.getCleanInput(b);b=new g;var l=this.getNotations(),d=c.filter(l,
function(b){return b.pattern.test(this.v)},{v:d});0<d.length?b.resolve(d):b.resolve(null);return b.promise},getFormattedDDStr:function(b,c,d){var e={};e.sourceValue=b;e.sourceFormatString=c;b=b[0].split(/[ ,]+/);e.latdeg=b[0].replace(/[nNsS]/,"");e.londeg=b[1].replace(/[eEwW]/,"");d&&(e.latdeg="N"===b[0].slice(-1)?"+"+e.latdeg:"-"+e.latdeg,e.londeg="W"===b[1].slice(-1)?"-"+e.londeg:"+"+e.londeg);c=c.replace(/X/,e.londeg);c=c.replace(/[eEwW]/,b[1].slice(-1));c=c.replace(/[nNsS]/,b[0].slice(-1));c=
c.replace(/Y/,e.latdeg);e.formatResult=c;return e},getFormattedDDMStr:function(b,c,d){var e={};e.sourceValue=b;e.sourceFormatString=c;e.parts=b[0].split(/[ ,]+/);e.latdeg=e.parts[0];e.latmin=e.parts[1].replace(/[nNsS]/,"");e.londeg=e.parts[2];e.lonmin=e.parts[3].replace(/[eEwW]/,"");d&&(e.latdeg="N"===e.parts[1].slice(-1)?"+"+e.latdeg:"-"+e.latdeg,e.londeg="W"===e.parts[3].slice(-1)?"-"+e.londeg:"+"+e.londeg);b=c.replace(/[EeWw]/,e.parts[3].slice(-1));b=b.replace(/Y/,e.lonmin);b=b.replace(/X/,e.londeg);
b=b.replace(/[NnSs]/,e.parts[1].slice(-1));b=b.replace(/B/,e.latmin);b=b.replace(/A/,e.latdeg);e.formatResult=b;return e},getFormattedDMSStr:function(b,c,d){var e={};e.sourceValue=b;e.sourceFormatString=c;e.parts=b[0].split(/[ ,]+/);e.latdeg=e.parts[0];e.latmin=e.parts[1];e.latsec=e.parts[2].replace(/[NnSs]/,"");e.londeg=e.parts[3];e.lonmin=e.parts[4];e.lonsec=e.parts[5].replace(/[EWew]/,"");d&&(e.latdeg="N"===e.parts[2].slice(-1)?"+"+e.latdeg:"-"+e.latdeg,e.londeg="W"===e.parts[5].slice(-1)?"-"+
e.londeg:"+"+e.londeg);b=c.replace(/A/,e.latdeg);b=b.replace(/B/,e.latmin);b=b.replace(/C/,e.latsec);b=b.replace(/X/,e.londeg);b=b.replace(/Y/,e.lonmin);b=b.replace(/Z/,e.lonsec);b=b.replace(/[NnSs]/,e.parts[2].slice(-1));b=b.replace(/[EeWw]/,e.parts[5].slice(-1));e.formatResult=b;return e},getFormattedUSNGStr:function(b,c){var d={};d.sourceValue=b;d.sourceFormatString=c;b[0].match(/^[ABYZ]/)?d.gzd=b[0].match(/[ABYZ]/)[0].trim():d.gzd=b[0].match(/\d{1,2}[C-HJ-NP-X]/)[0].trim();d.grdsq=b[0].replace(d.gzd,
"").match(/[a-hJ-zA-HJ-Z]{2}/)[0].trim();d.easting=b[0].replace(d.gzd+d.grdsq,"").match(/^\d{1,5}/)[0].trim();d.northing=b[0].replace(d.gzd+d.grdsq,"").match(/\d{1,5}$/)[0].trim();b=c.replace(/Y/,d.northing);b=b.replace(/X/,d.easting);b=b.replace(/S/,d.grdsq);b=b.replace(/Z/,d.gzd);d.formatResult=b;return d},getFormattedMGRSStr:function(b,c){var d={};d.sourceValue=b;d.sourceFormatString=c;b[0].match(/^[ABYZ]/)?d.gzd=b[0].match(/[ABYZ]/)[0].trim():d.gzd=b[0].match(/\d{1,2}[C-HJ-NP-X]/)[0].trim();d.grdsq=
b[0].replace(d.gzd,"").match(/[a-hJ-zA-HJ-Z]{2}/)[0].trim();d.easting=b[0].replace(d.gzd+d.grdsq,"").match(/^\d{1,5}/)[0].trim();d.northing=b[0].replace(d.gzd+d.grdsq,"").match(/\d{1,5}$/)[0].trim();b=c.replace(/Y/,d.northing);b=b.replace(/X/,d.easting);b=b.replace(/S/,d.grdsq);b=b.replace(/Z/,d.gzd);d.formatResult=b;return d},getFormattedGARSStr:function(b,c){var d={};d.sourceValue=b;d.sourceFormatString=c;d.lon=b[0].match(/\d{3}/);d.lat=b[0].match(/[a-zA-Z]{2}/);b=b[0].match(/\d*$/);d.quadrant=
b[0][0];d.key=b[0][1];c=c.replace(/K/,d.key);c=c.replace(/Q/,d.quadrant);c=c.replace(/Y/,d.lat);c=c.replace(/X/,d.lon);d.formatResult=c;return d},getFormattedGEOREFStr:function(b,c){var d={};d.sourceValue=b;d.sourceFormatString=c;d.lon=b[0].match(/[a-zA-Z]{1}/)[0].trim();d.lat=b[0].replace(d.lon,"").match(/[a-zA-Z]{1}/)[0].trim();d.quadrant15lon=b[0].replace(d.lon+d.lat,"").match(/[a-zA-Z]{1}/)[0].trim();d.quadrant15lat=b[0].replace(d.lon+d.lat+d.quadrant15lon,"").match(/[a-zA-Z]{1}/)[0].trim();b=
b[0].replace(d.lon+d.lat+d.quadrant15lon+d.quadrant15lat,"");d.quadrant1lon=b.substr(0,b.length/2);d.quadrant1lat=b.substr(b.length/2,b.length);c=c.replace(/Y/,d.quadrant1lat);c=c.replace(/X/,d.quadrant1lon);c=c.replace(/D/,d.quadrant15lat);c=c.replace(/C/,d.quadrant15lon);c=c.replace(/B/,d.lat);c=c.replace(/A/,d.lon);d.formatResult=c;return d},getFormattedUTMStr:function(b,c){var d={};d.sourceValue=b;d.sourceFormatString=c;d.parts=b[0].split(/[ ,]+/);d.zone=d.parts[0].replace(/[A-Z]/,"");d.bandLetter=
d.parts[0].slice(-1);d.easting=d.parts[1];d.westing=d.parts[2];b=c.replace(/Y/,d.westing);b=b.replace(/X/,d.easting);b=b.replace(/B/,d.bandLetter);b=b.replace(/Z/,d.zone);d.formatResult=b;return d},getFormattedUTMHStr:function(b,c){var d={};d.sourceValue=b;d.sourceFormatString=c;d.parts=b[0].split(/[ ,]+/);d.zone=d.parts[0].replace(/[A-Z]/,"");d.hemisphere=d.parts[0].slice(-1);d.easting=d.parts[1];d.westing=d.parts[2];b=c.replace(/Y/,d.westing);b=b.replace(/X/,d.easting);b=b.replace(/H/,d.hemisphere);
b=b.replace(/Z/,d.zone);d.formatResult=b;return d},convertMetersToUnits:function(b,c){var d=0;switch(c.toLowerCase()){case "meters":d=b;break;case "feet":d=3.28084*b;break;case "kilometers":d=.001*b;break;case "miles":d=6.21371E-4*b;break;case "nautical-miles":d=5.39957E-4*b;break;case "yards":d=1.09361*b}return d},convertToMeters:function(b,c){var d=b;switch(c){case "meters":d=b;break;case "feet":d=.3048*b;break;case "kilometers":d=1E3*b;break;case "miles":d=1609.34*b;break;case "nautical-miles":d=
1852.001376036*b;break;case "yards":d=.9144*b}return d}})})},"widgets/DistanceAndDirection/models/dialogConfirm":function(){define("dojo/_base/lang dojo/_base/declare dojo/_base/Deferred dojo/dom-construct dijit/Dialog dijit/form/Button dijit/form/CheckBox jimu/utils".split(" "),function(p,c,g,d,b,k,l,e){return c(b,{okButton:null,cancelButton:null,skipCheckBox:null,hasOkButton:!0,hasCancelButton:!0,hasSkipCheckBox:!0,hasUnderlay:!0,dfd:null,buttonNode:null,constructor:function(b){p.mixin(this,b)},
postCreate:function(){this.inherited("postCreate",arguments);var b,c=!1;b=d.create("div",{className:"dijitDialogPaneContent dialogConfirm"},this.domNode,"last");this.hasSkipCheckBox&&(this.skipCheckBox=new l({checked:!1},d.create("div")),b.appendChild(this.skipCheckBox.domNode),d.create("label",{"for":this.skipCheckBox.id,innerHTML:e.sanitizeHTML(this.nls.rememberDecisionMessage)},b));this.hasOkButton&&(this.okButton=new k({label:this.nls.common.ok,onClick:p.hitch(this,function(){c=this.hasSkipCheckBox?
this.skipCheckBox.get("checked"):!1;this.hide();this.dfd.resolve(c)})},d.create("div")),b.appendChild(this.okButton.domNode));this.hasCancelButton&&(this.cancelButton=new k({label:this.nls.common.cancel,onClick:p.hitch(this,function(){c=this.hasSkipCheckBox?this.skipCheckBox.get("checked"):!1;this.hide();this.dfd.cancel(c)})},d.create("div")),b.appendChild(this.cancelButton.domNode));this.buttonNode=b},show:function(){this.inherited("show",arguments);this.hasUnderlay||d.destroy(this.id+"_underlay");
return this.dfd=new g}})})},"widgets/DistanceAndDirection/models/ConfirmNotation":function(){define("dojo/_base/declare dijit/_WidgetBase dijit/_TemplatedMixin dijit/_WidgetsInTemplateMixin dojo/text!./ConfirmNotation.html jimu/utils".split(" "),function(p,c,g,d,b,k){return p([c,g,d],{templateString:b,numberOfInputs:0,selectOptions:{},constructor:function(b,c){this.numberOfInputs=c.length;this.selectOptions=c},postCreate:function(){this.label1.innerHTML=k.sanitizeHTML(this.numberOfInputs+this.nls.multipleNotationsMessage);
for(var b=0;b<this.selectOptions.length;b++)this.comboOptions.addOption({value:this.selectOptions[b].name,label:this.selectOptions[b].notationType})}})})},"widgets/DistanceAndDirection/views/EditOutputCoordinate":function(){define("dojo/_base/declare dojo/_base/lang dojo/dom-style dojo/on dojo/dom-attr dijit/_WidgetBase dijit/_TemplatedMixin dijit/_WidgetsInTemplateMixin dojo/text!../templates/EditOutputCoordinate.html jimu/dijit/formSelect jimu/dijit/CheckBox".split(" "),function(p,c,g,d,b,k,l,e,
h){return p([k,l,e],{templateString:h,formats:{},ct:"DD",_setCtAttr:function(b){this.frmtSelect.set("value",b)},postCreate:function(){this.formats={DD:{defaultFormat:"YN XE",customFormat:null,useCustom:!1},DDM:{defaultFormat:"A\u00b0 B'N X\u00b0 Y'E",customFormat:null,useCustom:!1},DMS:{defaultFormat:"A\u00b0 B' C\"N X\u00b0 Y' Z\"E",customFormat:null,useCustom:!1},GARS:{defaultFormat:"XYQK",customFormat:null,useCustom:!1},GEOREF:{defaultFormat:"ABCDXY",customFormat:null,useCustom:!1},MGRS:{defaultFormat:"ZSXY",
customFormat:null,useCustom:!1},USNG:{defaultFormat:"ZSXY",customFormat:null,useCustom:!1},UTM:{defaultFormat:"ZB X Y",customFormat:null,useCustom:!1},"UTM (H)":{defaultFormat:"ZH X Y",customFormat:null,useCustom:!1}};b.set(this.frmtVal,"value",this.formats[this.ct].defaultFormat);this.own(this.frmtSelect.on("change",c.hitch(this,this.frmtSelectValueDidChange)));this.own(d(this.frmtVal,"change",c.hitch(this,this.formatValDidChange)));this.displayPrefixContainer()},formatValDidChange:function(){var c=
b.get(this.frmtVal,"value"),d=this.frmtSelect.get("value");this.formats[d].customFormat=c;this.formats[d].useCustom=!0;this.currentformat=c},frmtSelectValueDidChange:function(){var c=this.frmtSelect.get("value"),d=this.formats[c].useCustom?this.formats[c].customFormat:this.formats[c].defaultFormat;this.ct=c;b.set(this.frmtVal,"value",d);this.displayPrefixContainer()},displayPrefixContainer:function(){switch(this.frmtSelect.get("value")){case "DD":case "DDM":case "DMS":g.set(this.prefixContainer,{display:""});
break;default:g.set(this.prefixContainer,{display:"none"})}}})})},"widgets/DistanceAndDirection/models/DirectionalLineSymbol":function(){define("dojo/_base/declare dojo/_base/lang dojo/Stateful esri/geometry/screenUtils esri/symbols/SimpleLineSymbol esri/symbols/SimpleMarkerSymbol esri/graphic esri/geometry/ScreenPoint esri/geometry/geometryEngine dojo/_base/fx dojo/fx dojo/on".split(" "),function(p,c,g,d,b,k,l,e,h,n,w,f){return p([b,g],{constructor:function(a){this.inherited(arguments);this.setStyle(a.style);
this.setColor(a.color);this.setWidth(a.width);this.directionSymbols={arrow1:"m0.5,50.5c0,0 99.5,-41 99.5,-41c0,0 0.5,81.5 0.5,81.5c0,0 -100,-40.5 -100,-40.5z",arrow2:"M1,50l99.5,-50c0,0 -40,49.5 -40,49.5c0,0 39.5,50 39.5,50c0,0 -99,-49.5 -99,-49.5z",arrow3:"m0.5,50.5l90,-50l9,9.5l-79.5,40.5l80,39.5l-10,10.5l-89.5,-50z",arrow4:"m55.4605,51.5754l43.0685,-48.2908l-43.3797,48.2908l43.8197,44.8899l-43.5085,-44.8899zm-6.0505,42.3899l-0.44,-88.1807l-43.37967,45.7908l43.81967,42.3899z"};this.directionColor=
a.directionColor||this.color;this.directionSize=a.directionSize||12;this.directionPixelBuffer=a.directionPixelBuffer||40;this.animationRepeat=a.animationRepeat;this.animationDuration=a.animationDuration||350;this.directionSymbol=a.directionSymbol||"arrow1";this.showDirectionalSymbols=a.showDirectionalSymbols||!0;this.showStartSymbol=a.showStartSymbol||!1;this.startSymbol=a.startSymbol||new k({color:[128,128,128,64],size:8,type:"esriSMS",style:"esriSMSCircle",outline:{color:[0,0,0,255],width:2,type:"esriSLS",
style:"esriSLSSolid"}});this.showEndSymbol=a.showEndSymbol||!1;this.endSymbol=a.startSymbol||new k({color:[128,128,128,64],size:8,type:"esriSMS",style:"esriSMSX",outline:{color:[0,0,0,255],width:2,type:"esriSLS",style:"esriSLSSolid"}});this.graphics=[];this.map=null;this.drawGraphicDirection=this._drawDirection;this.type="DirectionalLineSymbol"},getStroke:function(){var a=0<arguments.callee.caller.arguments.length?arguments.callee.caller.arguments[4]:arguments.callee.caller.caller.arguments[4];if(!a||
a.dlsSymbolGroup)return this.inherited(arguments);this.graphics.push(a);var b=a.getLayer(),c=this.map=b.getMap();a.dlsSymbolGroup=b._div.createGroup();this._drawDirection(a,b,c);b.dlsGraphicRemove||(b.dlsGraphicRemove=b.on("graphic-remove",function(a){a.graphic.dlsSymbolGroup&&(dojo.query(".dls-symbol",a.graphic.dlsSymbolGroup.rawNode).forEach(dojo.destroy),dojo.destroy(a.graphic.dlsSymbolGroup.rawNode),a.graphic.dlsSymbolGroup=null)}));var d=null,e=null;c.graphics.dlsGraphicDraw||(c.graphics.dlsGraphicDraw=
c.graphics.on("graphic-draw",function(a){a.graphic.dlsSymbolGroup&&(d=a.graphic,(e="DirectionalLineSymbol"===d.symbol.type?d.symbol:d.symbol.outline&&"DirectionalLineSymbol"===d.symbol.outline.type?d.symbol.outline:null)&&e.drawGraphicDirection(d,this,this.getMap()))}));c.dlsExtChanged||(c.dlsExtChanged=c.on("extent-change",function(){for(var a=0,c=this.graphics.graphics.length;a<c;a++)if(d=this.graphics.graphics[a],d.symbol)if(d.attributes&&d.attributes.isDirectionalGraphic)this.graphics.remove(d),
a--,c--;else{var e="DirectionalLineSymbol"===d.symbol.type?d.symbol:d.symbol.outline&&"DirectionalLineSymbol"===d.symbol.outline.type?d.symbol.outline:null;e&&e.drawGraphicDirection(d,b,this)}for(a=0;a<this.graphicsLayerIds.length;a++)if(b=this.getLayer(this.graphicsLayerIds[a]),b.dlsGraphicRemove)for(c=0,e=b.graphics.length;c<e;c++)d=b.graphics[c],d.symbol&&(d.attributes&&d.attributes.isDirectionalGraphic?(b.remove(d),c--,e--):d.symbol.drawGraphicDirection(d,b,this))}));return this.inherited(arguments)},
_drawDirection:function(a,b,c){if(a.dlsSymbolGroup){var e=a.dlsSymbolGroup,f=a.geometry;f.spatialReference.wkid!==c.spatialReference.wkid&&(esri.geometry.canProject(f,c)?f=esri.geometry.project(f,c):console.error("Can't project geometry wkid - "+f.spatialReference.wkid+" to map wkid "+c.spatialReference.wkid));a.directions=[];dojo.query(".dls-symbol",a.dlsSymbolGroup.rawNode).forEach(dojo.destroy);var h=d.toScreenGeometry(c.extent,c.width,c.height,f);c=d.toScreenGeometry(c.extent,c.width,c.height,
c.extent);if(h="polyline"===f.type?h.paths:h.rings){if(this.showStartSymbol&&(f=this._getFirstItem(h),f=this._createGraphic(f,this.startSymbol),f.geometry)){b.add(f);var n=f.getShape();n?(e.add(n),f.attr("class","dls-symbol"),a.directions.push(f),a.visible||f.hide(),f.origJson=f.toJson(),f.toJson=this.directionGraphicToJson):b.remove(f)}if(this.showDirectionalSymbols)for(f=0,n=h.length;f<n;f++)for(var l=h[f],u=0,k=l.length-1;u<k;u++)if(u!==l.length)for(var g=l[u],t=l[u+1],w=this._getAngle(g,t),g=
this._getDirectionPoints(g,t,c),t=0,y=g.length;t<y;t++){var p=this._createGraphic(g[t],this._createSymbol(this.directionSymbol,w));b.add(p);var B=p.getShape();e.add(B);p.attr("class","dls-symbol");a.directions.push(p);a.visible||p.hide();p.origJson=p.toJson();p.toJson=this.directionGraphicToJson}this.showEndSymbol&&(f=this._getSecondToLastItem(h))&&(c=this._getLastItem(h))&&!this._isEqual(f,c)&&(h=this._getAngle(f,c),h=this._createSymbol(this.endSymbol,h),c=this._createGraphic(c,h),c.geometry&&(b.add(c),
(h=c.getShape())?(e.add(h),c.attr("class","dls-symbol"),a.directions.push(c),a.visible||c.hide(),c.origJson=c.toJson(),c.toJson=this.directionGraphicToJson):b.remove(c)));a.dlsAnimationRepeat&&(1<a.dlsAnimationRepeat||Infinity===a.dlsAnimationRepeat)&&this._animateGraphic(a,a.dlsAnimationRepeat)}else console.error("Can't apply DirectionalLineSymbol to geometry "+f.type)}},_getLastItem:function(a){return a[a.length-1][a[a.length-1].length-1]},_getSecondToLastItem:function(a){return a[a.length-1][a[a.length-
1].length-2]},_getFirstItem:function(a){return a[0][0]},_getAngle:function(a,b){return 180/Math.PI*Math.atan2(b[1]-a[1],b[0]-a[0])-180},_isEqual:function(a,b){var c=Object.getOwnPropertyNames(a),d=Object.getOwnPropertyNames(b);if(c.length!==d.length)return!1;for(d=0;d<c.length;d++){var e=c[d];if(a[e]!==b[e])return!1}return!0},_createSymbol:function(a,b){var d;"simplemarkersymbol"===a.type||"picturemarkersymbol"===a.type?d=c.clone(a):"string"===typeof a?(d=new k,d.setSize(this.directionSize).setPath(this.directionSymbols[a]?
this.directionSymbols[a]:a).setOutline(null).setColor(this.directionColor)):console.error("Symbol must be set to one of the pre-defined strings {'arrow1', 'arrow2', 'arrow3', 'arrow4'}, or a SimpleMarkerSymbol or PictureMarkerSymbol.");d.setAngle(b);return d},_createGraphic:function(a,b){var c=new l;c.setSymbol(b);c.attributes={isDirectionalGraphic:!0};a=new e(a[0],a[1]);a=this.map.toMap(a);c.geometry=h.within(a,this.map.extent)?a:null;return c},_getDirectionPoints:function(a,b,c){var d=[],e=a[0]<
b[0]?a[0]:b[0],f=a[0]>b[0]?a[0]:b[0],h=a[1]<b[1]?a[1]:b[1],n=a[1]>b[1]?a[1]:b[1],l=c.xmin<c.xmax?c.xmin:c.xmax,k=c.xmin>c.xmax?c.xmin:c.xmax,g=c.ymin<c.ymax?c.ymin:c.ymax;c=c.ymin>c.ymax?c.ymin:c.ymax;b=[b[0]-a[0],b[1]-a[1]];var w=Math.sqrt(b[0]*b[0]+b[1]*b[1]);if(w<this.directionPixelBuffer)return d;b[0]=b[0]/w*this.directionPixelBuffer;b[1]=b[1]/w*this.directionPixelBuffer;for(a=[a[0]+b[0],a[1]+b[1]];a[0]>=e&&a[0]<=f&&a[1]>=h&&a[1]<=n;)a[0]>=l&&a[0]<=k&&a[1]>=g&&a[1]<=c&&d.push([a[0],a[1]]),a=[a[0]+
b[0],a[1]+b[1]];return d},get:function(a){return this[a]?this[a]:null},_setDirectionSymbolAttr:function(a){this._set("directionSymbol",a);this._drawDirection()},_setStartSymbolAttr:function(a){this._set("startSymbol",a);this._drawDirection()},_setEndSymbolAttr:function(a){this._set("endSymbol",a);this._drawDirection()},_setShowStartSymbolAttr:function(a){this._set("showStartSymbol",a);this._drawDirection()},_setShowEndSymbolAttr:function(a){this._set("showEndSymbol",a);this._drawDirection()},animateDirection:function(a,
b){a&&(a=parseInt(a,10),isNaN(a)&&(a=Infinity),this.animationRepeat=a);if(!this.animationRepeat||1>this.animationRepeat)this.stopAnimation();else for(b&&(this.animationDuration=b),this.animationChain=null,this.animationEnd&&this.animationEnd.remove(),b=0,a=this.graphics.length;b<a;b++){var c=this.graphics[b];c.dlsSymbolGroup&&this._animateGraphic(c,this.animationRepeat)}},_animateGraphic:function(a,b){var d=[],e=this.animationDuration;a.dlsAnimationChain&&a.dlsAnimationChain.stop();dojo.query(".dls-symbol",
a.dlsSymbolGroup.rawNode).forEach(function(a){n.fadeOut({node:a,duration:10}).play();a=n.fadeIn({node:a,duration:e});d.push(a)});a.dlsAnimationRepeat=b;a.dlsAnimationChain=w.chain(d);a.dlsAnimationEnd=f(a.dlsAnimationChain,"End",c.hitch(this,function(){!isNaN(b)&&1<b?(b--,this._animateGraphic(a,b)):Infinity===b&&this._animateGraphic(a,b)}));try{a.dlsAnimationChain.play()}catch(q){}},stopAnimation:function(){for(var a=0,b=this.graphics.length;a<b;a++){var c=this.graphics[a];c.dlsSymbolGroup&&(dojo.query(".dls-symbol",
c.dlsSymbolGroup.rawNode).forEach(function(a){n.fadeIn({node:a,duration:10}).play()}),c.dlsAnimationRepeat=0,c.dlsAnimationChain&&c.dlsAnimationChain.stop(),c.dlsAnimationEnd&&c.dlsAnimationEnd.remove())}},toJson:function(){var a=this.inherited(arguments),b=this.color.toRgba();b[3]*=255;a.color=b;return a},directionGraphicToJson:function(){if(this.jsonUpdated||!this.origJson.symbol||!this.origJson.symbol.angle)return this.origJson;this.origJson.symbol.angle*=-1;this.jsonUpdated=!0;return this.origJson}})})},
"widgets/DistanceAndDirection/views/TabCircle":function(){define("dojo/_base/declare dojo/_base/lang dojo/_base/kernel dojo/on dojo/topic dojo/has dojo/touch dojo/dom-attr dojo/dom-class dojo/string dojo/mouse dojo/number dojo/keys dijit/_WidgetBase dijit/_TemplatedMixin dijit/_WidgetsInTemplateMixin dijit/TooltipDialog dijit/popup jimu/dijit/Message jimu/LayerInfos/LayerInfos esri/layers/FeatureLayer esri/symbols/SimpleFillSymbol esri/symbols/SimpleMarkerSymbol esri/symbols/TextSymbol esri/graphic esri/geometry/Polyline esri/geometry/Polygon esri/geometry/Point esri/geometry/Circle esri/tasks/FeatureSet esri/layers/LabelClass ../models/CircleFeedback ../views/CoordinateInput ../views/EditOutputCoordinate dojo/text!../templates/TabCircle.html jimu/utils dijit/focus dojo/_base/event dojo/aspect dijit/form/NumberTextBox jimu/dijit/formSelect jimu/dijit/CheckBox dijit/TitlePane".split(" "),
function(p,c,g,d,b,k,l,e,h,n,w,f,a,t,y,r,q,m,A,x,u,I,Q,M,N,J,v,B,O,F,K,H,L,D,G,S,E,z,C){return p([t,y,r],{templateString:G,baseClass:"jimu-widget-TabCircle",_restrictFocusOnAddCenterPointBtn:!1,_centerPointInputKeyPressed:!1,constructor:function(a){p.safeMixin(this,a)},postCreate:function(){this._centerPointInputKeyPressed=this._restrictFocusOnAddCenterPointBtn=this.useCalculatedDistance=!1;this.currentLengthUnit=this.lengthUnitDD.get("value");this._circleSym=new I(this.circleSymbol);this._ptSym=
new Q(this.pointSymbol);this._labelSym=new M(this.labelSymbol);this.map.addLayer(this.getLayer());if(this._gl.loaded){var a=x.getInstanceSync().getLayerInfoById("Distance \x26 Direction - Circle Graphics");a.showLabels();a.enablePopup()}else this._gl.on("load",c.hitch(this,function(){var a=x.getInstanceSync().getLayerInfoById("Distance \x26 Direction - Circle Graphics");a.showLabels();a.enablePopup()}));this.coordTool=new L({appConfig:this.appConfig,nls:this.nls,"aria-label":this.nls.centerPointLabel},
this.startPointCoords);this.coordTool.inputCoordinate.formatType="DD";this.coordinateFormat=new q({content:new D({nls:this.nls}),style:"width: 400px"});C.after(this.coordinateFormat,"onClose",c.hitch(this,function(){E.focus(this.coordinateFormatButton);if(this._restrictFocusOnAddCenterPointBtn){var a=this.coordTool.getValue();if(""===a||null===a||void 0===a)this._restrictFocusOnAddCenterPointBtn=!1}}));"DartTheme"===this.appConfig.theme.name&&h.add(this.coordinateFormat.domNode,"dartThemeClaroDijitTooltipContainerOverride");
this.dt=new H({appConfig:this.appConfig,map:this.map,coordTool:this.coordTool.inputCoordinate.util,nls:this.nls});this.dt.setFillSymbol(this._circleSym);this.syncEvents();this.checkValidInputs();this.radiusInput.invalidMessage=this.nls.numericInvalidMessage;this.radiusInput.rangeMessage=this.nls.rangeErrorMessage;this.timeInput.invalidMessage=this.nls.numericInvalidMessage;this.timeInput.rangeMessage=this.nls.invalidTimeMessage;this.distanceInput.invalidMessage=this.nls.numericInvalidMessage;this.distanceInput.rangeMessage=
this.nls.invalidDistanceMessage;this.distCalcControl.set("title",this.nls.distanceCalculatorLabel)},getLayer:function(){if(!this._gl){var a=new K({labelExpressionInfo:{value:"{Label}"}});a.symbol=this._labelSym;var b={layerDefinition:{id:"circleLayer",geometryType:"esriGeometryPolygon",objectIdField:"ObjectID",fields:[{name:"ObjectID",alias:"ObjectID",type:"esriFieldTypeOID"},{name:"Label",type:"esriFieldTypeString",alias:"Label"}]},featureSet:new F};this._gl=new u(b,{id:"Distance \x26 Direction - Circle Graphics",
showLabels:!0,outFields:["*"]});this._gl.setLabelingInfo([a]);return this._gl}},syncEvents:function(){b.subscribe("TAB_SWITCHED",c.hitch(this,this.tabSwitched));b.subscribe("DD-WIDGET-CLOSED",c.hitch(this,this._closeDijit));this.distCalcControl.watch("open",c.hitch(this,this.distCalcDidExpand));this.dt.watch("length",c.hitch(this,function(a,b,c){this.circleLengthDidChange(c)}));this.dt.watch("startPoint",c.hitch(this,function(a,b,c){this.dt.addStartGraphic(c,this._ptSym)}));this.dt.watch("startPointDD",
c.hitch(this,function(a,b,c){this.coordTool.inputCoordinate.set("coordinateEsriGeometry",c);this.coordTool.inputCoordinate.set("inputType",this.coordTool.inputCoordinate.formatType)}));this.dt.watch("endPoint",c.hitch(this,function(a,b,c){this.coordTool.inputCoordinate.set("coordinateEsriGeometry",c)}));this.coordTool.inputCoordinate.watch("outputString",c.hitch(this,function(a,b,c){this.coordTool.manualInput||(this.coordTool.set("value",c),this.currentCircle=null,this._restrictFocusOnAddCenterPointBtn?
this._restrictFocusOnAddCenterPointBtn=!1:this._centerPointInputKeyPressed?this._centerPointInputKeyPressed=!1:E.focus(this.addPointBtn))}));this.dt.on("draw-complete",c.hitch(this,this.feedbackDidComplete));this.own(d(this.coordTool,"keydown",c.hitch(this,this.coordToolKeyWasPressed)),this.lengthUnitDD.on("change",c.hitch(this,this.lengthUnitDDDidChange)),this.creationType.on("change",c.hitch(this,this.creationTypeDidChange)),this.distanceUnitDD.on("change",c.hitch(this,this.distanceInputDidChange)),
this.timeUnitDD.on("change",c.hitch(this,this.timeInputDidChange)),d(this.radiusInput,"change",c.hitch(this,function(){this.currentCircle=null})),d(this.coordinateFormatButton,"click",c.hitch(this,this.coordinateFormatButtonWasClicked)),d(this.coordinateFormatButton,"keydown",c.hitch(this,function(b){if(b.keyCode===a.ENTER||b.keyCode===a.SPACE)z.stop(b),this.coordinateFormatButtonWasClicked()})),d(this.addPointBtn,"keydown",c.hitch(this,function(b){if(b.keyCode===a.ENTER||b.keyCode===a.SPACE)z.stop(b),
this.pointButtonWasClicked()})),d(this.timeInput,"change",c.hitch(this,this.timeInputDidChange)),d(this.distanceInput,"change",c.hitch(this,this.distanceInputDidChange)),d(this.distanceInput,"keyup",c.hitch(this,this.distanceInputKeyWasPressed)),d(this.clearGraphicsButton,"click",c.hitch(this,this.clearGraphics)),d(this.clearGraphicsButton,"keydown",c.hitch(this,function(b){if(b.keyCode===a.ENTER||b.keyCode===a.SPACE)z.stop(b),this.clearGraphics()})),d(this.interactiveCircle,"change",c.hitch(this,
this.interactiveCheckBoxChanged)),d(this.interactiveCircle,"keydown",c.hitch(this,function(b){b.keyCode===a.ENTER&&(this.interactiveCircle.checked=this.interactiveCircle.checked?!1:!0,this.interactiveCheckBoxChanged())})),d(this.coordinateFormat.content.applyButton,"click",c.hitch(this,function(){this._restrictFocusOnAddCenterPointBtn=!0;var a=this.coordinateFormat.content.formats[this.coordinateFormat.content.ct],b=a.defaultFormat,c=this.coordinateFormat.content.frmtSelect.get("value");a.useCustom&&
(b=a.customFormat);this.coordTool.inputCoordinate.set("formatPrefix",this.coordinateFormat.content.addSignChkBox.checked);this.coordTool.inputCoordinate.set("formatString",b);this.coordTool.inputCoordinate.set("formatType",c);this.setCoordLabel(c);m.close(this.coordinateFormat);E.focus(this.coordinateFormatButton)})),d(this.coordinateFormat.content.applyButton,"keydown",c.hitch(this,function(b){if(b.keyCode===a.ENTER||b.keyCode===a.SPACE){z.stop(b);this._restrictFocusOnAddCenterPointBtn=!0;var c=
this.coordinateFormat.content.formats[this.coordinateFormat.content.ct],d=c.defaultFormat,e=this.coordinateFormat.content.frmtSelect.get("value");c.useCustom&&(d=c.customFormat);this.coordTool.inputCoordinate.set("formatPrefix",this.coordinateFormat.content.addSignChkBox.checked);this.coordTool.inputCoordinate.set("formatString",d);this.coordTool.inputCoordinate.set("formatType",e);this.setCoordLabel(e);m.close(this.coordinateFormat);E.focus(this.coordinateFormatButton)}b.keyCode===a.ESCAPE&&(z.stop(b),
m.close(this.coordinateFormat),E.focus(this.coordinateFormatButton))})),d(this.coordinateFormat.content.cancelButton,"click",c.hitch(this,function(){m.close(this.coordinateFormat)})),d(this.coordinateFormat.content.cancelButton,"keydown",c.hitch(this,function(b){if(b.keyCode===a.ENTER||b.keyCode===a.SPACE)z.stop(b),m.close(this.coordinateFormat),E.focus(this.coordinateFormatButton);b.keyCode===a.ESCAPE&&(z.stop(b),m.close(this.coordinateFormat),E.focus(this.coordinateFormatButton))})),d(this.coordinateFormat.content.frmtSelect,
"keydown",c.hitch(this,function(b){b.keyCode===a.ESCAPE&&(z.stop(b),m.close(this.coordinateFormat),E.focus(this.coordinateFormatButton))})),d(this.coordinateFormat.content.frmtVal,"keydown",c.hitch(this,function(b){b.keyCode===a.ESCAPE&&(z.stop(b),m.close(this.coordinateFormat),E.focus(this.coordinateFormatButton))})),d(this.coordinateFormat.content.addSignChkBox,"keydown",c.hitch(this,function(b){b.keyCode===a.ESCAPE&&(z.stop(b),m.close(this.coordinateFormat),E.focus(this.coordinateFormatButton));
b.keyCode===a.ENTER&&(z.stop(b),this.coordinateFormat.content.addSignChkBox.checked=this.coordinateFormat.content.addSignChkBox.checked?!1:!0)})),d(this.radiusInputDiv,w.leave,c.hitch(this,this.checkValidInputs)),d(this.okButton,"keydown",c.hitch(this,function(b){if(b.keyCode===a.ENTER||b.keyCode===a.SPACE)z.stop(b),this.okButtonClicked()})));k("esri-touch")?this.own(d(this.addPointBtn,l.press,c.hitch(this,this.pointButtonWasClicked))):this.own(d(this.addPointBtn,"click",c.hitch(this,this.pointButtonWasClicked)))},
circleLengthDidChange:function(a){var b=f.format(a,{places:2,locale:g.locale});this.radiusInput.set("displayedValue",b);this.radiusInput.set("value",a)},interactiveCheckBoxChanged:function(){this.tabSwitched();this.interactiveCircle.checked?(this.radiusInput.set("disabled",!0),this.distCalcControl.set("open",!1),this.distCalcControl.set("open",!1),this.distCalcControl.set("toggleable",!1)):(this.radiusInput.set("disabled",!1),this.distCalcControl.set("disabled",!1),this.distCalcControl.set("toggleable",
!0));this.checkValidInputs()},coordToolKeyWasPressed:function(d){this.dt.removeStartGraphic();d.keyCode===a.ENTER&&(this._centerPointInputKeyPressed=this._restrictFocusOnAddCenterPointBtn=!0,this.coordTool.inputCoordinate.getInputType().then(c.hitch(this,function(a){"UNKNOWN"===a.inputType?(new A({message:this.nls.invalidCoordinateTypeMessage}),this.coordTool.inputCoordinate.coordinateEsriGeometry=null,this.checkValidInputs()):this.dt.getProjectedGeometry(a.coordinateEsriGeometry,this.map.spatialReference).then(c.hitch(this,
c.hitch(this,function(c){b.publish("manual-circle-center-point-input",c);this.setCoordLabel(a.inputType);this.coordTool.inputCoordinate.set("formatString",this.coordinateFormat.content.formats[a.inputType].defaultFormat);this.coordTool.inputCoordinate.set("formatType",a.inputType);this.dt.addStartGraphic(c,this._ptSym);this.checkValidInputs()})))})))},coordinateFormatButtonWasClicked:function(){this.coordinateFormat.content.set("ct",this.coordTool.inputCoordinate.formatType);m.open({popup:this.coordinateFormat,
around:this.coordinateFormatButton});E.focus(this.coordinateFormat.content.frmtSelect.focusNode)},_closeDijit:function(){this.coordinateFormat&&this.coordinateFormat.domNode.offsetParent&&m.close(this.coordinateFormat)},distCalcDidExpand:function(){this.dt.deactivate();this.dt.cleanup();this.dt.disconnectOnMouseMoveHandler();this.coordTool.inputCoordinate.isManual=!0;this.distCalcControl.get("open")?this.radiusInput.set("disabled",!0):(this.radiusInput.set("disabled",!1),this.timeInput.set("value",
1),this.distanceInput.set("value",1))},timeInputDidChange:function(){this.currentTimeInSeconds=this.timeInput.get("value")*this.timeUnitDD.get("value");this.getCalculatedDistance();this.currentCircle=null},distanceInputKeyWasPressed:function(b){this.distanceInputDidChange();b.keyCode===a.ENTER&&(this.coordTool.inputCoordinate.outputString&&""!==this.coordTool.inputCoordinate.inputString?(this.removeManualGraphic(),this.setGraphic(!0),this.dt._onDoubleClickHandler()):new A({message:this.nls.noCenterPointSetMessage}))},
okButtonClicked:function(){h.contains(this.okButton,"jimu-state-disabled")||(this._restrictFocusOnAddCenterPointBtn=!0,this.removeManualGraphic(),this.currentCircle||this.setGraphic(!0),this.emit("show-publish",this._gl))},distanceInputDidChange:function(){this.currentDistanceInMeters=this.distanceInput.get("value")*this.distanceUnitDD.value.split(";")[0]/this.distanceUnitDD.value.split(";")[1];this.getCalculatedDistance();this.currentCircle=null},getCalculatedDistance:function(){if(this.currentTimeInSeconds&&
0<this.currentTimeInSeconds&&this.currentDistanceInMeters&&0<this.currentDistanceInMeters){this.calculatedRadiusInMeters=this.currentTimeInSeconds*this.currentDistanceInMeters;this.useCalculatedDistance=!0;var a=0;switch(this.currentLengthUnit){case "feet":a=3.2808399*this.calculatedRadiusInMeters;break;case "meters":a=this.calculatedRadiusInMeters;break;case "yards":a=1.0936133*this.calculatedRadiusInMeters;break;case "kilometers":a=.001*this.calculatedRadiusInMeters;break;case "miles":a=6.21371192E-4*
this.calculatedRadiusInMeters;break;case "nautical-miles":a=5.39957E-4*this.calculatedRadiusInMeters}a="Diameter"===this.creationType.get("value")?2*a:a;a=f.format(a,{places:"4"});this.radiusInput.set("value",a)}else this.calculatedRadiusInMeters=null,this.useCalculatedDistance=!0},pointButtonWasClicked:function(){h.contains(this.addPointBtn,"drawPointBtn-active")?(this.dt.deactivate(),this._setMapNavigation(!0)):(this.coordTool.manualInput=!1,b.publish("clear-points"),this._setMapNavigation(!1),
this.dt.set("isDiameter","Diameter"===this.creationType.get("value")),this.distCalcControl.get("open")?this.dt.activate("point"):this.interactiveCircle.checked?this.dt.activate("polyline"):this.dt.activate("point"));h.toggle(this.addPointBtn,"drawPointBtn-active")},lengthUnitDDDidChange:function(){this.currentLengthUnit=this.lengthUnitDD.get("value");this.dt.set("lengthUnit",this.currentLengthUnit);this.distCalcControl.get("open")&&this.distanceInputDidChange();this.currentCircle=null},creationTypeDidChange:function(){var a=
"Diameter"===this.creationType.get("value")?this.nls.diameterLabel:this.nls.radiusLabel;this.radiusDiameterLabel.innerHTML=S.sanitizeHTML(a);e.set(this.radiusInput,"aria-label",a);e.set(this.lengthUnitDD,"aria-label",a);this.currentCircle=null},feedbackDidComplete:function(a){if(a.geometry.center){var b=a.geometry.center,c=new B(a.geometry.rings[0][0][0],a.geometry.rings[0][0][1],a.geometry.center.spatialReference);a=new J(a.geometry.center.spatialReference);a.addPath([b,c]);this.setGraphic(!1,a);
E.focus(this.addPointBtn)}else h.toggle(this.addPointBtn,"drawPointBtn-active"),this._setMapNavigation(!0),this.dt.deactivate(),this.checkValidInputs()},setCoordLabel:function(a){a=S.sanitizeHTML(n.substitute(this.nls.centerPointLabel+" (${crdType})",{crdType:a}));this.coordInputLabel.innerHTML=a;e.set(this.coordTool.textbox,"aria-label",a)},removeManualGraphic:function(){null!==this.tempGraphic&&this._gl.remove(this.tempGraphic);this.dt.removeStartGraphic()},setGraphic:function(a,b){a||h.toggle(this.addPointBtn,
"drawPointBtn-active");this._setMapNavigation(!0);this.dt.deactivate();this.dt.removeStartGraphic();b="Diameter"===this.creationType.get("value")?this.radiusInput.get("value")/2:this.radiusInput.get("value");b=this.coordTool.inputCoordinate.util.convertToMeters(b,this.lengthUnitDD.get("value"));a=this.coordTool.inputCoordinate.coordinateEsriGeometry;b=new O({center:a,radius:b,geodesic:!0,numberOfPoints:360});a=new v(a.spatialReference);a.addRing(b.rings[0]);this.dt.getProjectedGeometry(a,this.map.spatialReference).then(c.hitch(this,
function(a){var b;b="Diameter"===this.creationType.get("value")?parseFloat(this.radiusInput.get("value"))/2:parseFloat(this.radiusInput.get("value"));b=new N(a,this._circleSym,{Label:window.isRTL?this._getLengthAbbrevation(this.lengthUnitDD.get("value"))+" "+this.radiusInput.get("displayedValue")+" "+this.creationType.get("displayedValue"):this.creationType.get("displayedValue")+" "+this.radiusInput.get("displayedValue")+" "+this._getLengthAbbrevation(this.lengthUnitDD.get("value")),CenterPoint:this.coordTool.get("value"),
RadiusDistance:b,RadiusUnit:this.currentLengthUnit});this.checkValidInputs();this.map.setExtent(a.getExtent().expand(3));this.currentCircle=b;this._gl.add(b);this._gl.refresh();this.dt.set("startPoint",null)}))},clearGraphics:function(){this._gl&&(this._gl.clear(),this._gl.refresh(),this.clearUI(!1));this.tabSwitched();this.checkValidInputs();this.currentCircle=null;for(var a=0;a<this.map.graphicsLayerIds.length;a++)this.map.getLayer(this.map.graphicsLayerIds[a]).refresh()},clearUI:function(a){a||
this.coordTool.clear();this.dt.set("startPoint",null);this.useCalculatedDistance=!1;h.remove(this.addPointBtn,"drawPointBtn-active");e.set(this.startPointCoords,"value","");this.radiusInput.set("value",1E3);this.timeInput.set("value",1);this.distanceInput.set("value",1)},setGraphicsHidden:function(){this._gl&&this._gl.hide()},setGraphicsShown:function(){this._gl&&this._gl.show()},checkValidInputs:function(){h.add(this.okButton,"jimu-state-disabled");e.set(this.okButton,"tabindex",-1);null!==this.coordTool.inputCoordinate.coordinateEsriGeometry&&
this.radiusInput.isValid()&&(h.remove(this.okButton,"jimu-state-disabled"),e.set(this.okButton,"tabindex",0));this.okButton.innerHTML=this.interactiveCircle.checked?this.nls.publishDDBtn:this.nls.common.ok},tabSwitched:function(){this.dt.deactivate();this.dt.cleanup();this.dt.disconnectOnMouseMoveHandler();this.dt.set("startPoint",null);this._setMapNavigation(!0);this.dt.removeStartGraphic();this.addPointBtn&&h.remove(this.addPointBtn,"drawPointBtn-active");m.close(this.coordinateFormat)},_setMapNavigation:function(a){a?
this.map.enableMapNavigation():(this.map.disableMapNavigation(),this.map.enableScrollWheelZoom())},_getLengthAbbrevation:function(a){var b=null;if(a)switch(a){case "feet":b=this.nls.abbrevFeetLabel;break;case "kilometers":b=this.nls.abbrevKmLabel;break;case "miles":b=this.nls.abbrevMilesLabel;break;case "meters":b=this.nls.abbrevMetersLabel;break;case "nautical-miles":b=this.nls.abbrevNauticalMilesLabel;break;case "yards":b=this.nls.abbrevYardsLabel;break;default:b=a}return b},_getDegreeAbbreviation:function(a){var b=
null;if(a)switch(a){case "degrees":b=this.nls.abbrevDegreesLabel;break;case "mils":b=this.nls.abbrevMilsLabel;break;default:b=a}return b},_getTimeAbbreviation:function(a){var b=null;if(a)switch(a){case "3600":b=this.nls.abbrevHoursLabel;break;case "60":b=this.nls.abbrevMinutesLabel;break;case "1":b=this.nls.abbrevSecondsLabel;break;default:b=a}return b},_getRateAbbreviation:function(a){var b=null;if(a)switch(a){case "0.3048;1":b=this.nls.abbrevFeetSecondsLabel;break;case "0.3048;3600":b=this.nls.abbrevFeetHourLabel;
break;case "1000;1":b=this.nls.abbrevKmSecondLabel;break;case "1000;3600":b=this.nls.abbrevKmHourLabel;break;case "1;1":b=this.nls.abbrevMetersSecondLabel;break;case "1;3600":b=this.nls.abbrevMetersHourLabel;break;case "1609.344;1":b=this.nls.abbrevMilesSecondLabel;break;case "1609.344;3600":b=this.nls.abbrevMilesHourLabel;break;case "1852;1":b=this.nls.abbrevNauticalMilesSecondLabel;break;case "1852;3600":b=this.nls.abbrevNauticalMilesHourLabel;break;default:b=a}return b},setFirstFocusNode:function(){S.initFirstFocusNode(this.domNodeObj,
this.creationType.domNode)},focusFirstNodeOfSelectedTab:function(){E.focus(this.creationType.focusNode)},setLastFocusNode:function(){S.initLastFocusNode(this.domNodeObj,this.clearGraphicsButton)}})})},"widgets/DistanceAndDirection/models/CircleFeedback":function(){define("dojo/_base/declare dojo/_base/lang dojo/_base/connect dojo/topic esri/graphic esri/toolbars/draw esri/geometry/Circle esri/geometry/Polyline esri/geometry/geometryEngine ./Feedback".split(" "),function(p,c,g,d,b,k,l,e,h,n){n=p([n],
{constructor:function(b){p.safeMixin(this,b);this.syncEvents();this.initGeometryService()},clearGraphics:function(){this.map.graphics.clear()},syncEvents:function(){d.subscribe("MANUAL_CIRCLE_RADIUS_INPUT",c.hitch(this,this.manualRadiusUpdate));d.subscribe("manual-circle-center-point-input",c.hitch(this,this.onCenterPointManualInputHandler));d.subscribe("clear-points",c.hitch(this,this.clearPoints))},clearPoints:function(b){b&&(this._points=[],this.map.graphics.clear())},onCenterPointManualInputHandler:function(b){this._points=
[];this._points.push(b.offset(0,0));this.set("startPoint",this._points[0]);this.map.centerAt(b)},manualRadiusUpdate:function(){this.circleGraphic&&this.map.graphics.remove(this.circleGraphic)},_onClickHandler:function(b){var d;this.map.snappingManager&&(d=this.map.snappingManager._snappingPoint);var a=d||b.mapPoint;this._processAfterMapClick(a).then(c.hitch(this,function(b){this._points.push(a);switch(this._geometryType){case k.POINT:this.set("startPoint",a);this.set("startPointDD",b);this._drawEnd(a.offset(0,
0));this._setTooltipMessage(0);break;case k.POLYLINE:switch(this._points.length){case 1:this.set("startPoint",a);this.set("startPointDD",b);this.startPoint=b;this.canProjectLocally&&(this.startPoint=a,this._onMouseMoveHandlerConnect=g.connect(this.map,"onMouseMove",this._onMouseMoveHandler));break;case 2:this.endPoint=b,this._onDoubleClickHandler()}this._setTooltipMessage(this._points.length)}}))},_onMouseMoveHandler:function(c){var d;this.map.snappingManager&&(d=this.map.snappingManager._snappingPoint);
c=this.setCircleGeometry(this.startPoint,d||c.mapPoint);this.cleanup();this.circleGraphic=new b(c,this.fillSymbol);this.map.graphics.add(this.circleGraphic)},_onDoubleClickHandler:function(){this.disconnectOnMouseMoveHandler();this.cleanup();this._clear();this._setTooltipMessage(0);if(this.circleGraphic)this._drawEnd(this.circleGraphic.geometry);else{var b=this.setCircleGeometry(this.startPoint,this.endPoint);this._drawEnd(b)}},disconnectOnMouseMoveHandler:function(){g.disconnect(this._onMouseMoveHandlerConnect)},
cleanup:function(){this.circleGraphic&&this.map.graphics.remove(this.circleGraphic)},setCircleGeometry:function(b,c){var a=new e(b.spatialReference);a.addPath([b,c]);c=h.geodesicLength(a,9001);a=this.coordTool.convertMetersToUnits(c,this.lengthUnit);this.isDiameter&&(a*=2);this.set("length",a);return new l(b,{radius:c,geodesic:!0,numberOfPoints:360})}});n.DD_CIRCLE_LENGTH_DID_CHANGE="DD_CIRCLE_LENGTH_DID_CHANGE";return n})},"dijit/TitlePane":function(){define("dojo/_base/array dojo/_base/declare dojo/dom dojo/dom-attr dojo/dom-class dojo/dom-geometry dojo/fx dojo/has dojo/_base/kernel dojo/keys ./_CssStateMixin ./_TemplatedMixin ./layout/ContentPane dojo/text!./templates/TitlePane.html ./_base/manager ./a11yclick".split(" "),
function(p,c,g,d,b,k,l,e,h,n,w,f,a,t,y){c=c("dijit.TitlePane",[a,f,w],{title:"",_setTitleAttr:{node:"titleNode",type:"innerHTML"},open:!0,toggleable:!0,tabIndex:"0",duration:y.defaultDuration,baseClass:"dijitTitlePane",templateString:t,doLayout:!1,_setTooltipAttr:{node:"focusNode",type:"attribute",attribute:"title"},buildRendering:function(){this.inherited(arguments);g.setSelectable(this.titleNode,!1)},postCreate:function(){this.inherited(arguments);this.toggleable&&this._trackMouseState(this.titleBarNode,
this.baseClass+"Title");var a=this.hideNode,b=this.wipeNode;this._wipeIn=l.wipeIn({node:b,duration:this.duration,beforeBegin:function(){a.style.display=""}});this._wipeOut=l.wipeOut({node:b,duration:this.duration,onEnd:function(){a.style.display="none"}})},_setOpenAttr:function(a,b){p.forEach([this._wipeIn,this._wipeOut],function(a){a&&"playing"==a.status()&&a.stop()});b?this[a?"_wipeIn":"_wipeOut"].play():this.hideNode.style.display=this.wipeNode.style.display=a?"":"none";if(this._started)if(a)this._onShow();
else this.onHide();this.containerNode.setAttribute("aria-hidden",a?"false":"true");this.focusNode.setAttribute("aria-pressed",a?"true":"false");this._set("open",a);this._setCss()},_setToggleableAttr:function(a){this.focusNode.setAttribute("role",a?"button":"heading");a?(this.focusNode.setAttribute("aria-controls",this.id+"_pane"),this.focusNode.setAttribute("tabIndex",this.tabIndex),this.focusNode.setAttribute("aria-pressed",this.open)):(d.remove(this.focusNode,"aria-controls"),d.remove(this.focusNode,
"tabIndex"),d.remove(this.focusNode,"aria-pressed"));this._set("toggleable",a);this._setCss()},_setContentAttr:function(a){this.open&&this._wipeOut&&"playing"!=this._wipeOut.status()?(this._wipeIn&&"playing"==this._wipeIn.status()&&this._wipeIn.stop(),k.setMarginBox(this.wipeNode,{h:k.getMarginBox(this.wipeNode).h}),this.inherited(arguments),this._wipeIn?this._wipeIn.play():this.hideNode.style.display=""):this.inherited(arguments)},toggle:function(){this._setOpenAttr(!this.open,!0)},_setCss:function(){var a=
this.titleBarNode||this.focusNode,c=this._titleBarClass;this._titleBarClass=this.baseClass+"Title"+(this.toggleable?"":"Fixed")+(this.open?"Open":"Closed");b.replace(a,this._titleBarClass,c||"");b.replace(a,this._titleBarClass.replace("TitlePaneTitle",""),(c||"").replace("TitlePaneTitle",""));this.arrowNodeInner.innerHTML=this.open?"-":"+"},_onTitleKey:function(a){a.keyCode==n.DOWN_ARROW&&this.open&&(this.containerNode.focus(),a.preventDefault())},_onTitleClick:function(){this.toggleable&&this.toggle()},
setTitle:function(a){h.deprecated("dijit.TitlePane.setTitle() is deprecated.  Use set('title', ...) instead.","","2.0");this.set("title",a)}});e("dojo-bidi")&&c.extend({_setTitleAttr:function(a){this._set("title",a);this.titleNode.innerHTML=a;this.applyTextDir(this.titleNode)},_setTooltipAttr:function(a){this._set("tooltip",a);this.textDir&&(a=this.enforceTextDirWithUcc(null,a));d.set(this.focusNode,"title",a)},_setTextDirAttr:function(a){this._created&&this.textDir!=a&&(this._set("textDir",a),this.set("title",
this.title),this.set("tooltip",this.tooltip))}});return c})},"widgets/DistanceAndDirection/views/TabEllipse":function(){define("dojo/_base/declare dojo/_base/lang dojo/_base/kernel dojo/on dojo/topic dojo/has dojo/touch dojo/dom-attr dojo/dom-class dojo/string dojo/number dojo/mouse dojo/keys dijit/_WidgetBase dijit/_TemplatedMixin dijit/TooltipDialog dijit/_WidgetsInTemplateMixin dijit/popup jimu/dijit/Message jimu/LayerInfos/LayerInfos jimu/utils esri/layers/GraphicsLayer esri/layers/FeatureLayer esri/layers/LabelClass esri/symbols/SimpleMarkerSymbol esri/symbols/SimpleFillSymbol esri/symbols/TextSymbol esri/graphic esri/tasks/FeatureSet ../models/EllipseFeedback ../views/CoordinateInput ../views/EditOutputCoordinate dojo/text!../templates/TabEllipse.html dijit/focus dojo/_base/event dojo/aspect dijit/form/NumberTextBox jimu/dijit/formSelect jimu/dijit/CheckBox".split(" "),
function(p,c,g,d,b,k,l,e,h,n,w,f,a,t,y,r,q,m,A,x,u,I,Q,M,N,J,v,B,O,F,K,H,L,D,G,S){return p([t,y,q],{templateString:L,baseClass:"jimu-widget-TabEllipse",centerPointGraphic:null,_restrictFocusOnAddCenterPointBtn:!1,_centerPointInputKeyPressed:!1,constructor:function(a){p.safeMixin(this,a)},postCreate:function(){this._centerPointInputKeyPressed=this._restrictFocusOnAddCenterPointBtn=!1;this.currentAngleUnit=this.angleUnitDD.get("value");this.currentLengthUnit=this.lengthUnitDD.get("value");this._labelSym=
new v(this.labelSymbol);this._ptSym=new N(this.pointSymbol);this._ellipseSym=new J(this.ellipseSymbol);this._textGL=new I;this.map.addLayer(this._textGL);this.map.addLayer(this.getLayer());if(this._gl.loaded){var a=x.getInstanceSync().getLayerInfoById("Distance \x26 Direction - Ellipse Graphics");a.showLabels();a.enablePopup()}else this._gl.on("load",c.hitch(this,function(){var a=x.getInstanceSync().getLayerInfoById("Distance \x26 Direction - Ellipse Graphics");a.showLabels();a.enablePopup()}));this.coordTool=
new K({appConfig:this.appConfig,nls:this.nls,"aria-label":this.nls.centerPointLabel},this.startPointCoords);this.coordTool.inputCoordinate.formatType="DD";this.coordinateFormat=new r({content:new H({nls:this.nls}),style:"width: 400px"});S.after(this.coordinateFormat,"onClose",c.hitch(this,function(){D.focus(this.coordinateFormatButton);if(this._restrictFocusOnAddCenterPointBtn){var a=this.coordTool.getValue();if(""===a||null===a||void 0===a)this._restrictFocusOnAddCenterPointBtn=!1}}));"DartTheme"===
this.appConfig.theme.name&&h.add(this.coordinateFormat.domNode,"dartThemeClaroDijitTooltipContainerOverride");this.dt=new F({appConfig:this.appConfig,map:this.map,coordTool:this.coordTool.inputCoordinate.util,nls:this.nls,parentWidget:this});this.dt.setLineSymbol(this._ellipseSym);this.dt.set("lengthUnit","kilometers");this.dt.set("angle",0);this.dt.set("ellipseType","semi");this.syncEvents();this.checkValidInputs();this.majorAxisInput.invalidMessage=this.nls.numericInvalidMessage;this.majorAxisInput.rangeMessage=
this.nls.axisErrorMessage;this.minorAxisInput.invalidMessage=this.nls.numericInvalidMessage;this.minorAxisInput.rangeMessage=this.nls.axisErrorMessage;this.angleInput.invalidMessage=this.nls.numericInvalidMessage;this.angleInput.rangeMessage=this.nls.orientationErrorMessage},getLayer:function(){if(!this._gl){var a=[],b={labelExpressionInfo:{value:this.nls.ellipseMajorAxis+" {MAJOR}"}},b=new M(b);b.labelPlacement="above-along";b.symbol=c.clone(this._labelSym).setOffset(0,20);a.push(b);b={labelExpressionInfo:{value:this.nls.ellipseMinorAxis+
" {MINOR}"}};b=new M(b);b.labelPlacement="center-along";b.symbol=this._labelSym;a.push(b);b={labelExpressionInfo:{value:this.nls.angleLabel+": {ORIENTATION_ANGLE}"}};b=new M(b);b.labelPlacement="below-along";b.symbol=c.clone(this._labelSym).setOffset(0,-20);a.push(b);a={layerDefinition:{extent:{xmin:0,ymin:0,xmax:0,ymax:0,spatialReference:{wkid:102100,latestWkid:102100}},geometryType:"esriGeometryPolygon",objectIdField:"ObjectID",fields:[{name:"ObjectID",alias:"ObjectID",type:"esriFieldTypeOID"},
{name:"MAJOR",type:"esriFieldTypeText",alias:"Major Axis"},{name:"MINOR",type:"esriFieldTypeText",alias:"Minor Axis"},{name:"ORIENTATION_ANGLE",type:"esriFieldTypeText",alias:"Orientation Angle"}]},featureSet:new O};this._gl=new Q(a,{id:"Distance \x26 Direction - Ellipse Graphics",showLabels:!0});this.own(d(this._gl,"visibility-change",c.hitch(this,function(a){this._textGL.setVisibility(a.visible)})));return this._gl}},syncEvents:function(){b.subscribe("TAB_SWITCHED",c.hitch(this,this.tabSwitched));
b.subscribe("DD-WIDGET-CLOSED",c.hitch(this,this._closeDijit));b.subscribe(F.DD_ELLIPSE_MINOR_LENGTH_CHANGE,c.hitch(this,this.minorLengthDidChange));b.subscribe(F.DD_ELLIPSE_MAJOR_LENGTH_CHANGE,c.hitch(this,this.majorLengthDidChange));b.subscribe(F.DD_ELLIPSE_ANGLE_CHANGE,c.hitch(this,this.angleDidChange));this.dt.watch("startPoint",c.hitch(this,function(a,b,c){this.dt.addStartGraphic(c,this._ptSym)}));this.dt.watch("startPointDD",c.hitch(this,function(a,b,c){this.coordTool.inputCoordinate.set("coordinateEsriGeometry",
c)}));this.coordTool.inputCoordinate.watch("outputString",c.hitch(this,function(a,b,c){this.coordTool.manualInput||(this.coordTool.set("value",c),this.currentEllipse=null,this._restrictFocusOnAddCenterPointBtn?this._restrictFocusOnAddCenterPointBtn=!1:this._centerPointInputKeyPressed?this._centerPointInputKeyPressed=!1:D.focus(this.addPointBtn))}));this.own(this.dt.on("draw-complete",c.hitch(this,this.feedbackDidComplete)),this.ellipseType.on("change",c.hitch(this,this.ellipseTypeDDDidChange)),this.angleUnitDD.on("change",
c.hitch(this,this.angleUnitDDDidChange)),this.lengthUnitDD.on("change",c.hitch(this,this.lengthUnitDDDidChange)),d(this.coordinateFormatButton,"click",c.hitch(this,this.coordinateFormatButtonWasClicked)),d(this.coordinateFormatButton,"keydown",c.hitch(this,function(b){if(b.keyCode===a.ENTER||b.keyCode===a.SPACE)G.stop(b),this.coordinateFormatButtonWasClicked()})),d(this.coordinateFormat.content.applyButton,"click",c.hitch(this,function(){this._restrictFocusOnAddCenterPointBtn=!0;var a=this.coordinateFormat.content.formats[this.coordinateFormat.content.ct],
b=a.defaultFormat,c=this.coordinateFormat.content.frmtSelect.get("value");a.useCustom&&(b=a.customFormat);this.coordTool.inputCoordinate.set("formatPrefix",this.coordinateFormat.content.addSignChkBox.checked);this.coordTool.inputCoordinate.set("formatString",b);this.coordTool.inputCoordinate.set("formatType",c);this.setCoordLabel(c);m.close(this.coordinateFormat);D.focus(this.coordinateFormatButton)})),d(this.coordinateFormat.content.applyButton,"keydown",c.hitch(this,function(b){if(b.keyCode===a.ENTER||
b.keyCode===a.SPACE){G.stop(b);this._restrictFocusOnAddCenterPointBtn=!0;var c=this.coordinateFormat.content.formats[this.coordinateFormat.content.ct],d=c.defaultFormat,e=this.coordinateFormat.content.frmtSelect.get("value");c.useCustom&&(d=c.customFormat);this.coordTool.inputCoordinate.set("formatPrefix",this.coordinateFormat.content.addSignChkBox.checked);this.coordTool.inputCoordinate.set("formatString",d);this.coordTool.inputCoordinate.set("formatType",e);this.setCoordLabel(e);m.close(this.coordinateFormat);
D.focus(this.coordinateFormatButton)}b.keyCode===a.ESCAPE&&(G.stop(b),m.close(this.coordinateFormat),D.focus(this.coordinateFormatButton))})),d(this.addPointBtn,"keydown",c.hitch(this,function(b){if(b.keyCode===a.ENTER||b.keyCode===a.SPACE)G.stop(b),this.pointButtonWasClicked()})),d(this.interactiveEllipse,"change",c.hitch(this,this.interactiveCheckBoxChanged)),d(this.interactiveEllipse,"keydown",c.hitch(this,function(b){b.keyCode===a.ENTER&&(this.interactiveEllipse.checked=this.interactiveEllipse.checked?
!1:!0,this.interactiveCheckBoxChanged())})),d(this.coordTool,"keydown",c.hitch(this,this.coordToolKeyWasPressed)),d(this.majorAxisInput,"change",c.hitch(this,function(){this.currentEllipse=null})),d(this.minorAxisInput,"change",c.hitch(this,function(){this.currentEllipse=null})),d(this.angleInput,"change",c.hitch(this,this.angleDidChange)),d(this.coordinateFormat.content.cancelButton,"click",c.hitch(this,function(){m.close(this.coordinateFormat)})),d(this.coordinateFormat.content.cancelButton,"keydown",
c.hitch(this,function(b){if(b.keyCode===a.ENTER||b.keyCode===a.SPACE)G.stop(b),m.close(this.coordinateFormat),D.focus(this.coordinateFormatButton);b.keyCode===a.ESCAPE&&(G.stop(b),m.close(this.coordinateFormat),D.focus(this.coordinateFormatButton))})),d(this.clearGraphicsButton,"click",c.hitch(this,this.clearGraphics)),d(this.clearGraphicsButton,"keydown",c.hitch(this,function(b){if(b.keyCode===a.ENTER||b.keyCode===a.SPACE)G.stop(b),this.clearGraphics()})),d(this.majorAxisInputDiv,f.leave,c.hitch(this,
this.checkValidInputs)),d(this.minorAxisInputDiv,f.leave,c.hitch(this,this.checkValidInputs)),d(this.coordinateFormat.content.frmtSelect,"keydown",c.hitch(this,function(b){b.keyCode===a.ESCAPE&&(G.stop(b),m.close(this.coordinateFormat),D.focus(this.coordinateFormatButton))})),d(this.coordinateFormat.content.frmtVal,"keydown",c.hitch(this,function(b){b.keyCode===a.ESCAPE&&(G.stop(b),m.close(this.coordinateFormat),D.focus(this.coordinateFormatButton))})),d(this.coordinateFormat.content.addSignChkBox,
"keydown",c.hitch(this,function(b){b.keyCode===a.ESCAPE&&(G.stop(b),m.close(this.coordinateFormat),D.focus(this.coordinateFormatButton));b.keyCode===a.ENTER&&(G.stop(b),this.coordinateFormat.content.addSignChkBox.checked=this.coordinateFormat.content.addSignChkBox.checked?!1:!0)})),d(this.angleInputDiv,f.leave,c.hitch(this,this.checkValidInputs)),d(this.okButton,"keydown",c.hitch(this,function(b){if(b.keyCode===a.ENTER||b.keyCode===a.SPACE)G.stop(b),this.okButtonClicked()})));k("esri-touch")?this.own(d(this.addPointBtn,
l.press,c.hitch(this,this.pointButtonWasClicked))):this.own(d(this.addPointBtn,"click",c.hitch(this,this.pointButtonWasClicked)))},okButtonClicked:function(){h.contains(this.okButton,"jimu-state-disabled")||(this._restrictFocusOnAddCenterPointBtn=!0,this.currentEllipse||("full"===e.get(this.ellipseType,"value")?b.publish("create-manual-ellipse",this.majorAxisInput.get("value")/2,this.minorAxisInput.get("value")/2,this.angleInput.get("value"),this.coordTool.inputCoordinate.coordinateEsriGeometry):
b.publish("create-manual-ellipse",this.majorAxisInput.get("value"),this.minorAxisInput.get("value"),this.angleInput.get("value"),this.coordTool.inputCoordinate.coordinateEsriGeometry)),this.emit("show-publish",this._gl))},majorLengthDidChange:function(a){"full"===e.get(this.ellipseType,"value")&&(a*=2);var b=w.format(a,{places:2,locale:g.locale});this.majorAxisInput.set("value",a);this.majorAxisInput.set("displayedValue",b)},minorLengthDidChange:function(a){"full"===e.get(this.ellipseType,"value")&&
(a*=2);var b=w.format(a,{places:2,locale:g.locale});this.minorAxisInput.set("value",a);this.minorAxisInput.set("displayedValue",b)},angleDidChange:function(a){var b=w.format(a,{places:2,locale:g.locale});this.angleInput.set("value",a);this.angleInput.set("displayedValue",b);this.dt.set("angle",a);this.currentEllipse=null},interactiveCheckBoxChanged:function(){this.tabSwitched();this.interactiveEllipse.checked?(this.majorAxisInput.set("disabled",!0),this.minorAxisInput.set("disabled",!0),this.angleInput.set("disabled",
!0)):(this.majorAxisInput.set("disabled",!1),this.minorAxisInput.set("disabled",!1),this.angleInput.set("disabled",!1));this.checkValidInputs()},coordToolKeyWasPressed:function(d){this.dt.removeStartGraphic();d.keyCode===a.ENTER&&(this._centerPointInputKeyPressed=this._restrictFocusOnAddCenterPointBtn=!0,this.currentEllipse=null,this.coordTool.inputCoordinate.getInputType().then(c.hitch(this,function(a){"UNKNOWN"===a.inputType?(new A({message:this.nls.invalidCoordinateTypeMessage}),this.coordTool.inputCoordinate.coordinateEsriGeometry=
null):this.dt.getProjectedGeometry(a.coordinateEsriGeometry,this.map.spatialReference).then(c.hitch(this,c.hitch(this,function(c){b.publish("manual-ellipse-center-point-input",c);this.setCoordLabel(a.inputType);this.coordTool.inputCoordinate.set("formatString",this.coordinateFormat.content.formats[a.inputType].defaultFormat);this.coordTool.inputCoordinate.set("formatType",a.inputType);this.dt.addStartGraphic(c,this._ptSym)})));this.checkValidInputs()})))},coordinateFormatButtonWasClicked:function(){this.coordinateFormat.content.set("ct",
this.coordTool.inputCoordinate.formatType);m.open({popup:this.coordinateFormat,around:this.coordinateFormatButton});D.focus(this.coordinateFormat.content.frmtSelect.focusNode)},_closeDijit:function(){this.coordinateFormat&&this.coordinateFormat.domNode.offsetParent&&m.close(this.coordinateFormat)},pointButtonWasClicked:function(){h.contains(this.addPointBtn,"drawPointBtn-active")?(this.dt.deactivate(),this._setMapNavigation(!0)):(this.coordTool.manualInput=!1,b.publish("clear-points"),this._setMapNavigation(!1),
this.interactiveEllipse.checked?this.dt.activate("polyline"):this.dt.activate("point"));h.toggle(this.addPointBtn,"drawPointBtn-active")},lengthUnitDDDidChange:function(){this.currentLengthUnit=this.lengthUnitDD.get("value");this.dt.set("lengthUnit",this.currentLengthUnit);this.currentEllipse=null},ellipseTypeDDDidChange:function(){var a,b;a="full"===e.get(this.ellipseType,"value")?this.nls.majorDiameterLabel:this.nls.majorRadiusLabel;b="full"===e.get(this.ellipseType,"value")?this.nls.minorDiameterLabel:
this.nls.minorRadiusLabel;this.majorAxisLabel.textContent="full"===e.get(this.ellipseType,"value")?this.nls.majorDiameterLabel:this.nls.majorRadiusLabel;this.minorAxisLabel.textContent="full"===e.get(this.ellipseType,"value")?this.nls.minorDiameterLabel:this.nls.minorRadiusLabel;e.set(this.majorAxisInput,"aria-label",a);e.set(this.minorAxisInput,"aria-label",b)},angleUnitDDDidChange:function(){this.currentAngleUnit=this.angleUnitDD.get("value");this.dt.set("angleUnit",this.currentAngleUnit);"degrees"===
this.currentAngleUnit?(this.angleInput.constraints.max=360,this.angleInput.rangeMessage=this.nls.degreesRangeMessage):(this.angleInput.constraints.max=6400,this.angleInput.rangeMessage=this.nls.millsRangeMessage);this.currentEllipse=null},feedbackDidComplete:function(a){if("polygon"===a.geometry.type){this.currentEllipse=new B(a.geometry.geometry,this._ellipseSym);var b=this.majorAxisLabel.textContent.split(" ")[1],d,e;d="semi"===this.ellipseType.get("value")?2*parseFloat(this.majorAxisInput.value):
parseFloat(this.majorAxisInput.value);e="semi"===this.ellipseType.get("value")?2*parseFloat(this.minorAxisInput.value):parseFloat(this.minorAxisInput.value);this.currentEllipse.setAttributes({MINOR:b+": "+this.minorAxisInput.get("displayedValue")+" "+this.lengthUnitDD.get("displayedValue"),MAJOR:b+": "+this.majorAxisInput.get("displayedValue")+" "+dijit.byId("lengthUnitDD").get("displayedValue"),ORIENTATION_ANGLE:this.angleInput.get("displayedValue")+" "+this.angleUnitDD.get("displayedValue"),CenterPoint:this.coordTool.get("value"),
MajorAxis:d,MinorAxis:e,Unit:this.currentLengthUnit,Orientation:parseFloat(this.angleInput.get("value")),OrientationUnit:this.currentAngleUnit});this._gl.add(this.currentEllipse);a=a.geometry.geometry.getCentroid();b=window.isRTL?this.minorAxisInput.get("displayedValue")+" "+this._getLengthAbbrevation(this.lengthUnitDD.get("value"))+" "+this.nls.minorRadiusLabel:this.minorAxisLabel.textContent+" "+this.minorAxisInput.get("displayedValue")+" "+this._getLengthAbbrevation(this.lengthUnitDD.get("value"));
this._textGL.add(new B(a,c.clone(this._labelSym).setOffset(0,20).setText(b)));b=window.isRTL?this.majorAxisInput.get("displayedValue")+" "+this._getLengthAbbrevation(dijit.byId("lengthUnitDD").get("value"))+" "+this.nls.majorRadiusLabel:this.majorAxisLabel.textContent+" "+this.majorAxisInput.get("displayedValue")+" "+this._getLengthAbbrevation(dijit.byId("lengthUnitDD").get("value"));this._textGL.add(new B(a,c.clone(this._labelSym).setText(b)));b=window.isRTL?this.angleInput.get("displayedValue")+
" "+this._getDegreeAbbreviation(this.angleUnitDD.get("value"))+" "+this.nls.angleLabel:this.nls.angleLabel+" "+this.angleInput.get("displayedValue")+" "+this._getDegreeAbbreviation(this.angleUnitDD.get("value"));this._textGL.add(new B(a,c.clone(this._labelSym).setOffset(0,-20).setText(b)));this._gl.refresh();this.map.setExtent(this.currentEllipse.geometry.getExtent().expand(3))}this.checkValidInputs();this._setMapNavigation(!0);this.dt.deactivate();h.remove(this.addPointBtn,"drawPointBtn-active");
this._restrictFocusOnAddCenterPointBtn?this._restrictFocusOnAddCenterPointBtn=!1:D.focus(this.addPointBtn)},clearGraphics:function(){this._gl&&(this._gl.clear(),this.coordTool.clear(),this._textGL.clear());this.tabSwitched();h.remove(this.addPointBtn,"drawPointBtn-active");this.currentEllipse=null;this.checkValidInputs();for(var a=0;a<this.map.graphicsLayerIds.length;a++)this.map.getLayer(this.map.graphicsLayerIds[a]).refresh()},setGraphicsHidden:function(){this._gl&&this._gl.hide()},setGraphicsShown:function(){this._gl&&
this._gl.show()},createCenterPointGraphic:function(){null!==this.centerPointGraphic&&this._gl.remove(this.centerPointGraphic);var a=this.coordTool.inputCoordinate.coordinateEsriGeometry;a&&(this.centerPointGraphic=new B(a,new N),this._gl.add(this.centerPointGraphic))},removeCenterPointGraphic:function(){this.centerPointGraphic&&this._gl.remove(this.centerPointGraphic)},setCoordLabel:function(a){a=u.sanitizeHTML(n.substitute(this.nls.centerPointLabel+" (${crdType})",{crdType:a}));this.coordInputLabel.innerHTML=
a;e.set(this.coordTool.textbox,"aria-label",a)},checkValidInputs:function(){h.add(this.okButton,"jimu-state-disabled");e.set(this.okButton,"tabindex",-1);null!==this.coordTool.inputCoordinate.coordinateEsriGeometry&&this.majorAxisInput.isValid()&&this.minorAxisInput.isValid()&&this.angleInput.isValid()&&(h.remove(this.okButton,"jimu-state-disabled"),e.set(this.okButton,"tabindex",0));this.okButton.innerHTML=this.interactiveEllipse.checked?this.nls.publishDDBtn:this.nls.common.ok},tabSwitched:function(){this.dt.deactivate();
this.dt.cleanup();this.dt.disconnectOnMouseMoveHandler();this._setMapNavigation(!0);this.dt.removeStartGraphic();this.addPointBtn&&h.remove(this.addPointBtn,"drawPointBtn-active");m.close(this.coordinateFormat)},_setMapNavigation:function(a){a?this.map.enableMapNavigation():(this.map.disableMapNavigation(),this.map.enableScrollWheelZoom())},_getLengthAbbrevation:function(a){var b=null;if(a)switch(a){case "feet":b=this.nls.abbrevFeetLabel;break;case "kilometers":b=this.nls.abbrevKmLabel;break;case "miles":b=
this.nls.abbrevMilesLabel;break;case "meters":b=this.nls.abbrevMetersLabel;break;case "nautical-miles":b=this.nls.abbrevNauticalMilesLabel;break;case "yards":b=this.nls.abbrevYardsLabel;break;default:b=a}return b},_getDegreeAbbreviation:function(a){var b=null;if(a)switch(a){case "degrees":b=this.nls.abbrevDegreesLabel;break;case "mils":b=this.nls.abbrevMilsLabel;break;default:b=a}return b},setFirstFocusNode:function(){u.initFirstFocusNode(this.domNodeObj,this.ellipseType.domNode)},focusFirstNodeOfSelectedTab:function(){D.focus(this.ellipseType.focusNode)},
setLastFocusNode:function(){u.initLastFocusNode(this.domNodeObj,this.clearGraphicsButton)}})})},"widgets/DistanceAndDirection/models/EllipseFeedback":function(){define("dojo/_base/declare dojo/_base/connect dojo/_base/lang dojo/topic esri/graphic esri/toolbars/draw esri/geometry/Point esri/geometry/Polyline esri/geometry/Polygon esri/geometry/Circle esri/geometry/geometryEngine esri/geometry/webMercatorUtils esri/geometry/geodesicUtils esri/SpatialReference esri/units jimu/utils ./Feedback dojo/has dojo/touch dojo/on".split(" "),
function(p,c,g,d,b,k,l,e,h,n,w,f,a,t,y,r,q,m,A,x){q=p([q],{orientationAngle:0,majorAxisLength:[],minorAxisLength:[],signal:null,constructor:function(a){p.safeMixin(this,a);this.initGeometryService();this.syncEvents();this._majGraphic=new b;this._majGraphicB=new b;this._minGraphic=new b;this._minGraphicB=new b},syncEvents:function(){d.subscribe("create-manual-ellipse",g.hitch(this,this.onCreateManualEllipse));d.subscribe("manual-ellipse-center-point-input",g.hitch(this,this.onCenterPointManualInputHandler));
d.subscribe("clear-points",g.hitch(this,this.clearPoints))},clearPoints:function(){this._points=[];this.map.graphics.clear()},onCreateManualEllipse:function(a,c,d,f){this._points=[];this._points.push(f);this.majorAxisLength=a=this.coordTool.convertToMeters(a,this.lengthUnit);a=this.getEndPoint(f,0,a);this._points.push(a);a=new e({paths:[[[f.x,f.y],[a.x,a.y]]],spatialReference:f.spatialReference});this._majGraphic=new b(a,this.lineSymbol);this._majGraphicB=new b(a,this.lineSymbol);this._majGraphicB.geometry=
w.rotate(a,180,f);this.minorAxisLength=a=this.coordTool.convertToMeters(c,this.lengthUnit);a=this.getEndPoint(f,90,a);this._points.push(a);c=new e({paths:[[[f.x,f.y],[a.x,a.y]]],spatialReference:this.map.spatialReference});this._minGraphic=new b(c,this.lineSymbol);this._minGraphicB=new b(c,this.lineSymbol);this._minGraphicB.geometry=w.rotate(c,180,f);this.orientationAngle=Number(d);this._onDoubleClickHandler()},onCenterPointManualInputHandler:function(a){this._points=[];this._points.push(a.offset(0,
0));this.set("startPoint",this._points[0]);this.map.centerAt(a)},getEndPoint:function(a,b,c){b=b?b:0;c=new n(a,{radius:c,geodesic:!0,numberOfPoints:60});return w.rotate(c,b,a).getPoint(0,0)},_onClickHandler:function(a){var d;this.map.snappingManager&&(d=this.map.snappingManager._snappingPoint);var f=d||a.mapPoint;this._points.push(f.offset(0,0));this._processAfterMapClick(f).then(g.hitch(this,function(a){switch(this._geometryType){case k.POINT:this.set("startPoint",f.offset(0,0));this.set("startPointDD",
a);this._drawEnd(f.offset(0,0));this._setTooltipMessage(0);break;case k.POLYLINE:switch(this._points.length){case 1:this.set("startPoint",this._points[0]);this.set("startPointDD",a);a=new e({paths:[[[f.x,f.y],[f.x,f.y]]],spatialReference:this.map.spatialReference});var d=new e({paths:[[[f.x,f.y],[f.x,f.y]]],spatialReference:this.map.spatialReference});this._majGraphic=new b(a,this.lineSymbol);this._majGraphicB=new b(a,this.lineSymbol);this._minGraphic=new b(d,this.lineSymbol);this._minGraphicB=new b(d,
this.lineSymbol);this.map.graphics.add(this._majGraphic);this.map.graphics.add(this._majGraphicB);this.map.graphics.add(this._minGraphic);this.map.graphics.add(this._minGraphicB);m("esri-touch")&&this.parentWidget.own(x(this.map.root,A.move,g.hitch(this,this._onMouseMoveHandler)));this._onMouseMoveHandlerConnect=c.connect(this.map,"onMouseMove",this._onMouseMoveHandler);this._onDoubleClickHandler_connect=c.connect(this.map,"onDblClick",g.hitch(this,this._onDoubleClickHandler));if(a=this._tooltip)a.innerHTML=
r.sanitizeHTML(this.nls.majorAxisTooltipMessage);break;case 2:this._setMajorAxisInfo();this._tooltip&&(this._tooltip.innerHTML=r.sanitizeHTML(this.nls.minorAxisTooltipMessage));break;case 3:this._setMinorAxisInfo(),this._onDoubleClickHandler()}}}),function(a){console.log(a)})},_setMajorAxisInfo:function(){this.getProjectedGeometry(this._majGraphic.geometry,new t(4326)).then(g.hitch(this,g.hitch(this,function(a){this.majorAxisLength=w.geodesicLength(a,9001);a=this.coordTool.convertMetersToUnits(this.majorAxisLength,
this.lengthUnit);d.publish("DD_ELLIPSE_MAJOR_LENGTH_CHANGE",a)})));var a=this.getAngle(f.webMercatorToGeographic(this._points[0]),f.webMercatorToGeographic(this._majGraphic.geometry.getPoint(0,1)));"mils"===this.angleUnit&&(a*=17.777777778);d.publish("DD_ELLIPSE_ANGLE_CHANGE",a)},_setMinorAxisInfo:function(){var b=g.clone(this._minGraphic.geometry),c=f.webMercatorToGeographic(this._minGraphic.geometry);this.minorAxisLength=a.geodesicLengths([c],y.METERS);c=this.coordTool.convertMetersToUnits(this.minorAxisLength[0],
this.lengthUnit);this.minorAxisLength[0]>this.majorAxisLength||0===this.minorAxisLength[0]?this._minGraphic.setGeometry(b):d.publish("DD_ELLIPSE_MINOR_LENGTH_CHANGE",c)},_onMouseMoveHandler:function(a){var b;this.map.snappingManager&&(b=this.map.snappingManager._snappingPoint);a=b||a.mapPoint;1===this._points.length?(this._majGraphic.geometry.setPoint(0,1,a),this._majGraphicB.geometry=w.rotate(this._majGraphic.geometry,180,this._points[0]),this._majGraphic.setGeometry(this._majGraphic.geometry).setSymbol(this.lineSymbol),
this._majGraphicB.setGeometry(this._majGraphicB.geometry).setSymbol(this.lineSymbol),this.canProjectLocally&&this._setMajorAxisInfo()):null!==this._minGraphic&&(a=w.nearestCoordinate(this._majGraphic.geometry,a),a=new l(a.coordinate.x,a.coordinate.y,102100),this._minGraphic.geometry.setPoint(0,1,a),this._minGraphicB.geometry.setPoint(0,1,a),this._minGraphic.geometry=w.rotate(this._minGraphic.geometry,-90,this._points[0]),this._minGraphicB.geometry=w.rotate(this._minGraphicB.geometry,90,this._points[0]),
this._minGraphic.setGeometry(this._minGraphic.geometry).setSymbol(this.lineSymbol),this._minGraphicB.setGeometry(this._minGraphicB.geometry).setSymbol(this.lineSymbol),this.canProjectLocally&&this._setMinorAxisInfo())},getLineLength:function(a,b,c,d){return Math.sqrt((a-=c)*a+(b-=d)*b)},getAngle:function(a,b){return(180*Math.atan2(b.x-a.x,b.y-a.y)/Math.PI+360)%360},convertAngle:function(a){return 0<=a&&90>a||180<=a&&270>a?90-a:90<=a&&180>a||270<=a&&360>a?180-a+270:a},_onDoubleClickHandler:function(){if(3<=
this._points.length){var a=new h(this._points[0].spatialReference),b=[];b.push(this._majGraphic.geometry.getPoint(0,0));b.push(this._majGraphic.geometry.getPoint(0,1));b.push(this._minGraphic.geometry.getPoint(0,1));this.geomService.project(b,this.map.spatialReference,g.hitch(this,function(b){var c=this.map.toScreen(b[0]),d=this.map.toScreen(b[1]),e=this.map.toScreen(b[2]),d=this.getLineLength(c.x,c.y,d.x,d.y),e=this.getLineLength(c.x,c.y,e.x,e.y),c=h.createEllipse({center:c,longAxis:d,shortAxis:e,
numberOfPoints:60,map:this.map});this.orientationAngle=this.angle;"mils"===this.angleUnit&&(this.orientationAngle/=17.777777778);a.geometry=w.rotate(c,this.convertAngle(this.orientationAngle),b[0]);a=g.mixin(a,{majorAxisLength:this.coordTool.convertMetersToUnits(this.majorAxisLength,this.lengthUnit),minorAxisLength:this.coordTool.convertMetersToUnits(this.minorAxisLength,this.lengthUnit),angle:this.angle,drawType:"ellipse",center:this._points[0]});this.disconnectOnMouseMoveHandler();this._setTooltipMessage(0);
this._drawEnd(a);this.cleanup();this.orientationAngle=0}))}},cleanup:function(){this.map.graphics.clear();this._minGraphic=this._majGraphic=null;this.majorAxisLength=[];this.minorAxisLength=[]},disconnectOnMouseMoveHandler:function(){this._onMouseMoveHandlerConnect&&c.disconnect(this._onMouseMoveHandlerConnect)}});q.DD_ELLIPSE_MAJOR_LENGTH_CHANGE="DD_ELLIPSE_MAJOR_LENGTH_CHANGE";q.DD_ELLIPSE_MINOR_LENGTH_CHANGE="DD_ELLIPSE_MINOR_LENGTH_CHANGE";q.DD_ELLIPSE_ANGLE_CHANGE="DD_ELLIPSE_ANGLE_CHANGE";return q})},
"widgets/DistanceAndDirection/views/TabRange":function(){define("dojo/_base/declare dojo/_base/lang dojo/_base/array dojo/_base/kernel dojo/dom-construct dojo/on dojo/dom-class dojo/topic dojo/has dojo/touch dojo/string dojo/mouse dojo/keys dojo/number dojo/dom-attr dijit/registry dijit/_WidgetBase dijit/_TemplatedMixin dijit/TooltipDialog dijit/popup dijit/form/NumberTextBox jimu/dijit/Message jimu/dijit/SimpleTable jimu/LayerInfos/LayerInfos jimu/utils dijit/_WidgetsInTemplateMixin dojo/text!../templates/TabRange.html esri/geometry/Circle esri/geometry/Polyline esri/geometry/Point esri/geometry/geometryEngine esri/graphic esri/layers/GraphicsLayer esri/layers/FeatureLayer esri/layers/LabelClass esri/tasks/FeatureSet esri/symbols/TextSymbol esri/symbols/SimpleFillSymbol esri/symbols/SimpleLineSymbol esri/symbols/SimpleMarkerSymbol ../views/CoordinateInput ../views/EditOutputCoordinate ../models/RangeRingFeedback dijit/focus dojo/_base/event dojo/aspect dojo/DeferredList jimu/dijit/formSelect jimu/dijit/CheckBox".split(" "),
function(p,c,g,d,b,k,l,e,h,n,w,f,a,t,y,r,q,m,A,x,u,I,Q,M,N,J,v,B,O,F,K,H,L,D,G,S,E,z,C,T,V,W,X,R,P,Y,U){return p([q,m,J],{templateString:v,baseClass:"jimu-widget-TabRange",startPoint:null,firstDistance:!0,_restrictFocusOnAddCenterPointBtn:!1,_centerPointInputKeyPressed:!1,_setStartPointAttr:function(){this._set("startPoint")},_getStartPointAttr:function(){return this.startPoint},constructor:function(a){p.safeMixin(this,a)},postCreate:function(){this._centerPointInputKeyPressed=this._restrictFocusOnAddCenterPointBtn=
!1;this._ptSym=new T(this.pointSymbol);this._circleSym=new z(this.circleSymbol);this._lineSym=new C(this.lineSymbol);this._labelSym=new E(this.labelSymbol);this._tsGL=new L;this.map.addLayer(this._tsGL);this.map.addLayer(this.getLayer());this._initDistanceTable();if(this._gl.loaded){var a=M.getInstanceSync().getLayerInfoById("Distance \x26 Direction - Range Graphics");a.showLabels();a.enablePopup()}else this._gl.on("load",c.hitch(this,function(){var a=M.getInstanceSync().getLayerInfoById("Distance \x26 Direction - Range Graphics");
a.showLabels();a.enablePopup()}));this.coordTool=new V({appConfig:this.appConfig,nls:this.nls,"aria-label":this.nls.centerPointLabel},this.rangeCenter);this.coordTool.inputCoordinate.formatType="DD";this.coordinateFormat=new A({content:new W({nls:this.nls}),style:"width: 400px"});Y.after(this.coordinateFormat,"onClose",c.hitch(this,function(){R.focus(this.coordinateFormatButton);if(this._restrictFocusOnAddCenterPointBtn){var a=this.coordTool.getValue();if(""===a||null===a||void 0===a)this._restrictFocusOnAddCenterPointBtn=
!1}}));"DartTheme"===this.appConfig.theme.name&&l.add(this.coordinateFormat.domNode,"dartThemeClaroDijitTooltipContainerOverride");this.dt=new X({appConfig:this.appConfig,map:this.map,coordTool:this.coordTool.inputCoordinate.util,nls:this.nls,parentWidget:this});this.dt.setFillSymbol(this._circleSym);this.dt.set("lengthLayer",this._lengthLayer);this.syncEvents();this._distanceTable.addRow({});this.checkValidInputs();this.numRingsInput.invalidMessage=this.nls.ringsErrorMessage;this.numRingsInput.rangeMessage=
this.nls.ringsErrorMessage;this.numRadialsInput.invalidMessage=this.nls.radialsInvalidMessage;this.numRadialsInput.rangeMessage=this.nls.radialsErrorMessage},_initDistanceTable:function(){var a=[{name:"Value",title:this.nls.valueLabel,type:"extension","class":"label",create:c.hitch(this,this._createValueField),getValue:c.hitch(this,this._getValueFieldValue)},{name:"actions",title:this.nls.actionLabel,width:"65px",type:"actions",actions:["up","down","delete"],"class":"label"}];this._distanceTable=
new Q({fields:a,autoHeight:!0});this._distanceTable.placeAt(this.distanceTable);this._distanceTable.startup()},_createValueField:function(a){var d=new u({style:"height: 24px;",id:r.getUniqueId("ntb"),required:"true",placeHolder:this.nls.valueText,invalidMessage:this.nls.numericInvalidMessage,value:this.firstDistance?"":0,constraints:{places:2},"class":"numberTextBox","aria-label":this.nls.valueLabel});b.place(d.domNode,a);this.own(k(d,"focus",c.hitch(this,function(){0===d.get("value")&&d.set("value",
"")})),k(d,"blur",c.hitch(this,function(){var a=this._distanceTable.getRows();g.forEach(a,c.hitch(this,function(b){!this._distanceTable.getRowData(b).Value.valid&&1<a.length&&this._distanceTable.deleteRow(b)}))})));d.focus();this.firstDistance=!1},_getValueFieldValue:function(a){a=r.byNode(a.childNodes[0]);return{value:a.get("value"),valid:a.isValid()}},getLayer:function(){if(!this._gl){var a=new G({labelExpressionInfo:{value:"{Interval}"}});a.labelPlacement="center-end";a.symbol=this._labelSym;a=
{layerDefinition:{geometryType:"esriGeometryPolyline",extent:{xmin:0,ymin:0,xmax:0,ymax:0,spatialReference:{wkid:102100,latestWkid:102100}},objectIdField:"ObjectID",fields:[{name:"ObjectID",alias:"ObjectID",type:"esriFieldTypeOID"},{name:"Interval",type:"esriFieldTypeString",alias:"Interval"}]},featureSet:new S};this._gl=new D(a,{id:"Distance \x26 Direction - Range Graphics",showLabels:!0});this.own(k(this._gl,"visibility-change",c.hitch(this,function(a){this._tsGL.setVisibility(a.visible)})))}return this._gl},
syncEvents:function(){e.subscribe("TAB_SWITCHED",c.hitch(this,this.tabSwitched));e.subscribe("DD-WIDGET-CLOSED",c.hitch(this,this._closeDijit));this.dt.watch("startPoint",c.hitch(this,function(a,b,c){this.dt.addStartGraphic(c,this._ptSym)}));this.dt.watch("startPointDD",c.hitch(this,function(a,b,c){this.coordTool.inputCoordinate.set("coordinateEsriGeometry",c)}));this.coordTool.inputCoordinate.watch("outputString",c.hitch(this,function(a,b,c){this.coordTool.manualInput||(this.coordTool.set("value",
c),this.currentRing=null,this._restrictFocusOnAddCenterPointBtn?this._restrictFocusOnAddCenterPointBtn=!1:this._centerPointInputKeyPressed?this._centerPointInputKeyPressed=!1:R.focus(this.addPointBtn))}));this.own(k(this.coordTool,"keydown",c.hitch(this,this.coordToolKeyWasPressed)),this.dt.on("draw-complete",c.hitch(this,this.feedbackDidComplete)),k(this.rangeType,"change",c.hitch(this,this.rangeTypeDropDownChanged)),k(this.ringIntervalUnitsDD,"change",c.hitch(this,this.ringIntervalUnitsDidChange)),
k(this.coordinateFormatButton,"click",c.hitch(this,this.coordinateFormatButtonWasClicked)),k(this.coordinateFormatButton,"keydown",c.hitch(this,function(b){if(b.keyCode===a.ENTER||b.keyCode===a.SPACE)P.stop(b),this.coordinateFormatButtonWasClicked()})),k(this.addPointBtn,"keydown",c.hitch(this,function(b){if(b.keyCode===a.ENTER||b.keyCode===a.SPACE)P.stop(b),this.pointButtonWasClicked()})),k(this.coordinateFormat.content.applyButton,"click",c.hitch(this,function(){this._restrictFocusOnAddCenterPointBtn=
!0;var a=this.coordinateFormat.content.formats[this.coordinateFormat.content.ct],b=a.defaultFormat,c=this.coordinateFormat.content.frmtSelect.get("value");a.useCustom&&(b=a.customFormat);this.coordTool.inputCoordinate.set("formatPrefix",this.coordinateFormat.content.addSignChkBox.checked);this.coordTool.inputCoordinate.set("formatString",b);this.coordTool.inputCoordinate.set("formatType",c);this.setCoordLabel(c);x.close(this.coordinateFormat);R.focus(this.coordinateFormatButton)})),k(this.coordinateFormat.content.applyButton,
"keydown",c.hitch(this,function(b){if(b.keyCode===a.ENTER||b.keyCode===a.SPACE){P.stop(b);this._restrictFocusOnAddCenterPointBtn=!0;var c=this.coordinateFormat.content.formats[this.coordinateFormat.content.ct],d=c.defaultFormat,e=this.coordinateFormat.content.frmtSelect.get("value");c.useCustom&&(d=c.customFormat);this.coordTool.inputCoordinate.set("formatPrefix",this.coordinateFormat.content.addSignChkBox.checked);this.coordTool.inputCoordinate.set("formatString",d);this.coordTool.inputCoordinate.set("formatType",
e);this.setCoordLabel(e);x.close(this.coordinateFormat);R.focus(this.coordinateFormatButton)}b.keyCode===a.ESCAPE&&(P.stop(b),x.close(this.coordinateFormat),R.focus(this.coordinateFormatButton))})),k(this.coordinateFormat.content.cancelButton,"click",c.hitch(this,function(){x.close(this.coordinateFormat)})),k(this.coordinateFormat.content.cancelButton,"keydown",c.hitch(this,function(b){if(b.keyCode===a.ENTER||b.keyCode===a.SPACE)P.stop(b),x.close(this.coordinateFormat),R.focus(this.coordinateFormatButton);
b.keyCode===a.ESCAPE&&(P.stop(b),x.close(this.coordinateFormat),R.focus(this.coordinateFormatButton))})),k(this.clearGraphicsButton,"click",c.hitch(this,this.clearGraphics)),k(this.clearGraphicsButton,"keydown",c.hitch(this,function(b){if(b.keyCode===a.ENTER||b.keyCode===a.SPACE)P.stop(b),this.clearGraphics()})),k(this.numRingsDiv,f.leave,c.hitch(this,this.checkValidInputs)),k(this.ringIntervalDiv,f.leave,c.hitch(this,this.checkValidInputs)),k(this.numRadialsInputDiv,f.leave,c.hitch(this,this.checkValidInputs)),
k(this.btnAddDistance,"click",c.hitch(this,function(){var a=this._distanceTable.getRows(),b=!1;g.forEach(a,c.hitch(this,function(a){this._distanceTable.getRowData(a).Value.valid&&(b=!0)}));b&&this._distanceTable.addRow({})})),k(this.btnAddDistance,"keydown",c.hitch(this,function(b){if(b.keyCode===a.ENTER||b.keyCode===a.SPACE){P.stop(b);b=this._distanceTable.getRows();var d=!1;g.forEach(b,c.hitch(this,function(a){this._distanceTable.getRowData(a).Value.valid&&(d=!0)}));d&&this._distanceTable.addRow({})}})),
k(this._distanceTable.tbody,"keyup",c.hitch(this,function(b){b.keyCode===a.ENTER&&this._distanceTable.addRow({})})),k(this.coordinateFormat.content.frmtSelect,"keydown",c.hitch(this,function(b){b.keyCode===a.ESCAPE&&(P.stop(b),x.close(this.coordinateFormat),R.focus(this.coordinateFormatButton))})),k(this.coordinateFormat.content.frmtVal,"keydown",c.hitch(this,function(b){b.keyCode===a.ESCAPE&&(P.stop(b),x.close(this.coordinateFormat),R.focus(this.coordinateFormatButton))})),k(this.coordinateFormat.content.addSignChkBox,
"keydown",c.hitch(this,function(b){b.keyCode===a.ESCAPE&&(P.stop(b),x.close(this.coordinateFormat),R.focus(this.coordinateFormatButton));b.keyCode===a.ENTER&&(P.stop(b),this.coordinateFormat.content.addSignChkBox.checked=this.coordinateFormat.content.addSignChkBox.checked?!1:!0)})),k(this.okButton,"keydown",c.hitch(this,function(b){if(b.keyCode===a.ENTER||b.keyCode===a.SPACE)P.stop(b),this.okButtonClicked()})));h("esri-touch")?this.own(k(this.addPointBtn,n.press,c.hitch(this,this.pointButtonWasClicked))):
this.own(k(this.addPointBtn,"click",c.hitch(this,this.pointButtonWasClicked)))},setCoordLabel:function(a){a=N.sanitizeHTML(w.substitute(this.nls.centerPointLabel+" (${crdType})",{crdType:a}));this.rangeCenterLabel.innerHTML=a;y.set(this.coordTool.textbox,"aria-label",a)},rangeTypeDropDownChanged:function(){this.tabSwitched();switch(this.rangeType.get("value")){case "Interactive":l.add(this.numRingsContainer,"controlGroupHidden");l.add(this.distancebetweenRingsContainer,"controlGroupHidden");l.add(this.distanceTableContainer,
"controlGroupHidden");l.remove(this.distanceUnitsContainer,"controlGroupHidden");break;case "Fixed":l.remove(this.numRingsContainer,"controlGroupHidden");l.remove(this.distancebetweenRingsContainer,"controlGroupHidden");l.add(this.distanceUnitsContainer,"controlGroupHidden");l.add(this.distanceTableContainer,"controlGroupHidden");break;case "Origin":case "Cumulative":l.add(this.numRingsContainer,"controlGroupHidden"),l.add(this.distancebetweenRingsContainer,"controlGroupHidden"),l.remove(this.distanceUnitsContainer,
"controlGroupHidden"),l.remove(this.distanceTableContainer,"controlGroupHidden")}this.checkValidInputs()},coordToolKeyWasPressed:function(b){this.dt.removeStartGraphic();b.keyCode===a.ENTER&&(this._centerPointInputKeyPressed=this._restrictFocusOnAddCenterPointBtn=!0,this.coordTool.inputCoordinate.getInputType().then(c.hitch(this,function(a){"UNKNOWN"===a.inputType?(new I({message:this.nls.invalidCoordinateTypeMessage}),this.coordTool.inputCoordinate.coordinateEsriGeometry=null,this.checkValidInputs()):
this.dt.getProjectedGeometry(a.coordinateEsriGeometry,this.map.spatialReference).then(c.hitch(this,c.hitch(this,function(b){e.publish("manual-rangering-center-point-input",b);this.setCoordLabel(a.inputType);this.coordTool.inputCoordinate.set("formatString",this.coordinateFormat.content.formats[a.inputType].defaultFormat);this.coordTool.inputCoordinate.set("formatType",a.inputType);this.dt.addStartGraphic(b,this._ptSym);this.checkValidInputs()})))})))},coordinateFormatButtonWasClicked:function(){this.coordinateFormat.content.set("ct",
this.coordTool.inputCoordinate.formatType);x.open({popup:this.coordinateFormat,around:this.coordinateFormatButton});R.focus(this.coordinateFormat.content.frmtSelect.focusNode)},_closeDijit:function(){this.coordinateFormat&&this.coordinateFormat.domNode.offsetParent&&x.close(this.coordinateFormat)},pointButtonWasClicked:function(){l.contains(this.addPointBtn,"drawPointBtn-active")?(this.dt.deactivate(),this._setMapNavigation(!0)):(this.coordTool.manualInput=!1,e.publish("clear-points"),this._setMapNavigation(!1),
"Interactive"===this.rangeType.get("value")?this.dt.activate("polyline"):this.dt.activate("point"));l.toggle(this.addPointBtn,"drawPointBtn-active")},ringIntervalUnitsDidChange:function(){this.ringIntervalUnit=this.ringIntervalUnitsDD.get("value")},okButtonClicked:function(){if(!l.contains(this.okButton,"jimu-state-disabled")){if(!this.currentRing){var a,b,d;this._restrictFocusOnAddCenterPointBtn=!0;switch(this.rangeType.get("value")){case "Fixed":b=this.ringIntervalInput.get("value");a=this.numRingsInput.get("value");
d=this.ringIntervalUnitsDD.get("value");break;case "Origin":case "Cumulative":if(d=this.distanceUnitsDD.get("value"),this.checkTableValues())if(b=this._distanceTable.getRows(),"Origin"===this.rangeType.get("value"))b=g.map(b,c.hitch(this,function(a){return this._distanceTable.getRowData(a).Value.value}));else{var e=0;b=g.map(b,c.hitch(this,function(a){a=this._distanceTable.getRowData(a);return e+=a.Value.value}))}else{new I({message:this.nls.distanceTableErrorMessage});return}}"Interactive"!==this.rangeType.get("value")&&
(a={centerPoint:this.coordTool.inputCoordinate.coordinateEsriGeometry,numRings:a,numRadials:this.numRadialsInput.get("value"),radius:0,circle:null,circles:[],lastCircle:null,r:0,c:0,radials:0,ringInterval:b,ringIntervalUnitsDD:d,circleSym:this._circleSym},this.createRangeRings(a))}this.emit("show-publish",this._gl)}},checkTableValues:function(){return 0<this._distanceTable.getRows().length},createRangeRings:function(a){if(a.centerPoint){if(a.ringInterval&&a.ringIntervalUnitsDD)if(a.ringInterval.constructor===
Array)for(var b=0;b<a.ringInterval.length;b++)a.ringInterval[b]=this.coordTool.inputCoordinate.util.convertToMeters(parseFloat(a.ringInterval[b]),a.ringIntervalUnitsDD);else a.ringDistance=this.coordTool.inputCoordinate.util.convertToMeters(parseFloat(a.ringInterval),a.ringIntervalUnitsDD);this.dt.removeStartGraphic();if(0===a.circles.length)if(a.ringInterval&&a.ringInterval.constructor===Array)for(b=0;b<a.ringInterval.length;b++)a.radius+=a.ringDistance,a.circle=new B({center:a.centerPoint,geodesic:!0,
radius:a.ringInterval[b],numberOfPoints:360}),a.circles.push(a.circle);else for(a.r=0;a.r<a.numRings;a.r++)a.radius+=a.ringDistance,a.circle=new B({center:a.centerPoint,geodesic:!0,radius:a.radius,numberOfPoints:360}),a.circles.push(a.circle);var e=[];for(a.c=0;a.c<a.circles.length;a.c++)e.push(this.dt.getProjectedGeometry(new O({paths:[a.circles[a.c].rings[0]],spatialReference:a.centerPoint.spatialReference}),this.map.spatialReference));(new U(e)).then(c.hitch(this,function(b){for(var f=a.ringIntervalUnitsDD,
h=0;h<b.length;h++){var m=new O(b[h][1]),n=t.format(t.round(this.coordTool.inputCoordinate.util.convertMetersToUnits(a.circles[h].radius,f),2),{places:2,locale:d.locale}),n=window.isRTL?this._getLengthAbbrevation(this.distanceUnitsDD.get("value"))+" "+n:n+" "+this._getLengthAbbrevation(this.distanceUnitsDD.get("value")),l=new H(m,this._lineSym,{Interval:n,CenterPoint:this.coordTool.get("value"),Rings:parseFloat(a.circles.length),Radials:parseFloat(this.numRadialsInput.get("value")),RadiusDistance:parseFloat(t.round(this.coordTool.inputCoordinate.util.convertMetersToUnits(a.circles[h].radius,
f),2)),RadiusUnit:"Fixed"===this.rangeType.get("value")?this.ringIntervalUnitsDD.get("value"):this.distanceUnitsDD.get("value")});this._gl.add(l);this._currentRangeGraphic=l;m=new F(m.paths[0][0][0],m.paths[0][0][1],this.map.spatialReference);this._tsGL.add(new H(m,c.clone(this._labelSym).setText(n).setOffset(0,10)))}for(b=a.largestRadius=0;b<a.circles.length;b++)a.circles[b].radius>a.largestRadius&&(a.largestRadius=a.circles[b].radius);e=[];if(0!==a.numRadials){b=new B({center:a.centerPoint,geodesic:!0,
radius:a.largestRadius,numberOfPoints:a.numRadials});for(f=0;f<b.rings[0].length-1;f++)h=new O(a.centerPoint.spatialReference),h.addPath([c.clone(a.centerPoint),b.getPoint(0,f)]),h=new O(K.geodesicDensify(h,1E4),a.centerPoint.spatialReference),e.push(this.dt.getProjectedGeometry(h,this.map.spatialReference));0<e.length&&(new U(e)).then(c.hitch(this,function(a){for(var b=0;b<a.length;b++)this._gl.add(new H(a[b][1],this._lineSym,{Interval:"",CenterPoint:this.coordTool.get("value")}));this._gl.redraw()}),
function(a){console.log(a)});this.currentRing=b=new B({center:a.centerPoint,geodesic:!0,radius:a.largestRadius,numberOfPoints:60});this.dt.getProjectedGeometry(b.getExtent(),this.map.spatialReference).then(c.hitch(this,function(a){this.checkValidInputs();this.map.setExtent(a.expand(3))}))}}))}},feedbackDidComplete:function(a){var b=null;if(a.geometry.hasOwnProperty("circlePoints")){var b=a.geometry.circlePoints[0],c={centerPoint:b,numRadials:this.numRadialsInput.get("value"),circles:[],circleSym:this._circleSym,
r:0,c:0,radials:0,ringIntervalUnitsDD:this.distanceUnitsDD.get("value"),intervalUnits:this.distanceUnitsDD.get("value")},d;if(a.geometry.circlePoints&&1<a.geometry.circlePoints.length){var e=a.geometry.circlePoints.length;d=a.geometry.circlePoints;d[e-1].x===d[e-2].x&&d[e-1].y===d[e-2].y&&d.splice(e-1,1)}for(e=1;e<a.geometry.circlePoints.length;e++)d=new O(a.geometry.spatialReference),d.addPath([b,a.geometry.circlePoints[e]]),d=K.geodesicLength(d,9001),d=new B({center:b,geodesic:!0,radius:d,numberOfPoints:360}),
c.circles.push(d);this.createRangeRings(c)}else b=a.geometry,this.checkValidInputs();l.remove(this.addPointBtn,"drawPointBtn-active");this.dt.deactivate();this._setMapNavigation(!0)},clearGraphics:function(){this._gl&&(this._tsGL.clear(),this._gl.clear(),this._gl.refresh(),this.dt.removeStartGraphic(),this.coordTool.clear());this.tabSwitched();this.checkValidInputs();for(var a=0;a<this.map.graphicsLayerIds.length;a++)this.map.getLayer(this.map.graphicsLayerIds[a]).refresh()},setGraphicsHidden:function(){this._gl&&
this._gl.hide()},setGraphicsShown:function(){this._gl&&this._gl.show()},checkValidInputs:function(){l.add(this.okButton,"jimu-state-disabled");y.set(this.okButton,"tabindex",-1);null!==this.coordTool.inputCoordinate.coordinateEsriGeometry&&this.numRingsInput.isValid()&&this.ringIntervalInput.isValid()&&this.numRadialsInput.isValid()&&(l.remove(this.okButton,"jimu-state-disabled"),y.set(this.okButton,"tabindex",0));this.okButton.innerHTML="Interactive"===this.rangeType.getValue()?this.nls.publishDDBtn:
this.nls.common.ok},tabSwitched:function(){this.dt.deactivate();this.dt.cleanup();this.dt.disconnectOnMouseMoveHandlers();this._setMapNavigation(!0);this.dt.removeStartGraphic();this.addPointBtn&&l.remove(this.addPointBtn,"drawPointBtn-active");x.close(this.coordinateFormat)},_setMapNavigation:function(a){a?this.map.enableMapNavigation():(this.map.disableMapNavigation(),this.map.enableScrollWheelZoom())},_getLengthAbbrevation:function(a){var b=null;if(a)switch(a){case "feet":b=this.nls.abbrevFeetLabel;
break;case "kilometers":b=this.nls.abbrevKmLabel;break;case "miles":b=this.nls.abbrevMilesLabel;break;case "meters":b=this.nls.abbrevMetersLabel;break;case "nautical-miles":b=this.nls.abbrevNauticalMilesLabel;break;case "yards":b=this.nls.abbrevYardsLabel;break;default:b=a}return b},_getDegreeAbbreviation:function(a){var b=null;if(a)switch(a){case "degrees":b=this.nls.abbrevDegreesLabel;break;case "mils":b=this.nls.abbrevMilsLabel;break;default:b=a}return b},setFirstFocusNode:function(){N.initFirstFocusNode(this.domNodeObj,
this.rangeType.domNode)},focusFirstNodeOfSelectedTab:function(){R.focus(this.rangeType.focusNode)},setLastFocusNode:function(){N.initLastFocusNode(this.domNodeObj,this.clearGraphicsButton)}})})},"widgets/DistanceAndDirection/models/RangeRingFeedback":function(){define("dojo/_base/declare dojo/_base/lang dojo/_base/connect dojo/topic esri/graphic esri/toolbars/draw esri/geometry/Circle esri/geometry/Polyline esri/geometry/geometryEngine jimu/utils ./Feedback dojo/has dojo/touch dojo/on".split(" "),
function(p,c,g,d,b,k,l,e,h,n,w,f,a,t){return p([w],{constructor:function(a){p.safeMixin(this,a);this.syncEvents();this.initGeometryService();this.circlePoints=[];this.geoDesicCirclePoints=[]},syncEvents:function(){d.subscribe("manual-rangering-center-point-input",c.hitch(this,this.onCenterPointManualInputHandler));d.subscribe("clear-points",c.hitch(this,this.clearPoints))},clearPoints:function(a){a&&(this._points=[],this.circlePoints=[],this.geoDesicCirclePoints=[],this.map.graphics.clear())},clearGraphics:function(){this.map.graphics.clear()},
onCenterPointManualInputHandler:function(a){this._points=[];this.circlePoints=[];this.geoDesicCirclePoints=[];this._points.push(a.offset(0,0));this.set("startPoint",this._points[0]);this.map.centerAt(a)},_onClickHandler:function(d){var h;this.map.snappingManager&&(h=this.map.snappingManager._snappingPoint);var l=h||d.mapPoint,m=this.map;this._points.push(l.offset(0,0));this._processAfterMapClick(l).then(c.hitch(this,function(d){1===this._points.length?(this.canProjectLocally||(this.geoDesicCirclePoints=
[],this.circlePoints=[]),this.set("startPoint",this._points[0]),this.set("startPointDD",d)):this.set("endPointDD",d);this.circlePoints.push(l.offset(0,0));this.geoDesicCirclePoints.push(d.offset(0,0));switch(this._geometryType){case k.POINT:this._drawEnd(d.offset(0,0));this._setTooltipMessage(0);break;case k.POLYLINE:d=new e({paths:[[[l.x,l.y],[l.x,l.y]]],spatialReference:m.spatialReference}),this.lgraphic=new b(d,this.lineSymbol),m.snappingManager&&m.snappingManager._setGraphic(this._graphic),1<
this._points.length&&this._drawRangeCircle(),0<this._points.length&&(f("esri-touch")&&this.parentWidget.own(t(this.map.root,a.move,c.hitch(this,this._onMouseMoveHandler))),!this._onMouseMoveHandler_connect&&this.canProjectLocally&&(this._onMouseMoveHandler_connect=g.connect(this.map,"onMouseMove",this._onMouseMoveHandler)),this._onDoubleClickHandler_connect||(this._onDoubleClickHandler_connect=g.connect(this.map,"onDblClick",c.hitch(this,this._onDoubleClickHandler))))}this._setTooltipMessage(this._points.length);
1<this._points.length&&(d=this._tooltip)&&(d.innerHTML=n.sanitizeHTML(this.nls.doubleClickEllipseMesage))}))},_drawRangeCircle:function(){if(this.canProjectLocally)this.circleGraphic&&(a=new b(this.circleGraphic.geometry,this.fillSymbol),this.map.graphics.add(a));else{var a=new e({paths:[[[this.startPointDD.x,this.startPointDD.y],[this.endPointDD.x,this.endPointDD.y]]],spatialReference:this.startPointDD.spatialReference}),a=h.geodesicLength(a,9001),d=new l(this.startPointDD,{radius:a,geodesic:!0,
numberOfPoints:360});this.geodsicCircleGeometry=new l(this.startPointDD,{radius:a,geodesic:!0,numberOfPoints:360});this.getProjectedGeometry(d,this.map.spatialReference).then(c.hitch(this,c.hitch(this,function(a){d=c.mixin(a,{distanceDirectionType:"military-tools-range-rings"});this.circleGraphic=new b(d,this.fillSymbol);this.map.graphics.add(this.circleGraphic)})))}},_onMouseMoveHandler:function(a){var d;this.map.snappingManager&&(d=this.map.snappingManager._snappingPoint);var e=this._points[0];
a=d||a.mapPoint;d=this.lgraphic.geometry;d.setPoint(0,0,{x:e.x,y:e.y});d.setPoint(0,1,{x:a.x,y:a.y});a=h.geodesicLength(d,9001);e=new l(e,{radius:a,geodesic:!0,numberOfPoints:360});this.geodsicCircleGeometry=new l(this.startPointDD,{radius:a,geodesic:!0,numberOfPoints:360});this.circleGraphic&&this.map.graphics.remove(this.circleGraphic);e=c.mixin(e,{distanceDirectionType:"military-tools-range-rings"});this.circleGraphic=new b(e,this.fillSymbol);this.map.graphics.add(this.circleGraphic)},_onDoubleClickHandler:function(){if(this.geoDesicCirclePoints&&
!(2>this.geoDesicCirclePoints.length)){this.disconnectOnMouseMoveHandlers();var a=c.clone(this.geoDesicCirclePoints);this.cleanup();this._clear();this._setTooltipMessage(0);a=c.mixin(this.geodsicCircleGeometry,{circlePoints:a});this._drawEnd(a)}},disconnectOnMouseMoveHandlers:function(){g.disconnect(this._onMouseMoveHandler_connect);g.disconnect(this._onDoubleClickHandler_connect);this._onDoubleClickHandler_connect=null},cleanup:function(){for(var a=this.map.graphics.graphics.length-1;0<=a;a--)this.map.graphics.graphics[a].geometry.hasOwnProperty("distanceDirectionType")&&
this.map.graphics.remove(this.map.graphics.graphics[a]);this.circlePoints=[];this.geoDesicCirclePoints=[]}})})},"widgets/DistanceAndDirection/js/portal-utils":function(){define(["esri/request","dojo/json"],function(p,c){return{getFeatureServiceParams:function(c,d){return{name:c,serviceDescription:"",hasStaticData:!1,maxRecordCount:1E3,supportedQueryFormats:"JSON",capabilities:"Create,Delete,Query,Update,Editing",tags:"GRG",description:"",copyrightText:"",spatialReference:d.spatialReference.toJson(),
initialExtent:d.extent.toJson(),allowGeometryUpdates:!0,units:"esriMeters",xssPreventionInfo:{xssPreventionEnabled:!0,xssPreventionRule:"InputOnly",xssInputRule:"rejectInvalid"}}},getLayerParams:function(c,d,b,k){return{layers:[{adminLayerInfo:{geometryField:{name:"Shape"},xssTrustedFields:""},id:0,name:c,type:"Feature Layer",displayField:"",description:"",tags:"DD",copyrightText:"",defaultVisibility:!0,ownershipBasedAccessControlForFeatures:{allowOthersToQuery:!1,allowOthersToDelete:!1,allowOthersToUpdate:!1},
relationships:[],isDataVersioned:!1,supportsCalculate:!0,supportsAttachmentsByUploadId:!0,supportsRollbackOnFailureParameter:!0,supportsStatistics:!0,supportsAdvancedQueries:!0,supportsValidateSql:!0,supportsCoordinatesQuantization:!0,supportsApplyEditsWithGlobalIds:!0,advancedQueryCapabilities:{supportsPagination:!0,supportsQueryWithDistance:!0,supportsReturningQueryExtent:!0,supportsStatistics:!0,supportsOrderBy:!0,supportsDistinct:!0,supportsQueryWithResultType:!0,supportsSqlExpression:!0,supportsReturningGeometryCentroid:!0},
useStandardizedQueries:!1,geometryType:k.type,minScale:0,maxScale:0,extent:d.extent.toJson(),drawingInfo:{renderer:b.toJson(),transparency:0},allowGeometryUpdates:!0,hasAttachments:!1,htmlPopupType:"esriServerHTMLPopupTypeNone",hasM:!1,hasZ:!1,objectIdField:"OBJECTID",globalIdField:"",typeIdField:"",fields:k.fields,indexes:[],types:[],templates:[],supportedQueryFormats:"JSON",hasStaticData:!1,maxRecordCount:1E4,standardMaxRecordCount:4E3,tileMaxRecordCount:4E3,maxRecordCountFactor:1,exceedsLimitFactor:1,
capabilities:"Query,Editing,Create,Update,Delete"}]}},isNameAvailable:function(c,d,b){return p({url:c,content:{name:b,type:"Feature Service",token:d,f:"json"},handleAs:"json",callbackParamName:"callback"},{usePost:!0})},createFeatureService:function(g,d,b){return p({url:g,content:{f:"json",token:d,typeKeywords:"ArcGIS Server,Data,Feature Access,Feature Service,Service,Hosted Service",createParameters:c.stringify(b),outputType:"featureService"},handleAs:"json",callbackParamName:"callback"},{usePost:!0})},
addDefinitionToService:function(g,d,b){return p({url:g,content:{token:d,addToDefinition:c.stringify(b),f:"json"},handleAs:"json",callbackParamName:"callback"},{usePost:!0})}}})},"esri/dijit/util/busyIndicator":function(){define("dijit/registry dojo/_base/lang dojo/_base/window dojo/dom dojo/dom-construct dojox/widget/Standby require".split(" "),function(p,c,g,d,b,k,l){var e={_defaultStandbyParams:{image:l.toUrl("../images/loading-throb.gif"),color:"#fff",opacity:.75,duration:200},create:function(c){if(c=
this._normalizeParams(c))return c=new k(e._toStandbyParams(c)),b.place(c.domNode,g.doc.body),e._createHandle(c)},_normalizeParams:function(b){if(b){if(b.target)return b;if("string"===typeof b){var c=p.byId(b);b=c?c.domNode:d.byId(b)}else b=b.domNode?b.domNode:d.byId(b);if(b)return{target:b}}},_toStandbyParams:function(b){b.imageUrl&&(b.image=b.imageUrl);b.backgroundColor&&(b.color=b.backgroundColor);b.backgroundOpacity&&(b.opacity=b.backgroundOpacity);b.fadeDuration&&(b.duration=b.fadeDuration);return c.mixin({},
e._defaultStandbyParams,b)},_createHandle:function(b){return{show:function(){b&&b.show()},hide:function(){b&&b.hide()},destroy:function(){b&&(b.destroy(),b=null)}}}};return e})},"dojox/widget/Standby":function(){define("dojo/_base/kernel dojo/_base/declare dojo/_base/array dojo/_base/event dojo/_base/sniff dojo/dom dojo/dom-attr dojo/dom-construct dojo/dom-geometry dojo/dom-style dojo/window dojo/_base/window dojo/_base/fx dojo/fx dijit/_Widget dijit/_TemplatedMixin dijit/registry".split(" "),function(p,
c,g,d,b,k,l,e,h,n,w,f,a,t,y,r,q){p.experimental("dojox.widget.Standby");return c("dojox.widget.Standby",[y,r],{image:require.toUrl("dojox/widget/Standby/images/loading.gif").toString(),imageText:"Please Wait...",text:"Please wait...",centerIndicator:"image",target:"",color:"#C0C0C0",duration:500,zIndex:"auto",opacity:.75,templateString:'\x3cdiv\x3e\x3cdiv style\x3d"display: none; opacity: 0; z-index: 9999; position: absolute; cursor:wait;" dojoAttachPoint\x3d"_underlayNode"\x3e\x3c/div\x3e\x3cimg src\x3d"${image}" style\x3d"opacity: 0; display: none; z-index: -10000; position: absolute; top: 0px; left: 0px; cursor:wait;" dojoAttachPoint\x3d"_imageNode"\x3e\x3cdiv style\x3d"opacity: 0; display: none; z-index: -10000; position: absolute; top: 0px;" dojoAttachPoint\x3d"_textNode"\x3e\x3c/div\x3e\x3c/div\x3e',
_underlayNode:null,_imageNode:null,_textNode:null,_centerNode:null,_displayed:!1,_resizeCheck:null,_started:!1,_parent:null,startup:function(a){if(!this._started){if("string"===typeof this.target){var c=q.byId(this.target);this.target=c?c.domNode:k.byId(this.target)}this.text&&(this._textNode.innerHTML=this.text);"image"===this.centerIndicator?(this._centerNode=this._imageNode,l.set(this._imageNode,"src",this.image),l.set(this._imageNode,"alt",this.imageText)):this._centerNode=this._textNode;n.set(this._underlayNode,
{display:"none",backgroundColor:this.color});n.set(this._centerNode,"display","none");this.connect(this._underlayNode,"onclick","_ignore");this.domNode.parentNode&&this.domNode.parentNode!=f.body()&&f.body().appendChild(this.domNode);7==b("ie")&&(this._ieFixNode=e.create("div"),n.set(this._ieFixNode,{opacity:"0",zIndex:"-1000",position:"absolute",top:"-1000px"}),f.body().appendChild(this._ieFixNode));this.inherited(arguments)}},show:function(){this._displayed||(this._anim&&(this._anim.stop(),delete this._anim),
this._displayed=!0,this._size(),this._disableOverflow(),this._fadeIn())},hide:function(){if(this._displayed)try{this._anim&&(this._anim.stop(),delete this._anim),this._size()}catch(m){console.error(m)}finally{this._fadeOut(),this._displayed=!1,null!==this._resizeCheck&&(clearInterval(this._resizeCheck),this._resizeCheck=null)}},isVisible:function(){return this._displayed},onShow:function(){},onHide:function(){},uninitialize:function(){this._displayed=!1;this._resizeCheck&&clearInterval(this._resizeCheck);
n.set(this._centerNode,"display","none");n.set(this._underlayNode,"display","none");7==b("ie")&&this._ieFixNode&&(f.body().removeChild(this._ieFixNode),delete this._ieFixNode);this._anim&&(this._anim.stop(),delete this._anim);this._centerNode=this._textNode=this._imageNode=this.target=null;this.inherited(arguments)},_size:function(){if(this._displayed){var a=l.get(f.body(),"dir");a&&(a=a.toLowerCase());var c,d=this._scrollerWidths(),e=this.target,k=n.get(this._centerNode,"display");n.set(this._centerNode,
"display","block");var g=h.position(e,!0);if(e===f.body()||e===f.doc)g=w.getBox(),g.x=g.l,g.y=g.t;var p=h.getMarginBox(this._centerNode);n.set(this._centerNode,"display",k);this._ieFixNode&&(c=-this._ieFixNode.offsetTop/1E3,g.x=Math.floor((g.x+.9)/c),g.y=Math.floor((g.y+.9)/c),g.w=Math.floor((g.w+.9)/c),g.h=Math.floor((g.h+.9)/c));var q=n.get(e,"zIndex"),t=k=q;if("auto"===this.zIndex)if("auto"!=q)k=parseInt(k,10),t=parseInt(t,10);else{var v=e;if(v&&v!==f.body()&&v!==f.doc)for(v=e.parentNode,c=-1E5;v&&
v!==f.body();)(q=n.get(v,"zIndex"))&&"auto"!==q&&(q=parseInt(q,10),c<q&&(c=q,k=q+1,t=q+1)),v=v.parentNode}else k=parseInt(this.zIndex,10),t=parseInt(this.zIndex,10);n.set(this._centerNode,"zIndex",t);n.set(this._underlayNode,"zIndex",k);if((k=e.parentNode)&&k!==f.body()&&e!==f.body()&&e!==f.doc){v=g.h;t=g.w;e=h.position(k,!0);this._ieFixNode&&(c=-this._ieFixNode.offsetTop/1E3,e.x=Math.floor((e.x+.9)/c),e.y=Math.floor((e.y+.9)/c),e.w=Math.floor((e.w+.9)/c),e.h=Math.floor((e.h+.9)/c));e.w-=k.scrollHeight>
k.clientHeight&&0<k.clientHeight?d.v:0;e.h-=k.scrollWidth>k.clientWidth&&0<k.clientWidth?d.h:0;"rtl"===a&&(b("opera")?(g.x+=k.scrollHeight>k.clientHeight&&0<k.clientHeight?d.v:0,e.x+=k.scrollHeight>k.clientHeight&&0<k.clientHeight?d.v:0):b("ie")?e.x+=k.scrollHeight>k.clientHeight&&0<k.clientHeight?d.v:0:b("webkit"));e.w<g.w&&(g.w-=e.w);e.h<g.h&&(g.h-=e.h);var r=e.y,y=e.y+e.h,F=g.y,K=g.y+v,a=e.x;c=e.x+e.w;var q=g.x,H=g.x+t;if(K>r&&F<r)g.y=e.y,v-=r-F,g.h=v<e.h?v:g.h-2*(k.scrollWidth>k.clientWidth&&
0<k.clientWidth?d.h:0);else if(F<y&&K>y)g.h=y-F;else if(K<=r||F>=y)g.h=0;if(H>a&&q<a)g.x=e.x,t-=a-q,g.w=t<e.w?t:g.w-2*(k.scrollHeight>k.clientHeight&&0<k.clientHeight?d.w:0);else if(q<c&&H>c)g.w=c-q;else if(H<=a||q>=c)g.w=0}0<g.h&&0<g.w?(n.set(this._underlayNode,{display:"block",width:g.w+"px",height:g.h+"px",top:g.y+"px",left:g.x+"px"}),d=["borderRadius","borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"],this._cloneStyles(d),b("ie")||(d="MozBorderRadius MozBorderRadiusTopleft MozBorderRadiusTopright MozBorderRadiusBottomleft MozBorderRadiusBottomright WebkitBorderRadius WebkitBorderTopLeftRadius WebkitBorderTopRightRadius WebkitBorderBottomLeftRadius WebkitBorderBottomRightRadius".split(" "),
this._cloneStyles(d,this)),d=g.h/2-p.h/2,k=g.w/2-p.w/2,g.h>=p.h&&g.w>=p.w?n.set(this._centerNode,{top:d+g.y+"px",left:k+g.x+"px",display:"block"}):n.set(this._centerNode,"display","none")):(n.set(this._underlayNode,"display","none"),n.set(this._centerNode,"display","none"));if(null===this._resizeCheck){var L=this;this._resizeCheck=setInterval(function(){L._size()},100)}}},_cloneStyles:function(a){g.forEach(a,function(a){n.set(this._underlayNode,a,n.get(this.target,a))},this)},_fadeIn:function(){var b=
this,c=a.animateProperty({duration:b.duration,node:b._underlayNode,properties:{opacity:{start:0,end:b.opacity}}}),d=a.animateProperty({duration:b.duration,node:b._centerNode,properties:{opacity:{start:0,end:1}},onEnd:function(){b.onShow();delete b._anim}});this._anim=t.combine([c,d]);this._anim.play()},_fadeOut:function(){var b=this,c=a.animateProperty({duration:b.duration,node:b._underlayNode,properties:{opacity:{start:b.opacity,end:0}},onEnd:function(){n.set(this.node,{display:"none",zIndex:"-1000"})}}),
d=a.animateProperty({duration:b.duration,node:b._centerNode,properties:{opacity:{start:1,end:0}},onEnd:function(){n.set(this.node,{display:"none",zIndex:"-1000"});b.onHide();b._enableOverflow();delete b._anim}});this._anim=t.combine([c,d]);this._anim.play()},_ignore:function(a){a&&d.stop(a)},_scrollerWidths:function(){var a=e.create("div");n.set(a,{position:"absolute",opacity:0,overflow:"hidden",width:"50px",height:"50px",zIndex:"-100",top:"-200px",padding:"0px",margin:"0px"});var b=e.create("div");
n.set(b,{width:"200px",height:"10px"});a.appendChild(b);f.body().appendChild(a);b=h.getContentBox(a);n.set(a,"overflow","scroll");var c=h.getContentBox(a);f.body().removeChild(a);return{v:b.w-c.w,h:b.h-c.h}},_setTextAttr:function(a){this.text=this._textNode.innerHTML=a},_setColorAttr:function(a){n.set(this._underlayNode,"backgroundColor",a);this.color=a},_setImageTextAttr:function(a){l.set(this._imageNode,"alt",a);this.imageText=a},_setImageAttr:function(a){l.set(this._imageNode,"src",a);this.image=
a},_setCenterIndicatorAttr:function(a){this.centerIndicator=a;"image"===a?(this._centerNode=this._imageNode,n.set(this._textNode,"display","none")):(this._centerNode=this._textNode,n.set(this._imageNode,"display","none"))},_setTargetAttr:function(a){if("string"===typeof a){var b=q.byId(a);this._set("target",b?b.domNode:k.byId(a))}else this._set("target",a)},_disableOverflow:function(){if(this.target===f.body()||this.target===f.doc){this._overflowDisabled=!0;var a=f.body();this._oldOverflow=a.style&&
a.style.overflow?n.get(a,"overflow"):"";if(b("ie")&&!b("quirks")){if(a.parentNode&&a.parentNode.style&&a.parentNode.style.overflow)this._oldBodyParentOverflow=a.parentNode.style.overflow;else try{this._oldBodyParentOverflow=n.get(a.parentNode,"overflow")}catch(A){this._oldBodyParentOverflow="scroll"}n.set(a.parentNode,"overflow","hidden")}n.set(a,"overflow","hidden")}},_enableOverflow:function(){if(this._overflowDisabled){delete this._overflowDisabled;var a=f.body();b("ie")&&!b("quirks")&&(a.parentNode.style.overflow=
this._oldBodyParentOverflow,delete this._oldBodyParentOverflow);n.set(a,"overflow",this._oldOverflow);if(b("webkit")){var c=e.create("div",{style:{height:"2px"}});a.appendChild(c);setTimeout(function(){a.removeChild(c)},0)}delete this._oldOverflow}}})})},"widgets/DistanceAndDirection/js/jquery.easy-autocomplete":function(){define(["jimu/loaderplugins/jquery-loader! ./libs/jquery/jquery-1-11-1.js"],function(p){var c=function(c){c.Configuration=function(c){function b(b,c){function e(c,d){for(var a in d)void 0===
c[a]&&b.log("Property '"+a+"' does not exist in EasyAutocomplete options API."),"object"===typeof c[a]&&-1===p.inArray(a,g)&&e(c[a],d[a])}e(d,c)}var d={data:"list-required",url:"list-required",dataType:"json",listLocation:function(b){return b},xmlElementName:"",getValue:function(b){return b},autocompleteOff:!0,placeholder:!1,ajaxCallback:function(){},matchResponseProperty:!1,list:{sort:{enabled:!1,method:function(b,c){b=d.getValue(b);c=d.getValue(c);return b<c?-1:b>c?1:0}},maxNumberOfElements:6,hideOnEmptyPhrase:!0,
match:{enabled:!1,caseSensitive:!1,method:function(b,c){return-1<b.search(c)?!0:!1}},showAnimation:{type:"normal",time:400,callback:function(){}},hideAnimation:{type:"normal",time:400,callback:function(){}},onClickEvent:function(){},onSelectItemEvent:function(){},onLoadEvent:function(){},onChooseEvent:function(){},onKeyEnterEvent:function(){},onMouseOverEvent:function(){},onMouseOutEvent:function(){},onShowListEvent:function(){},onHideListEvent:function(){}},highlightPhrase:!0,theme:"",cssClasses:"",
minCharNumber:0,requestDelay:0,adjustWidth:!0,ajaxSettings:{},preparePostData:function(b){return b},loggerEnabled:!0,template:"",categoriesAssigned:!1,categories:[{maxNumberOfElements:4}]},g=["ajaxSettings","template"];this.get=function(b){return d[b]};this.equals=function(b,c){var e;e=void 0!==d[b]&&null!==d[b]?!0:!1;return e&&d[b]===c?!0:!1};this.checkDataUrlProperties=function(){return"list-required"===d.url&&"list-required"===d.data?!1:!0};this.checkRequiredProperties=function(){for(var b in d)if("required"===
d[b])return!1;return!0};this.printPropertiesThatDoesntExist=function(c,d){b(c,d)};(function(){"xml"===c.dataType&&(c.getValue||(c.getValue=function(a){return p(a).text()}),c.list||(c.list={}),c.list.sort||(c.list.sort={}),c.list.sort.method=function(a,b){a=c.getValue(a);b=c.getValue(b);return a<b?-1:a>b?1:0},c.list.match||(c.list.match={}),c.list.match.method=function(a,b){return-1<a.search(b)?!0:!1});if(void 0!==c.categories&&c.categories instanceof Array){for(var b=[],h=0,n=c.categories.length;h<
n;h+=1){var g=c.categories[h],f;for(f in d.categories[0])void 0===g[f]&&(g[f]=d.categories[0][f]);b.push(g)}c.categories=b}})();(function(){function b(c,d){var e=c||{},f;for(f in c)void 0!==d[f]&&null!==d[f]&&("object"!==typeof d[f]||d[f]instanceof Array?e[f]=d[f]:b(c[f],d[f]));void 0!==d.data&&null!==d.data&&"object"===typeof d.data&&(e.data=d.data);return e}d=b(d,c)})();!0===d.loggerEnabled&&b(console,c);d.ajaxSettings=void 0!==c.ajaxSettings&&"object"===typeof c.ajaxSettings?c.ajaxSettings:{};
(function(){var b;"list-required"!==d.url&&"function"!==typeof d.url&&(b=d.url,d.url=function(){return b});void 0!==d.ajaxSettings.url&&"function"!==typeof d.ajaxSettings.url&&(b=d.ajaxSettings.url,d.ajaxSettings.url=function(){return b});if("string"===typeof d.listLocation){var h=d.listLocation;"XML"===d.dataType.toUpperCase()?d.listLocation=function(b){return p(b).find(h)}:d.listLocation=function(b){return b[h]}}if("string"===typeof d.getValue){var g=d.getValue;d.getValue=function(b){return b[g]}}void 0!==
c.categories&&(d.categoriesAssigned=!0)})()};return c}(c||{}),c=function(c){c.Logger=function(){this.error=function(){};this.warning=function(){}};return c}(c||{}),c=function(c){c.Constans=function(){var c={CONTAINER_CLASS:"easy-autocomplete-container",CONTAINER_ID:"eac-container-",WRAPPER_CSS_CLASS:"easy-autocomplete"};this.getValue=function(b){return c[b]}};return c}(c||{}),c=function(c){c.ListBuilderService=function(c,b){function d(b,d){function e(){var a={},e;void 0!==b.xmlElementName&&(a.xmlElementName=
b.xmlElementName);void 0!==b.listLocation?e=b.listLocation:void 0!==c.get("listLocation")&&(e=c.get("listLocation"));void 0!==e?"string"===typeof e?a.data=p(d).find(e):"function"===typeof e&&(a.data=e(d)):a.data=d;return a}function h(){var a={};void 0!==b.listLocation?"string"===typeof b.listLocation?a.data=d[b.listLocation]:"function"===typeof b.listLocation&&(a.data=b.listLocation(d)):a.data=d;return a}var f={},f="XML"===c.get("dataType").toUpperCase()?e():h();void 0!==b.header&&(f.header=b.header);
void 0!==b.maxNumberOfElements&&(f.maxNumberOfElements=b.maxNumberOfElements);void 0!==c.get("list").maxNumberOfElements&&(f.maxListSize=c.get("list").maxNumberOfElements);if(void 0!==b.getValue)if("string"===typeof b.getValue){var a=b.getValue;f.getValue=function(b){return b[a]}}else"function"===typeof b.getValue&&(f.getValue=b.getValue);else f.getValue=c.get("getValue");return f}function g(b){var d=[];void 0===b.xmlElementName&&(b.xmlElementName=c.get("xmlElementName"));p(b.data).find(b.xmlElementName).each(function(){d.push(this)});
return d}this.init=function(b){var d=[],e={};e.data=c.get("listLocation")(b);e.getValue=c.get("getValue");e.maxListSize=c.get("list").maxNumberOfElements;d.push(e);return d};this.updateCategories=function(b,h){if(c.get("categoriesAssigned")){b=[];for(var e=0;e<c.get("categories").length;e+=1){var g=d(c.get("categories")[e],h);b.push(g)}}return b};this.convertXml=function(b){if("XML"===c.get("dataType").toUpperCase())for(var d=0;d<b.length;d+=1)b[d].data=g(b[d]);return b};this.processData=function(d,
h){for(var e=0,g=d.length;e<g;e+=1)d[e].data=b(c,d[e],h);return d};this.checkIfDataExists=function(b){for(var c=0,d=b.length;c<d;c+=1)if(void 0!==b[c].data&&b[c].data instanceof Array&&0<b[c].data.length)return!0;return!1}};return c}(c||{}),c=function(c){c.proccess=function(d,b,g){function l(b,c){d.get("list").match.caseSensitive||("string"===typeof b&&(b=b.toLowerCase()),c=c.toLowerCase());return d.get("list").match.method(b,c)?!0:!1}c.proccess.match=l;var e=b.data,e=function(b,c){var e=[],f="";
if(d.get("list").match.enabled)for(var a=0,h=b.length;a<h;a+=1)f=d.get("getValue")(b[a]),l(f,c)&&e.push(b[a]);else e=b;return e}(e,g),e=function(c){void 0!==b.maxNumberOfElements&&c.length>b.maxNumberOfElements&&(c=c.slice(0,b.maxNumberOfElements));return c}(e);return e=function(b){d.get("list").sort.enabled&&b.sort(d.get("list").sort.method);return b}(e)};return c}(c||{}),c=function(c){c.Template=function(c){var b={basic:{type:"basic",method:function(b){return b},cssClass:""},description:{type:"description",
fields:{description:"description"},method:function(b){return b+" - description"},cssClass:"eac-description"},iconLeft:{type:"iconLeft",fields:{icon:""},method:function(b){return b},cssClass:"eac-icon-left"},iconRight:{type:"iconRight",fields:{iconSrc:""},method:function(b){return b},cssClass:"eac-icon-right"},links:{type:"links",fields:{link:""},method:function(b){return b},cssClass:""},custom:{type:"custom",method:function(){},cssClass:""}},d=function(c){var d=c.fields,h;return"description"===c.type?
(h=b.description.method,"string"===typeof d.description?h=function(b,c){return b+" - \x3cspan\x3e"+c[d.description]+"\x3c/span\x3e"}:"function"===typeof d.description&&(h=function(b,c){return b+" - \x3cspan\x3e"+d.description(c)+"\x3c/span\x3e"}),h):"iconRight"===c.type?("string"===typeof d.iconSrc?h=function(b,c){return b+"\x3cimg class\x3d'eac-icon' src\x3d'"+c[d.iconSrc]+"' /\x3e"}:"function"===typeof d.iconSrc&&(h=function(b,c){return b+"\x3cimg class\x3d'eac-icon' src\x3d'"+d.iconSrc(c)+"' /\x3e"}),
h):"iconLeft"===c.type?("string"===typeof d.iconSrc?h=function(b,c){return"\x3cimg class\x3d'eac-icon' src\x3d'"+c[d.iconSrc]+"' /\x3e"+b}:"function"===typeof d.iconSrc&&(h=function(b,c){return"\x3cimg class\x3d'eac-icon' src\x3d'"+d.iconSrc(c)+"' /\x3e"+b}),h):"links"===c.type?("string"===typeof d.link?h=function(b,c){return"\x3ca href\x3d'"+c[d.link]+"' \x3e"+b+"\x3c/a\x3e"}:"function"===typeof d.link&&(h=function(b,c){return"\x3ca href\x3d'"+d.link(c)+"' \x3e"+b+"\x3c/a\x3e"}),h):"custom"===c.type?
c.method:b.basic.method};this.getTemplateClass=function(c){var d=function(){return""};return c&&c.type?c.type&&b[c.type]?function(){var d=b[c.type].cssClass;return function(){return d}}():d:d}(c);c=c&&c.type?c.type&&b[c.type]?d(c):b.basic.method:b.basic.method;this.build=c};return c}(c||{}),c=function(c){c.main=function(d,b){function g(){function b(b,c){return a.get("highlightPhrase")&&""!==c?(c=c.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$\x26"),(b+"").replace(new RegExp("("+c+")","gi"),"\x3cb\x3e$1\x3c/b\x3e")):
b}m.parent().hasClass(f.getValue("WRAPPER_CSS_CLASS"))&&(m.next("."+f.getValue("CONTAINER_CLASS")).remove(),m.unwrap());(function(){var b=p("\x3cdiv\x3e"),c=f.getValue("WRAPPER_CSS_CLASS");a.get("theme")&&""!==a.get("theme")&&(c+=" eac-"+a.get("theme"));a.get("cssClasses")&&""!==a.get("cssClasses")&&(c+=" "+a.get("cssClasses"));""!==y.getTemplateClass()&&(c+=" "+y.getTemplateClass());b.addClass(c);m.wrap(b);!0===a.get("adjustWidth")&&m.parent().css("width","100%")})();(function(){var c=p("\x3cdiv\x3e").addClass(f.getValue("CONTAINER_CLASS"));
c.attr("id",l()).prepend(p("\x3cul\x3e"));(function(){c.on("show.eac",function(){var b,d;switch(a.get("list").showAnimation.type){case "slide":b=a.get("list").showAnimation.time;d=a.get("list").showAnimation.callback;c.find("ul").slideDown(b,d);break;case "fade":b=a.get("list").showAnimation.time;d=a.get("list").showAnimation.callback;c.find("ul").fadeIn(b,d);break;default:c.find("ul").show()}a.get("list").onShowListEvent()}).on("hide.eac",function(){var b,d;switch(a.get("list").hideAnimation.type){case "slide":b=
a.get("list").hideAnimation.time;d=a.get("list").hideAnimation.callback;c.find("ul").slideUp(b,d);break;case "fade":b=a.get("list").hideAnimation.time;d=a.get("list").hideAnimation.callback;c.find("ul").fadeOut(b,d);break;default:c.find("ul").hide()}a.get("list").onHideListEvent()}).on("selectElement.eac",function(){c.find("ul li").removeClass("selected");c.find("ul li").eq(u).addClass("selected");a.get("list").onSelectItemEvent()}).on("loadElements.eac",function(d,e,f){var h="";d=c.find("ul");d.empty().detach();
x=[];for(var g=0,k=0,l=e.length;k<l;k+=1){var n=e[k].data;if(0!==n.length){void 0!==e[k].header&&0<e[k].header.length&&d.append("\x3cdiv class\x3d'eac-category' \x3e"+e[k].header+"\x3c/div\x3e");for(var L=0,q=n.length;L<q&&g<e[k].maxListSize;L+=1)h=p("\x3cli\x3e\x3cdiv class\x3d'eac-item'\x3e\x3c/div\x3e\x3c/li\x3e"),function(){var c=L,d=g,l=e[k].getValue(n[c]);h.find(" \x3e div").on("click",function(){m.val(l).trigger("change");u=d;w(d);a.get("list").onClickEvent();a.get("list").onChooseEvent()}).mouseover(function(){u=
d;w(d);a.get("list").onMouseOverEvent()}).mouseout(function(){a.get("list").onMouseOutEvent()}).html(y.build(b(l,f),n[c]))}(),d.append(h),x.push(n[L]),g+=1}}c.append(d);a.get("list").onLoadEvent()})})();m.after(c)})();A=p("#"+l());a.get("placeholder")&&m.attr("placeholder",a.get("placeholder"))}function l(){var a=m.attr("id");return a=f.getValue("CONTAINER_ID")+a}function e(){q("autocompleteOff",!0)&&m.attr("autocomplete","off");(function(){m.focusout(function(){var b=m.val(),c;a.get("list").match.caseSensitive||
(b=b.toLowerCase());for(var d=0,e=x.length;d<e;d+=1)if(c=a.get("getValue")(x[d]),a.get("list").match.caseSensitive||(c=c.toLowerCase()),c===b){u=d;w(u);break}})})();(function(){m.off("keyup").keyup(function(b){function c(b){if(!(b.length<a.get("minCharNumber"))){if("list-required"!==a.get("data")){var c=a.get("data"),d=r.init(c),d=r.updateCategories(d,c),d=r.processData(d,b);A.trigger("loadElements.eac",[d,b]);0<m.parent().find("li").length?h():n()}c=function(){var b={},c=a.get("ajaxSettings")||{},
d;for(d in c)b[d]=c[d];return b}();if(void 0===c.url||""===c.url)c.url=a.get("url");if(void 0===c.dataType||""===c.dataType)c.dataType=a.get("dataType");void 0!==c.url&&"list-required"!==c.url&&(c.url=c.url(b),c.data=a.get("preparePostData")(c.data,b),p.ajax(c).done(function(c){var d=r.init(c),d=r.updateCategories(d,c),d=r.convertXml(d);if(!1!==a.get("matchResponseProperty")?"string"===typeof a.get("matchResponseProperty")?c[a.get("matchResponseProperty")]===b:"function"===typeof a.get("matchResponseProperty")?
a.get("matchResponseProperty")(c)===b:1:1)d=r.processData(d,b),A.trigger("loadElements.eac",[d,b]);r.checkIfDataExists(d)&&0<m.parent().find("li").length?h():n();a.get("ajaxCallback")()}).fail(function(){t.warning("Fail to load response data")}).always(function(){}))}}switch(b.keyCode){case 27:n();m.trigger("blur");break;case 38:b.preventDefault();0<x.length&&0<u&&(--u,m.val(a.get("getValue")(x[u])),w(u));break;case 40:b.preventDefault();0<x.length&&u<x.length-1&&(u+=1,m.val(a.get("getValue")(x[u])),
w(u));break;default:if(40<b.keyCode||8===b.keyCode){var d=m.val();!0!==a.get("list").hideOnEmptyPhrase||8!==b.keyCode||""!==d?0<a.get("requestDelay")?(void 0!==I&&clearTimeout(I),I=setTimeout(function(){c(d)},a.get("requestDelay"))):c(d):n()}}})})();(function(){m.on("keydown",function(a){a=a||window.event;if(38===a.keyCode)return!1}).keydown(function(b){13===b.keyCode&&-1<u&&(m.val(a.get("getValue")(x[u])),a.get("list").onKeyEnterEvent(),a.get("list").onChooseEvent(),u=-1,n(),b.preventDefault())})})();
m.off("keypress");(function(){m.focus(function(){""!==m.val()&&0<x.length&&(u=-1,h())})})();(function(){m.blur(function(){setTimeout(function(){u=-1;n()},250)})})()}function h(){A.trigger("show.eac")}function n(){A.trigger("hide.eac")}function w(a){A.trigger("selectElement.eac",a)}var f=new c.Constans,a=new c.Configuration(b),t=new c.Logger,y=new c.Template(b.template),r=new c.ListBuilderService(a,c.proccess),q=a.equals,m=d,A="",x=[],u=-1,I;c.consts=f;this.getConstants=function(){return f};this.getConfiguration=
function(){return a};this.getContainer=function(){return A};this.getSelectedItemIndex=function(){return u};this.getItems=function(){return x};this.getItemData=function(a){return x.length<a||void 0===x[a]?-1:x[a]};this.getSelectedItemData=function(){return this.getItemData(u)};this.build=function(){g()};this.init=function(){0===m.length?t.error("Input field doesn't exist."):a.checkDataUrlProperties()?a.checkRequiredProperties()?(g(),e()):t.error("Will not work without mentioned properties."):t.error("One of options variables 'data' or 'url' must be defined.")}};
c.eacHandles=[];c.getHandle=function(d){return c.eacHandles[d]};c.inputHasId=function(c){return void 0!==p(c).attr("id")&&0<p(c).attr("id").length?!0:!1};c.assignRandomId=function(c){var b="";do b="eac-"+Math.floor(1E4*Math.random());while(0!==p("#"+b).length);p(c).attr("id",b)};c.setHandle=function(d,b){c.eacHandles[b]=d};return c}(c||{});(function(g){g.fn.easyAutocomplete=function(d){return this.each(function(){var b=g(this),k=new c.main(b,d);c.inputHasId(b)||c.assignRandomId(b);k.init();c.setHandle(k,
b.attr("id"))})};g.fn.getSelectedItemIndex=function(){var d=g(this).attr("id");return void 0!==d?c.getHandle(d).getSelectedItemIndex():-1};g.fn.getItems=function(){var d=g(this).attr("id");return void 0!==d?c.getHandle(d).getItems():-1};g.fn.getItemData=function(d){var b=g(this).attr("id");return void 0!==b&&-1<d?c.getHandle(b).getItemData(d):-1};g.fn.getSelectedItemData=function(){var d=g(this).attr("id");return void 0!==d?c.getHandle(d).getSelectedItemData():-1}})(jQuery)})},"jimu/loaderplugins/jquery-loader":function(){define(["dojo/Deferred",
"dojo/when"],function(p,c){var g,d={},b=function(c){var e=new p;if(d.locked)return setTimeout(function(){b(c)},50),e;if(d[c])return d.locked=!0,e.resolve(d[c]),e;d.locked=!0;g([c],function(){d[c]=window.jQuery;e.resolve(d[c])});return e},k=function(b,c,d){g([b[c]],function(){c===b.length-1?d.resolve():(c++,k(b,c,d))})},l=function(b,c){b=new p;c[0]?k(c,0,b):b.resolve();return b},e=function(c,e){var g=new p;b(c).then(function(b){l(c,e).then(function(){d.locked=!1;g.resolve(b)})});return g};return{load:function(b,
d,k){b=b.split(",");var f=[];g=d;0===b.length?k(null):(d=b[0],f=b.slice(1),c(e(d,f),k))}}})},"widgets/DistanceAndDirection/_build-generate_module":function(){define(["dojo/text!./Widget.html","dojo/text!./css/style.css","dojo/i18n!./nls/strings"],function(){})},"url:widgets/DistanceAndDirection/models/ConfirmNotation.html":'\x3cdiv class\x3d\'coordinateContainer\'\x3e\r\n    \x3cspan class\x3d\'jimu-widget-subtitle\' data-dojo-attach-point\x3d\'label1\'\x3e\x3c/span\x3e\r\n    \x3cdiv class\x3d"controlGroup"\x3e\r\n        \x3cdiv class\x3d"controlItem" style\x3d"padding-top: 10px;"\x3e\r\n            \x3cselect style\x3d"width: 225px" data-dojo-type\x3d"jimu/dijit/formSelect" data-dojo-attach-point\x3d"comboOptions"\x3e\r\n            \x3c/select\x3e\r\n        \x3c/div\x3e\r\n    \x3c/div\x3e\r\n\x3c/div\x3e\r\n',
"url:widgets/DistanceAndDirection/templates/EditOutputCoordinate.html":'\x3cdiv\x3e\r\n  \x3cspan class\x3d\'jimu-widget-subtitle\'\x3e${nls.setCoordFormatStringMessage}\x3c/span\x3e\r\n  \x3cdiv class\x3d"controlContainer"\x3e\r\n    \x3cselect class\x3d"selectFormat esriCTDropdownObj" name\x3d"test" data-dojo-type\x3d\'jimu/dijit/formSelect\'\r\n      data-dojo-attach-point\x3d"frmtSelect" aria-label\x3d"${nls.setCoordFormatStringMessage}"\x3e\r\n      \x3coption value\x3d"DD"\x3e${nls.ddLabel}\x3c/option\x3e\r\n      \x3coption value\x3d"DDM"\x3e${nls.ddmLabel}\x3c/option\x3e\r\n      \x3coption value\x3d"DMS"\x3e${nls.dmsLabel}\x3c/option\x3e\r\n      \x3coption value\x3d"GARS"\x3e${nls.garsLabel}\x3c/option\x3e\r\n      \x3coption value\x3d"GEOREF"\x3e${nls.georefLabel}\x3c/option\x3e\r\n      \x3coption value\x3d"MGRS"\x3e${nls.mgrsLabel}\x3c/option\x3e\r\n      \x3coption value\x3d"USNG"\x3e${nls.usngLabel}\x3c/option\x3e\r\n      \x3coption value\x3d"UTM"\x3e${nls.utmLabel}\x3c/option\x3e\r\n      \x3coption value\x3d"UTM (H)"\x3e${nls.utmhLabel}\x3c/option\x3e\r\n    \x3c/select\x3e\r\n    \x3cinput type\x3d"text" data-dojo-attach-point\x3d"frmtVal" class\x3d"formatInput esriCTInputObj"\r\n      aria-label\x3d"${nls.setCoordFormatStringMessage}"\x3e\x3c/input\x3e\r\n    \x3cdiv class\x3d\'settingsContainer\' data-dojo-attach-point\x3d"prefixContainer"\x3e\r\n      \x3cinput data-dojo-attach-point\x3d"addSignChkBox" type\x3d"checkbox" aria-label\x3d"${nls.prefixMessage}"\r\n        class\x3d"esriCTCheckboxObj"\x3e\r\n      \x3clabel class\x3d"formatText"\x3e${nls.prefixMessage}\x3c/label\x3e\r\n    \x3c/div\x3e\r\n  \x3c/div\x3e\r\n  \x3cdiv class\x3d"btnContainer"\x3e\r\n    \x3cdiv data-dojo-attach-point\x3d"applyButton" class\x3d\'jimu-btn esriCTButtonObj\' tabindex\x3d"0"\r\n      aria-label\x3d"${nls.common.ok}" role\x3d"button"\x3e\r\n      ${nls.common.ok}\x3c/div\x3e\r\n    \x3cdiv data-dojo-attach-point\x3d"cancelButton" class\x3d\'jimu-btn esriCTButtonObj\' tabindex\x3d"0"\r\n      aria-label\x3d"${nls.common.cancel}" role\x3d"button"\x3e${nls.common.cancel}\x3c/div\x3e\r\n  \x3c/div\x3e\r\n\x3c/div\x3e',
"url:widgets/DistanceAndDirection/templates/TabLine.html":'\x3cdiv class\x3d"tabPanel" data-dojo-attach-point\x3d"lineContainer"\x3e\r\n  \x3cdiv class\x3d"controls"\x3e\r\n    \x3cdiv class\x3d"controlGroup"\x3e\r\n      \x3clabel\x3e${nls.fromLabel}\x3c/label\x3e\r\n      \x3cdiv class\x3d"controlItem"\x3e\r\n        \x3cselect data-dojo-attach-point\x3d"lineTypeDD" style\x3d"width:100%" data-dojo-type\x3d"jimu/dijit/formSelect"\r\n          aria-label\x3d"${nls.fromLabel}" class\x3d"esriCTDropdownObj"\x3e\r\n          \x3coption value\x3d"DistAndBearing"\x3e${nls.distanceBearingLabel}\x3c/option\x3e\r\n          \x3coption selected\x3d"selected" value\x3d"Points"\x3e${nls.pointsLabel}\x3c/option\x3e\r\n        \x3c/select\x3e\r\n      \x3c/div\x3e\r\n    \x3c/div\x3e\r\n    \x3cdiv class\x3d"controlGroup" data-dojo-attach-point\x3d"startDiv"\x3e\r\n      \x3clabel data-dojo-attach-point\x3d"lineStartPointLabel"\x3e${nls.startPointLabel}\x3c/label\x3e\r\n      \x3cdiv class\x3d"controlItem"\x3e\r\n        \x3cdiv class\x3d"jimu-input coordInput" data-dojo-attach-point\x3d"startPointCoordsLine"\x3e\r\n        \x3c/div\x3e\r\n        \x3cdiv class\x3d"controlItem paddedLeft" data-dojo-attach-point\x3d"addPointBtnStartDiv"\x3e\r\n          \x3cdiv class\x3d\'add-with-icon\'\x3e\r\n            \x3cspan title\x3d"${nls.formatInputLabel}" class\x3d"jimu-icon settingBtn safariOnly"\r\n              data-dojo-attach-point\x3d"coordinateFormatButtonStart" tabindex\x3d"0" aria-label\x3d"${nls.formatInputLabel}"\r\n              role\x3d"button"\x3e\x3c/span\x3e\r\n          \x3c/div\x3e\r\n          \x3cdiv class\x3d\'add-with-icon\'\x3e\r\n            \x3cdiv title\x3d"${nls.addPointLabel}" class\x3d"drawPointBtn" data-dojo-attach-point\x3d"addPointBtnStart"\r\n              tabindex\x3d"0" aria-label\x3d"${nls.addPointLabel}" role\x3d"button"\x3e\x3c/div\x3e\r\n          \x3c/div\x3e\r\n        \x3c/div\x3e\r\n      \x3c/div\x3e\r\n    \x3c/div\x3e\r\n    \x3cdiv class\x3d"controlGroup"\x3e\r\n      \x3cinput aria-label\x3d"${nls.createLineInteractively}" class\x3d"interactive-checkbox esriCTCheckboxObj" type\x3d"checkbox"\r\n        data-dojo-attach-point\x3d"interactiveLine" /\x3e\r\n      \x3clabel data-dojo-attach-point\x3d"interactiveLabel"\x3e${nls.createLineInteractively}\x3c/label\x3e\r\n    \x3c/div\x3e\r\n    \x3cdiv class\x3d"controlGroup endPt"\x3e\r\n      \x3clabel data-dojo-attach-point\x3d"lineEndPointLabel"\x3e${nls.endPointLabel}\x3c/label\x3e\r\n      \x3cdiv class\x3d"controlItem"\x3e\r\n        \x3cdiv class\x3d"jimu-input coordInput" data-dojo-attach-point\x3d"endPointCoordsLine"\x3e\r\n        \x3c/div\x3e\r\n        \x3cdiv class\x3d"controlItem paddedLeft" data-dojo-attach-point\x3d"addPointBtnEndDiv"\x3e\r\n          \x3cdiv class\x3d\'add-with-icon\'\x3e\r\n            \x3cspan title\x3d"${nls.formatInputLabel}" class\x3d"jimu-icon settingBtn safariOnly"\r\n              data-dojo-attach-point\x3d"coordinateFormatButtonEnd" tabindex\x3d"0" aria-label\x3d"${nls.formatInputLabel}"\r\n              role\x3d"button"\x3e\x3c/span\x3e\r\n          \x3c/div\x3e\r\n          \x3cdiv class\x3d\'add-with-icon\'\x3e\r\n            \x3cdiv title\x3d"${nls.addPointLabel}" class\x3d"drawPointBtn" data-dojo-attach-point\x3d"addPointBtnEnd" tabindex\x3d"0"\r\n              aria-label\x3d"${nls.addPointLabel}" role\x3d"button"\x3e\x3c/div\x3e\r\n          \x3c/div\x3e\r\n        \x3c/div\x3e\r\n      \x3c/div\x3e\r\n    \x3c/div\x3e\r\n    \x3cdiv class\x3d"controlGroup"\x3e\r\n      \x3clabel\x3e${nls.lengthLabel}\x3c/label\x3e\r\n      \x3cdiv class\x3d"controlItem" data-dojo-attach-point\x3d"lengthInputDiv"\x3e\r\n        \x3cinput aria-label\x3d"${nls.lengthLabel}" style\x3d"width: calc(100% - 108px);"\r\n          data-dojo-type\x3d\'dijit/form/NumberTextBox\' required\x3d"true" value\x3d"1000"\r\n          data-dojo-props\x3d"constraints: {min: 1, max: 40030000}" data-dojo-attach-point\x3d"lengthInput"\r\n          data-dojo-attach-event\x3d"keyup: checkValidInputs"\x3e\r\n        \x3c/input\x3e\r\n        \x3cselect style\x3d"width: 100px" class\x3d"controlSpace noResize" data-dojo-type\x3d"jimu/dijit/formSelect"\r\n          data-dojo-attach-point\x3d"lengthUnitDD" aria-label\x3d"${nls.lengthLabel}"\x3e\r\n          \x3coption value\x3d"feet"\x3e${nls.units.feet}\x3c/option\x3e\r\n          \x3coption value\x3d"kilometers"\x3e${nls.units.kilometers}\x3c/option\x3e\r\n          \x3coption value\x3d"miles"\x3e${nls.units.miles}\x3c/option\x3e\r\n          \x3coption value\x3d"meters" selected\x3d"selected"\x3e${nls.units.meters}\x3c/option\x3e\r\n          \x3coption value\x3d"nautical-miles"\x3e${nls.units.nauticalMiles}\x3c/option\x3e\r\n          \x3coption value\x3d"yards"\x3e${nls.units.yards}\x3c/option\x3e\r\n        \x3c/select\x3e\r\n      \x3c/div\x3e\r\n    \x3c/div\x3e\r\n    \x3cdiv class\x3d"controlGroup"\x3e\r\n      \x3clabel\x3e${nls.angleLabel}\x3c/label\x3e\r\n      \x3cdiv class\x3d"controlItem" data-dojo-attach-point\x3d"angleInputDiv"\x3e\r\n        \x3cinput aria-label\x3d"${nls.angleLabel}" data-dojo-type\x3d"dijit/form/NumberTextBox"\r\n          style\x3d"width: calc(100% - 108px);" required\x3d"true" value\x3d"0" data-dojo-props\x3d"constraints: {min: 0, max: 360}"\r\n          data-dojo-attach-point\x3d"angleInput" data-dojo-attach-event\x3d"onChange: checkValidInputs"\x3e\r\n        \x3c/input\x3e\r\n        \x3cselect style\x3d"width: 100px" class\x3d"controlSpace noResize" data-dojo-type\x3d"jimu/dijit/formSelect"\r\n          data-dojo-attach-point\x3d"angleUnitDD" tabindex\x3d"0" aria-label\x3d"${nls.angleLabel}"\x3e\r\n          \x3coption value\x3d"degrees"\x3e${nls.degreesLabel}\x3c/option\x3e\r\n          \x3coption value\x3d"mils"\x3e${nls.milsLabel}\x3c/option\x3e\r\n        \x3c/select\x3e\r\n      \x3c/div\x3e\r\n    \x3c/div\x3e\r\n    \x3cdiv class\x3d"buttonContainer"\x3e\r\n      \x3cdiv class\x3d\'jimu-btn jimu-state-disabled\' data-dojo-attach-point\x3d\'okButton\' style\x3d"width: 49%;"\r\n        data-dojo-attach-event\x3d"onclick: okButtonClicked" tabindex\x3d"-1" aria-label\x3d"${nls.common.ok}" role\x3d"button"\x3e\r\n        ${nls.common.ok}\x3c/div\x3e\r\n      \x3cdiv class\x3d\'jimu-btn\' tabindex\x3d"0" role\x3d"button" aria-label\x3d"${nls.clearGraphicsLabel}" style\x3d"width: 49%;"\r\n        data-dojo-attach-point\x3d\'clearGraphicsButton\' data-dojo-attach-event\x3d"onclick: clearGraphics"\x3e\r\n        ${nls.clearGraphicsLabel}\x3c/div\x3e\r\n    \x3c/div\x3e\r\n  \x3c/div\x3e\r\n\x3c/div\x3e',
"url:widgets/DistanceAndDirection/templates/TabCircle.html":'\x3cdiv class\x3d"tabPanel" data-dojo-attach-point\x3d"circleContainer"\x3e\r\n  \x3cdiv class\x3d"controls"\x3e\r\n    \x3cdiv class\x3d"controlGroup"\x3e\r\n      \x3clabel\x3e${nls.circleTitle}\x3c/label\x3e\r\n      \x3cdiv class\x3d"controlItem"\x3e\r\n        \x3cselect aria-label\x3d"${nls.circleTitle}" style\x3d"width:100%;" data-dojo-type\x3d"jimu/dijit/formSelect"\r\n          data-dojo-attach-point\x3d"creationType" class\x3d"esriCTDropdownObj"\x3e\r\n          \x3coption value\x3d"Radius" selected\x3d"selected"\x3e${nls.radiusLabel}\x3c/option\x3e\r\n          \x3coption value\x3d"Diameter"\x3e${nls.diameterLabel}\x3c/option\x3e\r\n        \x3c/select\x3e\r\n      \x3c/div\x3e\r\n    \x3c/div\x3e\r\n    \x3cdiv class\x3d"controlGroup"\x3e\r\n      \x3clabel data-dojo-attach-point\x3d"coordInputLabel"\x3e${nls.centerPointLabel}\x3c/label\x3e\r\n      \x3cdiv class\x3d"controlItem"\x3e\r\n        \x3cdiv class\x3d"jimu-input coordInput" data-dojo-attach-point\x3d"startPointCoords"\r\n          placeholder\x3d"${nls.startPointPlaceHolderLabel}" role\x3d"textbox"\x3e\r\n        \x3c/div\x3e\r\n        \x3cdiv class\x3d"controlItem paddedLeft"\x3e\r\n          \x3cdiv class\x3d\'add-with-icon\'\x3e\r\n            \x3cspan title\x3d"${nls.formatInputLabel}" class\x3d"jimu-icon settingBtn safariOnly"\r\n              data-dojo-attach-point\x3d"coordinateFormatButton" tabindex\x3d"0" role\x3d"button"\r\n              aria-label\x3d"${nls.formatInputLabel}"\x3e\x3c/span\x3e\r\n          \x3c/div\x3e\r\n          \x3cdiv class\x3d\'add-with-icon\'\x3e\r\n            \x3cdiv title\x3d"${nls.drawCircleLabel}" class\x3d"drawPointBtn" data-dojo-attach-point\x3d"addPointBtn" tabindex\x3d"0"\r\n              role\x3d"button" aria-label\x3d"${nls.drawCircleLabel}"\x3e\x3c/div\x3e\r\n          \x3c/div\x3e\r\n        \x3c/div\x3e\r\n      \x3c/div\x3e\r\n      \x3cdiv class\x3d"controlGroup"\x3e\r\n        \x3cinput aria-label\x3d"${nls.createCircleInteractivelyLabel}" class\x3d"interactive-checkbox esriCTCheckboxObj"\r\n          type\x3d"checkbox" data-dojo-attach-point\x3d"interactiveCircle"\r\n          aria-label\x3d"${nls.createCircleInteractivelyLabel}" /\x3e\r\n        \x3clabel data-dojo-attach-point\x3d"interactiveLabel"\x3e${nls.createCircleInteractivelyLabel}\x3c/label\x3e\r\n      \x3c/div\x3e\r\n    \x3c/div\x3e\r\n    \x3cdiv class\x3d"controlGroup"\x3e\r\n      \x3clabel data-dojo-attach-point\x3d"radiusDiameterLabel"\x3e${nls.radiusLabel}\x3c/label\x3e\r\n      \x3cdiv class\x3d"controlItem" data-dojo-attach-point\x3d"radiusInputDiv"\x3e\r\n        \x3cinput aria-label\x3d"${nls.radiusLabel}" style\x3d"width: calc(100% - 108px);"\r\n          data-dojo-type\x3d\'dijit/form/NumberTextBox\' required\x3d"true" value\x3d"1000" data-dojo-props\x3d"constraints: {min: 1}"\r\n          data-dojo-attach-point\x3d"radiusInput"\x3e\r\n        \x3c/input\x3e\r\n        \x3cselect aria-label\x3d"${nls.radiusLabel}" style\x3d"width: 100px" class\x3d"controlSpace noResize"\r\n          data-dojo-type\x3d"jimu/dijit/formSelect" data-dojo-attach-point\x3d"lengthUnitDD"\x3e\r\n          \x3coption value\x3d"feet"\x3e${nls.units.feet}\x3c/option\x3e\r\n          \x3coption value\x3d"kilometers"\x3e${nls.units.kilometers}\x3c/option\x3e\r\n          \x3coption value\x3d"miles"\x3e${nls.units.miles}\x3c/option\x3e\r\n          \x3coption value\x3d"meters" selected\x3d"selected"\x3e${nls.units.meters}\x3c/option\x3e\r\n          \x3coption value\x3d"nautical-miles"\x3e${nls.units.nauticalMiles}\x3c/option\x3e\r\n          \x3coption value\x3d"yards"\x3e${nls.units.yards}\x3c/option\x3e\r\n        \x3c/select\x3e\r\n      \x3c/div\x3e\r\n    \x3c/div\x3e\r\n    \x3cdiv class\x3d"controlGroup" data-dojo-attach-point\x3d\'distCalcControlDiv\'\x3e\r\n      \x3cdiv data-dojo-attach-point\x3d\'distCalcControl\' data-dojo-type\x3d"dijit/TitlePane" data-dojo-props\x3d"open: false"\x3e\r\n        \x3cdiv class\x3d"controlGroup"\x3e\r\n          \x3clabel\x3e${nls.timeLabel}\r\n            \x3clabel\x3e\r\n              \x3cdiv class\x3d"controlItem"\x3e\r\n                \x3cinput aria-label\x3d"${nls.timeLabel}" style\x3d\'width: 100%;\' data-dojo-type\x3d\'dijit/form/NumberTextBox\'\r\n                  required\x3d"true" value\x3d"1" data-dojo-props\x3d"constraints: {min: 1}" data-dojo-attach-point\x3d"timeInput"\x3e\r\n                \x3c/input\x3e\r\n                \x3cselect aria-label\x3d"${nls.timeLabel}" class\x3d"controlSpace noResize"\r\n                  data-dojo-type\x3d"jimu/dijit/formSelect" data-dojo-attach-point\x3d"timeUnitDD"\x3e\r\n                  \x3coption value\x3d"3600"\x3e${nls.hoursLabel}\x3c/option\x3e\r\n                  \x3coption value\x3d"60" selected\x3d"selected"\x3e${nls.minutesLabel}\x3c/option\x3e\r\n                  \x3coption value\x3d"1"\x3e${nls.secondsLabel}\x3c/option\x3e\r\n                \x3c/select\x3e\r\n              \x3c/div\x3e\r\n        \x3c/div\x3e\r\n        \x3cdiv class\x3d"controlGroup"\x3e\r\n          \x3clabel\x3e${nls.rateLabel}\r\n            \x3clabel\x3e\r\n              \x3cdiv class\x3d"controlItem"\x3e\r\n                \x3cinput aria-label\x3d"${nls.rateLabel}" style\x3d\'width: 100%;\' data-dojo-type\x3d\'dijit/form/NumberTextBox\'\r\n                  required\x3d"true" value\x3d"1" data-dojo-props\x3d"constraints: {min: 1}"\r\n                  data-dojo-attach-point\x3d"distanceInput"\x3e\r\n                \x3c/input\x3e\r\n                \x3cselect aria-label\x3d"${nls.rateLabel}" class\x3d"controlSpace noResize"\r\n                  data-dojo-type\x3d"jimu/dijit/formSelect" data-dojo-attach-point\x3d"distanceUnitDD"\x3e\r\n                  \x3coption value\x3d"0.3048;1"\x3e${nls.feetSecondsLabel}\x3c/option\x3e\r\n                  \x3coption value\x3d"0.3048;3600"\x3e${nls.feetHourLabel}\x3c/option\x3e\r\n                  \x3coption value\x3d"1000;1"\x3e${nls.kmSecondLabel}\x3c/option\x3e\r\n                  \x3coption value\x3d"1000;3600"\x3e${nls.kmHourLabel}\x3c/option\x3e\r\n                  \x3coption value\x3d"1;1" selected\x3d"selected"\x3e${nls.metersSecondLabel}\x3c/option\x3e\r\n                  \x3coption value\x3d"1;3600"\x3e${nls.metersHourLabel}\x3c/option\x3e\r\n                  \x3coption value\x3d"1609.344;1"\x3e${nls.milesSecondLabel}\x3c/option\x3e\r\n                  \x3coption value\x3d"1609.344;3600"\x3e${nls.milesHourLabel}\x3c/option\x3e\r\n                  \x3coption value\x3d"1852;1"\x3e${nls.nauticalMilesSecondLabel}\x3c/option\x3e\r\n                  \x3coption value\x3d"1852;3600"\x3e${nls.nauticalMilesHourLabel}\x3c/option\x3e\r\n                \x3c/select\x3e\r\n              \x3c/div\x3e\r\n        \x3c/div\x3e\r\n      \x3c/div\x3e\r\n    \x3c/div\x3e\r\n    \x3cdiv class\x3d"buttonContainer"\x3e\r\n      \x3cdiv class\x3d\'jimu-btn jimu-state-disabled\' data-dojo-attach-point\x3d\'okButton\' style\x3d"width: 49%;"\r\n        data-dojo-attach-event\x3d"onclick: okButtonClicked" aria-label\x3d"${nls.common.ok}" role\x3d"button"\x3e${nls.common.ok}\r\n      \x3c/div\x3e\r\n      \x3cdiv class\x3d\'jimu-btn\' tabindex\x3d"0" role\x3d"button" aria-label\x3d"${nls.clearGraphicsLabel}" style\x3d"width: 49%;"\r\n        data-dojo-attach-point\x3d\'clearGraphicsButton\'\x3e${nls.clearGraphicsLabel}\x3c/div\x3e\r\n    \x3c/div\x3e\r\n  \x3c/div\x3e\r\n\x3c/div\x3e',
"url:dijit/templates/TitlePane.html":'\x3cdiv\x3e\r\n\t\x3cdiv data-dojo-attach-event\x3d"ondijitclick:_onTitleClick, onkeydown:_onTitleKey"\r\n\t\t\tclass\x3d"dijitTitlePaneTitle" data-dojo-attach-point\x3d"titleBarNode" id\x3d"${id}_titleBarNode"\x3e\r\n\t\t\x3cdiv class\x3d"dijitTitlePaneTitleFocus" data-dojo-attach-point\x3d"focusNode"\x3e\r\n\t\t\t\x3cspan data-dojo-attach-point\x3d"arrowNode" class\x3d"dijitInline dijitArrowNode" role\x3d"presentation"\x3e\x3c/span\r\n\t\t\t\x3e\x3cspan data-dojo-attach-point\x3d"arrowNodeInner" class\x3d"dijitArrowNodeInner"\x3e\x3c/span\r\n\t\t\t\x3e\x3cspan data-dojo-attach-point\x3d"titleNode" class\x3d"dijitTitlePaneTextNode"\x3e\x3c/span\x3e\r\n\t\t\x3c/div\x3e\r\n\t\x3c/div\x3e\r\n\t\x3cdiv class\x3d"dijitTitlePaneContentOuter" data-dojo-attach-point\x3d"hideNode" role\x3d"presentation"\x3e\r\n\t\t\x3cdiv class\x3d"dijitReset" data-dojo-attach-point\x3d"wipeNode" role\x3d"presentation"\x3e\r\n\t\t\t\x3cdiv class\x3d"dijitTitlePaneContentInner" data-dojo-attach-point\x3d"containerNode" role\x3d"region" id\x3d"${id}_pane" aria-labelledby\x3d"${id}_titleBarNode"\x3e\r\n\t\t\t\t\x3c!-- nested divs because wipeIn()/wipeOut() doesn\'t work right on node w/padding etc.  Put padding on inner div. --\x3e\r\n\t\t\t\x3c/div\x3e\r\n\t\t\x3c/div\x3e\r\n\t\x3c/div\x3e\r\n\x3c/div\x3e\r\n',
"url:widgets/DistanceAndDirection/templates/TabEllipse.html":'\x3cdiv class\x3d"tabPanel" data-dojo-attach-point\x3d"ellipseContainer"\x3e\r\n  \x3cdiv class\x3d"controls"\x3e\r\n    \x3cdiv class\x3d"controlGroup"\x3e\r\n      \x3clabel\x3e${nls.ellipseTypeLabel}\x3c/label\x3e\r\n      \x3cdiv class\x3d"controlItem"\x3e\r\n        \x3cselect aria-label\x3d"${nls.ellipseTypeLabel}" style\x3d"width: 100%;" data-dojo-type\x3d"jimu/dijit/formSelect"\r\n          data-dojo-attach-point\x3d"ellipseType" class\x3d"esriCTDropdownObj"\x3e\r\n          \x3coption value\x3d"semi"\x3e${nls.ellipseSemiLabel}\x3c/option\x3e\r\n          \x3coption value\x3d"full"\x3e${nls.ellipseFullLabel}\x3c/option\x3e\r\n        \x3c/select\x3e\r\n      \x3c/div\x3e\r\n    \x3c/div\x3e\r\n    \x3cdiv class\x3d"controlGroup"\x3e\r\n      \x3clabel data-dojo-attach-point\x3d"coordInputLabel"\x3e${nls.centerPointLabel}\x3c/label\x3e\r\n      \x3cdiv class\x3d"controlItem"\x3e\r\n        \x3cdiv class\x3d"jimu-input coordInput" data-dojo-attach-point\x3d"startPointCoords"\r\n          placeholder\x3d"${nls.startPointPlaceHolderLabel}"\x3e\r\n        \x3c/div\x3e\r\n        \x3cdiv class\x3d"controlItem paddedLeft"\x3e\r\n          \x3cdiv class\x3d\'add-with-icon\'\x3e\r\n            \x3cspan title\x3d"${nls.formatInputLabel}" class\x3d"jimu-icon settingBtn safariOnly"\r\n              data-dojo-attach-point\x3d"coordinateFormatButton" tabindex\x3d"0" role\x3d"button"\r\n              aria-label\x3d"${nls.formatInputLabel}"\x3e\x3c/span\x3e\r\n          \x3c/div\x3e\r\n          \x3cdiv class\x3d\'add-with-icon\'\x3e\r\n            \x3cdiv title\x3d"${nls.drawEllipseLabel}" class\x3d"drawPointBtn" data-dojo-attach-point\x3d"addPointBtn" tabindex\x3d"0"\r\n              role\x3d"button" aria-label\x3d"${nls.drawEllipseLabel}"\x3e\x3c/div\x3e\r\n          \x3c/div\x3e\r\n        \x3c/div\x3e\r\n      \x3c/div\x3e\r\n      \x3cdiv class\x3d"controlGroup"\x3e\r\n        \x3cinput aria-label\x3d"${nls.createEllipseInteractively}" class\x3d"interactive-checkbox esriCTCheckboxObj"\r\n          type\x3d"checkbox" data-dojo-attach-point\x3d"interactiveEllipse" aria-label\x3d"${nls.createEllipseInteractively}" /\x3e\r\n        \x3clabel data-dojo-attach-point\x3d"interactiveLabel"\x3e${nls.createEllipseInteractively}\x3c/label\x3e\r\n      \x3c/div\x3e\r\n    \x3c/div\x3e\r\n    \x3cfieldset\x3e\r\n      \x3clegend\x3e${nls.axisLabel}\x3c/legend\x3e\r\n      \x3cdiv class\x3d"controlGroup" data-dojo-attach-point\x3d"majorAxisInputDiv"\x3e\r\n        \x3clabel data-dojo-attach-point\x3d"majorAxisLabel"\x3e${nls.majorRadiusLabel}\x3c/label\x3e\r\n        \x3cdiv class\x3d"controlItem"\x3e\r\n          \x3cinput aria-label\x3d"${nls.majorRadiusLabel}" data-dojo-type\x3d"dijit/form/NumberTextBox" required\x3d\'true\' ,\r\n            value\x3d\'100\' , data-dojo-props\x3d"constraints:{min:0.1}" data-dojo-attach-point\x3d"majorAxisInput"\r\n            style\x3d"width: 100%;" /\x3e\r\n        \x3c/div\x3e\r\n      \x3c/div\x3e\r\n      \x3cdiv class\x3d"controlGroup" data-dojo-attach-point\x3d"minorAxisInputDiv"\x3e\r\n        \x3clabel data-dojo-attach-point\x3d"minorAxisLabel"\x3e${nls.minorRadiusLabel}\x3c/label\x3e\r\n        \x3cdiv class\x3d"controlItem"\x3e\r\n          \x3cinput aria-label\x3d"${nls.minorRadiusLabel}" data-dojo-type\x3d"dijit/form/NumberTextBox" required\x3d\'true\' ,\r\n            value\x3d\'50\' , data-dojo-props\x3d"constraints:{min:0.1}" data-dojo-attach-point\x3d"minorAxisInput"\r\n            style\x3d"width: 100%;" /\x3e\r\n        \x3c/div\x3e\r\n      \x3c/div\x3e\r\n      \x3cdiv class\x3d"controlGroup"\x3e\r\n        \x3clabel\x3e${nls.unitLabel}\x3c/label\x3e\r\n        \x3cdiv class\x3d"controlItem"\x3e\r\n          \x3cselect aria-label\x3d"${nls.unitLabel}" style\x3d"width: 100%;" data-dojo-type\x3d"jimu/dijit/formSelect"\r\n            id\x3d"lengthUnitDD" data-dojo-attach-point\x3d"lengthUnitDD"\x3e\r\n            \x3coption value\x3d"feet"\x3e${nls.units.feet}\x3c/option\x3e\r\n            \x3coption value\x3d"kilometers" selected\x3d"selected"\x3e${nls.units.kilometers}\x3c/option\x3e\r\n            \x3coption value\x3d"miles"\x3e${nls.units.miles}\x3c/option\x3e\r\n            \x3coption value\x3d"meters"\x3e${nls.units.meters}\x3c/option\x3e\r\n            \x3coption value\x3d"nautical-miles"\x3e${nls.units.nauticalMiles}\x3c/option\x3e\r\n            \x3coption value\x3d"yards"\x3e${nls.units.yards}\x3c/option\x3e\r\n          \x3c/select\x3e\r\n        \x3c/div\x3e\r\n      \x3c/div\x3e\r\n    \x3c/fieldset\x3e\r\n    \x3cdiv class\x3d"controlGroup"\x3e\r\n      \x3clabel\x3e${nls.orientationLabel}\x3c/label\x3e\r\n      \x3cdiv class\x3d"controlItem" data-dojo-attach-point\x3d"angleInputDiv"\x3e\r\n        \x3cinput aria-label\x3d"${nls.orientationLabel}" data-dojo-type\x3d"dijit/form/NumberTextBox" style\x3d"width: 100%;"\r\n          required\x3d\'true\' , value\x3d\'0\' , data-dojo-props\x3d"constraints:{min:0, max:360}"\r\n          data-dojo-attach-point\x3d"angleInput" /\x3e\r\n        \x3cselect aria-label\x3d"${nls.orientationLabel}" style\x3d"width: 100px" class\x3d"controlSpace noResize"\r\n          data-dojo-type\x3d"jimu/dijit/formSelect" id\x3d"angleUnitDD" data-dojo-attach-point\x3d"angleUnitDD"\x3e\r\n          \x3coption value\x3d"degrees"\x3e${nls.degreesLabel}\x3c/option\x3e\r\n          \x3coption value\x3d"mils"\x3e${nls.milsLabel}\x3c/option\x3e\r\n        \x3c/select\x3e\r\n      \x3c/div\x3e\r\n    \x3c/div\x3e\r\n    \x3cdiv class\x3d"controlGroup"\x3e\r\n      \x3clabel class\x3d"warning"\x3e${nls.warningMessage}\x3c/label\x3e\r\n    \x3c/div\x3e\r\n    \x3cdiv class\x3d"buttonContainer"\x3e\r\n      \x3cdiv class\x3d\'jimu-btn jimu-state-disabled\' data-dojo-attach-point\x3d\'okButton\' style\x3d"width: 49%;"\r\n        data-dojo-attach-event\x3d"onclick: okButtonClicked" aria-label\x3d"${nls.common.ok}" role\x3d"button"\x3e${nls.common.ok}\r\n      \x3c/div\x3e\r\n      \x3cdiv class\x3d\'jimu-btn\' tabindex\x3d"0" role\x3d"button" aria-label\x3d"${nls.clearGraphicsLabel}" style\x3d"width: 49%;"\r\n        data-dojo-attach-point\x3d\'clearGraphicsButton\'\x3e${nls.clearGraphicsLabel}\x3c/div\x3e\r\n    \x3c/div\x3e\r\n  \x3c/div\x3e\r\n\x3c/div\x3e',
"url:widgets/DistanceAndDirection/templates/TabRange.html":'\x3cdiv class\x3d"tabPanel" data-dojo-attach-point\x3d"rangeContainer"\x3e\r\n  \x3cdiv class\x3d"controls"\x3e\r\n    \x3cdiv class\x3d"controlGroup"\x3e\r\n      \x3clabel\x3e${nls.lineTypeLabel}\x3c/label\x3e\r\n      \x3cdiv class\x3d"controlItem"\x3e\r\n        \x3cselect aria-label\x3d"${nls.lineTypeLabel}" data-dojo-attach-point\x3d"rangeType" style\x3d"width: 100%;"\r\n          data-dojo-type\x3d"jimu/dijit/formSelect" class\x3d"esriCTDropdownObj"\x3e\r\n          \x3coption selected\x3d"selected" value\x3d"Interactive"\x3e${nls.interactiveLabel}\x3c/option\x3e\r\n          \x3coption value\x3d"Fixed"\x3e${nls.fixedLabel}\x3c/option\x3e\r\n          \x3coption value\x3d"Origin"\x3e${nls.originLabel}\x3c/option\x3e\r\n          \x3coption value\x3d"Cumulative"\x3e${nls.cumulativeLabel}\x3c/option\x3e\r\n        \x3c/select\x3e\r\n      \x3c/div\x3e\r\n    \x3c/div\x3e\r\n    \x3cdiv class\x3d"controlGroup"\x3e\r\n      \x3clabel data-dojo-attach-point\x3d\'rangeCenterLabel\'\x3e${nls.centerPointLabel}\x3c/label\x3e\r\n      \x3cdiv class\x3d"controlItem"\x3e\r\n        \x3cdiv class\x3d"jimu-input coordInput" placeholder\x3d"${nls.startPointPlaceHolderLabel}"\r\n          data-dojo-attach-point\x3d"rangeCenter"\x3e\r\n        \x3c/div\x3e\r\n        \x3cdiv class\x3d"controlItem paddedLeft"\x3e\r\n          \x3cdiv class\x3d\'add-with-icon\'\x3e\r\n            \x3cspan title\x3d"${nls.formatInputLabel}" class\x3d"jimu-icon settingBtn safariOnly"\r\n              data-dojo-attach-point\x3d"coordinateFormatButton" tabindex\x3d"0" role\x3d"button"\r\n              aria-label\x3d"${nls.formatInputLabel}"\x3e\x3c/span\x3e\r\n          \x3c/div\x3e\r\n          \x3cdiv class\x3d\'add-with-icon\'\x3e\r\n            \x3cdiv title\x3d"${nls.addPointLabel}" class\x3d"drawPointBtn" data-dojo-attach-point\x3d"addPointBtn" tabindex\x3d"0"\r\n              role\x3d"button" aria-label\x3d"${nls.addPointLabel}"\x3e\x3c/div\x3e\r\n          \x3c/div\x3e\r\n        \x3c/div\x3e\r\n      \x3c/div\x3e\r\n    \x3c/div\x3e\r\n    \x3cdiv class\x3d"controlGroup controlGroupHidden" data-dojo-attach-point\x3d"numRingsContainer"\x3e\r\n      \x3clabel\x3e${nls.numberOfRingsLabel}\x3c/label\x3e\r\n      \x3cdiv class\x3d"controlItem" data-dojo-attach-point\x3d"numRingsDiv"\x3e\r\n        \x3cinput aria-label\x3d"${nls.numberOfRingsLabel}" data-dojo-attach-point\x3d"numRingsInput" type\x3d"text"\r\n          data-dojo-type\x3d"dijit/form/NumberTextBox" name\x3d"numRings" required\x3d"true" , value\x3d"5"\r\n          data-dojo-props\x3d"constraints:{min:1, max: 100, places: 0}" /\x3e\r\n      \x3c/div\x3e\r\n    \x3c/div\x3e\r\n    \x3cdiv class\x3d"controlGroup controlGroupHidden" data-dojo-attach-point\x3d"distancebetweenRingsContainer"\x3e\r\n      \x3clabel\x3e${nls.distanceBetweenRingsLabel}\x3c/label\x3e\r\n      \x3cdiv class\x3d"controlItem" data-dojo-attach-point\x3d"ringIntervalDiv"\x3e\r\n        \x3cinput aria-label\x3d"${nls.distanceBetweenRingsLabel}" style\x3d"width: 100%;"\r\n          data-dojo-type\x3d"dijit/form/NumberTextBox" required\x3d"true" value\x3d"1000"\r\n          data-dojo-props\x3d"constraints:{places: 2}, invalidMessage: \'${nls.ringsDecimalErrorMessage}\'"\r\n          data-dojo-attach-point\x3d"ringIntervalInput" /\x3e\r\n        \x3cselect aria-label\x3d"${nls.distanceBetweenRingsLabel}" data-dojo-attach-point\x3d"ringIntervalUnitsDD"\r\n          style\x3d"width: 100px;" class\x3d"controlSpace noResize" data-dojo-type\x3d"jimu/dijit/formSelect"\x3e\r\n          \x3coption value\x3d"feet"\x3e${nls.units.feet}\x3c/option\x3e\r\n          \x3coption value\x3d"kilometers"\x3e${nls.units.kilometers}\x3c/option\x3e\r\n          \x3coption value\x3d"miles"\x3e${nls.units.miles}\x3c/option\x3e\r\n          \x3coption value\x3d"meters" selected\x3d"selected"\x3e${nls.units.meters}\x3c/option\x3e\r\n          \x3coption value\x3d"nautical-miles"\x3e${nls.units.nauticalMiles}\x3c/option\x3e\r\n          \x3coption value\x3d"yards"\x3e${nls.units.yards}\x3c/option\x3e\r\n        \x3c/select\x3e\r\n      \x3c/div\x3e\r\n    \x3c/div\x3e\r\n    \x3cdiv class\x3d"controlGroup" data-dojo-attach-point\x3d"distanceUnitsContainer"\x3e\r\n      \x3clabel\x3e${nls.distanceUnitsLabel}\x3c/label\x3e\r\n      \x3cdiv class\x3d"controlItem"\x3e\r\n        \x3cselect aria-label\x3d"${nls.distanceUnitsLabel}" data-dojo-attach-point\x3d"distanceUnitsDD" style\x3d"width: 100%;"\r\n          data-dojo-type\x3d"jimu/dijit/formSelect"\x3e\r\n          \x3coption value\x3d"feet"\x3e${nls.units.feet}\x3c/option\x3e\r\n          \x3coption value\x3d"kilometers"\x3e${nls.units.kilometers}\x3c/option\x3e\r\n          \x3coption value\x3d"miles"\x3e${nls.units.miles}\x3c/option\x3e\r\n          \x3coption value\x3d"meters" selected\x3d"selected"\x3e${nls.units.meters}\x3c/option\x3e\r\n          \x3coption value\x3d"nautical-miles"\x3e${nls.units.nauticalMiles}\x3c/option\x3e\r\n          \x3coption value\x3d"yards"\x3e${nls.units.yards}\x3c/option\x3e\r\n        \x3c/select\x3e\r\n      \x3c/div\x3e\r\n    \x3c/div\x3e\r\n    \x3cdiv class\x3d"controlGroup controlGroupHidden" data-dojo-attach-point\x3d"distanceTableContainer"\x3e\r\n      \x3cdiv class\x3d"add-with-icon" data-dojo-attach-point\x3d"btnAddDistance" tabindex\x3d"0" role\x3d"button"\r\n        aria-label\x3d"${nls.distancesLabel}"\x3e\r\n        \x3cspan class\x3d"jimu-icon jimu-icon-add" data-dojo-attach-point\x3d"btnAirframeIcon"\x3e\x3c/span\x3e\r\n        \x3cspan class\x3d"add-label"\x3e${nls.distancesLabel}\x3c/span\x3e\r\n      \x3c/div\x3e\r\n      \x3cdiv data-dojo-attach-point\x3d"distanceTable" style\x3d"width: 100%;"\x3e\x3c/div\x3e\r\n    \x3c/div\x3e\r\n    \x3cdiv class\x3d"controlGroup" data-dojo-attach-point\x3d"numRadialsContainer"\x3e\r\n      \x3clabel\x3e${nls.numberOfRadialsLabel}\x3c/label\x3e\r\n      \x3cdiv class\x3d"controlItem" data-dojo-attach-point\x3d"numRadialsInputDiv"\x3e\r\n        \x3cinput aria-label\x3d"${nls.numberOfRadialsLabel}" data-dojo-type\x3d"dijit/form/NumberTextBox" required\x3d"false"\r\n          value\x3d"3" data-dojo-props\x3d"constraints:{min: 0, max: 360, places: 0}" style\x3d"width: 100%;"\r\n          data-dojo-attach-point\x3d"numRadialsInput" /\x3e\r\n      \x3c/div\x3e\r\n    \x3c/div\x3e\r\n    \x3cdiv class\x3d"buttonContainer" data-dojo-attach-point\x3d"buttonContainer"\x3e\r\n      \x3cdiv class\x3d\'jimu-btn jimu-state-disabled\' data-dojo-attach-point\x3d\'okButton\' style\x3d"width: 49%;"\r\n        data-dojo-attach-event\x3d"onclick: okButtonClicked" aria-label\x3d"${nls.common.ok}" role\x3d"button"\x3e${nls.common.ok}\r\n      \x3c/div\x3e\r\n      \x3cdiv class\x3d\'jimu-btn\' tabindex\x3d"0" role\x3d"button" aria-label\x3d"${nls.clearGraphicsLabel}" style\x3d"width: 49%;"\r\n        data-dojo-attach-point\x3d\'clearGraphicsButton\'\x3e${nls.clearGraphicsLabel}\x3c/div\x3e\r\n    \x3c/div\x3e\r\n  \x3c/div\x3e\r\n\x3c/div\x3e',
"url:widgets/DistanceAndDirection/Widget.html":'\x3cdiv\x3e\r\n  \x3cdiv data-dojo-attach-point\x3d"mainPageNode"\x3e\r\n\r\n    \x3cdiv id\x3d"DDTabContainer" class\x3d"tabsContainer" data-dojo-attach-point\x3d"DDTabContainer"\x3e\x3c/div\x3e\r\n\r\n    \x3cdiv data-dojo-attach-point\x3d"lineTabNode"\x3e\x3c/div\x3e\r\n\r\n    \x3cdiv data-dojo-attach-point\x3d"circleTabNode"\x3e\x3c/div\x3e\r\n\r\n    \x3cdiv data-dojo-attach-point\x3d"ellipseTabNode"\x3e\x3c/div\x3e\r\n\r\n    \x3cdiv data-dojo-attach-point\x3d"rangeTabNode"\x3e\x3c/div\x3e\r\n  \x3c/div\x3e\r\n  \x3c!--------\r\n    Publish\r\n  ----------\x3e\r\n  \x3cdiv class\x3d"DDHidden DDFullHeight" data-dojo-attach-point\x3d"publishPageNode"\x3e\r\n    \x3cdiv class\x3d"DDFullWidth DDSettingHeader"\x3e\r\n      \x3cdiv class\x3d"DDBackButton DDPointer" title\x3d"${nls.common.back}" data-dojo-attach-point\x3d"publishPanelBackButton"\r\n        tabindex\x3d"0" role\x3d"button" aria-label\x3d"${nls.common.back}"\x3e\r\n        \x3cdiv class\x3d"DDItemLeftArrow"\x3e\r\n        \x3c/div\x3e\r\n      \x3c/div\x3e\r\n      \x3cdiv class\x3d"DDTitleDiv DDEllipsis" title\x3d"${nls.publishTitle}"\x3e\r\n        ${nls.publishTitle}\r\n      \x3c/div\x3e\r\n      \x3cdiv class\x3d"DDPanelRow"\x3e\r\n        \x3c!-- DD Layer Name --\x3e\r\n        \x3cdiv class\x3d"DDFullWidth DDSettingRow"\x3e\r\n          \x3cdiv class\x3d"DDInputLabel DDEllipsis" title\x3d"${nls.ddLayerName}"\x3e${nls.ddLayerName}\x3c/div\x3e\r\n          \x3cinput class\x3d"jimu-input textInput DDHidden" style\x3d"width: 100%;"\r\n            data-dojo-type\x3d"dijit/form/ValidationTextBox" data-dojo-attach-point\x3d"addDDNameArea"\r\n            data-dojo-props\x3d"regExp:\'[a-zA-Z0-9_ -]*\', missingMessage:\'${nls.missingDDLayerName}\'" required\x3d"true"\r\n            aria-label\x3d"${nls.ddLayerName}"\x3e\x3c/input\x3e\r\n          \x3cselect class\x3d"SelectStyle" aria-label\x3d"${nls.ddLayerName}" data-dojo-type\x3d"jimu/dijit/formSelect"\r\n            tabindex\x3d"0" data-dojo-attach-point\x3d"featureLayerList"\x3e\x3c/select\x3e\r\n        \x3c/div\x3e\r\n\r\n        \x3c!-- Publish to new layer --\x3e\r\n        \x3cdiv class\x3d"DDFullWidth DDSettingRow"\x3e\r\n          \x3cdiv class\x3d"DDCheckBoxNode" data-dojo-attach-point\x3d"checkBoxParentContainer"\x3e\x3c/div\x3e\r\n        \x3c/div\x3e\r\n        \x3c!-- Publish DD Button --\x3e\r\n        \x3cdiv class\x3d"ddBtnContainer"\x3e\r\n          \x3cdiv class\x3d\'jimu-btn\' data-dojo-attach-point\x3d\'ddPublishButton\' tabindex\x3d"0" role\x3d"button"\r\n            aria-label\x3d"${nls.publishDDBtn}"\x3e${nls.publishDDBtn}\x3c/div\x3e\r\n        \x3c/div\x3e\r\n        \x3c!-- Publishing Message --\x3e\r\n        \x3cdiv class\x3d"ddPublishMessage" data-dojo-attach-point\x3d"publishMessage"\x3e\x3c/div\x3e\r\n      \x3c/div\x3e\r\n    \x3c/div\x3e\r\n  \x3c/div\x3e\r\n\r\n\x3c/div\x3e',
"url:widgets/DistanceAndDirection/css/style.css":'.jimu-widget-DistanceAndDirection .jimu-state-active {background-color: #c0c0c0 !important;}.jimu-widget-DistanceAndDirection .tabsContainer {border: 1px solid #838383;}.jimu-widget-DistanceAndDirection .selectInput {width: 119px;}.jimu-widget-DistanceAndDirection .coordInput {width: 225px; height: 32px;}.jimu-widget-DistanceAndDirection .dijitTitlePaneContentOuter {background-color: transparent;}.jimu-widget-DistanceAndDirection .dijitTextBox .dijitInputInner {height: 20px; text-align: left;}.jimu-widget-DistanceAndDirection .dijitTextBox {width: 100%;}.jimu-widget-DistanceAndDirection .tabPanel fieldset {border: 1px solid #ccc; padding: 6px; margin-top: 10px;}.jimu-widget-DistanceAndDirection .tabPanel fieldset\x3ediv {margin: 3px;}.jimu-widget-DistanceAndDirection .tabPanel fieldset\x3ediv\x3elabel {width: 50px; display: inline-block;}.jimu-widget-DistanceAndDirection .controls {display: inline-block; width: 100%; padding: 0 5px;}.jimu-widget-DistanceAndDirection .ddBtnContainer {width: 100%; text-align: center; padding: 10px 0px 10px 0px;}.jimu-widget-DistanceAndDirection .controlItem {display: flex;}.jimu-widget-DistanceAndDirection .controlGroup {margin-top: 13px; margin-bottom: 13px;}.jimu-widget-DistanceAndDirection .DDHidden {display: none;}.jimu-widget-DistanceAndDirection .controlGroup .warning {color: #f00; font-weight: bold; width: 100%; display: inline-block;}.jimu-widget-DistanceAndDirection .controlGroup .controlGroupChild {margin-top: 6px;}.jimu-widget-DistanceAndDirection .controlGroup .splitRight {position: absolute; right: 25px;}.jimu-widget-DistanceAndDirection .controlGroup\x3elabel {width: 100px;}.jimu-widget-DistanceAndDirection .controlSpace {margin-left: 6px;}.jimu-widget-DistanceAndDirection .noResize .dijitSelectLabel,.jimu-widget-DistanceAndDirection .noResize .dijitTextBox .dijitInputInner,.jimu-widget-DistanceAndDirection .noResize.dijitValidationTextBox .dijitValidationContainer {text-overflow: ellipsis; overflow: hidden; width: 58px; text-align: left;}.jimu-widget-DistanceAndDirection .dijitSelectLabel {overflow: hidden; white-space: nowrap; text-overflow: ellipsis; width: 288px; text-align: left;}.jimu-widget-DistanceAndDirection .label {font-size: 12px; margin: auto 5px; cursor: default;}.jimu-widget-DistanceAndDirection .numberTextBox {width: 98%; height: 25px; margin-bottom: 2px; border: none;}.jimu-widget-DistanceAndDirection .add-with-icon {display: inline-block; height: 32px; color: #838383; padding-right: 5px;}.jimu-widget-DistanceAndDirection .drawPointBtn {background: url(./images/draw_black.png); background-repeat: no-repeat; background-color: transparent; width: 12px; height: 16px; margin-top: 2px; margin-left: 2px;}.jimu-widget-DistanceAndDirection .drawPointBtn:hover {background: url(./images/draw_black_hover.png); background-repeat: no-repeat; background-color: transparent;}.jimu-widget-DistanceAndDirection .drawPointBtn-active {background: url(./images/draw_black_hover.png); background-repeat: no-repeat; background-color: transparent;}.jimu-widget-DistanceAndDirection .settingBtn {background: url(./images/settings_black.png); background-repeat: no-repeat; background-color: transparent; width: 15px; height: 15px; margin-left: 2px; margin-top: 2px;}.jimu-widget-DistanceAndDirection .InputLabel {float: left; line-height: 28px; padding: 5px 0px 0px 0px; width: 100%;}.jimu-widget-DistanceAndDirection .DDCheckBoxNode {padding-top: 10px;}@media screen and (min-color-index: 0) and (-webkit-min-device-pixel-ratio: 0) {@media {.jimu-widget-DistanceAndDirection .settingBtn .safariOnly {margin-bottom: 15px;}}}@media not all and (min-resolution: 0.001dpcm) {@supports (-webkit-appearance: none) and (stroke-color: transparent) {.jimu-widget-DistanceAndDirection .settingBtn .safariOnly {margin-bottom: 15px;}}}.jimu-widget-DistanceAndDirection .settingBtn:hover {background: url("./images/settings_black_hover.png");}.jimu-widget-DistanceAndDirection .add-with-icon .draw .hidden {display: none;}.jimu-widget-DistanceAndDirection .jimu-tab3 .tab-item-td {border-bottom: 0px; width: 24%;}.jimu-widget-DistanceAndDirection .jimu-tab3 .tab-item-td.jimu-state-active {border: 1px solid #24b5cc; background-color: transparent !important;}.jimu-widget-DistanceAndDirection .controlItem .paddedLeft {padding: 5px 0px 0px 7px;}.jimu-widget-DistanceAndDirection .disabledLabel {color: #c0c0c0 !important;}.jimu-widget-DistanceAndDirection .jimu-simple-table .head-section {background-color: rgba(255, 255, 255, 0.1); border: 1px solid #eef2f5;}.jimu-widget-DistanceAndDirection .jimu-simple-table .simple-table-title {color: #000;}.DartTheme .jimu-widget-DistanceAndDirection .dijitSelectDisabled,.DartTheme .jimu-widget-DistanceAndDirection .dijitTextBoxDisabled,.DartTheme .jimu-widget-DistanceAndDirection .dijitTextBoxDisabled .dijitInputContainer,.DartTheme .jimu-widget-DistanceAndDirection .dijitTextBoxDisabled {background-color: #4c4c4c;}.DartTheme .jimu-widget-DistanceAndDirection .jimu-state-active {background-color: #3c2d2d !important;}.DartTheme .jimu-widget-DistanceAndDirection .dijitTitlePaneTitleOpen,.DartTheme .jimu-widget-DistanceAndDirection .dijitTitlePaneTitleFixedOpen {background-color: #272727;}.DartTheme .jimu-widget-DistanceAndDirection .dijitTitlePaneTitle {background-color: #272727; background-image: linear-gradient(rgb(103, 103, 103) 0%, rgba(255, 255, 255, 0) 100%);}.DartTheme .jimu-widget-DistanceAndDirection .controlGroup .warning {font-weight: normal;}.DartTheme .jimu-widget-DistanceAndDirection .jimu-tab3 .tab-item-td.jimu-state-active {font-weight: normal;}.DartTheme .jimu-widget-DistanceAndDirection .disabledLabel {color: #c0c0c0 !important;}.claro .dartThemeClaroDijitTooltipContainerOverride .dijitTooltipContainer {background-color: #4c4c4c; background-image: -webkit-linear-gradient(bottom, rgb(76, 76, 76) 0px, #4c4c4c 10px); border: 1px solid #ffffff; color: #ffffff;}.claro .dartThemeClaroDijitTooltipContainerOverride .jimu-widget-subtitle {color: #ffffff;}.claro .dartThemeClaroDijitTooltipContainerOverride .dijitTooltipConnector {background-image: url("./images/tooltip.png");}.claro .dartThemeClaroDijitTooltipContainerOverride .dijitDialogPaneContent {background-color: #222; border: 0px solid #9a9a9a; color: #fff;}.btnContainer {text-align: right; margin-top: 6px;}.jimu-rtl .btnContainer {text-align: left;}.settingsContainer {margin-top: 6px;}.controlContainer {margin-top: 6px;}.DartTheme .jimu-widget-DistanceAndDirection .drawPointBtn {background: url("./images/draw_white.png"); background-repeat: no-repeat; background-color: transparent; width: 12px; height: 16px;}.DartTheme .jimu-widget-DistanceAndDirection .drawPointBtn:hover {background: url("./images/draw_white_hover.png"); background-repeat: no-repeat; background-color: transparent;}.DartTheme .jimu-widget-DistanceAndDirection .drawPointBtn-active {background: url("./images/draw_white_hover.png"); background-repeat: no-repeat; background-color: transparent;}.DartTheme .jimu-widget-DistanceAndDirection .settingBtn {background: url(./images/settings_white.png); background-repeat: no-repeat; background-color: transparent;}.DartTheme .jimu-widget-DistanceAndDirection .settingBtn:hover {background: url("./images/settings_white_hover.png");}.DartTheme .jimu-widget-DistanceAndDirection .disabledLabel {color: #7b7b7b !important;}.DartTheme .jimu-simple-table .simple-table-row .editable-div,.jimu-simple-table .simple-table-row .normal-text-div {color: #ffffff !important;}.DartTheme .jimu-simple-table .simple-table-row .editable-input {color: #000000 !important; background-color: rgba(255, 255, 255, 0.1);}.jimu-tab\x3e.control\x3e.tab.jimu-state-selected {border-bottom: 1px solid #ccc !important; border-right: 0px solid #fff !important; border-left: 0px solid #fff !important; border-top: 0px solid #fff !important; background-color: transparent !important; font-size: 12px;}.formatInput {width: 200px; height: 40px; opacity: 0.99; background: #ffffff; border: 1px solid #999999; color: #000000; padding: 0 4px 0 4px;}.selectFormat {width: 160px; height: 40px !important; opacity: 0.99; background: #ffffff !important; border: 1px solid #999999 !important; color: #000000; padding: 0 4px 0 4px; margin: 0px 2px 3px 2px;}.selectFormat .dijitSelectLabel {text-overflow: ellipsis; overflow: hidden; width: 100px; text-align: left; padding-top: 8px;}.formatText {font-size: 12px; letter-spacing: 0.39px; line-height: 19px; color: #000000; padding: 0 3px 0 3px;}.jimu-widget-DistanceAndDirection .drawPointBtn:focus {outline: 2px solid #24b5cc !important;}.esriCTDropdownObj:focus {outline: 2px solid #24b5cc !important;}.esriCTCheckboxObj:focus {outline: 2px solid #24b5cc !important;}.esriCTButtonObj:focus {outline: 2px solid #24b5cc !important;}.esriCTInputObj:focus {outline: 2px solid #24b5cc !important;}.jimu-widget-DistanceAndDirection .settingBtn:focus {outline: 2px solid #24b5cc !important;}.jimu-widget-DistanceAndDirection .DDFullHeight {height: 100%;}.jimu-widget-DistanceAndDirection .DDFullWidth {width: 100%;}.jimu-widget-DistanceAndDirection .DDSettingHeader {float: left; height: 30px; border-bottom: 1px solid #464646; padding: 0px 10px;}.jimu-widget-DistanceAndDirection .DDBackButton {overflow: hidden; width: 15px; float: left;}.jimu-widget-DistanceAndDirection .DDTitleDiv {line-height: 10px; font-weight: bold; text-align: center; width: calc(100% - 50px); padding: 5px; display: inline-block;}.jimu-widget-DistanceAndDirection .DDItemLeftArrow {background-image: url(\'./images/left-arrow_black.png\'); float: left; width: 15px; height: 20px; background-repeat: no-repeat; background-position: center center;}.jimu-widget-DistanceAndDirection .DDItemLeftArrow:hover {background-image: url(\'./images/left-arrow_black_hover.png\');}.jimu-widget-DistanceAndDirection .DDEllipsis {overflow: hidden; text-overflow: ellipsis; white-space: nowrap;}.jimu-widget-DistanceAndDirection .DDPublishMessage {float: left; line-height: 16px; padding: 18px 0px 0px 0; font-weight: bold; display: inline-block; word-break: break-all;}.jimu-widget-DistanceAndDirection .DDPointer {cursor: pointer;}.jimu-widget-DistanceAndDirection .DDPanelRow {margin: 10px 10px 10px 10px; display: block;}.jimu-widget-DistanceAndDirection .DDSettingRow {padding-bottom: 6px; padding-top: 6px;}.jimu-widget-DistanceAndDirection .DDInputLabel {float: left; padding: 5px 5px 5px 0px;}.jimu-widget-DistanceAndDirection .SelectStyle {height: 30px; color: #7d7d7d; padding-left: 5px; font-size: 13px; width: 100%; font-family: \'Avenir Medium\'; margin: 0 0 8px 0;}.jimu-widget-DistanceAndDirection .DDToggleLabel {float: left; width: calc(100% - 35px); padding: 5px 5px 0px 0;}.btnContainer {text-align: right; margin-top: 15px;}.jimu-widget-DistanceAndDirection .DDBtnContainer {text-align: right; margin-top: 15px; display: grid;}.jimu-widget-DistanceAndDirection .jimu-btn {margin-bottom: 6px; width: 100%;}.jimu-rtl .jimu-widget-DistanceAndDirection .DDInputLabel {float: right; padding: 7px 5px 0px 0px;}.jimu-rtl .jimu-widget-DistanceAndDirection .DDSettingRow {padding-right: 2px;}.jimu-rtl .jimu-widget-DistanceAndDirection .DDToggleLabel {float: right; padding: 1px 0 0 0;}.jimu-rtl .jimu-widget-DistanceAndDirection .DDBtnContainer {padding-right: 2px;}.jimu-rtl .jimu-widget-DistanceAndDirection .dijitTextBox .dijitInputInner {text-align: right;}',
"*now":function(p){p(['dojo/i18n!*preload*widgets/DistanceAndDirection/nls/Widget*["ar","bs","ca","cs","da","de","en","el","es","et","fi","fr","he","hr","hu","id","it","ja","ko","lt","lv","nb","nl","pl","pt-br","pt-pt","ro","ru","sl","sr","sv","th","tr","zh-cn","uk","vi","zh-hk","zh-tw","ROOT"]'])},"*noref":1}});
define("dojo/_base/declare dojo/_base/array dojo/aspect dojo/query dojo/topic dojo/dom-attr dojo/json dijit/_WidgetsInTemplateMixin dijit/registry jimu/BaseWidget jimu/dijit/TabContainer3 jimu/utils ./views/TabLine ./views/TabCircle ./views/TabEllipse ./views/TabRange dojo/_base/lang dojo/on dojo/dom-class dojo/dom-style dojo/keys jimu/dijit/CheckBox dojo/dom-construct jimu/LayerStructure esri/arcgis/Portal ./js/portal-utils jimu/LayerInfos/LayerInfos esri/dijit/util/busyIndicator esri/graphic esri/layers/FeatureLayer esri/renderers/SimpleRenderer dijit/focus ./js/jquery.easy-autocomplete".split(" "),function(p,
c,g,d,b,k,l,e,h,n,w,f,a,t,y,r,q,m,A,x,u,I,Q,M,N,J,v,B,O,F,K,H){return p([n,e],{baseClass:"jimu-widget-DistanceAndDirection",_lastOpenPanel:"mainPage",_currentOpenPanel:"mainPage",_lineLayerList:[],_polygonLayerList:[],_renderer:null,_addLayerToMap:!0,_typeOfInput:null,_graphicsAdded:[],_curretfieldTypeObj:{},postMixInProperties:function(){this.nls.common={};q.mixin(this.nls.common,window.jimuNls.common)},_reset:function(){this.config.feedback.lineSymbol.showTab&&this.lineTab.clearGraphics();this.config.feedback.circleSymbol.showTab&&
this.circleTab.clearGraphics();this.config.feedback.ellipseSymbol.showTab&&this.ellipseTab.clearGraphics();this.config.feedback.rangeRingSymbol.showTab&&this.rangeTab.clearGraphics();this.map.enableMapNavigation();this._graphicsAdded=[];this._curretfieldTypeObj={}},postCreate:function(){this.openAtStartAysn=!0;this.config.hasOwnProperty("operationalLineLayer")||(this.config.operationalLineLayer={name:""});this.config.hasOwnProperty("operationalPolygonLayer")||(this.config.operationalPolygonLayer=
{name:""});String.prototype.format||(String.prototype.format=function(){var a=arguments;return this.replace(/{(\d+)}/g,function(b,c){return"undefined"!==typeof a[c]?a[c]:b})});p.safeMixin(this.nls,window.jimuNls);this.config.feedback||(this.config.feedback={});this.config.feedback.lineSymbol.showTab&&(this.lineTab=new a({"attr-name":"line",map:this.map,appConfig:this.appConfig,lineSymbol:this.config.feedback.lineSymbol||{type:"esriSLS",style:"esriSLSSolid",color:[255,50,50,255],width:1.25},pointSymbol:this.config.feedback.pointSymbol||
{color:[255,255,255,64],size:12,type:"esriSMS",style:"esriSMSCircle",outline:{color:[0,0,0,255],width:1,type:"esriSLS",style:"esriSLSSolid"}},labelSymbol:this.config.feedback.labelSymbol||{type:"esriTS",color:[0,0,0,255],verticalAlignment:"middle",horizontalAlignment:"center",xoffset:0,yoffset:0,kerning:!0,font:{family:"arial",size:12,style:"normal",weight:"normal",decoration:"none"}},nls:this.nls,domNodeObj:this.domNode},this.lineTabNode));this.config.feedback.circleSymbol.showTab&&(this.circleTab=
new t({"attr-name":"circle",map:this.map,appConfig:this.appConfig,circleSymbol:this.config.feedback.circleSymbol||{type:"esriSFS",style:"esriSFSNull",color:[255,0,0,0],outline:{color:[255,50,50,255],width:1.25,type:"esriSLS",style:"esriSLSSolid"}},pointSymbol:this.config.feedback.pointSymbol||{color:[255,255,255,64],size:12,type:"esriSMS",style:"esriSMSCircle",outline:{color:[0,0,0,255],width:1,type:"esriSLS",style:"esriSLSSolid"}},labelSymbol:this.config.feedback.labelSymbol||{type:"esriTS",color:[0,
0,0,255],verticalAlignment:"middle",horizontalAlignment:"center",xoffset:0,yoffset:0,kerning:!0,font:{family:"arial",size:12,style:"normal",weight:"normal",decoration:"none"}},nls:this.nls,domNodeObj:this.domNode},this.circleTabNode));this.config.feedback.ellipseSymbol.showTab&&(this.ellipseTab=new y({"attr-name":"ellipse",map:this.map,appConfig:this.appConfig,ellipseSymbol:this.config.feedback.ellipseSymbol||{type:"esriSFS",style:"esriSFSNull",color:[255,0,0,125],outline:{color:[255,50,50,255],width:1.25,
type:"esriSLS",style:"esriSLSSolid"}},pointSymbol:this.config.feedback.pointSymbol||{color:[255,255,255,64],size:12,type:"esriSMS",style:"esriSMSCircle",outline:{color:[0,0,0,255],width:1,type:"esriSLS",style:"esriSLSSolid"}},labelSymbol:this.config.feedback.labelSymbol||{type:"esriTS",color:[0,0,0,255],verticalAlignment:"middle",horizontalAlignment:"center",xoffset:0,yoffset:0,kerning:!0,font:{family:"arial",size:12,style:"normal",weight:"normal",decoration:"none"}},nls:this.nls,domNodeObj:this.domNode},
this.ellipseTabNode));this.config.feedback.rangeRingSymbol.showTab&&(this.rangeTab=new r({"attr-name":"range",map:this.map,appConfig:this.appConfig,pointSymbol:this.config.feedback.pointSymbol||{color:[255,255,255,64],size:12,type:"esriSMS",style:"esriSMSCircle",outline:{color:[0,0,0,255],width:1,type:"esriSLS",style:"esriSLSSolid"}},circleSymbol:{type:"esriSFS",style:"esriSFSNull",color:[255,0,0,0],outline:{color:[255,50,50,255],width:1.25,type:"esriSLS",style:"esriSLSSolid"}},lineSymbol:this.config.feedback.rangeRingSymbol||
{type:"esriSLS",style:"esriSLSSolid",color:[255,50,50,255],width:1.25},labelSymbol:this.config.feedback.labelSymbol||{type:"esriTS",color:[0,0,255,255],verticalAlignment:"middle",horizontalAlignment:"center",xoffset:0,yoffset:0,kerning:!0,font:{family:"arial",size:6,style:"normal",weight:"normal",decoration:"none"}},nls:this.nls,domNodeObj:this.domNode},this.RangeTabContainer));var c=[];this.config.feedback.lineSymbol.showTab&&c.push({title:this.nls.tabLineTitle,content:this.lineTab});this.config.feedback.circleSymbol.showTab&&
c.push({title:this.nls.tabCircleTitle,content:this.circleTab});this.config.feedback.ellipseSymbol.showTab&&c.push({title:this.nls.tabEllipseTitle,content:this.ellipseTab});this.config.feedback.rangeRingSymbol.showTab&&c.push({title:this.nls.tabRingsTitle,content:this.rangeTab});this.tab=new w({tabs:c},this.DDTabContainer);c=h.byId("DDTabContainer");g.after(c,"selectTab",q.hitch(this,function(){b.publish("TAB_SWITCHED");this._setAccessibility()}));this._lineLayerList=this._getAllMapLayers("esriGeometryPolyline");
this._polygonLayerList=this._getAllMapLayers("esriGeometryPolygon");this._layerList=this._lineLayerList.concat(this._polygonLayerList);this.setTabTitle(c.domNode);this.config.feedback.lineSymbol.showTab&&this.own(this.lineTab.on("show-publish",q.hitch(this,function(a){this._graphicsAdded=a._graphicsVal;this._typeOfInput="line";this._curretfieldTypeObj={Distance:"esriFieldTypeDouble",Unit:"esriFieldTypeString",Angle:"esriFieldTypeDouble",StartPoint:"esriFieldTypeString",EndPoint:"esriFieldTypeString",
AngleUnit:"esriFieldTypeString"};this._populateSelectList(this.featureLayerList,this._lineLayerList,this.config.operationalLineLayer.name);this._showPanel("publishPage")})));this.config.feedback.circleSymbol.showTab&&this.own(this.circleTab.on("show-publish",q.hitch(this,function(a){this._graphicsAdded=a._graphicsVal;this._typeOfInput="circle";this._curretfieldTypeObj={CenterPoint:"esriFieldTypeString",RadiusDistance:"esriFieldTypeDouble",RadiusUnit:"esriFieldTypeString"};this._populateSelectList(this.featureLayerList,
this._polygonLayerList,this.config.operationalPolygonLayer.name);this._showPanel("publishPage")})));this.config.feedback.ellipseSymbol.showTab&&this.own(this.ellipseTab.on("show-publish",q.hitch(this,function(a){this._graphicsAdded=a._graphicsVal;this._typeOfInput="ellipse";this._curretfieldTypeObj={CenterPoint:"esriFieldTypeString",MajorAxis:"esriFieldTypeDouble",MinorAxis:"esriFieldTypeDouble",Unit:"esriFieldTypeString",Orientation:"esriFieldTypeDouble",OrientationUnit:"esriFieldTypeString"};this._populateSelectList(this.featureLayerList,
this._polygonLayerList,this.config.operationalPolygonLayer.name);this._showPanel("publishPage")})));this.config.feedback.rangeRingSymbol.showTab&&this.own(this.rangeTab.on("show-publish",q.hitch(this,function(a){this._graphicsAdded=a._graphicsVal;this._typeOfInput="ring";this._curretfieldTypeObj={CenterPoint:"esriFieldTypeString",Rings:"esriFieldTypeDouble",Radials:"esriFieldTypeDouble",RadiusDistance:"esriFieldTypeDouble",RadiusUnit:"esriFieldTypeString"};this._populateSelectList(this.featureLayerList,
this._lineLayerList,this.config.operationalLineLayer.name);this._showPanel("publishPage")})));this.publishNewLayer=new I({checked:!1,label:this.nls.publishToNewLayer},Q.create("div",{},this.checkBoxParentContainer));this.addDDNameArea.invalidMessage=this.nls.invalidLayerName;this.addDDNameArea.missingMessage=this.nls.missingDDLayerName;this.own(m(this.featureLayerList,"change",q.hitch(this,function(){this.resize()})))},startup:function(){this.busyIndicator=B.create({target:this.domNode.parentNode.parentNode.parentNode,
backgroundOpacity:0});this._setTheme();this._handleClickEvents();setTimeout(q.hitch(this,function(){this.getParent().domNode.scrollTop=0;this._setAccessibility()}),100)},setTabTitle:function(a){a=d(".tab-item-div",a);c.forEach(a,function(a){k.set(a,"title",a.innerHTML)})},resize:function(){var a=d(".dijitValidationTextBoxLabel",this.featureLayerList.domNode);0<a.length&&x.set(a[0],"width",this.ddPublishButton.clientWidth-44+"px")},onClose:function(){b.publish("DD-WIDGET-CLOSED")},_removeStyleFile:function(a,
b){var c=null,c="js"===b?"src":"css"===b?"href":"none";b=document.getElementsByTagName("js"===b?"script":"css"===b?"link":"none");for(var d=b.length;0<=d;d--)b[d]&&null!==b[d].getAttribute(c)&&-1!==b[d].getAttribute(c).indexOf(a)&&b[d].parentNode.removeChild(b[d])},_setTheme:function(){"DartTheme"===this.appConfig.theme.name?f.loadStyleLink("dartOverrideCSS",this.folderUrl+"css/dartTheme.css",null):this._removeStyleFile(this.folderUrl+"css/dartTheme.css","css");"DashboardTheme"===this.appConfig.theme.name&&
"default"===this.appConfig.theme.styles[0]?f.loadStyleLink("darkDashboardOverrideCSS",this.folderUrl+"css/dashboardTheme.css",null):this._removeStyleFile(this.folderUrl+"css/dashboardTheme.css","css");"LaunchpadTheme"===this.appConfig.theme.name?f.loadStyleLink("launchpadOverrideCSS",this.folderUrl+"css/launchpadTheme.css",null):this._removeStyleFile(this.folderUrl+"css/launchpadTheme.css","css")},_setAccessibility:function(){this._setFocus()},_setFocus:function(){this._setFirstFocusNode();this._setLastFocusNode();
this._focusFirstNodeOfWidgetOrTab();"publishPage"===this._currentOpenPanel&&this._publishPageAccessible()},_publishPageAccessible:function(){f.initFirstFocusNode(this.domNode,this.publishPanelBackButton);H.focus(this.publishPanelBackButton);""===this.publishMessage.innerHTML?f.initLastFocusNode(this.domNode,this.ddPublishButton):f.initLastFocusNode(this.domNode,this.publishMessage)},_setFirstFocusNode:function(){var a=this.tab.getSelectedTitle();switch(a){case this.nls.tabLineTitle:this._setSelectedTabAsFirstFocusNode(a);
break;case this.nls.tabCircleTitle:this._setSelectedTabAsFirstFocusNode(a);break;case this.nls.tabEllipseTitle:this._setSelectedTabAsFirstFocusNode(a);break;case this.nls.tabRingsTitle:this._setSelectedTabAsFirstFocusNode(a)}},_setLastFocusNode:function(){switch(this.tab.getSelectedTitle()){case this.nls.tabLineTitle:this.lineTab.setLastFocusNode();break;case this.nls.tabCircleTitle:this.circleTab.setLastFocusNode();break;case this.nls.tabEllipseTitle:this.ellipseTab.setLastFocusNode();break;case this.nls.tabRingsTitle:this.rangeTab.setLastFocusNode()}},
_focusFirstNodeOfWidgetOrTab:function(){switch(this.tab.getSelectedTitle()){case this.nls.tabLineTitle:f.isAutoFocusFirstNodeWidget(this)&&this.lineTab.focusFirstNodeOfSelectedTab();break;case this.nls.tabCircleTitle:f.isAutoFocusFirstNodeWidget(this)&&this.circleTab.focusFirstNodeOfSelectedTab();break;case this.nls.tabEllipseTitle:f.isAutoFocusFirstNodeWidget(this)&&this.ellipseTab.focusFirstNodeOfSelectedTab();break;case this.nls.tabRingsTitle:f.isAutoFocusFirstNodeWidget(this)&&this.rangeTab.focusFirstNodeOfSelectedTab()}},
_setSelectedTabAsFirstFocusNode:function(a){if(this.tab&&this.tab.controlNode){var b=d(".tab-item-td",this.tab.controlNode);c.forEach(b,q.hitch(this,function(b){b&&b.children&&b.children[0]&&b.children[0].innerHTML===a&&f.initFirstFocusNode(this.domNode,b)}))}},_handleClickEvents:function(){this.own(m(this.publishPanelBackButton,"click",q.hitch(this,this._publishPanelBackButtonClicked)));this.own(m(this.publishPanelBackButton,"keydown",q.hitch(this,function(a){a.keyCode!==u.ENTER&&a.keyCode!==u.SPACE||
this._publishPanelBackButtonClicked()})));this.own(m(this.ddPublishButton,"click",q.hitch(this,this._ddPublishButtonClicked)));this.own(m(this.ddPublishButton,"keydown",q.hitch(this,function(a){a.keyCode!==u.ENTER&&a.keyCode!==u.SPACE||this._ddPublishButtonClicked()})));this.own(m(this.publishNewLayer,"click",q.hitch(this,this._onCheckboxClicked)));this.own(m(this.publishNewLayer,"change",q.hitch(this,this._onCheckboxClicked)));this.own(m(this.publishNewLayer,"keydown",q.hitch(this,function(a){a.keyCode!==
u.ENTER&&a.keyCode!==u.SPACE||this._onCheckboxClicked()})))},_onCheckboxClicked:function(){this.publishNewLayer.checked?(A.add(this.featureLayerList.domNode,"DDHidden"),A.remove(this.addDDNameArea.domNode,"DDHidden"),this.addDDNameArea.reset(),this.addDDNameArea.focus()):(A.add(this.addDDNameArea.domNode,"DDHidden"),A.remove(this.featureLayerList.domNode,"DDHidden"));this._addLayerToMap=this.publishNewLayer.checked},_ddPublishButtonClicked:function(){if(this.publishNewLayer.checked&&!this.addDDNameArea.isValid())this.publishMessage.innerHTML=
this.nls.missingLayerNameMessage;else{var a=this.publishNewLayer.checked?this.addDDNameArea.value:this.featureLayerList.get("value");this.publishMessage.innerHTML="";this._initSaveToPortal(a)}},_isValidDDLayerName:function(a){var b=!1,c=this._findRestrictedChars(a,this.restrictedCharlist+" ");c&&0<c.length?b=!1:this._isLayerNameValid(a)?a&&0<a.length&&(b=!0):b=!1;return b},_findRestrictedChars:function(a,b){var c="",d;if(a&&b)for(d=0;d<b.length;d++){var e=b.charAt(d);-1!==a.indexOf(e)&&(" "===e&&
(e="spaces"),c=0===c.length?e:c+(" "+e))}return c},_isLayerNameValid:function(a){var b=/^\./,c=/^(nul|prn|con|lpt[0-9]|com[0-9])(\.|$)/i;return/^[^\\/:\*\?"<>\|()]+$/.test(a)&&!b.test(a)&&!c.test(a)},getAttributesToSave:function(a){var b={},d=Object.keys(this._curretfieldTypeObj);c.forEach(d,q.hitch(this,function(c){b[c]=a[c]}));return b},_initSaveToPortal:function(a){(new N.Portal(this.appConfig.portalUrl)).signIn().then(q.hitch(this,function(d){var e=d.credential.token,f=d.orgId,g=d.username;if("org_user"===
d.role)this.publishMessage.innerHTML=this.nls.createService.format(this.nls.userRole),this._setFocus();else{var h=this.appConfig.portalUrl+"sharing/content/users/"+g+"/createService";J.isNameAvailable(this.appConfig.portalUrl+"sharing/rest/portals/"+f+"/isServiceNameAvailable",e,a).then(q.hitch(this,function(d){if(d.available)this.busyIndicator.show(),J.createFeatureService(h,e,J.getFeatureServiceParams(a,this.map)).then(q.hitch(this,function(b){if(b.success){var d=b.serviceurl.replace(/rest/g,"rest/admin")+
"/addToDefinition";J.addDefinitionToService(d,e,J.getLayerParams(a,this.map,this.getRenderer(),this.getGeometryTypeAndFields())).then(q.hitch(this,function(d){if(d.success){d=new F(b.serviceurl+"/0?token\x3d"+e,{id:a,outFields:["*"]});d._wabProperties={itemLayerInfo:{portalUrl:this.appConfig.portalUrl,itemId:b.itemId}};this.map.addLayer(d);var f;if(d.loaded)f=v.getInstanceSync().getLayerInfoById(a),f.enablePopup();else d.on("load",q.hitch(this,function(){f=v.getInstanceSync().getLayerInfoById(a);
f.enablePopup()}));var g=[];c.forEach(this._graphicsAdded,function(a){if(void 0!==a.attributes&&!a.attributes.hasOwnProperty("isDirectionalGraphic")){var b=this.getAttributesToSave(a.attributes);g.push(new O(a.geometry,null,b))}},this);d.applyEdits(g,null,null).then(q.hitch(this,function(){this._reset()})).otherwise(q.hitch(this,function(){this._reset()}));this.busyIndicator.hide();this.publishMessage.innerHTML=this.nls.successfullyPublished.format('\x3cbr /\x3e\x3ca role\x3d"link" tabindex\x3d0 aria-label\x3d"'+
this.nls.successfullyPublished+'" href\x3d"'+this.appConfig.portalUrl+"home/item.html?id\x3d"+b.itemId+'" target\x3d"_blank"\x3e')+"\x3c/a\x3e";this._setFocus()}}),q.hitch(this,function(a){this.busyIndicator.hide();this.publishMessage.innerHTML=this.nls.addToDefinition.format(a.message);this._setFocus()}))}else this.busyIndicator.hide(),this.publishMessage.innerHTML=this.nls.unableToCreate.format(a),this._setFocus()}),q.hitch(this,function(a){this.busyIndicator.hide();this.publishMessage.innerHTML=
this.nls.createService.format(a.message);this._setFocus()}));else{var f=null;c.forEach(this._layerList,q.hitch(this,function(b){b._json&&l.parse(b._json).name&&l.parse(b._json).name===a&&(f=b)}));if(f){var g=new F(f.url+"?token\x3d"+e,{id:a,outFields:["*"]});g._wabProperties={itemLayerInfo:{portalUrl:this.appConfig.portalUrl,itemId:f.id}};g.on("load",q.hitch(this,function(a){var d=[];c.forEach(this._graphicsAdded,function(b){if(void 0!==b.attributes&&!b.attributes.hasOwnProperty("isDirectionalGraphic")){var c=
this._matchLayerFields(b.attributes,a.layer._fields);0<Object.keys(c).length?d.push(new O(b.geometry,null,c)):d.push(new O(b.geometry,null,{}))}},this);g.applyEdits(d,null,null).then(q.hitch(this,function(){this._reset()})).otherwise(q.hitch(this,function(){this._reset()}));b.publish("moveMap",!1);var e='\x3cbr /\x3e\x3ca href\x3d"'+this.appConfig.portalUrl+"home/item.html?id\x3d"+l.parse(f._json).serviceItemId+'" target\x3d"_blank"\x3e';this.publishMessage.innerHTML=this.nls.successfullyPublished.format(e)+
"\x3c/a\x3e";this._setFocus()}))}else this.busyIndicator.hide(),this.publishMessage.innerHTML=this.nls.layerNameExists;this._setFocus()}}),q.hitch(this,function(a){this.busyIndicator.hide();this.publishMessage.innerHTML=this.nls.checkService.format(a.message);this._setFocus()}))}}),q.hitch(this,function(a){this.publishMessage.innerHTML=a.message;this._setFocus()}))},getRenderer:function(){var a={type:"simple"};switch(this._typeOfInput){case "line":a.symbol=this.lineTab.lineSymbol;break;case "circle":a.symbol=
this.circleTab.circleSymbol;break;case "ellipse":a.symbol=this.ellipseTab.ellipseSymbol;break;case "ring":a.symbol=this.rangeTab.lineSymbol}return new K(a)},getGeometryTypeAndFields:function(){var a={};switch(this._typeOfInput){case "line":return a.type="esriGeometryPolyline",a.fields=[{name:"OBJECTID",type:"esriFieldTypeOID",actualType:"int",alias:"OBJECTID",sqlType:"sqlTypeOther",nullable:!0,editable:!0,domain:null,defaultValue:null},{name:"StartPoint ",alias:this.nls.startPointLabel,type:"esriFieldTypeString",
nullable:!0,editable:!0,domain:null,defaultValue:null,length:50,actualType:"nvarchar",sqlType:"sqlTypeNVarchar"},{name:"EndPoint",alias:this.nls.endPointLabel,type:"esriFieldTypeString",nullable:!0,editable:!0,domain:null,defaultValue:null,length:50,actualType:"nvarchar",sqlType:"sqlTypeNVarchar"},{name:"Distance",alias:this.nls.distanceLabel,type:"esriFieldTypeDouble",nullable:!0,editable:!0,domain:null,defaultValue:null},{name:"Unit",alias:this.nls.unitLabel,type:"esriFieldTypeString",nullable:!0,
editable:!0,domain:null,defaultValue:null,length:50,actualType:"nvarchar",sqlType:"sqlTypeNVarchar"},{name:"Angle",alias:this.nls.angleLabel,type:"esriFieldTypeDouble",nullable:!0,editable:!0,domain:null,defaultValue:null},{name:"AngleUnit",alias:this.nls.angleUnitLabel,type:"esriFieldTypeString",nullable:!0,editable:!0,domain:null,defaultValue:null,length:50,actualType:"nvarchar",sqlType:"sqlTypeNVarchar"}],a;case "circle":return a.type="esriGeometryPolygon",a.fields=[{name:"OBJECTID",type:"esriFieldTypeOID",
actualType:"int",alias:"OBJECTID",sqlType:"sqlTypeOther",nullable:!0,editable:!0,domain:null,defaultValue:null},{name:"CenterPoint",alias:this.nls.centerPointLabel,type:"esriFieldTypeString",nullable:!0,editable:!0,domain:null,defaultValue:null,length:50,actualType:"nvarchar",sqlType:"sqlTypeNVarchar"},{name:"RadiusDistance",alias:this.nls.radiusDistance,type:"esriFieldTypeDouble",nullable:!0,editable:!0,domain:null,defaultValue:null},{name:"RadiusUnit",alias:this.nls.radiusUnit,type:"esriFieldTypeString",
nullable:!0,editable:!0,domain:null,defaultValue:null,length:50,actualType:"nvarchar",sqlType:"sqlTypeNVarchar"}],a;case "ellipse":return a.type="esriGeometryPolygon",a.fields=[{name:"OBJECTID",type:"esriFieldTypeOID",actualType:"int",alias:"OBJECTID",sqlType:"sqlTypeOther",nullable:!0,editable:!0,domain:null,defaultValue:null},{name:"CenterPoint",alias:this.nls.centerPointLabel,type:"esriFieldTypeString",nullable:!0,editable:!0,domain:null,defaultValue:null,length:50,actualType:"nvarchar",sqlType:"sqlTypeNVarchar"},
{name:"MajorAxis",alias:this.nls.ellipseMajorAxis,type:"esriFieldTypeDouble",nullable:!0,editable:!0,domain:null,defaultValue:null},{name:"MinorAxis",alias:this.nls.ellipseMinorAxis,type:"esriFieldTypeDouble",nullable:!0,editable:!0,domain:null,defaultValue:null},{name:"Unit",alias:this.nls.unitLabel,type:"esriFieldTypeString",nullable:!0,editable:!0,domain:null,defaultValue:null,length:50,actualType:"nvarchar",sqlType:"sqlTypeNVarchar"},{name:"Orientation",alias:this.nls.orientationLabel,type:"esriFieldTypeDouble",
nullable:!0,editable:!0,domain:null,defaultValue:null},{name:"OrientationUnit",alias:this.nls.orientationUnit,type:"esriFieldTypeString",nullable:!0,editable:!0,domain:null,defaultValue:null,length:50,actualType:"nvarchar",sqlType:"sqlTypeNVarchar"}],a;case "ring":return a.type="esriGeometryPolyline",a.fields=[{name:"OBJECTID",type:"esriFieldTypeOID",actualType:"int",alias:"OBJECTID",sqlType:"sqlTypeOther",nullable:!0,editable:!0,domain:null,defaultValue:null},{name:"CenterPoint",alias:this.nls.centerPointLabel,
type:"esriFieldTypeString",nullable:!0,editable:!0,domain:null,defaultValue:null,length:50,actualType:"nvarchar",sqlType:"sqlTypeNVarchar"},{name:"Rings",alias:this.nls.rings,type:"esriFieldTypeDouble",nullable:!0,editable:!0,domain:null,defaultValue:null},{name:"Radials",alias:this.nls.radials,type:"esriFieldTypeDouble",nullable:!0,editable:!0,domain:null,defaultValue:null},{name:"RadiusDistance",alias:this.nls.radiusDistance,type:"esriFieldTypeDouble",nullable:!0,editable:!0,domain:null,defaultValue:null},
{name:"RadiusUnit",alias:"RadiusUnit",type:"esriFieldTypeString",nullable:!0,editable:!0,domain:null,defaultValue:null,length:50,actualType:"nvarchar",sqlType:"sqlTypeNVarchar"}],a}},_publishPanelBackButtonClicked:function(){this.publishMessage.innerHTML="";this.addDDNameArea.setValue("");this.addDDNameArea.reset();this._showPanel(this._lastOpenPanel)},_showPanel:function(a){var b;this._currentOpenPanel&&(b=this._getNodeByName(this._currentOpenPanel),A.add(b,"DDHidden"));b=this._getNodeByName(a);
A.remove(b,"DDHidden");this._lastOpenPanel=this._currentOpenPanel;this._currentOpenPanel=a;this._setAccessibility();"publishPage"!==a||this.isOnScreen||this.resize()},_getNodeByName:function(a){var b;switch(a){case "mainPage":b=this.mainPageNode;break;case "publishPage":b=this.publishPageNode}return b},_getAllMapLayers:function(a){var b=[];M.getInstance().traversal(function(c){"undefined"!==typeof c._layerInfo.layerObject.type&&-1===c._layerInfo.layerObject.type.indexOf("tile")&&c._layerInfo.layerObject.geometryType===
a&&b.push(c._layerInfo.layerObject)});return b},_matchLayerFields:function(a,b){var d={},e=Object.keys(this._curretfieldTypeObj);c.forEach(b,q.hitch(this,function(b){c.forEach(e,q.hitch(this,function(c){b.name.toLowerCase()!==c.toLowerCase()||b.type!==this._curretfieldTypeObj[c]&&"esriFieldTypeString"!==b.type||(c=a[c],void 0!==c&&null!==c&&"esriFieldTypeString"===b.type&&50>=b.length&&(c=c.toString().substr(0,b.length)),d[b.name]=c)}))}));return d},_populateSelectList:function(a,b,d){a.options=[];
c.forEach(b,q.hitch(this,function(b){b.url&&"Feature Layer"===b.type&&b.capabilities.includes("Create,Delete,Query,Update,Editing")&&a.addOption({value:l.parse(b._json).name,id:b.id,label:f.sanitizeHTML(b.name),selected:!1})}));""!==d&&a.set("displayedValue",d);b=this.tab.getSelectedTitle();this.publishNewLayer.setValue(!1);b!==this.nls.tabLineTitle&&b!==this.nls.tabRingsTitle||""!==this.config.operationalLineLayer.name||this.publishNewLayer.setValue(!0);b!==this.nls.tabCircleTitle&&b!==this.nls.tabEllipseTitle||
""!==this.config.operationalPolygonLayer.name||this.publishNewLayer.setValue(!0)}})});