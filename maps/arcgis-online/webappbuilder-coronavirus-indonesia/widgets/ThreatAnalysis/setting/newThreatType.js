// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See http://js.arcgis.com/3.15/esri/copyright.txt and http://www.arcgis.com/apps/webappbuilder/copyright.txt for details.
//>>built
require({cache:{"url:widgets/ThreatAnalysis/setting/newThreatType.html":'\x3cdiv\x3e\r\n\r\n  \x3cdiv class\x3d"esriCTWrapper"\x3e\r\n    \x3cdiv class\x3d"esriCTDeafultIconWrapper"\x3e\r\n      \x3cspan class\x3d"esriCTDefaultLabel"\x3e${nls.chooseDefaultThreatTypeIconLabel}\x3c/span\x3e\r\n      \x3cdiv class\x3d"esriCTDefaultIcon" data-dojo-attach-point\x3d"defaultThreatTypeIcon"\r\n        title\x3d"${nls.defaultThreatTypeIconTooltip}"\x3e\x3c/div\x3e\r\n    \x3c/div\x3e\r\n  \x3c/div\x3e\r\n\r\n  \x3cdiv class\x3d"esriCTWrapper"\x3e\r\n    \x3cdiv class\x3d"esriCTLabel"\x3e${nls.threatTypeColLabel}\x3c/div\x3e\r\n    \x3cdiv class\x3d"esriCTDijitControl"\x3e\r\n      \x3cdiv class\x3d"esriCTDijitWrapper"\x3e\r\n        \x3cdiv class\x3d"esriCTDijitWrapper" data-dojo-attach-point\x3d"threatTypeTextBox"\r\n          data-dojo-type\x3d"dijit/form/ValidationTextBox" trim\x3d"true" required\x3d"true"\x3e\r\n        \x3c/div\x3e\r\n      \x3c/div\x3e\r\n    \x3c/div\x3e\r\n  \x3c/div\x3e\r\n\r\n  \x3cdiv class\x3d"esriCTWrapper"\x3e\r\n    \x3cdiv class\x3d"esriCTLabel"\x3e${nls.mandatoryDistance}\x3c/div\x3e\r\n    \x3cdiv class\x3d"esriCTDijitControl"\x3e\r\n      \x3cdiv class\x3d"esriCTDijitWrapper"\x3e\r\n        \x3cdiv class\x3d"esriCTDijitWrapper" data-dojo-attach-point\x3d"mandatoryEvacuationDistance"\r\n          data-dojo-type\x3d"dijit/form/NumberTextBox" data-dojo-props\x3d"constraints:{min: 0.01}" required\x3d"true"\x3e\r\n        \x3c/div\x3e\r\n      \x3c/div\x3e\r\n    \x3c/div\x3e\r\n  \x3c/div\x3e\r\n\r\n  \x3cdiv class\x3d"esriCTWrapper"\x3e\r\n    \x3cdiv class\x3d"esriCTLabel"\x3e${nls.safeDistance}\x3c/div\x3e\r\n    \x3cdiv class\x3d"esriCTDijitControl"\x3e\r\n      \x3cdiv class\x3d"esriCTDijitWrapper"\x3e\r\n        \x3cdiv class\x3d"esriCTDijitWrapper" data-dojo-attach-point\x3d"safeEvacuationDistance"\r\n          data-dojo-type\x3d"dijit/form/NumberTextBox" data-dojo-props\x3d"constraints:{min: 0.01}" required\x3d"true"\x3e\r\n        \x3c/div\x3e\r\n      \x3c/div\x3e\r\n    \x3c/div\x3e\r\n  \x3c/div\x3e\r\n\r\n  \x3cdiv class\x3d"esriCTWrapper"\x3e\r\n    \x3cdiv class\x3d"esriCTLabel"\x3e${nls.units}\x3c/div\x3e\r\n    \x3cdiv class\x3d"esriCTDijitControl"\x3e\r\n      \x3cdiv class\x3d"esriCTDijitWrapper" data-dojo-attach-point\x3d"unitType" data-dojo-props\x3d"trim:true, propercase:true"\r\n        data-dojo-type\x3d"dijit/form/TextBox" disabled\x3e\r\n      \x3c/div\x3e\r\n    \x3c/div\x3e\r\n  \x3c/div\x3e\r\n  \x3cdiv data-dojo-attach-point\x3d"newThreatTypeDiv"\x3e\x3c/div\x3e\r\n\x3c/div\x3e'}});
define("dojo/_base/declare dijit/_WidgetBase dijit/_TemplatedMixin dijit/_WidgetsInTemplateMixin dojo/text!./newThreatType.html dojo/_base/lang jimu/dijit/Popup dojo/Evented dojo/number ./defaultThreatTypes dojo/on dojo/_base/array dijit/form/ValidationTextBox dijit/form/TextBox".split(" "),function(e,f,g,h,k,b,l,m,c,n,d,p){return e([f,g,h,m],{templateString:k,baseClass:"jimu-widget-threatAnalysis-newThreatTypePopup",prevThreatType:null,selectedThreatType:null,constructor:function(){},postCreate:function(){this.threatTypeTable&&
this.currentRowData.threatType&&(this.prevThreatType=this.currentRow.threatType,this.threatTypeTextBox.set("value",this.currentRowData.threatType),this.mandatoryEvacuationDistance.set("value",this.currentRowData.mandatoryDistance),this.safeEvacuationDistance.set("value",this.currentRowData.safeDistance));this.unitType.set("value","feet"===this.selectedUnitType.toLowerCase()?this.nls.feet:this.nls.meters);this._threatTypeTextBoxValidator();this._createPopUp();this._handleClickEvents()},_handleClickEvents:function(){this.own(d(this.defaultThreatTypeIcon,
"click",b.hitch(this,function(){this.defaultThreatTypeObj=new n({nls:this.nls,unitType:this.selectedUnitType});this.own(d(this.defaultThreatTypeObj,"selectedDefaultThreat",b.hitch(this,function(a){var b;this.threatTypeTextBox.set("value",a.displayedValue);b=a.Unit.toLowerCase()===this.selectedUnitType.toLowerCase()?a.Bldg_Dist:.3048*a.Bldg_Dist;this.mandatoryEvacuationDistance.set("value",c.format(b,{places:2}));b=a.Unit.toLowerCase()===this.selectedUnitType.toLowerCase()?a.Outdoor_Dist:.3048*a.Outdoor_Dist;
this.safeEvacuationDistance.set("value",c.format(b,{places:2}));this.selectedThreatType=a.Threat})))})))},_createPopUp:function(){this.newThreatTypePopup=new l({titleLabel:this.isAddThreat?this.nls.newThreatTypePopupLabel:this.nls.editThreatLabel,width:600,maxHeight:300,autoHeight:!0,"class":this.baseClass,content:this,buttons:[{label:this.nls.ok,onClick:b.hitch(this,function(){if(this.threatTypeTextBox.isValid())if(this.mandatoryEvacuationDistance.isValid())if(this.safeEvacuationDistance.isValid()){if(this.currentRow&&
this.threatTypeTable){var a={threatType:this.threatTypeTextBox.value,mandatoryDistance:c.format(this.mandatoryEvacuationDistance.get("value"),{places:2}),safeDistance:c.format(this.safeEvacuationDistance.get("value"),{places:2}),unit:this.unitType.value};this.currentRow.threatType=this.threatTypeTextBox.value;this.currentRow.mandatoryDistance=c.format(this.mandatoryEvacuationDistance.get("value"),{places:2});this.currentRow.safeDistance=c.format(this.safeEvacuationDistance.get("value"),{places:2});
this.currentRow.unit=this.selectedUnitType;this.threatTypeTable.editRow(this.currentRow,a)}else this.emit("addNewThreat",{Threat:this.threatTypeTextBox.value,Bldg_Dist:this.mandatoryEvacuationDistance.get("value"),Outdoor_Dist:this.safeEvacuationDistance.get("value"),Unit:this.unitType.value});this.newThreatTypePopup.close()}else this.safeEvacuationDistance.focus();else this.mandatoryEvacuationDistance.focus();else this.threatTypeTextBox.focus()})},{label:this.nls.cancel,classNames:["jimu-btn-vacation"],
onClick:b.hitch(this,function(){this.newThreatTypePopup.close()})}]})},_isDuplicateThreatTypeName:function(a,c){var d=!1;p.some(c,b.hitch(this,function(b){if(a.toLowerCase()===b.toLowerCase())return d=!0}));return d},_threatTypeTextBoxValidator:function(){this.threatTypeTextBox.validator=b.hitch(this,function(a){return a?a!==this.prevThreatType&&this._isDuplicateThreatTypeName(a,this.existingThreatNames)?(this.threatTypeTextBox.set("invalidMessage",this.nls.uniqueThreatTypeMsg),!1):!0:(this.threatTypeTextBox.set("invalidMessage",
this.nls.requiredThreatTypeMsg),!1)})}})});