// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See http://js.arcgis.com/3.15/esri/copyright.txt and http://www.arcgis.com/apps/webappbuilder/copyright.txt for details.
//>>built
define(["dojo/_base/lang","dojo/Deferred","esri/geometry/webMercatorUtils","esri/SpatialReference"],function(k,g,h,l){var f={getProjectedGeometry:function(b,a,d){var c,e;c=new g;h.canProject(b,a)?(e=h.project(b,a),c.resolve(e)):d.project([b],a,function(a){e=a[0];c.resolve(e)});return c.promise},getMapCoordinates:function(b){var a;switch(b.type){case "polygon":a=b.getCentroid();break;case "polyline":a=b.getPoint(0,0);break;case "point":a=b}return a},getCoordinatesData:function(b,a){var d,c={},e;d=
new g;e=new l(4326);c.MapSpatialReference=f.getMapCoordinates(b);f.getProjectedGeometry(c.MapSpatialReference,e,a).then(k.hitch(this,function(b){c.LatLong=b;this._getMGRSCoordinatesData(d,c,a)}));return d.promise},_getMGRSCoordinatesData:function(b,a,d){d.toGeoCoordinateString({conversionMode:"mgrsDefault",numOfDigits:5,sr:4326,coordinates:[[a.LatLong.x,a.LatLong.y]],conversionType:"MGRS",numOfDigits:5,rounding:!0,addSpaces:!1}).then(function(c){a.MGRS={MGRS:c[0]};b.resolve(a)})}};return f});