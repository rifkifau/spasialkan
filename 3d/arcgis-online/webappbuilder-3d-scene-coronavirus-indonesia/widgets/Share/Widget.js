// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See http://js.arcgis.com/3.15/esri/copyright.txt and http://www.arcgis.com/apps/webappbuilder/copyright.txt for details.
//>>built
require({cache:{"jimu/shareUtils":function(){define("dojo/_base/lang esri/request dojo/promise/all jimu/shared/basePortalUrlUtils dojo/Deferred jimu/portalUtils jimu/utils esri/core/urlUtils".split(" "),function(l,r,m,k,e,b,g,h){var c={getBaseHrefUrl:function(a){var d="";window.isXT?d=window.location.protocol+"//"+window.location.host+window.appInfo.appPath:(d=g.urlToObject(window.location.href).query||{},d=d.appid?a+"apps/webappviewer3d/index.html?appid\x3d"+d.appid:d.id?a+"apps/webappviewer3d/index.html?id\x3d"+
d.id:g.getAppHref());return d},addQueryParamToUrl:function(a,d,c,e){a=h.urlToObject(a);a.query||(a.query={});a.query[d]=c;d=a.path;for(var q in a.query)c=a.query[q],!0===e&&(c=encodeURIComponent(c)),d=d===a.path?d+"?"+q+"\x3d"+c:d+"\x26"+q+"\x3d"+c;return d},removeQueryParamFromUrl:function(a,d,c){a=h.urlToObject(a);a.query&&delete a.query[d];d=a.path;for(var e in a.query){var b=a.query[e];!0===c&&(b=encodeURIComponent(b));d=d===a.path?d+"?"+e+"\x3d"+b:d+"\x26"+e+"\x3d"+b}return d},getShareUrlContent:function(a){return"\x3cdiv class\x3d'marker-feature-action-popup'\x3e\x3cdiv class\x3d'item'\x3e\x3cspan class\x3d'sub-title jimu-float-leading'\x3e"+
window.jimuNls.common.url+"\x3c/span\x3e\x3cinput type\x3d'text' class\x3d'jimu-float-leading' readonly\x3d'readonly' value\x3d"+a+"\x3e\x3c/input\x3e\x3c/div\x3e\x3c/div\x3e"},getShareUrl:function(a,d,e){var b=c.getBaseHrefUrl(window.portalUrl),g="",h,v,k,l,m;d&&(d.longitude&&d.latitude?(h=d.longitude,v=d.latitude,g=d.longitude+","+d.latitude+","):d.x&&d.y&&d.spatialReference&&d.spatialReference.wkid&&(k=d.x,l=d.y,m=d.spatialReference.wkid,g=d.x+","+d.y+","+d.spatialReference.wkid));b=c.addQueryParamToUrl(b,
"marker",g,!0);b=c.addQueryParamToUrl(b+",,,","markertemplate",encodeURIComponent(JSON.stringify({title:d.title,x:k,y:l,wkid:m,longitude:h,latitude:v,isIncludeShareUrl:e})));d=a.getLevel();return b="number"===typeof d&&-1!==d?c.addQueryParamToUrl(b,"level",a.getLevel(),!0):c.addQueryParamToUrl(b,"scale",a.getScale(),!0)},getXyContent:function(a){var d="\x3cdiv class\x3d'marker-feature-action-popup'\x3e";a.longitude&&a.latitude?d+="\x3cdiv class\x3d'item clearFix'\x3e\x3cspan class\x3d'sub-title'\x3e"+
window.jimuNls.common.longitude+"\x3c/span\x3e\x3cspan class\x3d'val'\x3e"+g.localizeNumber(parseFloat(a.longitude).toFixed(4))+"\x3c/span\x3e\x3c/div\x3e\x3cdiv class\x3d'item clearFix'\x3e\x3cspan class\x3d'sub-title'\x3e"+window.jimuNls.common.latitude+"\x3c/span\x3e\x3cspan class\x3d'val'\x3e"+g.localizeNumber(parseFloat(a.latitude).toFixed(4))+"\x3c/span\x3e\x3c/div\x3e":a.x&&a.y&&(d+="\x3cdiv class\x3d'item clearFix'\x3e\x3cspan class\x3d'sub-title'\x3ex\x3c/span\x3e\x3cspan class\x3d'val'\x3e"+
g.localizeNumber(parseFloat(a.x).toFixed(4))+"\x3c/span\x3e\x3c/div\x3e\x3cdiv class\x3d'item'\x3e\x3cspan class\x3d'sub-title'\x3ey\x3c/span\x3e\x3cspan class\x3d'val'\x3e"+g.localizeNumber(parseFloat(a.y).toFixed(4))+"\x3c/span\x3e\x3c/div\x3e");return d+"\x3c/div\x3e"},_isUserOwnTheApp:function(a){return a&&a.username&&a.username===window.appInfo.appOwner?!0:!1},getItemByUserAndItemId:function(a,d,c,b){var g=new e;b=k.getStandardPortalUrl(b);b=b+"/sharing/rest/content/users/"+(d?d.username?d.username:
d.email:c.email);if(void 0!==a.folderId&&null!==a.folderId&&"/"!==a.folderId||void 0!==a.ownerFolder&&null!==a.ownerFolder&&"/"!==a.ownerFolder)b+="/"+(a.folderId||a.ownerFolder);b+="/items/"+a.id;r({url:b,handleAs:"json",content:{f:"json"},callbackParamName:"callback"}).then(l.hitch(this,function(a){g.resolve(a)}),l.hitch(this,function(a){console.error(a);g.reject(a)}));return g},_getProfile:function(a,d){var c=new e;a=k.getUserUrl(d,a.owner);r({url:a,handleAs:"json",content:{f:"json"},callbackParamName:"callback"}).then(l.hitch(this,
function(a){c.resolve(a)}),l.hitch(this,function(a){console.error(a);c.reject(a)}));return c},_unshareItemById:function(a,d,c){var b=new e;c=k.getStandardPortalUrl(c);c+="/sharing/rest/content/items/"+d+"/unshare";d={f:"json"};d=l.mixin(d,a);r({url:c,handleAs:"json",content:d,callbackParamName:"callback"},{usePost:!0}).then(l.hitch(this,function(a){b.resolve(a)}),l.hitch(this,function(a){console.error(a);b.reject(a)}));return b},canSharePublic:function(a){return!a.selfUrl||!0!==a.canSharePublic&&
!1!==a.canSharePublic?!0:a.canSharePublic},unshareItemsByUser:function(a,d,c){var b=new e;c=k.getStandardPortalUrl(c);c+="/sharing/rest/content/users/"+a+"/unshareItems";a={f:"json"};a=l.mixin(a,d);r({url:c,handleAs:"json",content:a,callbackParamName:"callback"},{usePost:!0}).then(l.hitch(this,function(a){b.resolve(a)}),l.hitch(this,function(a){console.error(a);b.reject(a)}));return b},unshareItems:function(a,d,c){var b=new e;c=k.getStandardPortalUrl(c);c+="/sharing/rest/content/users/"+(d.owner||
a.email)+"/unshareItems";a={f:"json"};a=l.mixin(a,d);r({url:c,handleAs:"json",content:a,callbackParamName:"callback"},{usePost:!0}).then(l.hitch(this,function(a){b.resolve(a)}),l.hitch(this,function(a){console.error(a);b.reject(a)}));return b},shareItemsByUser:function(a,d,c){var b=new e;c=k.getStandardPortalUrl(c);c+="/sharing/rest/content/users/"+a+"/shareItems";a={f:"json"};a=l.mixin(a,d);r({url:c,handleAs:"json",content:a,callbackParamName:"callback"},{usePost:!0}).then(l.hitch(this,function(a){b.resolve(a)}),
l.hitch(this,function(a){console.error(a);b.reject(a)}));return b},shareItems:function(a,d,c){var b=new e;c=k.getStandardPortalUrl(c);c+="/sharing/rest/content/users/"+(d.owner||a.email)+"/shareItems";a={f:"json"};a=l.mixin(a,d);r({url:c,handleAs:"json",content:a,callbackParamName:"callback"},{usePost:!0}).then(l.hitch(this,function(a){b.resolve(a)}),l.hitch(this,function(a){console.error(a);b.reject(a)}));return b},getItemsGroups:function(a,d){var c=new e;d=k.getStandardPortalUrl(d);d+="/sharing/rest/content/items/"+
a.id+"/groups";r({url:d,handleAs:"json",content:{f:"json"},callbackParamName:"callback"},{usePost:!0}).then(l.hitch(this,function(a){c.resolve(a)}),l.hitch(this,function(a){console.error(a);c.reject(a)}));return c},isSharedToPublic:function(a){return window.isXT?!1:null===a?!0:"undefined"!==typeof a&&"undefined"!==typeof a.item&&"undefined"!==typeof a.item.access&&"public"===a.item.access?!0:!1},isShowSocialMediaLinks:function(a){return window.isXT?!0:null===a?!0:"undefined"!==typeof a&&"undefined"!==
typeof a.item&&"undefined"!==typeof a.item.access&&"private"===a.item.access?!1:!0},getItemShareInfo:function(a){var c=new e,h="";if(window.isXT)return c.resolve(null);h=g.urlToObject(g.getAppHref()).query||{};h=h.id||h.appid;if("undefined"===typeof h||""===h)return c.resolve(null);b.getPortal(a).getItemById(h).then(l.hitch(this,function(a){var d={};d.item=a;d.item&&"undefined"===typeof d.item.sharing&&d.item.access&&(d.item.sharing={access:d.item.access});c.resolve(d)}),l.hitch(this,function(a){console.log(a);
c.resolve(null)}));return c},getShareInfo:function(a){var d=b.getPortal(a),h=new e,k="";if(window.isXT)return h.resolve(null);k=g.urlToObject(g.getAppHref()).query||{};k=k.id||k.appid;if("undefined"===typeof k||""===k)return h.resolve(null);m({getUser:d.getUser(),loadSelfInfo:d.loadSelfInfo(),getItem:d.getItemById(k)}).then(l.hitch(this,function(d){var b={};b.item=d.getItem;b.item&&b.item.ownerFolder&&b.item.ownerFolder.length&&"/"!==b.item.ownerFolder&&(b.item.folderId=b.item.ownerFolder);"undefined"===
typeof b.item.sharing&&b.item.access&&(b.item.sharing={access:b.item.access});b.user=d.getUser;c._setUserRole(d.loadSelfInfo,b);b.currentUser=b.user;b.isAdmin=!1;b.userRole&&(b.userRole.isAdmin()||b.userRole.isCustom()&&b.userRole.canUpdateOrgItems())?(b.isAdmin=!0,b.item.owner!==b.currentUser.name?c._getProfile(b.item,a).then(l.hitch(this,function(a){b.itemUser=a;b.itemUser.orgId!==b.currentUser.orgId&&(b.isAdmin=!1);h.resolve(b)})):(b.itemUser=b.currentUser,h.resolve(b))):(b.currentUser&&(b.itemUser=
b.currentUser),h.resolve(b))}),l.hitch(this,function(a){console.log(a);h.resolve(null)}));return h},_setUserRole:function(a,b){b.userPortalUrl=a.urlKey?a.urlKey+"."+a.customBaseUrl:this.portalUrl;!a||a.code||a.message||(b.organization=a);if(a&&a.user)b.userRole=new Role({id:a.user.roleId?a.user.roleId:a.user.role,role:a.user.role}),b._isCustomRole=b.userRole.isCustom(),b._roleCanShareToGroup=b._isCustomRole&&b.userRole.canShareItemToGroup(),b._roleCanShareToOrg=b._isCustomRole&&b.userRole.canShareItemToOrg(),
b._roleCanSharePublic=b._isCustomRole&&b.userRole.canShareItemToPublic(),b._roleCanShare=b._roleCanShareToGroup||b._roleCanShareToOrg||b._roleCanShareToPublic,b._roleCanUpdateItems=b._isCustomRole&&b.userRole.canUpdateOrgItems(),b._roleCanShareOthersItemsToGroup=b._isCustomRole&&b.userRole.canShareOthersItemsToGroup(),b._roleCanShareOthersItemsToOrg=b._isCustomRole&&b.userRole.canShareOthersItemsToOrg(),b._roleCanShareOthersItemsToPublic=b._isCustomRole&&b.userRole.canShareOthersItemsToPublic(),b._roleCanShareOthersItems=
b._isCustomRole&&(b.userRole.canShareOthersItemsToGroup()||b.userRole.canShareOthersItemsToOrg()||b._roleCanShareOthersItemsToPublic),b._orgUserCanSharePublicOrOverride=b.organization&&(!0===b.organization.canSharePublic&&(!b._isCustomRole||b._roleCanSharePublic||b._roleCanShareOthersItemsToPublic)||b.userRole.isAdmin());else return!1},getItemById:function(a,b){var c=new e;b=k.getStandardPortalUrl(b);b+="/sharing/rest/content/items/"+a.id;r({url:b,handleAs:"json",content:{f:"json"},callbackParamName:"callback"}).then(l.hitch(this,
function(a){c.resolve(a)}),l.hitch(this,function(a){console.error(a);c.reject(a)}));return c},disableWebMapPopup:function(a){a&&a.setInfoWindowOnClick&&a.setInfoWindowOnClick(!1)},enableWebMapPopup:function(a){a&&a.setInfoWindowOnClick&&a.setInfoWindowOnClick(!0)}};return c})},"jimu/dijit/ShareLink":function(){define("dojo/_base/declare dijit/_WidgetBase dijit/_TemplatedMixin dijit/_WidgetsInTemplateMixin dojo/_base/lang dojo/_base/array dojo/dom-class dojo/_base/html dojo/on dojo/topic dojo/query jimu/utils jimu/shareUtils dojo/text!./templates/ShareLink.html dojo/string dijit/form/Select dijit/form/NumberTextBox dojo/dom-attr dojo/Deferred esri/request esri/layers/GraphicsLayer dijit/form/TextBox dijit/form/Textarea dijit/form/RadioButton dijit/form/Select dijit/form/CheckBox dijit/form/NumberTextBox dijit/form/SimpleTextarea dijit/form/ValidationTextBox".split(" "),
function(l,r,m,k,e,b,g,h,c,a,d,v,q,A,I,L,E,B,G,F,n){return l([r,m,k],{templateString:A,declaredClass:"jimu.dijit.ShareLink",bitlyUrl:"https://arcg.is/prod/shorten",share:{shareEmailSubject:"",shareTwitterTxt:"",languages:"ar cs da de en el es et fi fr he hr it ja ko lt lv nb nl pl pt-br pt-pt ro ru sr sv th tr zh-cn vi zh-hk zh-tw".split(" "),DEFAULT_MOBILE_LAYOUT:600},_hasZoomLevelMarkerAdded:!1,_hasMapScaleMarkerAdded:!1,_hasAddMarkerMarkerAdded:!1,HAS_INIT_URL:!1,postMixInProperties:function(){this.inherited(arguments);
this.nls=window.jimuNls.shareLink;this.nls.symbol=window.jimuNls.common.symbol;this.nls.label=window.jimuNls.common.label;this.nls.WKID=window.jimuNls.common.wkid||"wkid";this.nls.popupTitle=window.jimuNls.shareLink.popupTitle||"Pop-up title";this.nls.zoomLevel=window.jimuNls.shareLink.zoomLevel||"Zoom level";this.share.shareEmailSubject=this.nls.shareEmailSubject+" ${appTitle} ";this.share.shareTwitterTxt=this.nls.shareEmailSubject+"${appTitle}\n"},postCreate:function(){this.inherited(arguments);
this._initUI();this._initMap();this._showSocialMediaLinksByConfig()},constructor:function(f){f&&(this._portalUrl=f.portalUrl,this._isOnline=f.isOnline,this._appTitle=f.appTitle,this._isShowBackBtn=f.isShowBackBtn,this._isShowSocialMediaLinks=f.isShowSocialMediaLinks,this._isSharedToPublic=f.isSharedToPublic,this._isShowFindLocation=f.isShowFindLocation,this._config=f.config)},startup:function(){this.baseHrefUrl=q.getBaseHrefUrl(this._portalUrl);"undefined"===typeof this.optionSrc&&(this.optionSrc=
"currentMapExtent");this.updateUrl(null);this._initOptionsEvent()},destroy:function(){this._cleanMarkerStatus();this._mapClickHandler&&(this._mapClickHandler=null);this.inherited(arguments)},onShareToPublicChanged:function(f){this._isSharedToPublic=f;this.updateUrl(null);this._isSharedToPublic?g.add(this.shareTips,"displaynone"):g.remove(this.shareTips,"displaynone")},onCloseContainer:function(){this._cleanMarkerStatus()},updateShareLinkOptionsUI:function(f){f&&"undefined"!==typeof f.isShowFindLocation&&
this.findLocationRow&&(!1===f.isShowFindLocation?g.add(this.findLocationRow,"displaynone"):!0===f.isShowFindLocation&&g.remove(this.findLocationRow,"displaynone"))},_initMap:function(){window.isBuilder?(this.own(a.subscribe("app/mapLoaded",e.hitch(this,this._onMapLoaded))),this.own(a.subscribe("app/mapChanged",e.hitch(this,this._onMapLoaded)))):(this.own(a.subscribe("mapLoaded",e.hitch(this,this._onMapLoaded))),this.own(a.subscribe("mapChanged",e.hitch(this,this._onMapLoaded))));window._widgetManager.sceneView&&
(this.map=window._widgetManager.sceneView)},_onMapLoaded:function(f){this.map=f;this._mapEventUpdateUrls();this._addGraphicsLayer()},_mapEventUpdateUrls:function(){this.map&&this.own(this.map.watch("extent",e.hitch(this,this._mapEventHandler)))},_mapEventHandler:function(){this._isShareLinkOptionsShow()&&this.updateUrl()},_showSocialMediaLinksByConfig:function(){this._config&&this._config.socialMedias&&("undefined"!==typeof this._config.socialMedias.email&&!1===this._config.socialMedias.email&&g.add(this.emailShare,
"displaynone"),"undefined"!==typeof this._config.socialMedias.facebook&&!1===this._config.socialMedias.facebook&&g.add(this.FacebookShare,"displaynone"),"undefined"!==typeof this._config.socialMedias.twitter&&!1===this._config.socialMedias.twitter&&g.add(this.TwitterShare,"displaynone"),"undefined"!==typeof this._config.socialMedias.googlePlus&&!1===this._config.socialMedias.googlePlus&&g.add(this.googlePlusShare,"displaynone"))},_initUI:function(){this._isShowBackBtn?(B.set(this.backBtn,"title",
window.jimuNls.common.back),this.own(c(this.backBtn,"click",e.hitch(this,this._toggleLinkOptions))),this.own(c(this.linkOptions,"click",e.hitch(this,this._toggleLinkOptions)))):(g.add(this.backBtn,"displaynone"),g.add(this.linkOptions,"displaynone"));!1===this._isShowSocialMediaLinks&&g.toggle(this.socialNetworkLinks,"displaynone");!0===this._isSharedToPublic&&g.toggle(this.shareTips,"displaynone");this._setInputsClicktoSelect(this._linkUrlTextBox);this.own(c(this.googlePlusShare,"click",e.hitch(this,
this._toGooglePlus)));this._setInputsClicktoSelect(this._embedCodeTextArea);this._sizeOptions=new L({options:[{label:this.nls.smallSize,value:"small",selected:!0},{label:this.nls.mediumSize,value:"medium",selected:!1},{label:this.nls.largeSize,value:"large",selected:!1},{label:this.nls.customSize,value:"custom",selected:!1}],"class":"sizeOptionsSelect"});this._sizeOptions.placeAt(this.SizeSelect);this.own(c(this._sizeOptions,"change",function(f){switch(f){case "small":this._widthTextBox.set("value",
300);this._heightTextBox.set("value",200);g.add(this.CustomSizeContainer,"disable");this._updateEmbedCodeFrameSize();break;case "medium":this._widthTextBox.set("value",800);this._heightTextBox.set("value",600);g.add(this.CustomSizeContainer,"disable");this._updateEmbedCodeFrameSize();break;case "large":this._widthTextBox.set("value",1080);this._heightTextBox.set("value",720);g.add(this.CustomSizeContainer,"disable");this._updateEmbedCodeFrameSize();break;case "custom":g.remove(this.CustomSizeContainer,
"disable")}}.bind(this)));this._widthTextBox=new E({"class":"sizeTextBox inputsText",value:300,constraints:{pattern:"#",places:0}});this._widthTextBox.placeAt(this.CustomSizeContainer,1);this.own(c(this._widthTextBox,"change",function(f){200>f?this._widthTextBox.set("value",200>f?200:f):this._updateEmbedCodeFrameSize()}.bind(this)));this._heightTextBox=new E({"class":"sizeTextBox inputsText",value:200,constraints:{pattern:"#",places:0}});this._heightTextBox.placeAt(this.CustomSizeContainer,3);this.own(c(this._heightTextBox,
"change",function(f){200>f?this._heightTextBox.set("value",200>f?200:f):this._updateEmbedCodeFrameSize()}.bind(this)));this.mobileLayout.set("value",this.share.DEFAULT_MOBILE_LAYOUT);this.updateShareLinkOptionsUI({isShowFindLocation:this._isShowFindLocation});this._setInputsClicktoSelect(this.preview)},_setLinkUrl:function(f){this._linkUrlTextBox.set("value",f);B.set(this._linkUrlTextBox.domNode,"data-old",f)},_setEmbedCode:function(f){this._embedCodeTextArea.set("value",'\x3ciframe width\x3d"'+this._widthTextBox.value+
'" height\x3d"'+this._heightTextBox.value+'" frameborder\x3d"0" scrolling\x3d"no" allowfullscreen src\x3d"'+f+'"\x3e\x3c/iframe\x3e');B.set(this._embedCodeTextArea.domNode,"data-old-shortened",f)},_updateEmbedCodeFrameSize:function(f){f=this._embedCodeTextArea.get("value");f=f.replace(/width=\"[0-9]*\"/i,'width\x3d"'+this._widthTextBox.value+'"');f=f.replace(/height=\"[0-9]*\"/i,'height\x3d"'+this._heightTextBox.value+'"');this._embedCodeTextArea.set("value",f)},_initOptionsEvent:function(){var f=
v.has("ie")||v.has("edge")?"change":"KeyUp",a=d(".shareRadios",this.domNode);this.own(c(a,"click",e.hitch(this,function(f){this.optionSrc=B.get(f.srcElement||f.target,"data-id");this.updateUrl()})));a=d(".shareCheckBoxes",this.domNode);this.own(c(a,"click",e.hitch(this,function(){this.updateUrl()})));this.own(c(this.chooseCenterWithLevel_levels,"change",e.hitch(this,function(){this.updateUrl()})));this.own(c(this.chooseCenterWithScale_scales,"change",e.hitch(this,function(){this.updateUrl()})));this.own(c(this.setlanguage_languages,
"change",e.hitch(this,function(){this.updateUrl()})));this.own(c(this.findLocation_input,f,e.hitch(this,this.updateUrl)));this.own(c(this.queryFeature_field,"change",e.hitch(this,this._updateQueryFeature_Value)));this.own(c(this.queryFeature_value,"change",e.hitch(this,this.updateUrl)));this.own(c(this.mobileLayout,f,e.hitch(this,this.updateUrl)));this.own(c(this.authtoken,f,e.hitch(this,this.updateUrl)));this.own(c(this.addMarker_marker,"click",e.hitch(this,function(f){this._onMarkersClick(f)})));
this.own(c(this.addMarker_spatialReference,"change",e.hitch(this,this.updateUrl)));this.own(c(this.addMarker_title,f,e.hitch(this,this.updateUrl)));this.own(c(this.addMarker_symbolURL,f,e.hitch(this,this.updateUrl)));this.own(c(this.addMarker_label,f,e.hitch(this,this.updateUrl)));this.own(c(this.addMarker_level,"change",e.hitch(this,this.updateUrl)));this.own(c(this.chooseCenterWithLevel_marker,"click",e.hitch(this,function(f){this._onMarkersClick(f)})));this.own(c(this.chooseCenterWithScale_marker,
"click",e.hitch(this,function(f){this._onMarkersClick(f)})))},_onMarkersClick:function(f){q.disableWebMapPopup(this.map);this._unselectMarkerBtn();this._selectMarkerBtn(f);this._hidePopup();this._removeGraphicsLayer();this._mapClickHandler=c.once(this.map,"click",e.hitch(this,this._onMapClick))},_onMapClick:function(f){var a=f.mapPoint;this._addGraphicsLayerMarker(f);"chooseCenterWithLevel"===this.optionSrc?this._hasZoomLevelMarkerAdded=!1:"chooseCenterWithScale"===this.optionSrc?this._hasMapScaleMarkerAdded=
!1:"addMarker"===this.optionSrc&&(this._hasAddMarkerMarkerAdded=!1);this._unselectMarkerBtn();this.updateUrl(a);this._showPopup();q.enableWebMapPopup(this.map)},_hidePopup:function(){a.publish("ShareLink/onHideContainer")},_showPopup:function(){a.publish("ShareLink/onShowContainer")},_updateResUrls:function(f){"currentMapExtent"===this.optionSrc?this.resultUrl=this.baseHrefUrl:"chooseCenterWithLevel"===this.optionSrc?(!1===this._hasZoomLevelMarkerAdded&&(this.resultUrl=q.addQueryParamToUrl(this.baseHrefUrl,
"center",this.getMapCenter(this.map,f),!0),f&&f.x&&f.y&&(this._hasZoomLevelMarkerAdded=!0)),this.resultUrl=q.addQueryParamToUrl(this.resultUrl,"level",this._getMapLevel(),!0)):"chooseCenterWithScale"===this.optionSrc?(!1===this._hasMapScaleMarkerAdded&&(this.resultUrl=q.addQueryParamToUrl(this.baseHrefUrl,"center",this.getMapCenter(this.map,f),!0),f&&f.x&&f.y&&(this._hasMapScaleMarkerAdded=!0)),this.resultUrl=q.addQueryParamToUrl(this.resultUrl,"scale",this._getMapScale(),!0)):"findLocation"===this.optionSrc?
(f=this.findLocation_input.get("value"),this.resultUrl=q.addQueryParamToUrl(this.baseHrefUrl,"find",f,!0)):"queryFeature"===this.optionSrc?this._updateUrlByQueryFeatures():"addMarker"===this.optionSrc&&(!1===this._hasAddMarkerMarkerAdded?(this.resultUrl=q.addQueryParamToUrl(this.baseHrefUrl,"marker",this.getMapCenter(this.map,f,null,this._getWkid()),!0),this.resultUrl+=",",f&&f.x&&f.y&&(this._hasAddMarkerMarkerAdded=!0,this._lastAddMarkerParamObj=f)):(this.resultUrl=q.addQueryParamToUrl(this.baseHrefUrl,
"marker",this.getMapCenter(this.map,this._lastAddMarkerParamObj,null,this._getWkid()),!0),this.resultUrl+=","),this.resultUrl+=encodeURIComponent(this.addMarker_title.get("value")||""),this.resultUrl+=",",this.resultUrl+=encodeURIComponent(this.addMarker_symbolURL.get("value")||""),this.resultUrl+=",",this.resultUrl+=encodeURIComponent(this.addMarker_label.get("value")||""),f=this._getMapLevel(),this.resultUrl="number"===typeof f&&-1!==f?q.addQueryParamToUrl(this.resultUrl,"level",this._getMapLevel(),
!0):q.addQueryParamToUrl(this.resultUrl,"scale",this._getMapScale(),!0));this.resultUrl=q.removeQueryParamFromUrl(this.resultUrl,"mobileBreakPoint",!0);this.resultUrl=q.removeQueryParamFromUrl(this.resultUrl,"locale",!0);this.resultUrl=q.removeQueryParamFromUrl(this.resultUrl,"token",!0);this.overwirteMobileLayout.checked&&(this.resultUrl=q.addQueryParamToUrl(this.resultUrl,"mobileBreakPoint",this.mobileLayout.getValue(),!0));this.setlanguage.checked&&(this.resultUrl=q.addQueryParamToUrl(this.resultUrl,
"locale",this.setlanguage_languages.getValue(),!0));this.auth.checked&&(this.resultUrl=q.addQueryParamToUrl(this.resultUrl,"token",this.authtoken.getValue(),!0))},_updateUrlByQueryFeatures:function(){var f=this._getIdFromLayerChoose()||"",a=this.queryFeature_field.get("value"),b=this.queryFeature_value.get("value");this.resultUrl=q.addQueryParamToUrl(this.baseHrefUrl,"query",f,!0);a&&(this.resultUrl+=",",this.resultUrl+=a,b&&(this.resultUrl+=",",this.resultUrl+=b))},_updateQueryFeature_Layer:function(){this._updateUrlByQueryFeatures();
this._updateQueryFeature_Field();this._updateQueryFeature_Value();this.updateUrl()},_updateQueryFeature_Field:function(){var f=this._getFieldsFromLayerChoose(),a=[];this.queryFeature_field.removeOption(this.queryFeature_field.getOptions());b.forEach(f,e.hitch(this,function(f){-1<"esriFieldTypeString esriFieldTypeOID esriFieldTypeSmallInteger esriFieldTypeInteger esriFieldTypeSingle esriFieldTypeDouble".split(" ").indexOf(f.type)&&a.push({label:f.name,value:f.name})}));this.queryFeature_field.addOption(a);
this._updateUrlByQueryFeatures();this._updateQueryFeature_Value();this.updateUrl()},_updateQueryFeature_Value:function(){var f=[],a=this.queryFeature_field.get("value");f.push(a);this._query(f,this._getUrlFromLayerChoose(),this.map).then(e.hitch(this,function(f){var b=[],b=this._getQueryedValues(a,f);this.queryFeature_value.removeOption(this.queryFeature_value.getOptions());this.queryFeature_value.addOption(b);this._updateUrlByQueryFeatures();this.updateUrl()}))},_getIdFromLayerChoose:function(){var f=
null,a=this.layerChooserFromMapWithDropbox.getSelectedItem();a&&a.layerInfo&&a.layerInfo.id&&(f=a.layerInfo.id);return f},_getFieldsFromLayerChoose:function(){var f=[],a=this.layerChooserFromMapWithDropbox.getSelectedItem();a&&a.layerInfo&&a.layerInfo.layerObject&&a.layerInfo.layerObject.fields&&(f=a.layerInfo.layerObject.fields);return f},_getUrlFromLayerChoose:function(){var f="",a=this.layerChooserFromMapWithDropbox.getSelectedItem();a&&a.url&&(f=a.url);return f},_updateLinkOptionsUI:function(){d(".optionsMore",
this.domNode).style("display","none");d("."+this.optionSrc+"_optionsMore",this.domNode).style("display","block");this.overwirteMobileLayout.checked&&d(".share-options-overwirteMobileLayout_optionsMore",this.domNode).style("display","block");this.setlanguage.checked&&d(".share-options-language_optionsMore",this.domNode).style("display","block");this.auth.checked&&d(".share-options-auth_optionsMore",this.domNode).style("display","block")},_fixUrlIfIsOnline:function(a){if(this._isOnline&&this._isSharedToPublic){var f=
"",f=window.isBuilder?window.top.location.protocol:window.location.protocol,b=this._getUrlQueryString(a);a=this._getOnlinePublicUrl(a);a=f+"//"+a+"/apps/webappviewer3d/index.html"+b}return a},updateUrl:function(a){this._updateResUrls(a);this._updateLinkOptionsUI();!0!==this.config.useOrgUrl&&(this.resultUrl=this._fixUrlIfIsOnline(this.resultUrl));this.preview.set("value",this.resultUrl);null===a&&this._generateShortenUrl();this._updateEmailHref()},_generateShortenUrl:function(){var a=this.preview.get("value");
try{this.isUseShortenUrl()?this.shortenUrl(a,this.bitlyUrl).then(e.hitch(this,function(a){this._useShortenUrl(a);this.HAS_INIT_URL=!0}),e.hitch(this,function(f){this._useLengthenUrl(a,f);this.HAS_INIT_URL=!0})):(this._useLengthenUrl(a),this.HAS_INIT_URL=!0)}catch(H){console.error(H),this.HAS_INIT_URL=!0}},_useShortenUrl:function(a){this.shortenedUrl=a;this._setLinkUrl(a);this._setEmbedCode(a)},_useLengthenUrl:function(a){a=a||"";this._setLinkUrl(a);this._setEmbedCode(a)},_toFacebook:function(){var a=
"http://www.facebook.com/sharer/sharer.php?u\x3d"+encodeURIComponent(this._linkUrlTextBox.get("value"))+"\x26t\x3d"+encodeURIComponent(v.stripHTML(this.socialNetworkTitle(this._appTitle)));window.open(a,"","toolbar\x3d0,status\x3d0,width\x3d626,height\x3d436")},_toTwitter:function(){var a=I.substitute(this.share.shareTwitterTxt,{appTitle:v.stripHTML(this._appTitle)}),b=this._linkUrlTextBox.get("value");window.open("http://twitter.com/home?status\x3d"+encodeURIComponent(a+b+"\n@ArcGISOnline"),"","toolbar\x3d0,status\x3d0,width\x3d626,height\x3d436")},
_updateEmailHref:function(){var a="mailto:?subject\x3d"+I.substitute(this.share.shareEmailSubject,{appTitle:v.stripHTML(this._appTitle)}),b=this.preview.get("value"),a=a+("\x26body\x3d"+encodeURIComponent(this.nls.shareEmailTxt1)+"%0D%0A%0D%0A"+v.stripHTML(this._appTitle)),a=a+("%0D%0A"+encodeURIComponent(b)),a=a+("%0D%0A%0D%0A"+encodeURIComponent(this.nls.shareEmailTxt2)),a=a+("%0D%0A%0D%0A"+encodeURIComponent(this.nls.shareEmailTxt3));h.setAttr(this.emailShare,"href",a)},_toGooglePlus:function(){var a=
this._linkUrlTextBox.get("value"),a="http://plus.google.com/share?url\x3d"+encodeURIComponent(a);window.open(a,"","toolbar\x3d0,status\x3d0,width\x3d626,height\x3d436")},_toggleLinkOptions:function(){q.enableWebMapPopup(this.map);var b=d(".shareOptionsWrapper",this.domNode.parentNode||this.domNode.parentElement),c=d(".shareUrlsWrapper",this.domNode),e=d(".shareLinkOptionsWrapper",this.domNode);this._isShareLinkOptionsShow()?(a.publish("ShareLink/onHideLinkOptions"),this._cleanMarkerStatus(),this._generateShortenUrl()):
a.publish("ShareLink/onShowLinkOptions");b&&b[0]&&g.toggle(b[0],"displaynone");g.toggle(c[0],"displaynone");g.toggle(e[0],"displaynone")},_moreOptionsExpandCollapse:function(){g.toggle(this.MoreOptionsContainer,"displaynone");g.toggle(this.MoreOptionsIcon,"rotate")},_setInputsClicktoSelect:function(a){B.set(a,"onclick","this.select()");B.set(a,"onmouseup","return false;")},isUseShortenUrl:function(){return location.hostname.endWith("esri.com")||location.hostname.endWith("arcgis.com")?!0:!1},shortenUrl:function(a,
b){var f=new G;a=q.addQueryParamToUrl(b,"longUrl",a,!0);a=q.addQueryParamToUrl(a,"format","json",!0);F(a,{responseType:"json",callbackParamName:"callback",query:{f:"json"}}).then(e.hitch(this,function(a){a&&a.data&&200===a.data.status_code&&a.data.data&&a.data.data.url&&0<a.data.data.url.length?f.resolve(a.data.data.url):f.reject(a)}),e.hitch(this,function(a){console.log("can't fetch shortenUrl "+a);f.reject(a)}));return f},socialNetworkTitle:function(a){100<a.length&&(a=a.substring(0,97)+"...");
return a},getMapExtent:function(a){a=a.extent;var b="";a.spatialReference.wkid?b=a.spatialReference.wkid:!a.spatialReference.wkid&&a.spatialReference.wkt&&(b="wkt\x3d"+a.spatialReference.wkt);return null!==a?this._roundValue(a.xmin,1E4)+","+this._roundValue(a.ymin,1E4)+","+this._roundValue(a.xmax,1E4)+","+this._roundValue(a.ymax,1E4)+","+b:""},_roundValue:function(a,b){return Math.round(a*b)/b},getMapCenter:function(a,b,c,d){c=c?c:",";var f=null;b&&b.x&&b.y?f=b:a.extent.getCenter()&&(f=a.extent.getCenter());
a=d||f.spatialReference.wkid;return null!==f?this._roundValue(f.x,1E4)+c+this._roundValue(f.y,1E4)+c+a:""},_getMapLevel:function(){return this.map.getLevel()},_getMapScale:function(){return this.map.getScale()},_getWkid:function(){return this.addMarker_spatialReference.get("value")||""},_query:function(){},_getQueryedValues:function(a,c){var f=[];b.forEach(c.features,e.hitch(this,function(b){b=b.attributes[a]+"";f.push({label:b,value:b})}));return f},_addGraphicsLayer:function(){window.isBuilder||
"undefined"!==typeof this._graphicsLayer||(this._graphicsLayer=new n,this.map.addLayer(this._graphicsLayer))},_removeGraphicsLayer:function(){window.isBuilder||"undefined"===typeof this._graphicsLayer||(this._graphicsLayer.remove(this._markerGraphic),this._markerGraphic=null)},_addGraphicsLayerMarker:function(a){window.isBuilder||"undefined"===typeof this._graphicsLayer||(this._markerGraphic=this._getMarkerGraphic(a.mapPoint),this._graphicsLayer.add(this._markerGraphic))},_getMarkerGraphic:function(){},
_unselectMarkerBtn:function(){for(var a=d(".markers",this.domNode),b=0,c=a.length;b<c;b++)g.remove(a[b],"selected")},_selectMarkerBtn:function(a){g.add(a.srcElement||a.target,"selected")},_cleanMarkerStatus:function(){this._mapClickHandler&&this._mapClickHandler.remove&&this._mapClickHandler.remove();this._unselectMarkerBtn();this._removeGraphicsLayer()},_isShareLinkOptionsShow:function(){var a=d(".shareLinkOptionsWrapper",this.domNode);return!g.contains(a[0],"displaynone")},_getUrlQueryString:function(a){var b=
"";-1!==a.indexOf("?")&&(b=a.substring(a.indexOf("?")));return b},_getOnlinePublicUrl:function(){var a="www.arcgis.com",b=this._portalUrl;b&&"string"===typeof b&&(-1<b.indexOf("devext.arcgis.com")?a="devext.arcgis.com":-1<b.indexOf("qaext.arcgis.com")&&(a="qaext.arcgis.com"));return a}})})},"dijit/_WidgetsInTemplateMixin":function(){define(["dojo/_base/array","dojo/aspect","dojo/_base/declare","dojo/_base/lang","dojo/parser"],function(l,r,m,k,e){return m("dijit._WidgetsInTemplateMixin",null,{_earlyTemplatedStartup:!1,
contextRequire:null,_beforeFillContent:function(){if(/dojoType|data-dojo-type/i.test(this.domNode.innerHTML)){var b=this.domNode;this.containerNode&&!this.searchContainerNode&&(this.containerNode.stopParser=!0);e.parse(b,{noStart:!this._earlyTemplatedStartup,template:!0,inherited:{dir:this.dir,lang:this.lang,textDir:this.textDir},propsThis:this,contextRequire:this.contextRequire,scope:"dojo"}).then(k.hitch(this,function(b){this._startupWidgets=b;for(var e=0;e<b.length;e++)this._processTemplateNode(b[e],
function(b,a){return b[a]},function(b,a,d){return a in b?b.connect(b,a,d):b.on(a,d,!0)});this.containerNode&&this.containerNode.stopParser&&delete this.containerNode.stopParser}));if(!this._startupWidgets)throw Error(this.declaredClass+": parser returned unfilled promise (probably waiting for module auto-load), unsupported by _WidgetsInTemplateMixin.   Must pre-load all supporting widgets before instantiation.");}},_processTemplateNode:function(b,e,h){return e(b,"dojoType")||e(b,"data-dojo-type")?
!0:this.inherited(arguments)},startup:function(){l.forEach(this._startupWidgets,function(b){b&&!b._started&&b.startup&&b.startup()});this._startupWidgets=null;this.inherited(arguments)}})})},"dojo/parser":function(){define("require ./_base/kernel ./_base/lang ./_base/array ./_base/config ./dom ./_base/window ./_base/url ./aspect ./promise/all ./date/stamp ./Deferred ./has ./query ./on ./ready".split(" "),function(l,r,m,k,e,b,g,h,c,a,d,v,q,A,I,L){function E(a){return eval("("+a+")")}function B(a){var b=
a._nameCaseMap,c=a.prototype;if(!b||b._extendCnt<F){var b=a._nameCaseMap={},d;for(d in c)"_"!==d.charAt(0)&&(b[d.toLowerCase()]=d);b._extendCnt=F}return b}function G(a,b){b||(b=l);var c=b._dojoParserCtorMap||(b._dojoParserCtorMap={}),f=a.join();if(!c[f]){for(var d=[],e=0,h=a.length;e<h;e++){var g=a[e];d[d.length]=c[g]=c[g]||m.getObject(g)||~g.indexOf("/")&&b(g)}a=d.shift();c[f]=d.length?a.createSubclass?a.createSubclass(d):a.extend.apply(a,d):a}return c[f]}new Date("X");var F=0;c.after(m,"extend",
function(){F++},!0);q={_clearCache:function(){F++;_ctorMap={}},_functionFromScript:function(a,b){var c="",f="",d=a.getAttribute(b+"args")||a.getAttribute("args");b=a.getAttribute("with");d=(d||"").split(/\s*,\s*/);b&&b.length&&k.forEach(b.split(/\s*,\s*/),function(a){c+="with("+a+"){";f+="}"});return new Function(d,c+a.innerHTML+f)},instantiate:function(a,b,c){b=b||{};c=c||{};var f=(c.scope||r._scopeName)+"Type",d="data-"+(c.scope||r._scopeName)+"-",e=d+"type",h=d+"mixins",g=[];k.forEach(a,function(a){var c=
f in b?b[f]:a.getAttribute(e)||a.getAttribute(f);if(c){var d=a.getAttribute(h),c=d?[c].concat(d.split(/\s*,\s*/)):[c];g.push({node:a,types:c})}});return this._instantiate(g,b,c)},_instantiate:function(b,c,d,e){function f(a){c._started||d.noStart||k.forEach(a,function(a){"function"!==typeof a.startup||a._started||a.startup()});return a}b=k.map(b,function(a){var b=a.ctor||G(a.types,d.contextRequire);if(!b)throw Error("Unable to resolve constructor for: '"+a.types.join()+"'");return this.construct(b,
a.node,c,d,a.scripts,a.inherited)},this);return e?a(b).then(f):f(b)},construct:function(a,b,e,g,k,l){function f(a){H&&m.setObject(H,a);for(u=0;u<D.length;u++)c[D[u].advice||"after"](a,D[u].method,m.hitch(a,D[u].func),!0);for(u=0;u<M.length;u++)M[u].call(a);for(u=0;u<J.length;u++)a.watch(J[u].prop,J[u].func);for(u=0;u<K.length;u++)I(a,K[u].event,K[u].func);return a}var q=a&&a.prototype;g=g||{};var n={};g.defaults&&m.mixin(n,g.defaults);l&&m.mixin(n,l);var v;v=b.attributes;var y=g.scope||r._scopeName;
l="data-"+y+"-";var t={};"dojo"!==y&&(t[l+"props"]="data-dojo-props",t[l+"type"]="data-dojo-type",t[l+"mixins"]="data-dojo-mixins",t[y+"type"]="dojotype",t[l+"id"]="data-dojo-id");for(var u=0,p,y=[],H,x;p=v[u++];){var w=p.name,C=w.toLowerCase();p=p.value;switch(t[C]||C){case "data-dojo-type":case "dojotype":case "data-dojo-mixins":break;case "data-dojo-props":x=p;break;case "data-dojo-id":case "jsid":H=p;break;case "data-dojo-attach-point":case "dojoattachpoint":n.dojoAttachPoint=p;break;case "data-dojo-attach-event":case "dojoattachevent":n.dojoAttachEvent=
p;break;case "class":n["class"]=b.className;break;case "style":n.style=b.style&&b.style.cssText;break;default:if(w in q||(w=B(a)[C]||w),w in q)switch(typeof q[w]){case "string":n[w]=p;break;case "number":n[w]=p.length?Number(p):NaN;break;case "boolean":n[w]="false"!=p.toLowerCase();break;case "function":""===p||-1!=p.search(/[^\w\.]+/i)?n[w]=new Function(p):n[w]=m.getObject(p,!1)||new Function(p);y.push(w);break;default:C=q[w],n[w]=C&&"length"in C?p?p.split(/\s*,\s*/):[]:C instanceof Date?""==p?new Date(""):
"now"==p?new Date:d.fromISOString(p):C instanceof h?r.baseUrl+p:E(p)}else n[w]=p}}for(v=0;v<y.length;v++)t=y[v].toLowerCase(),b.removeAttribute(t),b[t]=null;if(x)try{x=E.call(g.propsThis,"{"+x+"}"),m.mixin(n,x)}catch(N){throw Error(N.toString()+" in data-dojo-props\x3d'"+x+"'");}m.mixin(n,e);k||(k=a&&(a._noScript||q._noScript)?[]:A("\x3e script[type^\x3d'dojo/']",b));var D=[],M=[],J=[],K=[];if(k)for(u=0;u<k.length;u++)t=k[u],b.removeChild(t),e=t.getAttribute(l+"event")||t.getAttribute("event"),g=
t.getAttribute(l+"prop"),x=t.getAttribute(l+"method"),y=t.getAttribute(l+"advice"),v=t.getAttribute("type"),t=this._functionFromScript(t,l),e?"dojo/connect"==v?D.push({method:e,func:t}):"dojo/on"==v?K.push({event:e,func:t}):n[e]=t:"dojo/aspect"==v?D.push({method:x,advice:y,func:t}):"dojo/watch"==v?J.push({prop:g,func:t}):M.push(t);a=(k=a.markupFactory||q.markupFactory)?k(n,b,a):new a(n,b);return a.then?a.then(f):f(a)},scan:function(a,b){function c(a){if(!a.inherited){a.inherited={};var b=a.node,f=
c(a.parent),b={dir:b.getAttribute("dir")||f.dir,lang:b.getAttribute("lang")||f.lang,textDir:b.getAttribute(q)||f.textDir},d;for(d in b)b[d]&&(a.inherited[d]=b[d])}return a.inherited}var f=[],d=[],e={},g=(b.scope||r._scopeName)+"Type",h="data-"+(b.scope||r._scopeName)+"-",m=h+"type",q=h+"textdir",h=h+"mixins",n=a.firstChild,t=b.inherited;if(!t){var u=function(a,b){return a.getAttribute&&a.getAttribute(b)||a.parentNode&&u(a.parentNode,b)},t={dir:u(a,"dir"),lang:u(a,"lang"),textDir:u(a,q)},p;for(p in t)t[p]||
delete t[p]}p={inherited:t};for(var z,x;;)if(n)if(1!=n.nodeType)n=n.nextSibling;else if(z&&"script"==n.nodeName.toLowerCase())(t=n.getAttribute("type"))&&/^dojo\/\w/i.test(t)&&z.push(n),n=n.nextSibling;else if(x)n=n.nextSibling;else if(t=n.getAttribute(m)||n.getAttribute(g),a=n.firstChild,t||a&&(3!=a.nodeType||a.nextSibling)){x=null;if(t){var w=n.getAttribute(h);z=w?[t].concat(w.split(/\s*,\s*/)):[t];try{x=G(z,b.contextRequire)}catch(D){}x||k.forEach(z,function(a){~a.indexOf("/")&&!e[a]&&(e[a]=!0,
d[d.length]=a)});w=x&&!x.prototype._noScript?[]:null;p={types:z,ctor:x,parent:p,node:n,scripts:w};p.inherited=c(p);f.push(p)}else p={node:n,scripts:z,parent:p};z=w;x=n.stopParser||x&&x.prototype.stopParser&&!b.template;n=a}else n=n.nextSibling;else{if(!p||!p.node)break;n=p.node.nextSibling;x=!1;p=p.parent;z=p.scripts}var A=new v;d.length?(b.contextRequire||l)(d,function(){A.resolve(k.filter(f,function(a){if(!a.ctor)try{a.ctor=G(a.types,b.contextRequire)}catch(O){}for(var c=a.parent;c&&!c.types;)c=
c.parent;var f=a.ctor&&a.ctor.prototype;a.instantiateChildren=!(f&&f.stopParser&&!b.template);a.instantiate=!c||c.instantiate&&c.instantiateChildren;return a.instantiate}))}):A.resolve(f);return A.promise},_require:function(a,b){a=E("{"+a.innerHTML+"}");var c=[],f=[],d=new v;b=b&&b.contextRequire||l;for(var e in a)c.push(e),f.push(a[e]);b(f,function(){for(var a=0;a<c.length;a++)m.setObject(c[a],arguments[a]);d.resolve(arguments)});return d.promise},_scanAmd:function(a,b){var c=new v,f=c.promise;c.resolve(!0);
var d=this;A("script[type\x3d'dojo/require']",a).forEach(function(a){f=f.then(function(){return d._require(a,b)});a.parentNode.removeChild(a)});return f},parse:function(a,c){!a||"string"==typeof a||"nodeType"in a||(c=a,a=c.rootNode);var d=a?b.byId(a):g.body();c=c||{};var f=c.template?{template:!0}:{},e=[],h=this;a=this._scanAmd(d,c).then(function(){return h.scan(d,c)}).then(function(a){return h._instantiate(a,f,c,!0)}).then(function(a){return e=e.concat(a)}).otherwise(function(a){console.error("dojo/parser::parse() error",
a);throw a;});m.mixin(e,a);return e}};r.parser=q;e.parseOnLoad&&L(100,q,"parse");return q})},"dojo/_base/url":function(){define(["./kernel"],function(l){var r=/^(([^:/?#]+):)?(\/\/([^/?#]*))?([^?#]*)(\?([^#]*))?(#(.*))?$/,m=/^((([^\[:]+):)?([^@]+)@)?(\[([^\]]+)\]|([^\[:]*))(:([0-9]+))?$/,k=function(){for(var e=arguments,b=[e[0]],g=1;g<e.length;g++)if(e[g]){var h=new k(e[g]+""),b=new k(b[0]+"");if(""==h.path&&!h.scheme&&!h.authority&&!h.query)null!=h.fragment&&(b.fragment=h.fragment),h=b;else if(!h.scheme&&
(h.scheme=b.scheme,!h.authority&&(h.authority=b.authority,"/"!=h.path.charAt(0)))){for(var b=(b.path.substring(0,b.path.lastIndexOf("/")+1)+h.path).split("/"),c=0;c<b.length;c++)"."==b[c]?c==b.length-1?b[c]="":(b.splice(c,1),c--):0<c&&(1!=c||""!=b[0])&&".."==b[c]&&".."!=b[c-1]&&(c==b.length-1?(b.splice(c,1),b[c-1]=""):(b.splice(c-1,2),c-=2));h.path=b.join("/")}b=[];h.scheme&&b.push(h.scheme,":");h.authority&&b.push("//",h.authority);b.push(h.path);h.query&&b.push("?",h.query);h.fragment&&b.push("#",
h.fragment)}this.uri=b.join("");e=this.uri.match(r);this.scheme=e[2]||(e[1]?"":null);this.authority=e[4]||(e[3]?"":null);this.path=e[5];this.query=e[7]||(e[6]?"":null);this.fragment=e[9]||(e[8]?"":null);null!=this.authority&&(e=this.authority.match(m),this.user=e[3]||null,this.password=e[4]||null,this.host=e[6]||e[7],this.port=e[9]||null)};k.prototype.toString=function(){return this.uri};return l._Url=k})},"dojo/date/stamp":function(){define(["../_base/lang","../_base/array"],function(l,r){var m=
{};l.setObject("dojo.date.stamp",m);m.fromISOString=function(k,e){m._isoRegExp||(m._isoRegExp=/^(?:(\d{4})(?:-(\d{2})(?:-(\d{2}))?)?)?(?:T(\d{2}):(\d{2})(?::(\d{2})(.\d+)?)?((?:[+-](\d{2}):(\d{2}))|Z)?)?$/);var b=m._isoRegExp.exec(k);k=null;if(b){b.shift();b[1]&&b[1]--;b[6]&&(b[6]*=1E3);e&&(e=new Date(e),r.forEach(r.map("FullYear Month Date Hours Minutes Seconds Milliseconds".split(" "),function(b){return e["get"+b]()}),function(c,a){b[a]=b[a]||c}));k=new Date(b[0]||1970,b[1]||0,b[2]||1,b[3]||0,b[4]||
0,b[5]||0,b[6]||0);100>b[0]&&k.setFullYear(b[0]||1970);var g=0,h=b[7]&&b[7].charAt(0);"Z"!=h&&(g=60*(b[8]||0)+(Number(b[9])||0),"-"!=h&&(g*=-1));h&&(g-=k.getTimezoneOffset());g&&k.setTime(k.getTime()+6E4*g)}return k};m.toISOString=function(k,e){var b=function(a){return 10>a?"0"+a:a};e=e||{};var g=[],h=e.zulu?"getUTC":"get",c="";"time"!=e.selector&&(c=k[h+"FullYear"](),c=["0000".substr((c+"").length)+c,b(k[h+"Month"]()+1),b(k[h+"Date"]())].join("-"));g.push(c);"date"!=e.selector&&(c=[b(k[h+"Hours"]()),
b(k[h+"Minutes"]()),b(k[h+"Seconds"]())].join(":"),h=k[h+"Milliseconds"](),e.milliseconds&&(c+="."+(100>h?"0":"")+b(h)),e.zulu?c+="Z":"time"!=e.selector&&(k=k.getTimezoneOffset(),e=Math.abs(k),c+=(0<k?"-":"+")+b(Math.floor(e/60))+":"+b(e%60)),g.push(c));return g.join("T")};return m})},"dijit/form/Textarea":function(){define(["dojo/_base/declare","dojo/dom-style","./_ExpandingTextAreaMixin","./SimpleTextarea"],function(l,r,m,k){return l("dijit.form.Textarea",[k,m],{baseClass:"dijitTextBox dijitTextArea dijitExpandingTextArea",
cols:"",buildRendering:function(){this.inherited(arguments);r.set(this.textbox,{overflowY:"hidden",overflowX:"auto",boxSizing:"border-box",MsBoxSizing:"border-box",WebkitBoxSizing:"border-box",MozBoxSizing:"border-box"})}})})},"dijit/form/_ExpandingTextAreaMixin":function(){define("dojo/_base/declare dojo/dom-construct dojo/has dojo/_base/lang dojo/on dojo/_base/window ../Viewport".split(" "),function(l,r,m,k,e,b,g){m.add("textarea-needs-help-shrinking",function(){var e=b.body(),c=r.create("textarea",
{rows:"5",cols:"20",value:" ",style:{zoom:1,fontSize:"12px",height:"96px",overflow:"hidden",visibility:"hidden",position:"absolute",border:"5px solid white",margin:"0",padding:"0",boxSizing:"border-box",MsBoxSizing:"border-box",WebkitBoxSizing:"border-box",MozBoxSizing:"border-box"}},e,"last"),a=c.scrollHeight>=c.clientHeight;e.removeChild(c);return a});return l("dijit.form._ExpandingTextAreaMixin",null,{_setValueAttr:function(){this.inherited(arguments);this.resize()},postCreate:function(){this.inherited(arguments);
var b=this.textbox;b.style.overflowY="hidden";this.own(e(b,"focus, resize",k.hitch(this,"_resizeLater")))},startup:function(){this.inherited(arguments);this.own(g.on("resize",k.hitch(this,"_resizeLater")));this._resizeLater()},_onInput:function(b){this.inherited(arguments);this.resize()},_estimateHeight:function(){var b=this.textbox;b.rows=(b.value.match(/\n/g)||[]).length+1},_resizeLater:function(){this.defer("resize")},resize:function(){function b(){var a=!1;""===c.value&&(c.value=" ",a=!0);var b=
c.scrollHeight;a&&(c.value="");return b}var c=this.textbox;"hidden"==c.style.overflowY&&(c.scrollTop=0);if(!this.busyResizing){this.busyResizing=!0;if(b()||c.offsetHeight){var a=b()+Math.max(c.offsetHeight-c.clientHeight,0),d=a+"px";d!=c.style.height&&(c.style.height=d,c.rows=1);if(m("textarea-needs-help-shrinking")){var e=b(),g=c.style.minHeight,k=4,l=c.scrollTop;c.style.minHeight=d;for(c.style.height="auto";0<a;){c.style.minHeight=Math.max(a-k,4)+"px";d=b();e-=d;a-=e;if(e<k)break;e=d;k<<=1}c.style.height=
a+"px";c.style.minHeight=g;c.scrollTop=l}c.style.overflowY=b()>c.clientHeight?"auto":"hidden";"hidden"==c.style.overflowY&&(c.scrollTop=0)}else this._estimateHeight();this.busyResizing=!1}}})})},"dijit/form/SimpleTextarea":function(){define(["dojo/_base/declare","dojo/dom-class","dojo/sniff","./TextBox"],function(l,r,m,k){return l("dijit.form.SimpleTextarea",k,{baseClass:"dijitTextBox dijitTextArea",rows:"3",cols:"20",templateString:"\x3ctextarea ${!nameAttrSetting} data-dojo-attach-point\x3d'focusNode,containerNode,textbox' autocomplete\x3d'off'\x3e\x3c/textarea\x3e",
postMixInProperties:function(){!this.value&&this.srcNodeRef&&(this.value=this.srcNodeRef.value);this.inherited(arguments)},buildRendering:function(){this.inherited(arguments);m("ie")&&this.cols&&r.add(this.textbox,"dijitTextAreaCols")},filter:function(e){e&&(e=e.replace(/\r/g,""));return this.inherited(arguments)},_onInput:function(e){if(this.maxLength){var b=parseInt(this.maxLength),g=this.textbox.value.replace(/\r/g,""),b=g.length-b;if(0<b){var h=this.textbox;if(h.selectionStart){var c=h.selectionStart,
a=0;m("opera")&&(a=(this.textbox.value.substring(0,c).match(/\r/g)||[]).length);this.textbox.value=g.substring(0,c-b-a)+g.substring(c-a);h.setSelectionRange(c-b,c-b)}else this.ownerDocument.selection&&(h.focus(),g=this.ownerDocument.selection.createRange(),g.moveStart("character",-b),g.text="",g.select())}}this.inherited(arguments)}})})},"dijit/form/RadioButton":function(){define(["dojo/_base/declare","./CheckBox","./_RadioButtonMixin"],function(l,r,m){return l("dijit.form.RadioButton",[r,m],{baseClass:"dijitRadio"})})},
"dijit/form/_RadioButtonMixin":function(){define("dojo/_base/array dojo/_base/declare dojo/dom-attr dojo/_base/lang dojo/query!css2 ../registry".split(" "),function(l,r,m,k,e,b){return r("dijit.form._RadioButtonMixin",null,{type:"radio",_getRelatedWidgets:function(){var g=[];e("input[type\x3dradio]",this.focusNode.form||this.ownerDocument).forEach(k.hitch(this,function(e){e.name==this.name&&e.form==this.focusNode.form&&(e=b.getEnclosingWidget(e))&&g.push(e)}));return g},_setCheckedAttr:function(b){this.inherited(arguments);
this._created&&b&&l.forEach(this._getRelatedWidgets(),k.hitch(this,function(b){b!=this&&b.checked&&b.set("checked",!1)}))},_getSubmitValue:function(b){return null==b?"on":b},_onClick:function(b){if(this.checked||this.disabled)return b.stopPropagation(),b.preventDefault(),!1;if(this.readOnly)return b.stopPropagation(),b.preventDefault(),l.forEach(this._getRelatedWidgets(),k.hitch(this,function(a){m.set(this.focusNode||this.domNode,"checked",a.checked)})),!1;var e=!1,c;l.some(this._getRelatedWidgets(),
function(a){return a.checked?(c=a,!0):!1});this.checked=!0;c&&(c.checked=!1);if(!1===this.onClick(b)||b.defaultPrevented)e=!0;this.checked=!1;c&&(c.checked=!0);e?b.preventDefault():this.set("checked",!0);return!e}})})},"widgets/Share/_build-generate_module":function(){define(["dojo/text!./Widget.html","dojo/i18n!./nls/strings"],function(){})},"url:jimu/dijit/templates/ShareLink.html":'\x3cdiv class\x3d"shareLink"\x3e\r\n  \x3cdiv class\x3d"shareLinkOptionsWrapper displaynone"\x3e\r\n    \x3cdiv data-dojo-attach-point\x3d"backBtn" class\x3d"backBtn"\x3e\x3c/div\x3e\r\n    \x3cdiv class\x3d"linkOptionsTitle"\x3e${nls.linkOptions}\x3c/div\x3e\r\n    \x3cdiv class\x3d"subTitle"\x3e${nls.linkOptionsUrlParameters}\x3c/div\x3e\r\n    \x3cform data-id\x3d"shareOptionsRadios" data-dojo-attach-point\x3d"shareOptionsRadios"\x3e\r\n      \x3cfieldset\x3e\r\n        \x3cdiv class\x3d"optionsRow"\x3e\r\n          \x3cinput data-dojo-attach-point\x3d"currentMapExtent" class\x3d"shareRadios jimu-float-leading jimu-radio-btn" type\x3d"radio" name\x3d"radios" data-id\x3d"currentMapExtent" data-dojo-type\x3d"dijit.form.RadioButton" data-dojo-props\x3d\'checked:true\' checked\x3e\r\n          \x3cdiv class\x3d"labels" data-forid\x3d"currentMapExtent"\x3e${nls.currentMapExtent}\x3c/div\x3e\r\n        \x3c/div\x3e\r\n        \x3cdiv class\x3d"optionsRow" data-dojo-attach-point\x3d"chooseCenterWithLevelRow"\x3e\r\n          \x3cinput data-dojo-attach-point\x3d"chooseCenterWithLevel" class\x3d"shareRadios jimu-float-leading jimu-radio-btn" type\x3d"radio" name\x3d"radios" data-id\x3d"chooseCenterWithLevel" data-dojo-type\x3d"dijit.form.RadioButton"\x3e\r\n          \x3cdiv class\x3d"labels" data-forid\x3d"chooseCenterWithLevel"\x3e${nls.chooseCenterWithLevel}\x3c/div\x3e\r\n          \x3cdiv class\x3d"optionsMore chooseCenterWithLevel_optionsMore"\x3e\r\n            \x3cdiv data-dojo-attach-point\x3d"chooseCenterWithLevel_marker" class\x3d"markers"\x3e\x3c/div\x3e\r\n            \x3cselect data-dojo-attach-point\x3d"chooseCenterWithLevel_levels" class\x3d"shareSelects" style\x3d"display: none !important;" data-dojo-type\x3d"dijit/form/Select"\x3e\x3c/select\x3e\r\n          \x3c/div\x3e\r\n        \x3c/div\x3e\r\n        \x3cdiv class\x3d"optionsRow"\x3e\r\n          \x3cinput data-dojo-attach-point\x3d"chooseCenterWithScale" class\x3d"shareRadios jimu-float-leading jimu-radio-btn" type\x3d"radio" name\x3d"radios" data-id\x3d"chooseCenterWithScale" data-dojo-type\x3d"dijit.form.RadioButton"\x3e\r\n          \x3cdiv class\x3d"labels"\x3e${nls.chooseCenterWithScale}\x3c/div\x3e\r\n          \x3cdiv class\x3d"optionsMore chooseCenterWithScale_optionsMore"\x3e\r\n            \x3cdiv data-dojo-attach-point\x3d"chooseCenterWithScale_marker" class\x3d"markers"\x3e\x3c/div\x3e\r\n            \x3cselect data-dojo-attach-point\x3d"chooseCenterWithScale_scales" class\x3d"shareSelects" style\x3d"display: none !important;" data-dojo-type\x3d"dijit/form/Select"\x3e\x3c/select\x3e\r\n          \x3c/div\x3e\r\n        \x3c/div\x3e\r\n\r\n        \x3cdiv class\x3d"optionsRow" data-dojo-attach-point\x3d"findLocationRow"\x3e\r\n          \x3cinput data-dojo-attach-point\x3d"findLocation" class\x3d"shareRadios jimu-float-leading jimu-radio-btn" type\x3d"radio" name\x3d"radios" data-id\x3d"findLocation" data-dojo-type\x3d"dijit.form.RadioButton"\x3e\r\n          \x3cdiv class\x3d"labels"\x3e${nls.findLocation}\x3c/div\x3e\r\n          \x3cdiv class\x3d"optionsMore findLocation_optionsMore"\x3e\r\n            \x3cdiv class\x3d"moreOptions"\x3e\r\n              \x3cinput data-dojo-attach-point\x3d"findLocation_input" data-dojo-type\x3d"dijit.form.TextBox" placeholder\x3d"${nls.findLocation_inputPlaceholder}"\x3e\r\n            \x3c/div\x3e\r\n          \x3c/div\x3e\r\n        \x3c/div\x3e\r\n        \x3cdiv class\x3d"optionsRow"\x3e\r\n          \x3cinput data-dojo-attach-point\x3d"queryFeature" class\x3d"shareRadios jimu-float-leading jimu-radio-btn" type\x3d"radio" name\x3d"radios" data-id\x3d"queryFeature" data-dojo-type\x3d"dijit.form.RadioButton"\x3e\r\n          \x3cdiv class\x3d"labels"\x3e${nls.queryFeature}\x3c/div\x3e\r\n          \x3cdiv class\x3d"optionsMore queryFeature_optionsMore"\x3e\r\n            \x3cdiv class\x3d"moreOptions"\x3e\r\n              \x3cdiv data-dojo-attach-point\x3d"queryFeature_layer" name\x3d"queryFeature_layer" class\x3d"queryFeature_layer"\x3e\x3c/div\x3e\r\n              \x3cselect data-dojo-attach-point\x3d"queryFeature_field" name\x3d"queryFeature_field" data-dojo-type\x3d"dijit/form/Select"\x3e\x3c/select\x3e\r\n              \x3cselect data-dojo-attach-point\x3d"queryFeature_value" name\x3d"queryFeature_value" data-dojo-type\x3d"dijit/form/Select"\x3e\x3c/select\x3e\r\n            \x3c/div\x3e\r\n          \x3c/div\x3e\r\n        \x3c/div\x3e\r\n        \x3cdiv class\x3d"optionsRow"\x3e\r\n          \x3cinput data-dojo-attach-point\x3d"addMarker" class\x3d"shareRadios jimu-float-leading jimu-radio-btn" type\x3d"radio" name\x3d"radios" data-id\x3d"addMarker" data-dojo-type\x3d"dijit.form.RadioButton"\x3e\r\n          \x3cdiv class\x3d"labels"\x3e${nls.addMarker}\x3c/div\x3e\r\n          \x3cdiv class\x3d"optionsMore addMarker_optionsMore"\x3e\r\n            \x3cdiv data-dojo-attach-point\x3d"addMarker_marker" class\x3d"markers"\x3e\x3c/div\x3e\r\n            \x3cdiv class\x3d"moreOptions addMarker_moreOptions"\x3e\r\n              \x3cdiv class\x3d"moreOptionsRow"\x3e\r\n                \x3clabel\x3e${nls.WKID}\x3c/label\x3e\r\n                \x3cinput data-dojo-attach-point\x3d"addMarker_spatialReference" name\x3d"spatialReference" data-dojo-type\x3d"dijit.form.TextBox"\x3e\r\n              \x3c/div\x3e\r\n              \x3cdiv class\x3d"moreOptionsRow"\x3e\r\n                \x3clabel\x3e${nls.popupTitle}\x3c/label\x3e\r\n                \x3cinput data-dojo-attach-point\x3d"addMarker_title" data-dojo-type\x3d"dijit.form.TextBox" placeholder\x3d"${nls.addMarker_titlePlaceholder}"\x3e\r\n              \x3c/div\x3e\r\n              \x3cdiv class\x3d"moreOptionsRow"\x3e\r\n                \x3clabel\x3e${nls.symbol}\x3c/label\x3e\r\n                \x3cinput data-dojo-attach-point\x3d"addMarker_symbolURL" data-dojo-type\x3d"dijit.form.TextBox" placeholder\x3d"${nls.addMarker_symbolURL}"\x3e\r\n              \x3c/div\x3e\r\n              \x3cdiv class\x3d"moreOptionsRow"\x3e\r\n                \x3clabel\x3e${nls.label}\x3c/label\x3e\r\n                \x3cinput data-dojo-attach-point\x3d"addMarker_label" data-dojo-type\x3d"dijit.form.TextBox" placeholder\x3d"${nls.addMarker_label}"\x3e\r\n              \x3c/div\x3e\r\n              \x3cdiv class\x3d"moreOptionsRow displaynone"\x3e\r\n                \x3clabel\x3e${nls.zoomLevel}\x3c/label\x3e\r\n                \x3cdiv class\x3d"table-for-select"\x3e\r\n                  \x3cselect data-dojo-attach-point\x3d"addMarker_level" name\x3d"addMarker_level" data-dojo-type\x3d"dijit/form/Select"\x3e\x3c/select\x3e\r\n                \x3c/div\x3e\r\n              \x3c/div\x3e\r\n            \x3c/div\x3e\r\n          \x3c/div\x3e\r\n        \x3c/div\x3e\r\n      \x3c/fieldset\x3e\r\n    \x3c/form\x3e\r\n\r\n    \x3cfieldset\x3e\r\n      \x3cdiv class\x3d"optionsRow shareClearFix"\x3e\r\n        \x3cinput data-id\x3d"share-options-overwirteMobileLayout" data-dojo-attach-point\x3d"overwirteMobileLayout" class\x3d"shareCheckBoxes jimu-float-leading" data-dojo-type\x3d"dijit.form.CheckBox" type\x3d"checkbox"\x3e\r\n        \x3cdiv class\x3d"labels"\x3e${nls.overwirteMobileLayout}\x3c/div\x3e\r\n        \x3cdiv class\x3d"optionsMore share-options-overwirteMobileLayout_optionsMore"\x3e\r\n          \x3cinput type\x3d"text" data-dojo-type\x3d"dijit/form/NumberTextBox" required\x3d"true"\r\n                 data-dojo-attach-point\x3d"mobileLayout" data-dojo-props\x3d\'style:{width:"100px"}, constraints:{min:300}\'/\x3e\r\n        \x3c/div\x3e\r\n      \x3c/div\x3e\r\n      \x3cdiv class\x3d"optionsRow shareClearFix"\x3e\r\n        \x3cinput data-id\x3d"share-options-language" data-dojo-attach-point\x3d"setlanguage" class\x3d"shareCheckBoxes jimu-float-leading" data-dojo-type\x3d"dijit.form.CheckBox" type\x3d"checkbox"\x3e\r\n        \x3cdiv class\x3d"labels"\x3e${nls.language}\x3c/div\x3e\r\n        \x3cdiv class\x3d"optionsMore share-options-language_optionsMore"\x3e\r\n          \x3cselect data-dojo-attach-point\x3d"setlanguage_languages" class\x3d"shareSelects" style\x3d"display:inline-block;" data-dojo-type\x3d"dijit/form/Select"\x3e\x3c/select\x3e\r\n        \x3c/div\x3e\r\n      \x3c/div\x3e\r\n      \x3cdiv class\x3d"optionsRow shareClearFix" style\x3d"display: none;"\x3e\r\n        \x3cinput data-id\x3d"share-options-auth" data-dojo-attach-point\x3d"auth" class\x3d"shareCheckBoxes jimu-float-leading" data-dojo-type\x3d"dijit.form.CheckBox" type\x3d"checkbox"\x3e\r\n        \x3cdiv class\x3d"labels"\x3e${nls.auth}\x3c/div\x3e\r\n        \x3cdiv  class\x3d"optionsMore share-options-auth_optionsMore"\x3e\r\n          \x3cinput data-dojo-attach-point\x3d"authtoken" data-dojo-type\x3d"dijit/form/ValidationTextBox" data-dojo-props\x3d\'required:true\'/\x3e\r\n        \x3c/div\x3e\r\n      \x3c/div\x3e\r\n  \r\n      \x3cdiv class\x3d"optionsRow shareClearFix"\x3e\r\n        \x3cdiv class\x3d"subTitle"\x3e${nls.linkPreview}\x3c/div\x3e\r\n        \x3cdiv data-dojo-attach-point\x3d"preview" class\x3d"preview inputsText" data-dojo-type\x3d"dijit/form/SimpleTextarea" data-dojo-props\x3d\'required:true,readOnly:true\'\x3e\x3c/div\x3e\r\n      \x3c/div\x3e\r\n    \x3c/fieldset\x3e\r\n  \x3c/div\x3e\r\n\r\n  \x3cdiv class\x3d"shareUrlsWrapper"\x3e\r\n    \x3cdiv data-dojo-attach-point\x3d"Text"\x3e\x3c/div\x3e\r\n    \x3cdiv class\x3d"linkShare" data-dojo-attach-point\x3d"LinkShareContainer"\x3e\r\n      \x3cdiv data-dojo-attach-point\x3d"LinkText" class\x3d"subTitle linkToApp"\x3e${nls.shareLinkText}\x3c/div\x3e\r\n      \x3cinput data-dojo-attach-point\x3d"_linkUrlTextBox" class\x3d"shareLinkUrl inputsText" data-dojo-type\x3d"dijit/form/TextBox" data-dojo-props\x3d\'required:true,readOnly:true\'/\x3e\r\n      \x3cdiv class\x3d"shareClearFix"\x3e\r\n        \x3cspan class\x3d"optionsText jimu-float-leading" data-dojo-attach-point\x3d"linkOptions"\x3e${nls.linkOptions}\x3c/span\x3e\r\n        \x3cdiv class\x3d"shareLinkIcons jimu-float-trailing" data-dojo-attach-point\x3d"socialNetworkLinks"\x3e\r\n            \x3ca class\x3d"socialNetworkIcons email" data-dojo-attach-point\x3d"emailShare" title\x3d"${nls.shareEmail}"\x3e\x3c/a\x3e\r\n          \x3cdiv class\x3d"socialNetworkIcons facebook" data-dojo-attach-event\x3d"click:_toFacebook" data-dojo-attach-point\x3d"FacebookShare" title\x3d"${nls.shareFacebook}"\x3e\x3c/div\x3e\r\n          \x3cdiv class\x3d"socialNetworkIcons twitter" data-dojo-attach-event\x3d"click:_toTwitter" data-dojo-attach-point\x3d"TwitterShare" title\x3d"${nls.shareTwitter}"\x3e\x3c/div\x3e\r\n          \x3cdiv class\x3d"socialNetworkIcons googlePlus" data-dojo-attach-point\x3d"googlePlusShare" title\x3d"${nls.shareGooglePlus}"\x3e\x3c/div\x3e\r\n        \x3c/div\x3e\r\n      \x3c/div\x3e\r\n    \x3c/div\x3e\r\n    \x3cdiv class\x3d"embedShare" data-dojo-attach-point\x3d"EmbedShareContainer"\x3e\r\n      \x3cdiv data-dojo-attach-point\x3d"embedText" class\x3d"subTitle"\x3e${nls.embed}\x3c/div\x3e\r\n      \x3cinput data-dojo-attach-point\x3d"_embedCodeTextArea" class\x3d"shareEmbedCode inputsText" data-dojo-type\x3d"dijit/form/SimpleTextarea" data-dojo-props\x3d\'required:true,readOnly:true\'/\x3e\r\n      \x3cdiv class\x3d"moreOptions" data-dojo-attach-event\x3d"click:_moreOptionsExpandCollapse"\x3e\r\n        \x3cdiv class\x3d"moreOptionsIcon" data-dojo-attach-point\x3d"MoreOptionsIcon"\x3e\x3c/div\x3e\r\n        \x3cdiv class\x3d"optionsText"\x3e${nls.more}\x3c/div\x3e\r\n      \x3c/div\x3e\r\n      \x3cdiv data-dojo-attach-point\x3d"MoreOptionsContainer" class\x3d"moreOptionsContainer inputsText displaynone"\x3e\r\n        \x3cdiv class\x3d"sizeSelect" data-dojo-attach-point\x3d"SizeSelect"\x3e\x3c/div\x3e\r\n        \x3cdiv class\x3d"customSize disable" data-dojo-attach-point\x3d"CustomSizeContainer"\x3e\r\n          \x3cdiv class\x3d"timesConnector"\x3eX\x3c/div\x3e\r\n        \x3c/div\x3e\r\n      \x3c/div\x3e\r\n    \x3c/div\x3e\r\n\r\n    \x3cdiv class\x3d"shareTips" data-dojo-attach-point\x3d"shareTips"\x3e\r\n      \x3c!--\x3cdiv class\x3d"infoIcon"\x3e\x3c/div\x3e--\x3e\r\n      \x3cdiv data-dojo-attach-point\x3d"shareTipsText" class\x3d"shareTipsText"\x3e${nls.shareToWebTips}\x3c/div\x3e\r\n    \x3c/div\x3e\r\n  \x3c/div\x3e\r\n\x3c/div\x3e\r\n',
"url:widgets/Share/Widget.html":'\x3cdiv style\x3d"width:100%;min-width:230px;min-height:245px;"\x3e\r\n\t\x3cdiv data-dojo-attach-point\x3d"container"\x3e\x3c/div\x3e\r\n\x3c/div\x3e',"*now":function(l){l(['dojo/i18n!*preload*widgets/Share/nls/Widget*["ar","bs","ca","cs","da","de","en","el","es","et","fi","fr","he","hr","hu","id","it","ja","ko","lt","lv","nb","nl","pl","pt-br","pt-pt","ro","ru","sl","sr","sv","th","tr","zh-cn","vi","uk","zh-hk","zh-tw","ROOT"]'])}}});
define("dojo/_base/declare dojo/_base/lang jimu/BaseWidget jimu/portalUrlUtils jimu/shareUtils jimu/dijit/ShareLink jimu/utils jimu/dijit/LoadingShelter jimu/dijit/Message".split(" "),function(l,r,m,k,e,b,g,h,c){return l([m],{name:"Share",baseClass:"jimu-widget-share share-container",_isShowFindLocation:!0,onOpen:function(){this.widgetManager.activateWidget(this);e.getItemShareInfo(this.appConfig.portalUrl).then(r.hitch(this,function(a){a=e.isSharedToPublic(a);if(this.shareLink&&this.shareLink.onShareToPublicChanged&&
!0===this.shareLink.HAS_INIT_URL)this.shareLink.onShareToPublicChanged(a)}))},onClose:function(){if(this.shareLink)this.shareLink.onCloseContainer()},onDeActive:function(){},_disableWebMapPopup:function(){},_enableWebMapPopup:function(){},postCreate:function(){this.inherited(arguments);this.shelter=new h({hidden:!0});this.shelter.placeAt(this.domNode);this.shelter.startup()},startup:function(){this.inherited(arguments);this.shelter.show();this._isShowFindLocation=this._findSearchWidget(this.appConfig);
e.getItemShareInfo(this.appConfig.portalUrl).then(r.hitch(this,function(a){this.shareLink=new b({portalUrl:this.appConfig.portalUrl,appTitle:this.appConfig.title,isOnline:k.isOnline(g.getAppHref()),isShowSocialMediaLinks:!0,isSharedToPublic:e.isSharedToPublic(a),isShowBackBtn:!1,config:this.config,isShowFindLocation:this._isShowFindLocation});this.shareLink.placeAt(this.container)}),r.hitch(this,function(a){new c({message:a.message})})).always(r.hitch(this,function(){this.shelter.hide()}))},onAppConfigChanged:function(a){this._isShowFindLocation=
this._findSearchWidget(a);this.shareLink&&this.shareLink.updateShareLinkOptionsUI&&this.shareLink.updateShareLinkOptionsUI({isShowFindLocation:this._isShowFindLocation})},_findSearchWidget:function(a){a=a.getConfigElementsByName("Search");return 0<a.length&&a[0].visible}})});